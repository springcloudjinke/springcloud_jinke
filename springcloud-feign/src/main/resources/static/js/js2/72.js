window.__loadJs&&window.__loadJs('/agency/publish/mod.main.a3b1be6f.js?max_age=3153600',1);
/*!/edu_modules/edu-dialog/modal.tpl_tpl*/
;define("/edu_modules/edu-dialog/modal.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];if(_$out_.push('<!--弹出框模版 S--><div class="tips'),dialog.globalClass&&_$out_.push(" ",dialog.globalClass,""),_$out_.push('"> '),dialog.nohead||_$out_.push(' <div class="tips-hd">',dialog.title,"</div> "),_$out_.push(" "),dialog.body)_$out_.push(" ",dialog.body," ");else{if(_$out_.push(' <div class="tips-bd"> '),dialog.type){var ico_type={err:"alert",warn:"info",succ:"success",help:"question"}[dialog.type]||"info";_$out_.push(' <i class="icon-msg-large icon-font i-',ico_type,'"></i> <p class="msg">',dialog.content,"</p> ")}else _$out_.push(" ",dialog.content," ");_$out_.push(' </div> <div class="tips-tool"> '),dialog.confirm?(_$out_.push(' <a auto-test="confirm-',id,'" href="#" title="',dialog.submit||"确定",'" class="btn-7 modal-accept'),dialog.extraClass&&_$out_.push(" ",dialog.extraClass,""),dialog.isDisabled&&_$out_.push(" btn-disabled"),_$out_.push('">',dialog.submit||"确定",'</a> <a auto-test="cancel-',id,'" href="#" title="取消" class="btn-8 modal-cancel">',dialog.cancel||"取消","</a> ")):_$out_.push(' <a auto-test="confirm-',id,'" href="#" title="',dialog.confirmText||"确定",'" class="btn-7 modal-accept">',dialog.confirmText||"确定","</a> "),_$out_.push(" </div> ")}return _$out_.push(' <a auto-test="close-',id,'" href="#" class="modal-close btn-close" title="关闭">×</a></div><!--弹出框模版 E-->'),_$out_.join("")}}});
/*!edu_modules/edu-dialog/edu-dialog*/
;define("edu_modules/edu-dialog/edu-dialog",function(t,e,o){var s=t("jquery"),l={};l.modal=t("/edu_modules/edu-dialog/modal.tpl_tpl");var n="undefined"==typeof document.body.style.maxHeight;s.Dialog={show:function(t){s(".modal-bg").length||s(document.body).append('<div class="modal-bg hide"></div>'),s(".modal-bg").show(),t=t||{};var e=s(s.trim(l.modal({dialog:t,id:("dialog_"+ +new Date+Math.random()).replace(/\W/g,"")}))).insertAfter(".modal-bg");s(".tips").css("marginTop","-"+parseInt(s(".tips").css("height"),10)/2+"px"),n&&(s(".modal-bg").css("height",s(document).height()),s(window).scrollTop(0)),s("body").css({"overflow-y":""});var o=s(".tips .modal-accept");return t.notAutoFocus&&o.focus(),t.onAccept&&o.on("click",function(e){e.preventDefault(),t.onAccept()||(s.Dialog.remove(),s.Dialog.reshow())}),t.onCancel&&s(".tips .modal-cancel").on("click",t.onCancel),t.onClose&&s(".tips .modal-close").on("click",t.onClose),e},remove:function(){s(".tips").remove(),s(".modal-bg").hide(),s(".js-modal-bg, .js-modal").remove()},alert:function(t,e){return this.remove(),1==arguments.length&&"object"==typeof t&&(e=t,t=e.content),e=e||{},e.content=t,e.type=e.type||"warn",e.title=e.title||"提示",e.globalClass=e.globalClass?e.globalClass+" alert-tips":"alert-tips",e.onAccept||(e.onAccept=function(){return!1}),this.show(e)},confirm:function(t,e){return e.keep?this.$tips=s(".tips").removeClass("tips").hide():this.remove(),e=e||{},e.content=t,e.confirm=void 0!==e.confirm?e.confirm:!0,e.title=e.title||"提示",e.globalClass=e.globalClass?e.globalClass+" alert-tips":"alert-tips",this.show(e)},showConfirm:function(t){return this.remove(),t=t||{},t.confirm=!0,t.title=t.title||"提示",t.content=t.content||"呵呵...",t.globalClass=t.globalClass?t.globalClass+" alert-tips":"alert-tips",this.show(t)},showWarn:function(t,e){return e=e||{},e.title="警告",e.type="warn",e.content=t,e.onAccept||(e.onAccept=function(){return!1}),this.show(e)},showSuccess:function(t,e){return e=e||{},e.title="成功提示",e.type="succ",e.content=t,e.globalClass=e.globalClass?e.globalClass+" alert-tips":"alert-tips",e.onAccept||(e.onAccept=function(){return!1}),this.show(e)},showError:function(t,e){return e=e||{},e.title="错误提示",e.type="err",e.content=t,e.globalClass=e.globalClass?e.globalClass+" alert-tips":"alert-tips",e.onAccept||(e.onAccept=function(){return!1}),this.show(e)},showRetry:function(t){s(".retry-dialog").remove(),s(".tips").hide();var e=this.show({title:"错误提示",submit:"重试",isDisabled:!1,retry:!0,globalClass:"retry-dialog",extraClass:"btn-retry",content:t||"呵呵..."}),o=this;return s(".btn-retry",".tips").on("click",function(t){t.preventDefault(),o.removeRetry()}),e},removeRetry:function(){return s(".retry-dialog").remove(),s(".tips").length?s(".tips").show():void s(".modal-bg").hide()},reshow:function(){this.$tips&&(this.$tips.addClass("tips").show(),s(".modal-bg").length||s(document.body).append('<div class="modal-bg hide"></div>'),s(".modal-bg").show(),this.$tips=null)},updatePosition:function(){var t=s(".tips");t.css("marginTop","-"+parseInt(t.css("height"),10)/2+"px")}},s(document).delegate(".tips .modal-cancel, .tips .modal-close","click",function(t){t.preventDefault(),s.Dialog.remove(),s.Dialog.reshow()}),o.exports=s});
/*!edu_modules/util.cookie/util.cookie*/
;define("edu_modules/util.cookie/util.cookie",function(n,e,i){function o(n){var e=document.cookie.match(new RegExp("(^| )"+n+"=([^;]*)(;|$)"));return e?decodeURIComponent(e[2]):""}var u=n("jquery"),e={get:o,set:function(n,e,i,o,u){var t=new Date;t.setTime(t.getTime()+(u?36e5*u:2592e6)),document.cookie=n+"="+e+"; expires="+t.toGMTString()+"; path="+(o?o:"/")+"; "+(i?"domain="+i+";":"")},setSession:function(n,e,i,o){document.cookie=n+"="+e+"; path="+(o?o:"/")+"; "+(i?"domain="+i+";":"")},del:function(n,e,i){document.cookie=n+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; path="+(i?i:"/")+"; "+(e?"domain="+e+";":"")},clear:function(){var n=document.cookie.match(new RegExp("([^ ;][^;]*)(?=(=[^;]*)(;|$))","gi"));for(var e in n)document.cookie=n[e]+"=;expires=Mon, 26 Jul 1997 05:00:00 GMT; path=/; "},uin:function(){var n;return 2==o("uid_type")?o("uid_uin")||null:(n=o("p_luin")||o("p_uin")||o("uin")||o("pt2gguin")||o("adid"),n=n?parseInt(n.substring(1,n.length),10):null,n=n||parseInt(o("uin_cookie"),10)||null)},realUin:function(){var n;return 2==o("uid_type")?o("uid_uin")||null:(n=o("p_luin")||o("p_uin")||o("uin"),n=n?parseInt(n.substring(1,n.length),10):null,n=n||parseInt(o("uin_cookie"),10)||null)}};u.cookie=e,u.reset_own_cookie=function(){u.cookie=e},i.exports=e});
/*!edu_modules/jquery.lazyload/jquery.lazyload*/
;define("edu_modules/jquery.lazyload/jquery.lazyload",function(t){var e=t("jquery"),a=(t("edu_modules/util.cookie/util.cookie"),"//huatuo.weiyun.com/report.cgi?"),n=function(t,e){var a=e.data("data-first-date"),n=e[0].src;if(n.match(/\/qqcourse_logo(?:_rn)?\//)&&a){a=new Date-a,0>a&&(a=0),a+=1;var o,i=(new Image,e.data("data-isSupportedWebP")),c=["flag1=1565&flag2=1&flag3=6"];if(window.localStorage&&window.JSON){var s;if(n&&(s=n.match(/(?:\/)([^\/]+)\/*(?:\d+)/))&&(s=s[1])){o=0;var u=localStorage.getItem("EDU_ISLOAD_IMG");u?(u=JSON.parse(u),u[s]&&(o=1)):u={},u[s]=1;try{localStorage.setItem("EDU_ISLOAD_IMG",JSON.stringify(u))}catch(t){Badjs("写localStorage异常",location.href,0,507221,2)}}}i?(c.push("2="+a),isNaN(o)||(c.push(o?"4="+a:"5="+a),c.push("6="+a))):(c.push("1="+a),isNaN(o)||(c.push(o?"7="+a:"8="+a),c.push("9="+a))),window.performance&&window.performance.getEntriesByName&&r(n,i),c.push("3="+a)}},o={redirectStart:3,redirectEnd:4,fetchStart:5,domainLookupStart:6,domainLookupEnd:7,connectStart:8,connectEnd:9,requestStart:10,responseStart:11,responseEnd:12},r=function(t,e){if(t&&window.performance&&performance.getEntriesByName){var n=window.performance.getEntriesByName(t);if(n&&n.length){var r=n[0],i=r.startTime;if(i){var c=[];for(var s in o)if(r[s]){var u=r[s]-i;if("redirectStart"!=s&&"redirectEnd"!=s&&0>u)continue;c.push(o[s]+"="+Math.floor(Math.abs(u)))}c.push("20="+(Math.floor(Math.abs(r.duration))||0)),c.push("21="+Math.floor(i));var t=a+encodeURIComponent("flag1=1565&flag2=1&flag3="+(e?"7":"8")+"&"+c.join("&"))}}}};e.fn.loadWebP=function(){var t,a=e.cookie.get("iswebp")||"",o=[],r=!1,i=function(){for(var e=0,a=o.length;a>e;e++)o[e](t);o=[]},c=function(n){if(a&&(t="1"===a),void 0===t){if(o.push(n),!r){r=!0;var c={basic:"data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAACyAgCdASoCAAEALmk0mk0iIiIiIgBoSygABc6zbAAA/v56QAAAAA=="},s=new Image;s.onload=function(){t=2===this.width&&1===this.height,r=!1,e.cookie.set("iswebp",+t),i()},s.onerror=function(){t=!1,r=!1,e.cookie.set("iswebp",+t),i()},s.src=c.basic}}else n(t)},s=Object.prototype.toString;return function(t,a){switch(s.call(t)){case"[object Object]":t=t||{},a=a||t.callback||function(){};break;case"[object Function]":a=t||function(){},t={};break;default:return this}return this.each(function(o,r){var i=t.srcSign||"lazy-src",s=e(r),u=s.attr(i);if(u){var d=t.desSign||"lazy-src";c(function(t){if(t&&(u+=(-1!=u.indexOf("?")?"&":"?")+"tp=webp",s.data("data-isSupportedWebP",!0)),"src"===d){var e=+new Date;s.data("data-first-date",e),s[0].onload=function(t){n(t,s)}}s.attr(d,u),a(t)})}})}}(),e.fn.lazyload=function(t){return this.each(function(){t=t||{};var a={},o=e.extend({},a,t),r=e(this),i=this,c=o.srcSign||"lazy-src",s=o.errCallBack||function(){},u=o.container||e(window),d=function(t,e){n(t,e)},f=function(t,e,a,n){if(!e[0].src||!(e[0].src.indexOf("img-err.png")>0||e[0].src.indexOf("img-err2.png")>0)){var o=e.width(),r=e.height();e[0].src=o/r==1?"//9.url.cn/edu/edu-ui/img/nohash/img-err.png":"//9.url.cn/edu/edu-ui/img/nohash/img-err2.png",a(e,n),Badjs("lazyload拉取图片失败上报"+n,location.href,0,414342,2)}},l=function(t){{var e=t.width(),a=t.height();t.offset().top,t.offset().left}t[0].src=e/a==1?"//9.url.cn/edu/edu-ui/img/nohash/img-loading.png":"//9.url.cn/edu/edu-ui/img/nohash/img-loading2.png"},h=function(t,e,a){t.attr("src")||(l(t),t.loadWebP(o,function(){var n=t.attr(e),o=+new Date;t.data("data-first-date",o),t[0].onerror=function(e){f(e,t,a,n)},t[0].onload=function(e){d(e,t)},t[0].src=n}))};if(o.cache=[],"IMG"==i.tagName){var g={obj:r,tag:"img",url:r.attr(c)};o.cache.push(g)}else{var p=r.find("img");p.each(function(t){var a=this.nodeName.toLowerCase(),n=e(this).attr(c),r={obj:p.eq(t),tag:a,url:n};o.cache.push(r)})}var m=function(){var t,a=u.height();t=e(window).get(0)===window?e(window).scrollTop():u.offset().top,e.each(o.cache,function(e,n){var o,r,i=n.obj,u=n.tag,d=n.url;i&&(o=i.offset().top-t,postb=o+i.height(),(o>=0&&a>o||r>0&&a>=r)&&(d&&"img"===u&&h(i,c,s),n.obj=null))})};m(),u.bind("scroll",m),u.bind("resize",m)})}});
/*!@tencent/im-jquery.slider/jquery.slider*/
;define("@tencent/im-jquery.slider/jquery.slider",function(e){var i=e("jquery");i.fn.slider=function(e){return this.each(function(){function n(){h.unbind("click").bind("click",function(){var e=c;c-=1,-1==c&&(c=b?u-1:0),b||s(),t(e,c,"prev")}),v.unbind("click").bind("click",function(){d()})}function t(e,i,t){var s=(a.height(),a.width());if(o.removeClass("current").eq(i).addClass("current"),y.removeClass("current").eq(i).addClass("current"),"left"==r.handle){o.css("float","left");var d,l,c,m;0==i&&"next"==t?(m=a.find("li").eq(0).clone().addClass("li-temp").appendTo(f),l=(u+1)*s,d=-s*u,c=function(){f.css({left:0}),a.find(".li-temp").remove(),n()}):i==u-1&&"prev"==t?(m=a.find("li").eq(u-1).clone().addClass("li-temp").insertBefore(a.find("li").eq(0)),f.css({left:-s}),l=(u+1)*s,d=0,c=function(){f.css({left:-s*i}),a.find(".li-temp").remove(),n()}):(m=a.find("li").eq(i),l=u*s,f.css("width",l),d=-s*i,c=function(){n()}),h.unbind("click"),v.unbind("click"),"fade"==r.type?(f.css("width",l).filter(":not(':animated')").css({left:d}),m.css("opacity",0).animate({opacity:1},r.speed,c)):f.css("width",l).filter(":not(':animated')").animate({left:d},r.speed,c),q(i,g),g=i}else"right"==r.handle}function s(){1>c?h.addClass("dis-btn"):h.removeClass("dis-btn"),c>=u-1?v.addClass("dis-btn"):v.removeClass("dis-btn")}function d(){var e=c;(b||c!=u-1)&&(c=(c+1)%u,b||s(),t(e,c,"next"))}for(var l={type:"slide",handle:"left",speed:600,sliderNum:1,delayTime:5e3},r=i.extend({},l,e),a=i(this),c=0,f=r.sliderbox,o=f.find("li"),u=(i(".sliderbox li:eq(0)").outerWidth(),o.length,o.length/r.sliderNum),u=Math.ceil(u),h=r.pb,v=r.nb,m="",p=r.slidernav||i(".slidernav",a),b=r.isAuto||!1,q=r.slideCb||function(){},C=0;u>C;C++)m+='<li><a href="javascript:void(0);">'+(C+1)+"</a></li>";r.sliderNum>1&&o.css("float","left");var y=p.find("li");y.eq(0).addClass("current"),o.eq(0).addClass("current");var g=0,k="fade"==r.type?"mouseenter":"click";if(y.bind(k,function(){c=i(this).index();var e=y.index(i(".slidernav .current:eq(0)"));c!=e&&t(e,c)}).eq(0).trigger(k),1>=u?(h.hide(),v.hide()):n(),b){var x;a.hover(function(){clearTimeout(x),u>0&&(h.show(),v.show())},function(){u>0&&(h.hide(),v.hide());var e=function(){x=setTimeout(function(){d(),e()},r.delayTime)};e()}).trigger("mouseleave")}})}});
/*!@tencent/im-qrcode/qrcode*/
;define("@tencent/im-qrcode/qrcode",function(){var t;return function(){function e(t){this.mode=l.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;r>e;e++){var o=[],n=this.data.charCodeAt(e);n>65536?(o[0]=240|(1835008&n)>>>18,o[1]=128|(258048&n)>>>12,o[2]=128|(4032&n)>>>6,o[3]=128|63&n):n>2048?(o[0]=224|(61440&n)>>>12,o[1]=128|(4032&n)>>>6,o[2]=128|63&n):n>128?(o[0]=192|(1984&n)>>>6,o[1]=128|63&n):o[0]=n,this.parsedData.push(o)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function r(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function o(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var o=0;o<t.length-r;o++)this.num[o]=t[o+r]}function n(t,e){this.totalCount=t,this.dataCount=e}function i(){this.buffer=[],this.length=0}function a(){return"undefined"!=typeof CanvasRenderingContext2D}function s(){var t=!1,e=navigator.userAgent;return/android/i.test(e)&&(t=!0,aMat=e.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(t=parseFloat(aMat[1]))),t}function h(t,e){for(var r=1,o=u(t),n=0,i=m.length;i>=n;n++){var a=0;switch(e){case g.L:a=m[n][0];break;case g.M:a=m[n][1];break;case g.Q:a=m[n][2];break;case g.H:a=m[n][3]}if(a>=o)break;r++}if(r>m.length)throw new Error("Too long data");return r}function u(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}e.prototype={getLength:function(){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;r>e;e++)t.put(this.parsedData[e],8)}},r.prototype={addData:function(t){var r=new e(t);this.dataList.push(r),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[o][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var r=-1;7>=r;r++)if(!(-1>=t+r||this.moduleCount<=t+r))for(var o=-1;7>=o;o++)-1>=e+o||this.moduleCount<=e+o||(this.modules[t+r][e+o]=r>=0&&6>=r&&(0==o||6==o)||o>=0&&6>=o&&(0==r||6==r)||r>=2&&4>=r&&o>=2&&4>=o?!0:!1)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;8>r;r++){this.makeImpl(!0,r);var o=d.getLostPoint(this);(0==r||t>o)&&(t=o,e=r)}return e},createMovieClip:function(t,e,r){var o=t.createEmptyMovieClip(e,r),n=1;this.make();for(var i=0;i<this.modules.length;i++)for(var a=i*n,s=0;s<this.modules[i].length;s++){var h=s*n,u=this.modules[i][s];u&&(o.beginFill(0,100),o.moveTo(h,a),o.lineTo(h+n,a),o.lineTo(h+n,a+n),o.lineTo(h,a+n),o.endFill())}return o},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=d.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var o=t[e],n=t[r];if(null==this.modules[o][n])for(var i=-2;2>=i;i++)for(var a=-2;2>=a;a++)this.modules[o+i][n+a]=-2==i||2==i||-2==a||2==a||0==i&&0==a?!0:!1}},setupTypeNumber:function(t){for(var e=d.getBCHTypeNumber(this.typeNumber),r=0;18>r;r++){var o=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=o}for(var r=0;18>r;r++){var o=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=o}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,o=d.getBCHTypeInfo(r),n=0;15>n;n++){var i=!t&&1==(o>>n&1);6>n?this.modules[n][8]=i:8>n?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(var n=0;15>n;n++){var i=!t&&1==(o>>n&1);8>n?this.modules[8][this.moduleCount-n-1]=i:9>n?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,o=this.moduleCount-1,n=7,i=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[o][a-s]){var h=!1;i<t.length&&(h=1==(t[i]>>>n&1));var u=d.getMask(e,o,a-s);u&&(h=!h),this.modules[o][a-s]=h,n--,-1==n&&(i++,n=7)}if(o+=r,0>o||this.moduleCount<=o){o-=r,r=-r;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(t,e,o){for(var a=n.getRSBlocks(t,e),s=new i,h=0;h<o.length;h++){var u=o[h];s.put(u.mode,4),s.put(u.getLength(),d.getLengthInBits(u.mode,t)),u.write(s)}for(var l=0,h=0;h<a.length;h++)l+=a[h].dataCount;if(s.getLengthInBits()>8*l)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*l+")");for(s.getLengthInBits()+4<=8*l&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;;){if(s.getLengthInBits()>=8*l)break;if(s.put(r.PAD0,8),s.getLengthInBits()>=8*l)break;s.put(r.PAD1,8)}return r.createBytes(s,a)},r.createBytes=function(t,e){for(var r=0,n=0,i=0,a=new Array(e.length),s=new Array(e.length),h=0;h<e.length;h++){var u=e[h].dataCount,l=e[h].totalCount-u;n=Math.max(n,u),i=Math.max(i,l),a[h]=new Array(u);for(var g=0;g<a[h].length;g++)a[h][g]=255&t.buffer[g+r];r+=u;var f=d.getErrorCorrectPolynomial(l),c=new o(a[h],f.getLength()-1),p=c.mod(f);s[h]=new Array(f.getLength()-1);for(var g=0;g<s[h].length;g++){var m=g+p.getLength()-s[h].length;s[h][g]=m>=0?p.get(m):0}}for(var v=0,g=0;g<e.length;g++)v+=e[g].totalCount;for(var _=new Array(v),C=0,g=0;n>g;g++)for(var h=0;h<e.length;h++)g<a[h].length&&(_[C++]=a[h][g]);for(var g=0;i>g;g++)for(var h=0;h<e.length;h++)g<s[h].length&&(_[C++]=s[h][g]);return _};for(var l={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},g={L:1,M:0,Q:3,H:2},f={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;d.getBCHDigit(e)-d.getBCHDigit(d.G15)>=0;)e^=d.G15<<d.getBCHDigit(e)-d.getBCHDigit(d.G15);return(t<<10|e)^d.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;d.getBCHDigit(e)-d.getBCHDigit(d.G18)>=0;)e^=d.G18<<d.getBCHDigit(e)-d.getBCHDigit(d.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return d.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case f.PATTERN000:return(e+r)%2==0;case f.PATTERN001:return e%2==0;case f.PATTERN010:return r%3==0;case f.PATTERN011:return(e+r)%3==0;case f.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case f.PATTERN101:return e*r%2+e*r%3==0;case f.PATTERN110:return(e*r%2+e*r%3)%2==0;case f.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new o([1],0),r=0;t>r;r++)e=e.multiply(new o([1,c.gexp(r)],0));return e},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case l.MODE_NUMBER:return 10;case l.MODE_ALPHA_NUM:return 9;case l.MODE_8BIT_BYTE:return 8;case l.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>e)switch(t){case l.MODE_NUMBER:return 12;case l.MODE_ALPHA_NUM:return 11;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>e))throw new Error("type:"+e);switch(t){case l.MODE_NUMBER:return 14;case l.MODE_ALPHA_NUM:return 13;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,o=0;e>o;o++)for(var n=0;e>n;n++){for(var i=0,a=t.isDark(o,n),s=-1;1>=s;s++)if(!(0>o+s||o+s>=e))for(var h=-1;1>=h;h++)0>n+h||n+h>=e||(0!=s||0!=h)&&a==t.isDark(o+s,n+h)&&i++;i>5&&(r+=3+i-5)}for(var o=0;e-1>o;o++)for(var n=0;e-1>n;n++){var u=0;t.isDark(o,n)&&u++,t.isDark(o+1,n)&&u++,t.isDark(o,n+1)&&u++,t.isDark(o+1,n+1)&&u++,(0==u||4==u)&&(r+=3)}for(var o=0;e>o;o++)for(var n=0;e-6>n;n++)t.isDark(o,n)&&!t.isDark(o,n+1)&&t.isDark(o,n+2)&&t.isDark(o,n+3)&&t.isDark(o,n+4)&&!t.isDark(o,n+5)&&t.isDark(o,n+6)&&(r+=40);for(var n=0;e>n;n++)for(var o=0;e-6>o;o++)t.isDark(o,n)&&!t.isDark(o+1,n)&&t.isDark(o+2,n)&&t.isDark(o+3,n)&&t.isDark(o+4,n)&&!t.isDark(o+5,n)&&t.isDark(o+6,n)&&(r+=40);for(var l=0,n=0;e>n;n++)for(var o=0;e>o;o++)t.isDark(o,n)&&l++;var g=Math.abs(100*l/e/e-50)/5;return r+=10*g}},c={glog:function(t){if(1>t)throw new Error("glog("+t+")");return c.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return c.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},p=0;8>p;p++)c.EXP_TABLE[p]=1<<p;for(var p=8;256>p;p++)c.EXP_TABLE[p]=c.EXP_TABLE[p-4]^c.EXP_TABLE[p-5]^c.EXP_TABLE[p-6]^c.EXP_TABLE[p-8];for(var p=0;255>p;p++)c.LOG_TABLE[c.EXP_TABLE[p]]=p;o.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<t.getLength();n++)e[r+n]^=c.gexp(c.glog(this.get(r))+c.glog(t.get(n)));return new o(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=c.glog(this.get(0))-c.glog(t.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<t.getLength();n++)r[n]^=c.gexp(c.glog(t.get(n))+e);return new o(r,0).mod(t)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(t,e){var r=n.getRsBlockTable(t,e);if(void 0==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var o=r.length/3,i=[],a=0;o>a;a++)for(var s=r[3*a+0],h=r[3*a+1],u=r[3*a+2],l=0;s>l;l++)i.push(new n(h,u));return i},n.getRsBlockTable=function(t,e){switch(e){case g.L:return n.RS_BLOCK_TABLE[4*(t-1)+0];case g.M:return n.RS_BLOCK_TABLE[4*(t-1)+1];case g.Q:return n.RS_BLOCK_TABLE[4*(t-1)+2];case g.H:return n.RS_BLOCK_TABLE[4*(t-1)+3];default:return void 0}},i.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;e>r;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],v=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){function e(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg",t);for(var o in e)e.hasOwnProperty(o)&&r.setAttribute(o,e[o]);return r}{var r=this._htOption,o=this._el,n=t.getModuleCount();Math.floor(r.width/n),Math.floor(r.height/n)}this.clear();var i=e("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:r.colorLight});i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.appendChild(i),i.appendChild(e("rect",{fill:r.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;n>a;a++)for(var s=0;n>s;s++)if(t.isDark(a,s)){var h=e("use",{x:String(a),y:String(s)});h.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),i.appendChild(h)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),_="svg"===document.documentElement.tagName.toLowerCase(),C=_?v:a()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function e(t,e){var r=this;if(r._fFail=e,r._fSuccess=t,null===r._bSupportDataURI){var o=document.createElement("img"),n=function(){r._bSupportDataURI=!1,r._fFail&&_fFail.call(r)},i=function(){r._bSupportDataURI=!0,r._fSuccess&&r._fSuccess.call(r)};return o.onabort=n,o.onerror=n,o.onload=i,void(o.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}r._bSupportDataURI===!0&&r._fSuccess?r._fSuccess.call(r):r._bSupportDataURI===!1&&r._fFail&&r._fFail.call(r)}if(this._android&&this._android<=2.1){var r=1/window.devicePixelRatio,o=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,e,n,i,a,s,h,u){if("nodeName"in t&&/img/i.test(t.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*r;else"undefined"==typeof u&&(arguments[1]*=r,arguments[2]*=r,arguments[3]*=r,arguments[4]*=r);o.apply(this,arguments)}}var n=function(t,e){this._bIsPainted=!1,this._android=s(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return n.prototype.draw=function(t){var e=this._elImage,r=this._oContext,o=this._htOption,n=t.getModuleCount(),i=o.width/n,a=o.height/n,s=Math.round(i),h=Math.round(a);e.style.display="none",this.clear();for(var u=0;n>u;u++)for(var l=0;n>l;l++){var g=t.isDark(u,l),f=l*i,d=u*a;r.strokeStyle=g?o.colorDark:o.colorLight,r.lineWidth=1,r.fillStyle=g?o.colorDark:o.colorLight,r.fillRect(f,d,i,a),r.strokeRect(Math.floor(f)+.5,Math.floor(d)+.5,s,h),r.strokeRect(Math.ceil(f)-.5,Math.ceil(d)-.5,s,h)}this._bIsPainted=!0},n.prototype.makeImage=function(){this._bIsPainted&&e.call(this,t)},n.prototype.isPainted=function(){return this._bIsPainted},n.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},n.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},n}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,r=this._el,o=t.getModuleCount(),n=Math.floor(e.width/o),i=Math.floor(e.height/o),a=['<table style="border:0;border-collapse:collapse;">'],s=0;o>s;s++){a.push("<tr>");for(var h=0;o>h;h++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+n+"px;height:"+i+"px;background-color:"+(t.isDark(s,h)?e.colorDark:e.colorLight)+';"></td>');a.push("</tr>")}a.push("</table>"),r.innerHTML=a.join("");var u=r.childNodes[0],l=(e.width-u.offsetWidth)/2,g=(e.height-u.offsetHeight)/2;l>0&&g>0&&(u.style.margin=g+"px "+l+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();t=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:g.H},"string"==typeof e&&(e={text:e}),e)for(var r in e)this._htOption[r]=e[r];"string"==typeof t&&(t=document.getElementById(t)),this._android=s(),this._el=t,this._oQRCode=null,this._oDrawing=new C(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},t.prototype.makeCode=function(t){this._oQRCode=new r(h(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},t.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},t.prototype.clear=function(){this._oDrawing.clear()},t.CorrectLevel=g}(),t});
/*!@tencent/im-jquery.share/jquery.share*/
;define("@tencent/im-jquery.share/jquery.share",function(e){var i=e("jquery"),t=e("@tencent/im-qrcode/qrcode");i.fn.share=function(e){return this.each(function(){function a(e){if("weixin"===e)r();else{var i=n[e].api,t=[];for(var a in n[e].paramName){var c=n[e].paramName[a];c&&t.push(c+"="+encodeURIComponent(d[a]))}i+=t.join("&"),window.open(i)}}function r(){var e='<div class="mask"></div><div class="qrcode-container"><div class="qrcode-top"></div><div class="qrcode-center"><div class="qc-center"><div id="rqcode"></div><i class="icon-font i-logo"></i></div><div class="qc-bottom">打开微信，通过点击底部“发现”按钮，“扫一扫”二维码后，点击弹出页面右上角的分享按钮，就可以分享给朋友们啦！</div></div><div class="qrcode-bottom"></div></div>',i=document.createElement("div");i.id="qrcodeWrap",i.innerHTML=e,document.body.appendChild(i);var a=window.location.href,r=function(){new t("rqcode",{text:a+(~a.indexOf("?")?"&":"?")+"from=share_wexin_code_scan",width:190,height:190,colorDark:"#000000",colorLight:"#ffffff",correctLevel:t.CorrectLevel.H})};i.onclick=function(){document.body.removeChild(this)},r()}for(var c={},n={qzone:{api:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?",paramName:{url:"url",title:"title",content:"desc",pic:"pics",summary:"summary",appkey:""}},qq:{api:"http://connect.qq.com/widget/shareqq/index.html?",paramName:{url:"url",title:"title",content:"desc",pic:"pics",summary:"summary",appkey:""}},qqWeibo:{api:"http://share.v.t.qq.com/index.php?c=share&a=index",paramName:{url:"url",title:"",content:"title",pic:"pic",summary:"",appkey:"appkey"}},sinaWeibo:{api:"http://service.weibo.com/share/share.php?",paramName:{url:"url",title:"",content:"title",pic:"pic",summary:"",appkey:"appkey"}},renren:{api:"http://widget.renren.com/dialog/share?",paramName:{url:"resourceUrl",title:"title",content:"",pic:"pic",summary:"description",appkey:""}}},o=i.extend({},c,e),p=i(this),d={title:o.title,url:o.url,content:o.content,pic:o.pic,summary:o.summary,appkey:o.appkey},s=p.find("*[data-to]"),m=0,l=s.length;l>m;m++)i(s[m]).click(function(){var e=i(this).attr("data-to");a(e)})})}});
/*!@tencent/im-spinner/spinner*/
;define("@tencent/im-spinner/spinner",function(t,e,i){!function(t,o){"object"==typeof e?i.exports=o():"function"==typeof define&&define.amd?define(o):t.Spinner=o()}(this,function(){"use strict";function t(t,e){var i,o=document.createElement(t||"div");for(i in e)o[i]=e[i];return o}function e(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,o){var n=["opacity",e,~~(100*t),i,o].join("-"),r=.01+i/o*100,s=Math.max(1-(1-t)/e*(100-r),t),a=p.substring(0,p.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[n]||(u.insertRule("@"+l+"keyframes "+n+"{0%{opacity:"+s+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",u.cssRules.length),d[n]=1),n}function o(t,e){var i,o,n=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),o=0;o<c.length;o++)if(i=c[o]+e,void 0!==n[i])return i;return void 0!==n[e]?e:void 0}function n(t,e){for(var i in e)t.style[o(t,i)||i]=e[i];return t}function r(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)void 0===t[o]&&(t[o]=i[o])}return t}function s(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function l(t){return"undefined"==typeof this?new l(t):void(this.opts=r(t||{},l.defaults,h))}function f(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}u.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(t,o){function r(){return n(i("group",{coordsize:p+" "+p,coordorigin:-f+" "+-f}),{width:p,height:p})}function s(t,s,l){e(d,e(n(r(),{rotation:360/o.lines*t+"deg",left:~~s}),e(n(i("roundrect",{arcsize:o.corners}),{width:f,height:o.width,left:o.radius,top:-o.width>>1,filter:l}),i("fill",{color:a(o.color,t),opacity:o.opacity}),i("stroke",{opacity:0}))))}var l,f=o.length+o.width,p=2*f,c=2*-(o.width+o.length)+"px",d=n(r(),{position:"absolute",top:c,left:c});if(o.shadow)for(l=1;l<=o.lines;l++)s(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=o.lines;l++)s(l);return e(t,d)},l.prototype.opacity=function(t,e,i,o){var n=t.firstChild;o=o.shadow&&o.lines||0,n&&e+o<n.childNodes.length&&(n=n.childNodes[e+o],n=n&&n.firstChild,n=n&&n.firstChild,n&&(n.opacity=i))}}var p,c=["webkit","Moz","ms","O"],d={},u=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),h={lines:12,length:6,width:4,radius:10,rotate:0,corners:1,color:"#929598",direction:1,speed:1,trail:60,opacity:.25,fps:20,zIndex:999,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={},r(l.prototype,{spin:function(e){this.stop();var i,o,r=this,a=r.opts,l=r.el=n(t(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),f=a.radius+a.length+a.width;if(e&&(e.insertBefore(l,e.firstChild||null),o=s(e),i=s(l),n(l,{left:("auto"==a.left?o.x-i.x+(e.offsetWidth>>1):parseInt(a.left,10)+f)+"px",top:("auto"==a.top?o.y-i.y+(e.offsetHeight>>1):parseInt(a.top,10)+f)+"px"})),l.setAttribute("role","progressbar"),r.lines(l,r.opts),!p){var c,d=0,u=(a.lines-1)*(1-a.direction)/2,h=a.fps,m=h/a.speed,y=(1-a.opacity)/(m*a.trail/100),g=m/a.lines;!function v(){d++;for(var t=0;t<a.lines;t++)c=Math.max(1-(d+(a.lines-t)*g)%m*y,a.opacity),r.opacity(l,t*a.direction+u,c,a);r.timeout=r.el&&setTimeout(v,~~(1e3/h))}()}return r},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(o,r){function s(e,i){return n(t(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*f+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var l,f=0,c=(r.lines-1)*(1-r.direction)/2;f<r.lines;f++)l=n(t(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:p&&i(r.opacity,r.trail,c+f*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(l,n(s("#000","0 0 4px #000"),{top:"2px"})),e(o,e(l,s(a(r.color,f),"0 0 1px rgba(0,0,0,.1)")));return o},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var m=n(t("group"),{behavior:"url(#default#VML)"});return!o(m,"transform")&&m.adj?f():p=o(m,"animation"),l})});
/*!@tencent/im-jquery.spin/jquery.spin*/
;define("@tencent/im-jquery.spin/jquery.spin",function(n){var e=n("jquery"),i=n("@tencent/im-spinner/spinner");e.fn.spin=function(n,s){return this.each(function(){var t=e(this),r=t.data();r.spinner&&(r.spinner.stop(),delete r.spinner),n!==!1&&(n=e.extend({color:s||t.css("color")},e.fn.spin.presets[n]||n),r.spinner=new i(n).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}});
/*!edu_modules/tdw/tdw*/
;define("edu_modules/tdw/tdw",function(t,n,e){function r(t){var n;return i(t),n=a(t),{fields:h,datas:n}}function i(t){t&&(f.isPlainObject(t)&&(t=[t]),f.isArray(t)&&f.each(t,function(t,n){f.each(n,function(t){d[t]||(d[t]=1,h.push(t))})}))}function o(t,n){return n=n||[],n.forEach(function(n){n.forEach(function(e,r){n[r]="string"==typeof e?~w.indexOf(t[r])?e.substring(0,v):e.substring(0,b):e})}),n}function a(t){var n,e=[];return t&&(f.isPlainObject(t)&&(t=[t]),f.isArray(t))?(f.each(t,function(t,r){n=[],r=f.extend({},p,r),f.each(h,function(t,e){n.push(r[e]||"")}),e.push(n)}),e):void 0}function c(t,n){var e={};n=n||l,f.each(["table","pr_ip","pr_t"],function(t,r){e[r]=n[r]||""}),t.datas=o(t.fields,t.datas),e.fields=JSON.stringify(t.fields),e.datas=JSON.stringify(t.datas),e.retype=2,l.beforeRequest(t)!==!1&&n.url&&(f.ajax({url:n.url,data:e,dataType:"jsonp"}).done(function(n){l[0===n.ret?"success":"error"](n,t)}).fail(function(n,e,r){l.fail(t,n,e,r)}),s(t.fields,t.datas))}function u(){var t=[],n=m.read();n.length<=l.slicer?c(r(n)):(f.each(n,function(n,e){t.push(e),n>0&&n%l.slicer===l.slicer-1&&(c(r(t)),t=[])}),t.length&&c(r(t)))}function s(t,n){if(y.table)try{if(window.localStorage&&1===parseInt(window.localStorage.getItem("tdwFlag"),10))for(var e=0,r=n.length;r>e;e++){for(var i={},o=0,a=t.length;a>o;o++)""!==n[e][o]&&(i[t[o]]=n[e][o]);y.table([i])}}catch(c){}}var f=t("jquery"),l={url:"/cgi-bin/activity_platform/tdw/report",timer:300,beforeRequest:function(){},success:function(){},error:function(){},fail:function(){},slicer:8,table:"",pr_ip:"",pr_t:""},p={},d={},h=[],g=0,y=console||{},b=50,v=200,w=["url","refer"],m={pool:[],write:function(t){f.isPlainObject(t)?this.pool.push(t):f.isArray(t)&&Array.prototype.push.apply(this.pool,t)},read:function(){var t=this.pool;return this.pool=[],t}};e.exports={config:function(t,n){f.extend(p,t),f.extend(l,n),i(p)},report:function(t){m.write(t),g||(g=setTimeout(function(){u(),g=0},l.timer))},reportSync:function(t,n){n=f.extend({},l,n),c(r(t),n)},composer:r,request:c,getCommonData:function(t){return t?p[t]:p}}});
/*!edu_modules/local.data/local.data*/
;define("edu_modules/local.data/local.data",function(e,t,n){var r,a=function(){var e,t,n=document.getElementsByTagName("head")[0],r=window.location.hostname||"edu_database",a=new Date;if(n.addBehavior){try{t=new ActiveXObject("htmlfile"),t.open(),t.write('<script>document.w=window;</script><iframe src="/favicon.ico"></frame>'),t.close(),e=t.w.frames[0].document}catch(i){e=document}n=e.createElement("head"),e.appendChild(n),a.setDate(a.getDate()+30),n.addBehavior("#default#userData"),n.expires=a.toUTCString(),n.load(r);var o=n.XMLDocument.documentElement,c=o.attributes,u="prefix_____hack__",l=/^[-\d]/,s=new RegExp("^"+u),f=function(e){return l.test(e)?u+e:e},h=function(e){return e.replace(s,"")},d={length:c.length,notNativeCode:!0,getItem:function(e){return(c.getNamedItem(f(e))||{nodeValue:null}).nodeValue||o.getAttribute(f(e))},setItem:function(e,t){o.setAttribute(f(e),t),n.save(r),this.length=c.length},removeItem:function(e){o.removeAttribute(f(e)),n.save(r),this.length=c.length},clear:function(){for(;c.length;)this.removeItem(c[0].nodeName);this.length=0},key:function(e){return c[e]?h(c[e].nodeName):void 0}};return d}};try{r=window.localStorage,r||(r=a())}catch(i){r=a()}var o=function(e){var t=function(){return null};return e?{set:function(t,n){void 0!==this.get(t)&&this.remove(t);try{e.setItem(t,n)}catch(r){this.clear()}},get:function(t){var n=e.getItem(t);return null===n?void 0:n},remove:function(t){e.removeItem(t)},clear:function(){e.clear()},each:function(e){var t,n=this.obj(),r=e||function(){};for(t in n)if(r.call(this,t,this.get(t))===!1)break},obj:function(){var t,n,r={},a=0;if(e.isVirtualObject)r=e.key(-1);else for(t=e.length;t>a;a++)n=e.key(a),r[n]=this.get(n);return r},filter:function(t){var n,r,a=[],i=0;if(e.isVirtualObject)a=[];else for(n=e.length;n>i;i++)r=e.key(i),t.test(r)&&a.push({key:r,value:this.get(r)});return a}}:{set:t,get:t,remove:t,clear:t,each:t,obj:t,filter:t}}(r);n.exports=o});
/*!edu_modules/local.data/cross.local*/
;define("edu_modules/local.data/cross.local",function(e,n,i){function t(e,n){var i,t=n||{};for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function a(e){m[e.id]&&(m[e.id](e),delete m[e.id])}function r(e){var n=e.origin,i=/(\.|^)qq\.com$/;if(i.test(n)){var t;try{t=JSON.parse(e.data)}catch(r){}t&&t.namespace===f&&("iframe-ready"===t.id?(w=!0,u.initCallback()):a(t))}}function o(e,n,i,t){s++,m[s]=t;var a={namespace:f,id:s,action:e,key:n,value:i};l.contentWindow.postMessage(JSON.stringify(a),"*")}function c(e){u=t(e,u);var n=document.createElement("div");window.addEventListener?window.addEventListener("message",r,!1):window.attachEvent("onmessage",r),n.innerHTML='<iframe id="'+u.iframeId+'" src='+u.iframeUrl+' style="display: none;"></iframe>',document.body.appendChild(n),l=document.getElementById(u.iframeId)}function d(){return v&&w?!0:!1}var l,f="cross-domain-local-message",u={iframeId:"cross-domain-iframe",iframeUrl:void 0,initCallback:function(){}},s=-1,m={},v=!1,w=!0;i.exports={init:function(e){if(!e.iframeUrl)throw"必须指定iframe的url";v||(v=!0,"complete"===document.readyState?c(e):window.onload=function(){c(e)})},set:function(e,n,i){d()&&o("set",e,n,i)},get:function(e,n){d()&&o("get",e,null,n)},remove:function(e,n){d()&&o("remove",e,null,n)},clear:function(e){d()&&o("clear",null,null,e)},filter:function(e,n){if(d()){var i=e.toString().replace(/(^\/)|(\/$)/g,"");o("filter",i,null,n)}},wasInit:function(){return v}}});
/*!edu_modules/local.data/power.local*/
;define("edu_modules/local.data/power.local",function(e,n,t){function o(e,n){var t,o=n||{};for(t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o}function r(){var e=document.domain,n=u.whiteDomain,t=!1;if(!u.crossDomain)return!1;if(0===n.length)return!1;for(var o=0;o<n.length&&e!==n[o];o++);return o===n.length&&(t=!0),t}function i(e,n){return{get:function(t,o){n?e.get(t,function(e){o&&o(e&&e.value)}):o&&o(e.get(t))},set:function(t,o,r){try{n?e.set(t,o,r):(e.set(t,o),r&&r())}catch(i){"QuotaExceededError"===i.name&&window.BJ_REPORT&&BJ_REPORT.debug({msg:"local-write-overflow",ext:{msid:2514080}})}},remove:function(t,o){n?e.remove(t,o):(e.remove(t),o&&o())},filter:function(t,o){n?e.filter(t,function(e){o&&o(e&&e.value)}):o&&o(e.filter(t))},clear:function(t){n?e.clear(t):(e.clear(),t&&t())},wasInit:function(){return n?e.wasInit():!0},isCross:function(){return n}}}function a(e,n){o(e,u),r()?(l=c,l.init({iframeUrl:u.iframeUrl,initCallback:function(){n&&n(i(l,!0))}})):n&&n(i(l))}var l=e("edu_modules/local.data/local.data"),c=e("edu_modules/local.data/cross.local"),u={whiteDomain:[],iframeUrl:"",crossDomain:!1};t.exports={getLocal:a}});
/*!edu_modules/tdw-local/tdw-local*/
;define("edu_modules/tdw-local/tdw-local",function(e,o,n){function t(e,o){if(g.wasInit&&g.wasInit()){var n=o.fields,t=o.datas,a=d.inArray(v.seqName,n);d.each(t,function(e,o){var n=v.localPrefix+o[a];g.remove(n)})}}function a(e,o){d.isPlainObject(e)?o&&o(e):d.isArray(e)&&d.each(e,function(e,n){o&&o(n)})}function i(){return(new Date).getTime()+Math.random().toFixed(17).toString().replace(".","")}function r(){g.filter(_,function(e){var o;e=e.slice(0,2);for(var n=0;n<e.length;n++)o=JSON.parse(e[n].value||"{}"),o.seq_number?(o.datas&&o.datas[0].push("local"),o.fields&&o.fields.push("source_from"),h.request(o)):g.remove(e[n].key)})}function c(){q.getLocal({whiteDomain:v.whiteDomain,iframeUrl:v.crossProxy,crossDomain:v.crossDomain},function(e){g=e,r()})}function s(e){a(e,function(e){e[v.seqName]=i()})}function u(){return p&&p.obj&&null!==p.obj()}function l(e,o){a(e,function(e){o.push(d.extend({seq_number:e[v.seqName]},h.composer(e)))})}function f(e){g.wasInit&&g.wasInit()&&d.each(e,function(e,o){var n=v.localPrefix+o[v.seqName];g.set(n,JSON.stringify(o))})}function m(e){var o=[];s(e),l(e,o),f(o)}var d=e("jquery"),w=e("edu_modules/tdw/tdw"),p=e("edu_modules/local.data/local.data"),q=e("edu_modules/local.data/power.local"),g={},h={},x=u(),v={whiteDomain:[],crossProxy:"",crossDomain:!1,localPrefix:"tdw_seq",seqName:"seq_number"},_=/^tdw_seq/;h.composer=w.composer,h.getCommonData=w.getCommonData,h.config=w.config,h.request=w.request,h.config({},{success:t}),h.report=function(e){m(e),w.report(e)},h.reportSync=function(e,o){m(e),w.reportSync(e,o)},h.initLocal=function(e){d.extend(v,e),_=new RegExp("^"+v.localPrefix),x&&c()},n.exports=h});
/*!edu_modules/report.cookie/report.from*/
;define("edu_modules/report.cookie/report.from",function(e,o,t){function i(e){var o=!n.get(r.name);setTimeout(function(){var t={action:"From"};o&&(t.ver7=e.getReportData().ver4||"4"),e.tdw(t),n.setSession(r.name,1,r.domain,r.path)},0)}var n=e("edu_modules/util.cookie/util.cookie"),r={name:"tdw_first_visited",domain:"ke.qq.com",path:"/"};t.exports=i});
/*!edu_modules/edu-report/edu-report*/
;define("edu_modules/edu-report/edu-report",function(o,e,t){var r=o("edu_modules/tdw-local/tdw-local"),n=o("jquery"),c=o("edu_modules/report.cookie/report.from"),i={};r.config({opername:"Edu"},{table:"dc00149",pr_ip:"obj3",pr_t:"ts",slicer:4}),r.initLocal&&r.initLocal({whiteDomain:["ke.qq.com"],crossProxy:"//ke.qq.com/storage_proxy.html",crossDomain:!0}),i.tdw=function(o,e){r[e?"reportSync":"report"](o)},i.toreport=function(){},i.config=function(o){r.config(n.extend({},o||{}))},i.getReportData=r.getCommonData,c(i),t.exports=i});
/*!edu_modules/edu-report/edu-report-util*/
;define("edu_modules/edu-report/edu-report-util",function(e,r,t){var u=e("edu_modules/edu-report/edu-report"),o=/[^|]+/gi,i=/(^|&)?([^&=]*)=([^&]*)(&|$)/gi,d=/(?:^|&)([^&=]*)=([^&]*)(?:&|$)/i;u.parseReportAttr=function(e){if(e){var r,t,u,a,f=e.match(o);if(f){r=[];for(var n=0,p=f.length;p>n;n++)if(u=f[n].match(i)){t={};for(var h=0,c=u.length;c>h;h++)u[h]&&(a=u[h].match(d),a[1]&&(t[a[1]]=a[2]||""));r.push(t)}}return r}},t.exports=u});
/*!edu_modules/report.pagelocation/pagelocation.register*/
;define("edu_modules/report.pagelocation/pagelocation.register",function(e,r,t){function o(e){return d.hasOwnProperty(e)}function u(e){return d[e]}function a(e,r){return o(e)?void 0:(d[e]=n.extend({},l,r),!0)}var n=e("jquery"),i=e("edu_modules/edu-report/edu-report");e("edu_modules/edu-report/edu-report-util");var d={},p="_origin",c="cors-path",l={getCookieKey:function(e){return e?e+p:!1},getRecordValue:function(e){var r=e.attr(c),t=i.parseReportAttr(r)||[];return t[0]},isSimilarRecord:null};a("course",{getRecordValue:function(e){var r=e.attr("report-tdw"),t=i.parseReportAttr(r)||[];t=t[0]||{};var o=t.module||i.getReportData("module"),u=t.ver1||i.getReportData("ver1"),a=t.ver3||i.getReportData("ver3");return{cid:+u,ext:{pagelocation:o+","+a}}},isSimilarRecord:function(e,r){return e.cid===r.cid}}),t.exports={isValidName:o,getOperator:u,registerOperators:a}});
/*!edu_modules/report.pagelocation/report.pagelocation*/
;define("edu_modules/report.pagelocation/report.pagelocation",function(e,o,t){var a=e("jquery"),r=e("edu_modules/edu-report/edu-report"),i=e("edu_modules/report.pagelocation/pagelocation.register"),n={register:i,nameAttr:"cors-name",maxRecords:5,getPageLocation:function(e){if(i.isValidName(e)){var o=i.getOperator(e),t=a.cookie.get(o.getCookieKey(e))||"[]",r=JSON.parse(t);return a.isArray(r)?r:[]}},setPageLocation:function(e,o){a.cookie.set(e,JSON.stringify(o),"ke.qq.com","/","48")},updatePageLocation:function(e,o,t){var a=e.length>=n.maxRecords?0:null;if("function"==typeof t)for(var r=0,i=e.length;i>r;++r)if(t(e[r],o)){a=r;break}null!==a&&e.splice(a,1),e.push(o)},addRecord:function(e){var o=e.attr(n.nameAttr);if(o&&i.isValidName(o)){var t=i.getOperator(o),a=t.getRecordValue(e),r=n.getPageLocation(o);n.updatePageLocation(r,a,t.isSimilarRecord),n.setPageLocation(t.getCookieKey(o),r)}}};r.getPageLocation=n.getPageLocation,t.exports=n});
/*!edu_modules/report.attr/report.attr*/
;define("edu_modules/report.attr/report.attr",function(t,r,e){var o=t("jquery"),a=t("edu_modules/edu-report/edu-report"),d=t("edu_modules/report.pagelocation/report.pagelocation"),p="DATA_REPORT";o(document).on("click doReport","*[report-tdw]",function(t,r){var e=o(this),s=e.attr("report-tdw"),i=e.attr("report-close");if(i=i?+i:0,s){var l;if((l=e.data(p))||(l=a.parseReportAttr(s)||[]),r&&(r.isCloseReport&&(i=r.isCloseReport,e.attr("report-close",+!!r.isCloseReport)),r.data))for(var c in r.data)for(var n,u=0,R=l.length;R>u;u++)n=l[u]||(l[u]={}),r.data.hasOwnProperty(c)&&(n[c]=r.data[c]);e.data(p,l),(!i&&"click"===t.type||"doReport"===t.type)&&(a.tdw&&a.tdw(l),d.addRecord(e))}}),e.exports=a});
/*!@tencent/im-util.bom/util.bom*/
;define("@tencent/im-util.bom/util.bom",function(e,n,t){var r=e("jquery"),a=navigator.platform,o=!a||"Win32"===a||"Win64"===a||"Windows"===a;t.exports=r.bom={query:function(e){var n=window.location.search.match(new RegExp("(\\?|&)"+e+"=([^&]*)(&|$)"));return n?decodeURIComponent(n[2]):""},getHash:function(e){var n=window.location.hash.match(new RegExp("(#|&)"+e+"=([^&]*)(&|$)"));return n?decodeURIComponent(n[2]):""},getParam:function(e,n){var t=e.match(new RegExp("(\\?|#|&)"+n+"=([^&#]*)(&|#|$)"));return t?decodeURIComponent(t[2]):""},checkPlatform:function(){var e=navigator.platform,n=!e||"Win32"===e||"Win64"===e||"Windows"===e;return n||(r.Dialog.alert("请通过电脑登录Windows系统，再访问该页面。"),Badjs("非windows pc, ua="+navigator.userAgent+", platform="+navigator.platform,location.href,0,410018,2)),n},parseHref:function(e){var n=document.createElement("a");return n.href=e,{domain:n.hostname,pathname:n.pathname,search:n.search,hash:n.hash}},isWindows:function(){return o},parseQuery:function(e){var n,t,r={};if(!e)return r;n=e.indexOf("?"),t=0===n?1:0;for(var a=e.substr(t).split("&"),o=0;o<a.length;o++){var i=a[o].split("=");r[decodeURIComponent(i[0])]=decodeURIComponent(i[1]||"")}return r},htmlEncode:function(e){return(""+e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")}}});
/*!edu_modules/report.cookie/report.common*/
;define("edu_modules/report.cookie/report.common",function(r,e,o){var n,i,m,f,t,a=r("jquery"),d=r("@tencent/im-util.bom/util.bom"),u=document,c=window.location,s=["28","63","64","17"],v=["pay.qq.com"],y=d.parseQuery(c.search),p={origin:u.referrer};p.origin&&(p=a.extend(p,d.parseHref(p.origin))),y.from=y.from||d.getHash("from")||"",y.tuin=d.getHash("tuin")||"",a.inArray(y.from,s)>-1?(n=y.from,f=y.from):(/ke\.qq\.com$/.test(p.domain)?m=y.from:p.domain?(a.inArray(p.domain,v)<0&&(n=p.domain),t=p.domain):y.from?n=y.from:y.tuin&&(n=146),"undefined"==typeof m&&(f=y.from)),o.exports=function(r){return i=y.keyword?y.keyword:n===r.ver4?r.ver5:"",n=n||r.ver4||"4",m=m||r.ver6||"",t=t||r.refer||"",f=f||r.from_channel||"",{ver4:n,ver5:i,ver6:m,refer:t,from_channel:f}}});
/*!edu_modules/report.cookie/report.path*/
;define("edu_modules/report.cookie/report.path",function(e,n,t){function i(e){var n=Q.parseHref(e).domain;return!!/(\.|^)ke\.qq\.com$/.test(n)}function r(e){var n,t;if(n=e.match(W),t=n&&n.length&&n[1],J===e||t){if(t&&!b("label_filter"))return nn.word;for(var i in nn)if(b(i))return nn[i];return"b"}}function o(e){var n,t,i,r=e;return"B"===en[r]?(n=b("sid"),t={plan:"B",feeds:"C",signup:"D",fav:"E",coupon:"F"},i=t[n],i?i:"B"):void 0}function a(e,n){return N.test(n)?"m":void 0}function c(e){return S.test(e)?"o":T.test(e)?"p":void 0}function u(e){var n;return M==G&&(e=e.replace(/\d/g,""),n=Z[e])?E._isApply?n+tn:n:void 0}function s(e){var n;return M==G&&(e=e.replace(/\d/g,""),n=Y[e])?n:void 0}function f(){for(var e,n=[s,u,r,a,c,o],t=0,i=n.length;i>t&&!(e=n[t].call(this,R,M));t++);return e||X}function d(){return E._pageCode}function p(e,n){return n.length>100?n=n.substring(0,100):v(e,n),n}function l(){var e=x(F);return e||h(),x(F)}function h(){v(F,Math.random(),P,I,2)}function m(){var e=d()+f()+tn;return E._isApply=1,y(z,E._isApply),y(U,e),[e,l()].join("-")}function b(e){return L.bom.query(e)||L.bom.getHash(e)}function g(e,n){"string"==typeof n&&(n=[n]);for(var t=Q.parseHref(e).search,i=Q.parseQuery(t),r=0,o=n.length;o>r;++r)n[r]&&delete i[n[r]];return L.param(i)}function v(e,n,t,i,r){e&&(t=t||P,i=i||I,r=r||K,D.set($+e,n,t,i,r))}function x(e){return D.get($+e)}function _(e,n,t){e&&(n=n||P,t=t||I,D.del($+e,n,t))}function y(e,n){var t=window.name,i=Q.parseQuery(t);i[e]=encodeURIComponent(n),window.name=L.param(i)}function j(e){var n=window.name,t=Q.parseQuery(n);return Q.htmlEncode(decodeURIComponent(t[e]||""))}function k(){E._pageCode="",E._isApply=0;var e=U+q();i(V)&&(E._pageCode=x(e)),E._pageCode?y(U,E._pageCode):(E._pageCode=j(U),E._isApply=j(z)),_(e)}function w(e){return e&&e.replace(/[()\\\/?.$&:=#;]/g,"")||""}function q(){return w([M,R,g(location.search,"from"),location.hash].join(""))}function C(e){var n=document.createElement("a");return n.href=e,e=n.href,e.replace(/^https?:/,"")}function A(e,n,t){var i=e[n]||"";return i+g(t,[n,"from"])}function O(e){e=C(e);var n=Q.parseHref(e),t=n.domain,i=n.pathname,r=n.hash;if(t!==G)return w([t,i,g(e,"from"),r].join(""));var o,a=Q.parseQuery(n.search),c="";return 0===i.indexOf("/cgi-bin/courseDetail")?(o=A(a,"course_id",e),c=["/course/",o].join("")):0===i.indexOf("/cgi-bin/teacher")?(o=A(a,"tid",e),c=["/teacher/",o].join("")):0===i.indexOf("/cgi-bin/bbs/xbar_info")?(o=A(a,"bid",e),c=["/bbs/tuan/",o].join("")):0===i.indexOf("/cgi-bin/bbs/posts/post_detail")?(o=A(a,"pid",e),c=["/bbs/topic/",o].join("")):0===i.indexOf("/cgi-bin/courseList")?(o=A(a,"word",e),c=["/course/list/",o].join("")):c=[i,g(e,"from")].join(""),w([t,c,r].join(""))}function H(e){var n=U+O(e);p(n,E._pageCode+f())}function B(){L(document).on("click","a[href]",function(){var e=L(this),n=e.attr("href");n&&0!==n.indexOf("javascript")&&0!==n.indexOf("#")&&H(n)})}var L=e("jquery"),Q=e("@tencent/im-util.bom/util.bom"),D=e("edu_modules/util.cookie/util.cookie"),E={},$="_",I="",K=.05,M=location.host,R=location.pathname,U=(location.href,"path"),z="isapply",F="pathcode",P="ke.qq.com",V=document.referrer,G="ke.qq.com",J="/course/list",N=/^([a-z])+\.ke\.qq\.com/,S=/^\/huodong\//,T=/^\/activity\//,W=/^\/course\/list\/([^\/]*)\/*$/,X="r",Y={"/":"a","/index.html":"a","/cgi-bin/index":"a","/activity/list/index.html":"i","/bbs/":"j","/bbs/index.html":"j","/cgi-bin/bbs/xbar_info":"k","/cgi-bin/agency":"m","/cgi-bin/bbs/posts/post_detail":"l","/cgi-bin/teacher":"n","/user/tasks/index.html":"u","/exam/index.html":"w","/cgi-bin/ke_graph":"K","/cgi-bin/ke_graph/courseList":"L","/webcourse/index.html":"v","/course/package/":"M","/teacher/":"n","/bbs/tuan/":"k","/bbs/topic/-":"l","/tupu/":"K","/tupu//course":"L","/agency/index/":"t","/exam/web.html":"w","/cates/kaoyanVplan/index.html":"q","/cates/ielts_v2/index.html":"x","/cates/fltrp/index.html":"y"},Z={"/cgi-bin/courseDetail":"h","/course/":"h"},en={"/user/index/index.html":"B"},nn={label_filter:"c",word:"d",tt:"g",st:"f",mt:"e"},tn="A";L(document).on("logout",function(){_(U),_(F)}),k(),B();var rn=function(){var e=d()+f(),n=l();return{path:[e,n].join("-")}}();t.exports={path:rn,injectHrefAction:H,getApplyPath:m}});
/*!edu_modules/report.cookie/report.auin*/
;define("edu_modules/report.cookie/report.auin",function(t,e,n){function o(t){u.setSession(d.name,t,d.domain,d.path)}function i(){var t=u.get(d.name);return t||""}var a=t("@tencent/im-util.bom/util.bom"),u=t("edu_modules/util.cookie/util.cookie"),m=a.query("tuin")||a.getHash("tuin"),m=+("0x"+m).toString(10),r=location.pathname,d={name:"tdw_auin_data",domain:"ke.qq.com",path:"/"},c="-",l=i();-1===r.indexOf("/storage_proxy.html")&&(l=l||m||c,o(l)),n.exports={auin:l}});
/*!edu_modules/report.cookie/report.cookie*/
;define("edu_modules/report.cookie/report.cookie",function(e,o,t){function r(e){a.isPlainObject(e)&&(e=JSON.stringify(e)),p.setSession(s.name,e,s.domain,s.path)}function i(){var e=p.get(s.name);return e?JSON.parse(e):{}}var n,u,a=e("jquery"),d=e("edu_modules/edu-report/edu-report"),p=e("edu_modules/util.cookie/util.cookie"),c=e("edu_modules/report.cookie/report.common"),m=e("edu_modules/report.cookie/report.path"),l=e("edu_modules/report.cookie/report.auin"),s=(location.pathname,{name:"tdw_data",domain:"ke.qq.com",path:"/"});u=i(),n=a.extend({},c(u||{}),m.path,l),n.uin=p.uin(),n.real_uin=p.realUin(),d.config(n),r(n),delete m.path,a.extend(d,m),t.exports=d});
/*!edu_modules/huatuo/src/index*/
;define("edu_modules/huatuo/src/index",function(n,t,e){function r(n){var t=[];for(var e in p)"url"!==e&&"isd"!==e&&(!!n[e]&&(p[e]=n[e]),p[e]&&t.push(e+"="+p[e]));return t.join("&")}function a(n,t){f[n]=t||new Date-0}function o(n,t){var e=[],r=100*Math.random()+1;e.push(n);for(var a in t)e.push(a+"="+t[a].cost);if(m[n]={},n&&e){var o="//huatuo.weiyun.com/report.cgi?";e=o+c+"&speedparams="+encodeURIComponent(e.join("&"))+"&r="+r;var i=new Image;i.src=e,i=null}}function i(n,t){if(n&&t)for(var e in t)n[e]=t[e];return n}function d(n,t,e){if("number"==typeof e&&e>=0){var r=n[t];r?(r.cost=Math.round((r.num*r.cost+e)/(r.num+1)),r.num+=1):n[t]={cost:e,num:1}}}function u(n,t){t=t||{};var e=t&&t.url||p.url;c=r(t),l[e]&&clearTimeout(l[e]),m[e]||(m[e]={});var a=m[e],u=i(p.isd,t.isd),g=null;if(n&&"object"==typeof n)if(n instanceof Array){g=f.page_start;for(var _=0;_<n.length;_++){var w=n[_];if("page_start"!==w){var E=f[w]-g;(0>=E||isNaN(E))&&(E=1),a[u[w]]={cost:E,num:1}}}s(t.isPrevent,a)}else for(var h in n)d(a,h,n[h]);var S=0===t.delay?0:t.delay||v;S?l[e]=setTimeout(function(){o(e,a)},S):o(e,a)}function s(n,t){if(!window.performance||n)return t;var e,r,a,o=window.performance.timing;t||(t=[]),e=o.navigationStart;for(var i in p.isd)r=p.isd[i],20>r&&(a=o[i]-e,(0>=a||isNaN(a))&&(a=1),t[r]={cost:a,num:1});return t}var c,p={url:"",isd:{unloadEventStart:1,unloadEventEnd:2,redirectStart:3,redirectEnd:4,fetchStart:5,domainLookupStart:6,domainLookupEnd:7,connectStart:8,connectEnd:9,requestStart:10,responseStart:11,responseEnd:12,domLoading:13,domInteractive:14,domContentLoadedEventStart:15,domContentLoadedEventEnd:16,domComplete:17,loadEventStart:18,loadEventEnd:19,page_start:20,page_css_ready:21,page_js_ready:22,page_main_start:23,page_main_end:24,page_render_end:25,page_render_fp:26},appid:10028,device:"",platform:"",apn:"",userid:""},f={},m={},v=500,l={};a("page_start",window.T&&window.T[0]),window.huatuo={cfg:p,push:a,report:u},e.exports=window.huatuo});
/*!edu_modules/huatuo/index*/
;define("edu_modules/huatuo/index",function(e,u,d){var o=e("edu_modules/huatuo/src/index");d.exports=o});
/*!edu_modules/huatuo.common.init/huatuo.common.init*/
;define("edu_modules/huatuo.common.init/huatuo.common.init",function(e,n,t){var o=e("jquery"),i=e("edu_modules/huatuo/index"),a=function(e,n){i.cfg.url=e;var t=["page_start","page_css_ready","page_js_ready","page_main_start","page_main_end","page_render_end","page_render_fp"];if(n&&n.isd&&"object"==typeof n.isd)for(var o in n.isd)t.push(o);i.report(t,n||{})},u=function(e,n){"complete"===document.readyState?a(e,n):o(window).load(function(){setTimeout(function(){a(e,n)},0)})};o.initHuatuo=u,t.exports={init:u}});
/*!edu_modules/check/check*/
;define("edu_modules/check/check",function(e,i,o){e("edu_modules/util.cookie/util.cookie");var u=e("jquery");o.exports={isWeixinUser:function(){var e=u.cookie.get("uid_type");return 2==e?!0:!1}}});
/*!@tencent/im-tab-man/tab*/
;define("@tencent/im-tab-man/tab",function(t,a,n){function i(t,a){return a=a||{},t=e(t),t.data("Tab")?t.data("Tab"):this instanceof i?(this.container=t,this.container.data("Tab",this),this.tabContent=a.tabContent||"mod-tab__content",this.tabNav=a.tabNav||"mod-tab__ul",this.tabNavItem=a.tabNavItem||"mod-tab__li",this.tabCurItem=a.tabCurItem||"mod-tab__li_current",this.pos=a.pos||0,this.content=this.container.find("."+this.tabContent).eq(this.pos),this.nav=this.container.find("."+this.tabNav),this.navLis=this.nav.find("."+this.tabNavItem),this.curNav=this.navLis.eq(this.pos),void this.init()):new i(t,a)}var e=t("jquery");i.prototype={constructor:i,init:function(){var t=this;return this.nav.on("click","a",function(a){a.preventDefault();var n=e(this),i=n.closest("."+t.tabNavItem),s=i.index();i[0]!==t.curNav[0]&&(t.content.hide(),t.curNav.removeClass(t.tabCurItem),t.content=t.container.find("."+t.tabContent).eq(s),t.curNav=n.closest("."+t.tabNavItem),t.content.show(),t.curNav.addClass(t.tabCurItem),t.container.trigger("changeTab",s,t.curNav))}),this}},n.exports=i});
/*!core-js/library/modules/_global*/
;define("core-js/library/modules/_global",function(e,n,o){var t=o.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)});
/*!core-js/library/modules/_core*/
;define("core-js/library/modules/_core",function(e,r,o){var n=o.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)});
/*!core-js/library/modules/_a-function*/
;define("core-js/library/modules/_a-function",function(n,o,r){r.exports=function(n){if("function"!=typeof n)throw TypeError(n+" is not a function!");return n}});
/*!core-js/library/modules/_ctx*/
;define("core-js/library/modules/_ctx",function(r,n,e){var t=r("core-js/library/modules/_a-function");e.exports=function(r,n,e){if(t(r),void 0===n)return r;switch(e){case 1:return function(e){return r.call(n,e)};case 2:return function(e,t){return r.call(n,e,t)};case 3:return function(e,t,u){return r.call(n,e,t,u)}}return function(){return r.apply(n,arguments)}}});
/*!core-js/library/modules/_is-object*/
;define("core-js/library/modules/_is-object",function(e,o,n){n.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}});
/*!core-js/library/modules/_an-object*/
;define("core-js/library/modules/_an-object",function(r,o,e){var n=r("core-js/library/modules/_is-object");e.exports=function(r){if(!n(r))throw TypeError(r+" is not an object!");return r}});
/*!core-js/library/modules/_fails*/
;define("core-js/library/modules/_fails",function(r,e,n){n.exports=function(r){try{return!!r()}catch(e){return!0}}});
/*!core-js/library/modules/_descriptors*/
;define("core-js/library/modules/_descriptors",function(e,r,n){n.exports=!e("core-js/library/modules/_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})});
/*!core-js/library/modules/_dom-create*/
;define("core-js/library/modules/_dom-create",function(e,r,o){var t=e("core-js/library/modules/_is-object"),c=e("core-js/library/modules/_global").document,l=t(c)&&t(c.createElement);o.exports=function(e){return l?c.createElement(e):{}}});
/*!core-js/library/modules/_ie8-dom-define*/
;define("core-js/library/modules/_ie8-dom-define",function(e,r,o){o.exports=!e("core-js/library/modules/_descriptors")&&!e("core-js/library/modules/_fails")(function(){return 7!=Object.defineProperty(e("core-js/library/modules/_dom-create")("div"),"a",{get:function(){return 7}}).a})});
/*!core-js/library/modules/_to-primitive*/
;define("core-js/library/modules/_to-primitive",function(r,t,e){var o=r("core-js/library/modules/_is-object");e.exports=function(r,t){if(!o(r))return r;var e,i;if(t&&"function"==typeof(e=r.toString)&&!o(i=e.call(r)))return i;if("function"==typeof(e=r.valueOf)&&!o(i=e.call(r)))return i;if(!t&&"function"==typeof(e=r.toString)&&!o(i=e.call(r)))return i;throw TypeError("Can't convert object to primitive value")}});
/*!core-js/library/modules/_object-dp*/
;define("core-js/library/modules/_object-dp",function(e,r){var o=e("core-js/library/modules/_an-object"),i=e("core-js/library/modules/_ie8-dom-define"),t=e("core-js/library/modules/_to-primitive"),s=Object.defineProperty;r.f=e("core-js/library/modules/_descriptors")?Object.defineProperty:function(e,r,c){if(o(e),r=t(r,!0),o(c),i)try{return s(e,r,c)}catch(n){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(e[r]=c.value),e}});
/*!core-js/library/modules/_property-desc*/
;define("core-js/library/modules/_property-desc",function(e,r,n){n.exports=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}}});
/*!core-js/library/modules/_hide*/
;define("core-js/library/modules/_hide",function(r,e,o){var s=r("core-js/library/modules/_object-dp"),c=r("core-js/library/modules/_property-desc");o.exports=r("core-js/library/modules/_descriptors")?function(r,e,o){return s.f(r,e,c(1,o))}:function(r,e,o){return r[e]=o,r}});
/*!core-js/library/modules/_has*/
;define("core-js/library/modules/_has",function(r,e,n){var o={}.hasOwnProperty;n.exports=function(r,e){return o.call(r,e)}});
/*!core-js/library/modules/_export*/
;define("core-js/library/modules/_export",function(r,e,n){var o=r("core-js/library/modules/_global"),t=r("core-js/library/modules/_core"),i=r("core-js/library/modules/_ctx"),s=r("core-js/library/modules/_hide"),u=r("core-js/library/modules/_has"),a="prototype",c=function(r,e,n){var l,f,y,d=r&c.F,m=r&c.G,p=r&c.S,b=r&c.P,h=r&c.B,j=r&c.W,v=m?t:t[e]||(t[e]={}),_=v[a],w=m?o:p?o[e]:(o[e]||{})[a];m&&(n=e);for(l in n)f=!d&&w&&void 0!==w[l],f&&u(v,l)||(y=f?w[l]:n[l],v[l]=m&&"function"!=typeof w[l]?n[l]:h&&f?i(y,o):j&&w[l]==y?function(r){var e=function(e,n,o){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(e);case 2:return new r(e,n)}return new r(e,n,o)}return r.apply(this,arguments)};return e[a]=r[a],e}(y):b&&"function"==typeof y?i(Function.call,y):y,b&&((v.virtual||(v.virtual={}))[l]=y,r&c.R&&_&&!_[l]&&s(_,l,y)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,n.exports=c});
/*!core-js/library/modules/_cof*/
;define("core-js/library/modules/_cof",function(r,e,n){var o={}.toString;n.exports=function(r){return o.call(r).slice(8,-1)}});
/*!core-js/library/modules/_iobject*/
;define("core-js/library/modules/_iobject",function(e,r,t){var o=e("core-js/library/modules/_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}});
/*!core-js/library/modules/_defined*/
;define("core-js/library/modules/_defined",function(e,o,r){r.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}});
/*!core-js/library/modules/_to-iobject*/
;define("core-js/library/modules/_to-iobject",function(e,r,o){var i=e("core-js/library/modules/_iobject"),c=e("core-js/library/modules/_defined");o.exports=function(e){return i(c(e))}});
/*!core-js/library/modules/_to-integer*/
;define("core-js/library/modules/_to-integer",function(e,r,o){var t=Math.ceil,i=Math.floor;o.exports=function(e){return isNaN(e=+e)?0:(e>0?i:t)(e)}});
/*!core-js/library/modules/_to-length*/
;define("core-js/library/modules/_to-length",function(e,r,n){var o=e("core-js/library/modules/_to-integer"),t=Math.min;n.exports=function(e){return e>0?t(o(e),9007199254740991):0}});
/*!core-js/library/modules/_to-absolute-index*/
;define("core-js/library/modules/_to-absolute-index",function(e,r,o){var t=e("core-js/library/modules/_to-integer"),n=Math.max,i=Math.min;o.exports=function(e,r){return e=t(e),0>e?n(e+r,0):i(e,r)}});
/*!core-js/library/modules/_array-includes*/
;define("core-js/library/modules/_array-includes",function(r,e,o){var n=r("core-js/library/modules/_to-iobject"),i=r("core-js/library/modules/_to-length"),t=r("core-js/library/modules/_to-absolute-index");o.exports=function(r){return function(e,o,l){var u,s=n(e),a=i(s.length),c=t(l,a);if(r&&o!=o){for(;a>c;)if(u=s[c++],u!=u)return!0}else for(;a>c;c++)if((r||c in s)&&s[c]===o)return r||c||0;return!r&&-1}}});
/*!core-js/library/modules/_library*/
;define("core-js/library/modules/_library",function(r,e,i){i.exports=!0});
/*!core-js/library/modules/_shared*/
;define("core-js/library/modules/_shared",function(r,e,o){var s=r("core-js/library/modules/_core"),i=r("core-js/library/modules/_global"),l="__core-js_shared__",a=i[l]||(i[l]={});(o.exports=function(r,e){return a[r]||(a[r]=void 0!==e?e:{})})("versions",[]).push({version:s.version,mode:r("core-js/library/modules/_library")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})});
/*!core-js/library/modules/_uid*/
;define("core-js/library/modules/_uid",function(o,n,r){var t=0,i=Math.random();r.exports=function(o){return"Symbol(".concat(void 0===o?"":o,")_",(++t+i).toString(36))}});
/*!core-js/library/modules/_shared-key*/
;define("core-js/library/modules/_shared-key",function(r,e,s){var o=r("core-js/library/modules/_shared")("keys"),d=r("core-js/library/modules/_uid");s.exports=function(r){return o[r]||(o[r]=d(r))}});
/*!core-js/library/modules/_object-keys-internal*/
;define("core-js/library/modules/_object-keys-internal",function(r,e,o){var s=r("core-js/library/modules/_has"),l=r("core-js/library/modules/_to-iobject"),a=r("core-js/library/modules/_array-includes")(!1),i=r("core-js/library/modules/_shared-key")("IE_PROTO");o.exports=function(r,e){var o,n=l(r),u=0,c=[];for(o in n)o!=i&&s(n,o)&&c.push(o);for(;e.length>u;)s(n,o=e[u++])&&(~a(c,o)||c.push(o));return c}});
/*!core-js/library/modules/_enum-bug-keys*/
;define("core-js/library/modules/_enum-bug-keys",function(e,r,o){o.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});
/*!core-js/library/modules/_object-keys*/
;define("core-js/library/modules/_object-keys",function(e,r,o){var s=e("core-js/library/modules/_object-keys-internal"),n=e("core-js/library/modules/_enum-bug-keys");o.exports=Object.keys||function(e){return s(e,n)}});
/*!core-js/library/modules/_object-gops*/
;define("core-js/library/modules/_object-gops",function(e,o){o.f=Object.getOwnPropertySymbols});
/*!core-js/library/modules/_object-pie*/
;define("core-js/library/modules/_object-pie",function(e,r){r.f={}.propertyIsEnumerable});
/*!core-js/library/modules/_to-object*/
;define("core-js/library/modules/_to-object",function(e,r,o){var n=e("core-js/library/modules/_defined");o.exports=function(e){return Object(n(e))}});
/*!core-js/library/modules/_object-assign*/
;define("core-js/library/modules/_object-assign",function(r,e,o){"use strict";var s=r("core-js/library/modules/_descriptors"),c=r("core-js/library/modules/_object-keys"),t=r("core-js/library/modules/_object-gops"),l=r("core-js/library/modules/_object-pie"),i=r("core-js/library/modules/_to-object"),a=r("core-js/library/modules/_iobject"),n=Object.assign;o.exports=!n||r("core-js/library/modules/_fails")(function(){var r={},e={},o=Symbol(),s="abcdefghijklmnopqrst";return r[o]=7,s.split("").forEach(function(r){e[r]=r}),7!=n({},r)[o]||Object.keys(n({},e)).join("")!=s})?function(r){for(var e=i(r),o=arguments.length,n=1,b=t.f,j=l.f;o>n;)for(var u,f=a(arguments[n++]),m=b?c(f).concat(b(f)):c(f),d=m.length,y=0;d>y;)u=m[y++],(!s||j.call(f,u))&&(e[u]=f[u]);return e}:n});
/*!core-js/library/modules/es6.object.assign*/
;define("core-js/library/modules/es6.object.assign",function(e){var s=e("core-js/library/modules/_export");s(s.S+s.F,"Object",{assign:e("core-js/library/modules/_object-assign")})});
/*!core-js/library/fn/object/assign*/
;define("core-js/library/fn/object/assign",function(e,s,r){e("core-js/library/modules/es6.object.assign"),r.exports=e("core-js/library/modules/_core").Object.assign});
/*!babel-runtime/core-js/object/assign*/
;define("babel-runtime/core-js/object/assign",function(e,s,n){n.exports={"default":e("core-js/library/fn/object/assign"),__esModule:!0}});
/*!edu_modules/reportor/lib/util*/
;define("edu_modules/reportor/lib/util",function(r,t,e){function n(r){return r&&"[object Object]"===r.toString()}function o(r){return r&&"function"==typeof r}function i(r){if(!n(r)||r.nodeType||r.setInterval)return!1;if(r.constructor&&!r.hasOwnProperty("constructor")&&!r.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1;var t;for(t in r);return void 0===t||r.hasOwnProperty(t)}function f(r,t){if(o(t))if(n(r))for(var e in r)t(e,r[e],r);else if(Array.isArray(r))for(var i=0,f=r.length;f>i;i++)t(i,r[i],r)}function u(r,t){var e=new RegExp("(\\?|#|&)"+t+"=([^&]*)(&|$)","g");return r.replace(e,"").replace(/(\?|#|&)$/,"")}"function"!=typeof Object.assign&&(Object.assign=function(r){if(null==r)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}),Array.isArray||(Array.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(r,t,e){return function(n,o){if(null===this||void 0===this)throw TypeError("Array.prototype.indexOf called on null or undefined");var i=r(this),f=i.length>>>0,u=e(0|o,f);if(0>u)u=t(0,f+u);else if(u>=f)return-1;if(void 0===n){for(;u!==f;++u)if(void 0===i[u]&&u in i)return u}else if(n!==n){for(;u!==f;++u)if(i[u]!==i[u])return u}else for(;u!==f;++u)if(i[u]===n)return u;return-1}}(Object,Math.max,Math.min)),e.exports={isPlainObject:i,each:f,delParam:u}});
/*!edu_modules/reportor/tdw/tdw*/
;define("edu_modules/reportor/tdw/tdw",function(t,r,e){function n(t){var r;return o(t),r=a(t),{fields:h,datas:r}}function i(t,r){return r=r||[],r.forEach(function(r){r.forEach(function(e,n){"string"==typeof e&&(r[n]=~m.indexOf(t[n])?e.substring(0,w):e.substring(0,v))})}),r}function o(t){t&&(l.isPlainObject(t)&&(t=[t]),Array.isArray(t)&&l.each(t,function(t,r){l.each(r,function(t){g[t]||(g[t]=1,h.push(t))})}))}function a(t){var r,e=[];return t&&(l.isPlainObject(t)&&(t=[t]),Array.isArray(t))?(l.each(t,function(t,n){r=[],n=Object.assign({},d,n),l.each(h,function(t,e){var i=n[e];i=void 0===i?"":i,r.push(i)}),e.push(r)}),e):void 0}function s(t,r){var e={};r=r||p,l.each(["table","pr_ip","pr_t"],function(t,n){e[n]=r[n]||""}),t.datas=i(t.fields,t.datas),e.fields=JSON.stringify(t.fields),e.datas=JSON.stringify(t.datas),e.retype=2,p.beforeRequest(t)!==!1&&r.url&&(f.ajax({url:r.url,data:e,dataType:"jsonp"}).done(function(r){p[0===r.ret?"success":"error"](r,t)}).fail(function(r,e,n){p.fail(t,r,e,n)}),u(t.fields,t.datas))}function c(){var t=[],r=j.read();r.length<=p.slicer?s(n(r)):(l.each(r,function(r,e){t.push(e),r>0&&r%p.slicer===p.slicer-1&&(s(n(t)),t=[])}),t.length&&s(n(t)))}function u(t,r){if(b.table&&window.localStorage)try{if(1===parseInt(window.localStorage.getItem("tdwFlag"),10)||1===parseInt(window.localStorage.getItem("tdwFlag2"),10))for(var e=0,n=r.length;n>e;e++){for(var i={},o=0,a=t.length;a>o;o++)""!==r[e][o]&&(i[t[o]]=r[e][o]);b.table([i])}}catch(s){}}var f=t("jquery"),l=t("edu_modules/reportor/lib/util"),p={url:"/cgi-bin/activity_platform/tdw/report",timer:300,beforeRequest:function(){},success:function(){},error:function(){},fail:function(){},slicer:8,table:"",pr_ip:"",pr_t:""},d={},g={},h=[],y=0,b=console||{},v=50,w=450,m=["url","refer","courseid","ver1"],j={pool:[],write:function(t){l.isPlainObject(t)?this.pool.push(t):Array.isArray(t)&&Array.prototype.push.apply(this.pool,t)},read:function(){var t=this.pool;return this.pool=[],t}};e.exports={config:function(t,r){Object.assign(d,t),Object.assign(p,r),o(d)},report:function(t){j.write(t),y||(y=setTimeout(function(){c(),y=0},p.timer))},reportSync:function(t,r){r=Object.assign({},p,r),s(n(t),r)},composer:n,request:s,getCommonData:function(t){return t?d[t]:d}}});
/*!edu_modules/reportor/tdw/tdw-local*/
;define("edu_modules/reportor/tdw/tdw-local",function(e,o,n){function t(e,o){if(q.wasInit&&q.wasInit()){var n=o.fields,t=o.datas,r=n.indexOf(v.seqName);w.each(t,function(e,o){var n=v.localPrefix+o[r];q.remove(n)})}}function r(){y=!1}function a(e,o){w.isPlainObject(e)?o&&o(e):Array.isArray(e)&&w.each(e,function(e,n){o&&o(n)})}function i(){return(new Date).getTime()+Math.random().toFixed(17).toString().replace(".","")}function s(){y&&"/storage_proxy.html"!==window.location.pathname&&q.filter(b,function(e){var o;e=e.slice(0,4);for(var n=0;n<e.length;n++)o=JSON.parse(e[n].value||"{}"),o.seq_number?(o.datas&&o.datas[0].push("local"),o.fields&&o.fields.push("source_from"),_.request(o)):q.remove(e[n].key)})}function c(){h.getLocal({whiteDomain:v.whiteDomain,iframeUrl:v.crossProxy,crossDomain:v.crossDomain},function(e){q=e,setTimeout(function(){s()},1e3)})}function u(e){a(e,function(e){e[v.seqName]=i()})}function l(){return g&&g.obj&&null!==g.obj()}function f(e,o){a(e,function(e){o.push(Object.assign({seq_number:e[v.seqName]},_.composer(e)))})}function m(e){q.wasInit&&q.wasInit()&&w.each(e,function(e,o){var n=v.localPrefix+o[v.seqName];q.set(n,JSON.stringify(o))})}function d(e){var o=[];u(e),f(e,o),m(o)}var p=e("edu_modules/reportor/tdw/tdw"),w=e("edu_modules/reportor/lib/util"),g=e("edu_modules/local.data/local.data"),h=e("edu_modules/local.data/power.local"),q={},_={},x=l(),v={whiteDomain:[],crossProxy:"",crossDomain:!1,localPrefix:"ntdw_seq",seqName:"seq_number"},b=/^tdw_seq/,y=!0;_.composer=p.composer,_.getCommonData=p.getCommonData,_.config=p.config,_.request=p.request,_.config({},{success:t,error:r,fail:r}),_.report=function(e){d(e),p.report(e)},_.reportSync=function(e,o){d(e),p.reportSync(e,o)},_.initLocal=function(e){Object.assign(v,e),b=new RegExp("^"+v.localPrefix),x&&c()},n.exports=_});
/*!edu_modules/reportor/lib/report.channel*/
;define("edu_modules/reportor/lib/report.channel",function(r,e,o){"use strict";function t(){for(var r=["saleToken","flowToken","tuin","from"],e=0,o=r.length;o>e;e++){var t=r[e],u=n.query(t);if(u)return{sourcetype:t,sourcefrom:u}}return{}}function u(){var r=n.query("tuin")||n.getHash("tuin");return+("0x"+r).toString(10)}var n=r("@tencent/im-util.bom/util.bom"),i="-";o.exports=function(r){r=r||{};var e=t(),o=u();return r.auin=r.auin||o||i,r.sourcetype=r.sourcetype||e.sourcetype||"",r.sourcefrom=r.sourcefrom||e.sourcefrom||"",r}});
/*!edu_modules/reportor/lib/report.uin*/
;define("edu_modules/reportor/lib/report.uin",function(r,i,e){function o(){return(""+Math.random()).substring(2)}var n=r("edu_modules/util.cookie/util.cookie");e.exports=function(r){var i,e=r.ver9,t=n.realUin(),u=r.visitor_id||o();return e&&!t&&(u=o()),t&&!e&&document.referrer&&(i="login"),Object.assign(r,{ver9:t?t:void 0,uin:n.uin()||"",visitor_id:u,ver10:i}),r}});
/*!edu_modules/reportor/lib/util.winname*/
;define("edu_modules/reportor/lib/util.winname",function(e,n,o){o.exports={set:function(e,n){this.del(e);var o=e+"="+n;window.name=window.name?window.name+"&"+o:o},get:function(e){var n=window.name.match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)"));return n?decodeURIComponent(n[2]):""},del:function(e){var n=this.get(e);n&&(window.name=window.name.replace(new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),"$3"))}}});
/*!edu_modules/reportor/lib/lastUrlpageHandler*/
;define("edu_modules/reportor/lib/lastUrlpageHandler",function(e,t,n){function r(e){var t=document.createElement("a");return t.href=e,{domain:t.hostname,pathname:t.pathname,search:t.search,hash:t.hash}}function o(e,t){return i.delParam(e,"tuin")===i.delParam(t,"tuin")}var a=e("edu_modules/reportor/lib/util.winname"),i=e("edu_modules/reportor/lib/util"),u="report_position_key_lastpage",l="report_position_key_lasturl",s=["ui.ptlogin2.qq.com/cgi-bin/login","open.weixin.qq.com/connect/oauth2/authorize"],c=document.referrer,d=r(c),h=d.domain+d.pathname;n.exports={get:function(){this.del();var e;try{e=a.get(u),e=JSON.parse(e)}catch(t){}return e},set:function(e){var t=location.href;a.set(u,JSON.stringify(e)),a.set(l,encodeURIComponent(t))},del:function(){this.shouldClear()&&a.del(u)},shouldClear:function(){var e=location.href,t=a.get(l);return!(o(e,t)||s.indexOf(h)>=0)}}});
/*!edu_modules/reportor/lib/positionHandler*/
;define("edu_modules/reportor/lib/positionHandler",function(e,t,n){function i(e){p=Object.assign({},p,e)}function o(){var e=l.get();if(e)return e;var t;return t=p.isPcWeb?r():a(),l.set(t),t}function r(){var e;try{e=m.get(f.name),e&&(e=JSON.parse(e))}catch(t){e={}}return m.del(f.name,f.domain,f.path),e||{}}function a(){var e;try{e=d.get(f.name),e&&(e=JSON.parse(e))}catch(t){e={}}return d.del(f.name),e}function s(e){return p.isPcWeb?void u(e):void c(e)}function u(e){m.setSession(f.name,JSON.stringify(e),f.domain,f.path)}function c(e){d.set(f.name,JSON.stringify(e))}var d=e("edu_modules/reportor/lib/util.winname"),l=e("edu_modules/reportor/lib/lastUrlpageHandler"),m=e("edu_modules/util.cookie/util.cookie"),f={name:"report_position_key",domain:"ke.qq.com",path:"/"},p={isPcWeb:!0};n.exports={config:i,getPositionData:o,setPositionData:s}});
/*!edu_modules/reportor/lib/report.position*/
;define("edu_modules/reportor/lib/report.position",function(o,t,r){function e(o){i(document).on("click","a[href],.js-report-link",function(){var t=i(this),r=t.attr("href");if(r&&0!==r.indexOf("#")||t.hasClass("js-report-link")){var e=t.closest("[data-report-position]"),n=t.closest("[data-report-module]"),s=e.data("report-position")||"",l=n.data("report-module")||"";a.setPositionData(i.extend({},o,{url_position:s,url_module:l}))}})}var i=o("jquery"),a=o("edu_modules/reportor/lib/positionHandler");r.exports=function(o,t){var r=t.getReportData("page"),i=t.getReportData("platform");a.config({isPcWeb:1===i}),e({url_page:r});var n=a.getPositionData();return["url_page","url_module","url_position"].forEach(function(t){o[t]=n[t]}),o}});
/*!edu_modules/reportor/lib/report.cookie*/
;define("edu_modules/reportor/lib/report.cookie",function(e,o,t){function r(e){s.isPlainObject(e)&&(e=JSON.stringify(e)),u.setSession(m.name,e,m.domain,m.path)}function i(){var e;try{e=u.get(m.name),e=JSON.parse(e)}catch(o){e={}}return e}function n(e,o){~c.indexOf("/storage_proxy.html")||(o=o||{},a=i(),d(a),l(a),p(a,e),e.config(a),r(a),e.tdw(Object.assign({action:"pageview"},a,o)))}var a,u=e("edu_modules/util.cookie/util.cookie"),d=e("edu_modules/reportor/lib/report.channel"),l=e("edu_modules/reportor/lib/report.uin"),p=e("edu_modules/reportor/lib/report.position"),s=e("edu_modules/reportor/lib/util"),c=location.pathname,m={name:"tdw_data_new_2",domain:"ke.qq.com",path:"/"};t.exports={reportPageView:n}});
/*!@tencent/im-jquery.isOnScreen/index*/
;define("@tencent/im-jquery.isOnScreen/index",function(t){var e=t("jquery");return e.fn.isOnScreen=function(){var t=e(window),o={top:t.scrollTop(),left:t.scrollLeft()};o.right=o.left+t.width(),o.bottom=o.top+t.height();var i=this.offset();return i.right=i.left+this.outerWidth(),i.bottom=i.top+this.outerHeight(),!(o.right<i.left||o.left>i.right||o.bottom<i.top||o.top>i.bottom)},e});
/*!edu_modules/reportor/lib/report.exposure*/
;define("edu_modules/reportor/lib/report.exposure",function(e,r,o){function n(e){e.$reportModule||(e.$reportModule=s.find("[data-report-module]"))}function t(e,r){var o=r.data("report-module");e.tdw({action:"exposure",module:o}),r.data(f,!0)}function i(e,r){function o(){i.each(function(o){var n=i.eq(o);if(!n.data(f)&&n.isOnScreen&&n.isOnScreen()){var a=r.reportFun||t;a(e,n,r)}})}r=r||{},n(r);var i=r.$reportModule;o(),(r.$wrapper||c).on("scroll.viewreport",function(){o()})}function a(e,r,o){o=Object.assign(p,o);var n=r.data("report-module"),t=r.find(o.courseCls),i=[],a=[];d.each(t,function(e){var r=t.eq(e);if(!r.data(f)&&r.isOnScreen&&r.isOnScreen()){var n=parseInt(r.data(o.courseIdKey),10);r.data(o.isPkgKey)&&(n+=1e7),a.push(n),i.push(r.data(o.indexKey)),r.data(f,!0)}}),0!==i.length&&0!==a.length&&(e.tdw({action:"exposure",module:n,position:i.join("_"),courseid:a.join("_")}),o.afterReport&&o.afterReport(e,r,o,{cidArr:a,posArr:i}))}function u(e,r){i(e,Object.assign({reportFun:a},r))}var d=e("jquery");e("@tencent/im-jquery.isOnScreen/index");var s=d(document),c=d(window),p={courseCls:"course",indexKey:"index",courseIdKey:"id",isPkgKey:"ispkg"},f="hasReport";o.exports={reportExposure:i,reportCourseExposure:u}});
/*!edu_modules/reportor/lib/report.attr*/
;define("edu_modules/reportor/lib/report.attr",function(t,r,o){var e=t("jquery"),n=function(t){for(var r,o=(t||"").split("&"),e={},n=0;n<o.length;n++)r=o[n].split("="),e[r[0]]=r[1];return e},i=function(t,r,o){return function(i){i.stopPropagation();var p=e.extend({action:o},n(e(this).attr(r)));t.tdw(p,!0)}},p=function(t){e(document).on("mouseenter","[report-hover]",i(t,"report-hover","hover")).on("click","[report-attr]",i(t,"report-attr","click"))};o.exports={init:p,parseAttr:n}});
/*!edu_modules/reportor/index*/
;define("edu_modules/reportor/index",function(r,e,o){"use strict";function t(r){return r&&r.__esModule?r:{"default":r}}var i=r("babel-runtime/core-js/object/assign"),u=t(i),n=r("edu_modules/reportor/tdw/tdw-local"),p=r("edu_modules/reportor/lib/report.cookie"),c=r("edu_modules/reportor/lib/report.exposure"),l=r("edu_modules/reportor/lib/report.attr");r("edu_modules/reportor/lib/util");var s=window.location,d={};n.config({opername:"edu",platform:1,url:s.href,refer:document.referrer},{table:"dc03514",pr_ip:"clientip",pr_t:"reporttime",slicer:4}),n.initLocal&&n.initLocal({whiteDomain:["ke.qq.com"],crossProxy:"//ke.qq.com/storage_proxy.html",crossDomain:!0}),d.tdw=function(r,e){n[e?"reportSync":"report"](r)},d.config=function(r){n.config(u.default({},r||{}))},d.getReportData=n.getCommonData,d.reportPageView=function(r){p.reportPageView(d,r)},d.reportExposure=function(r){return c.reportExposure(d,r)},d.reportCourseExposure=function(r){return c.reportCourseExposure(d,r)},l.init(d),o.exports=d});
/*!@tencent/im-observer/observer*/
;define("@tencent/im-observer/observer",function(t,r,n){var e=function(){var t={};return{listen:function(r,n){return t[r]=t[r]||[],t[r].push(n),this},remove:function(r){var n=t[r];return n?n.length=0:t[r]=void 0,this},one:function(t,r){return this.remove(t),this.listen(t,r)},trigger:function(){var r,n,e;e=Array.prototype.shift.call(arguments),n=t[e]?t[e]:t[e]=[];for(var i=0,o=n.length;o>i;i++)if(r=n[i],r.apply(this,arguments)===!1)return this;return this}}},i={},o=e();o.get=function(t){return i[t]||(i[t]=e()),i[t]},n.exports=o});
/*!edu_modules/edu-login/wxLongpoll*/
;define("edu_modules/edu-login/wxLongpoll",function(e,i,t){var o=e("edu_modules/check/check"),n=e("@tencent/im-observer/observer");t.exports={timeout:null,timespace:2e3,handle:function(){var e=this;o.isWeixinUser()&&(clearTimeout(e.timeout),n.get("login").trigger("weixinWillDone"),n.get("login").trigger("weixinDone"))},init:function(){var e=this;clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.handle()},e.timespace)},destroy:function(){clearTimeout(self.timeout)}}});
/*!/edu_modules/edu-login/template/wrap.tpl_tpl*/
;define("/edu_modules/edu-login/template/wrap.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="login-tab mod-tab" data-type="login"> <a href="javascript:void(0)" id="login_close" class="btn-close" title="关闭"> <i class="icon-font i-close"></i> </a> <ul class="mod-tab__ul"> <li class="mod-tab__li mod-tab__li-qq ',qqConfig.inited?"mod-tab__li_current":"",'" data-index="0"> <a class="tab-link" href="javascript:void(0);"><i class="icon-font i-qq"></i>QQ账号登录</a> </li> <li class="mod-tab__li mod-tab__li-wx ',wxConfig.inited?"mod-tab__li_current":"",'" data-index="1"> <a class="tab-link" href="javascript:void(0);"><i class="icon-font i-weixin"></i>微信账号登录</a> </li> </ul> <div class="mod-tab__content ',qqConfig.inited?"":"hide",'" data-inited="',qqConfig.inited,'"> <div class="mod-tab__content-tips">微信和QQ是两个独立账号，账号信息不互通</div> <div class="mod-tab__content-wrap mod-tab__content-wrap_qq"> <iframe name="login_frame_qq" src="',qqConfig.url,'" frameborder="0" scrolling="no" width="626px" height="370px"></iframe> </div> </div> <div class="mod-tab__content ',wxConfig.inited?"":"hide",'" data-inited="',wxConfig.inited,'"> <div class="mod-tab__content-tips">微信和QQ是两个独立账号，账号信息不互通</div> <div class="mod-tab__content-wrap wx__tab"> <label class="login-wx-tips">安全登录，防止被盗</label> <div class="login-code-container loading"> </div> </div> </div></div>'),_$out_.join("")}}});
/*!/edu_modules/edu-login/template/enter.tpl_tpl*/
;define("/edu_modules/edu-login/template/enter.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="login-tab mod-tab"> <a href="javascript:void(0)" id="login_close" class="btn-close" title="关闭"> <i class="icon-font i-close"></i> </a> <div class="enter-title">选择账号登录类型</div> <div class="enter-content"> <div class="content-avatar"> <div class="avatar-img"></div> </div> <div class="content-btns"> <a href="javascript:void(0);" data-type="1" class="js-btns-enter btns-enter btns-enter-qq"> <i class="icon-font i-qq"></i>QQ登录</a> <a href="javascript:void(0);" data-type="2" class="js-btns-enter btns-enter btns-enter-wx"> <i class="icon-font i-weixin"></i>微信登录</a> </div> </div></div>'),_$out_.join("")}}});
/*!/edu_modules/edu-login/template/weappcode.tpl_tpl*/
;define("/edu_modules/edu-login/template/weappcode.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return weappCode?_$out_.push('<div class="login-weapp-code"> <img class="weappcode-img" src="data:image/png;base64,',weappCode,'"> <div class="wechat-qrcode-mask"></div> <div class="wechat-qrcode-invalid-mask"> <div class="qrcode-invalid-mask"></div> <div class="qrcode-invalid-tips">二维码失效<br>请点击刷新</div> </div></div>'):url&&_$out_.push(' <iframe name="login_frame_wx" src="',url,'" frameborder="0" scrolling="no" width="100%" height="100%"></iframe>'),_$out_.join("")}}});
/*!edu_modules/edu-login/edu-login*/
;define("edu_modules/edu-login/edu-login",function(require,exports,module){"use strict";function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function checkLoginStateDowngrade(){getLoginStateFailNum>4&&(renderWeappCodeContainer(),clearInterval(weappLoginStateTimer),getLoginStateFailNum=0)}function bindCloseEvent(){var e=$("#login_close");e.off("click").on("click",function(){clearInterval(weappLoginStateTimer),global.ptlogin2_onClose()})}function bindEvent(){var e=$(".login-tab"),o=e.find(".mod-tab__content");bindCloseEvent(),e.off("changeTab").on("changeTab",function(e,n){var i=0===n;Tool.reportLoginTabExposure(i);var t=o.eq(n);if(1!==t.data("inited")){var a=i?Tool.generateUrlForQq(config):Tool.generateUrlForWx();t.find("iframe").attr("src",a),t.data("inited",1)}})}function bindChooseEvent(){var e=$(".login-tab");bindCloseEvent(),e.off("click").on("click",".js-btns-enter",function(){var e=$(this),o=e.data("type");Tool.cookie.set(chooseLoginTypeCookie,o),show()})}function messageCb(e){var o=e||global.event;if(-1!==(e.origin||"").indexOf("ptlogin2")){var n;switch(n="undefined"!=typeof JSON?JSON.parse(o.data):Tool.str2JSON(o.data),n.action){case"close":global.ptlogin2_onClose();break;case"resize":global.ptlogin2_onResize(n.width,n.height)}}}function bindMessageAPI(e){"undefined"!=typeof global.postMessage&&Tool.checkMode(e)&&$win.on("message",messageCb)}function unbindMessageAPI(e){"undefined"!=typeof global.postMessage&&Tool.checkMode(e)&&$win.off("message",messageCb)}function init(e){e&&(fromSource=e.source,$loginFrame&&(e={succ:e.succ,close:e.close}),config=$.extend({},DEFAULT_CONFIG,e),config.succ&&succQuene.push(config.succ),config.close&&closeQuene.push(config.close))}function getFrameDom(){if($loginFrame)return $loginFrame;var e=380;return $loginFrame=$("<div>").addClass("ptlogin-wrap"),$loginFrame.css({"margin-top":-e/2,visibility:"visible",height:e}),$loginFrame}function initChoose(){$loginFrame=getFrameDom(),$loginFrame.html(enterTpl({})),$body.append($loginFrame)}function showMask(e){e&&!$mask&&($mask=$("<div>").addClass("ptlogin-mask"),$body.append($mask))}function showFrame(e){reportMonitor(34366170),report.tdw({action:"pageview",page:"loginpage_pc"});var o=1===e,n=o?Tool.generateUrlForQq(config):aboutBlank;$loginFrame=getFrameDom(),renderWXLoginCode(function(e){isWeappCodeLogin=e?!0:!1,Tool.reportLoginTabExposure(o)}),$loginFrame.html(frameTpl({qqConfig:{url:n,inited:o?1:0},wxConfig:{inited:o?0:1}})),longpoll.init(),$body.append($loginFrame)}function renderWXLoginCode(e){Tool.generateWeappCode(function(o){if(o&&0===o.retcode){var n=o&&o.result&&o.result.QRCode;n&&(reportMonitor(34366171),$loginFrame.find(".login-weapp-code").removeClass("exprie"),clearInterval(weappLoginStateTimer),weappLoginStateTimer=setInterval(function(){Tool.getWeappLoginState()},700)),e&&e(n)}else isWeappCodeLogin=!1,reportMonitor(34366172);renderWeappCodeContainer(n)},function(){e&&e(),reportMonitor(34366172)})}function renderWeappCodeContainer(e){e||reportMonitor(34366176),$loginFrame.find(".wx__tab .login-code-container").html(weappcodeTpl({weappCode:e||null,url:Tool.generateUrlForWx()||null})).removeClass("loading")}function show(e){init(e),localStore.set("mobileBindInfo_lastLoginTime",+new Date),closeQuene.push(function(){localStore.remove("mobileBindInfo_lastLoginTime"),localStore.remove("mobileBindInfo_jump")});var o=parseInt(cookie.get(chooseLoginTypeCookie),10),n=config.needMask,i=config.mode;if(showMask(n),!$loginFrame||!$loginFrame.data("type")){if(!o)return initChoose(e),void bindChooseEvent();bindMessageAPI(i),showFrame(o),tab=new Tab(".login-tab",{pos:o-1}),bindEvent(),$.event.trigger("loginShow")}}function hide(){var e=config.mode;$mask.remove(),$loginFrame.remove(),$mask=void 0,$loginFrame=void 0,succQuene=[],closeQuene=[],unbindMessageAPI(e)}function logout(){$.getScript("//ui.ptlogin2.qq.com/js/ptloginout.js",function(){pt_logout.logout(function(){for(var e=0,o=weixinCookie.length;o>e;e++)cookie.del(weixinCookie[e],hostDomain),cookie.del(weixinCookie[e],eduDomain);localStore.remove("__userinfo"),$.event.trigger("logout"),config.onStatusChanged&&config.onStatusChanged(),location.reload()})})}function isLogin(){return!!cookie.get("p_luin")&&!!cookie.get("p_lskey")||!!cookie.get("p_uin")&&!!cookie.get("p_skey")||!!cookie.get("uin")&&!!cookie.get("skey")||!!cookie.get("uid_uin")&&!!cookie.get("uid_a2")}function setUin(e){config.uin=e}function isUinChanged(){return config.uin!=cookie.uin()}function skey(){return cookie.get("p_lskey")||cookie.get("p_skey")||cookie.get("skey")}var $=require("jquery"),Check=require("edu_modules/check/check"),Tab=require("@tencent/im-tab-man/tab"),cookie=require("edu_modules/util.cookie/util.cookie"),localStore=require("edu_modules/local.data/local.data"),report=require("edu_modules/reportor/index"),longpoll=require("edu_modules/edu-login/wxLongpoll"),frameTpl=require("/edu_modules/edu-login/template/wrap.tpl_tpl"),enterTpl=require("/edu_modules/edu-login/template/enter.tpl_tpl"),weappcodeTpl=require("/edu_modules/edu-login/template/weappcode.tpl_tpl"),DEFAULT_CONFIG={needMask:!0,mode:"xui",closeIcon:!1,target:"self",appid:715030901,daid:233},weixinCookie=["uid_a2","uid_type","uid_uin"],chooseLoginTypeCookie="ke_login_type",aboutBlank="about:blank",protocal=location.protocol,wxCssUri=[protocal,"//8.url.cn/edu/edu_modules/edu-login/nohash/wxLogin.css?max_age=3153600"].join(""),global=window,$win=$(global),$body=$("body"),tab,$mask,$loginFrame,config={},hostDomain=(location.hostname.match(/(\.\w+){2}$/)||["."+location.hostname])[0],eduDomain=(location.hostname.match(/(\.\w+){3}$/)||["."+location.hostname])[0],succQuene=[],closeQuene=[],weappLoginRequestTool={get_miniapp_qrcode:"/cgi-proxy/get_miniapp_qrcode",get_login_state:"/cgi-proxy/get_login_state"},getLoginStateFailNum=0,weappLoginStateTimer=null,isWeappCodeLogin=!0,fromSource="",weappId="wxa2c453d902cdd452",reportMonitor=function(e){var o="/cgi-bin/activity_platform/report/report_vm",n=[];e&&(isArray(e)?n=e:n.push(e),n.length&&((new Image).src=o+"?monitors=["+n.join(",")+"]&_t="+(new Date).getTime()))},Tool={generateUrlForQq:function(e){var o={target:e.target,appid:e.appid,hide_close_icon:1-!!e.closeIcon,s_url:e.succUrl},n=[],i="/login_proxy.html"+(e.domain?"#domain="+e.domain:"");if(e.daid&&(o.daid=e.daid),e.noAuth&&(o.pt_no_auth=1),this.checkMode(config.mode)){n.push("//xui.ptlogin2"+hostDomain+"/cgi-bin/xlogin?");var t=location.href.split(/#|\?/)[0],a=t.indexOf("/",t.indexOf("//")+2),r=encodeURIComponent((-1!==a?t.substring(0,a):t)+i);o.proxy_url=e.proxyUrl||r,o.s_url=e.succUrl||r}else o.s_url=e.succUrl||encodeURIComponent("//ui.ptlogin2."+hostDomain+i),n.push("//ui.ptlogin2"+hostDomain+"/cgi-bin/login?");e.style&&(o.style=e.style),o.low_login_enable=1;for(var l in o)n.push(l+"="+o[l]);return n.join("&")},generateUrlForWx:function(){var e=location.href,o=[protocal,"//ke.qq.com/cgi-bin/uidaccount/login?ttype=4&account_type=2","&appid=wxa1fd810b3796f1a4&buz_id=122052647&redirect_uri=",encodeURIComponent(e)].join("");return["//open.weixin.qq.com/connect/qrconnect?appid=wxa1fd810b3796f1a4&redirect_uri=",encodeURIComponent(o),"&href=",encodeURIComponent(wxCssUri),"&response_type=code&scope=snsapi_login"].join("")},generateWeappCode:function(e,o){$.ajax({type:"Get",url:weappLoginRequestTool.get_miniapp_qrcode+"?rd="+Math.random(),data:{appId:weappId,page:"pages/login/login",width:200,autoColor:!1,red:0,blue:0,green:0,isHyaLine:!1},success:function(o){e&&e(o)},error:function(e){reportMonitor(34366172),o&&o(e),isWeappCodeLogin=!1,renderWeappCodeContainer()}})},getWeappLoginState:function(){$.ajax({type:"Get",url:weappLoginRequestTool.get_login_state+"?rd="+Math.random(),success:function(e){if(e&&0===e.retcode){var o=e&&e.result.state;switch(o){case 0:break;case 1:reportMonitor(34366173),setTimeout(function(){location.reload()},0);break;case 2:break;case 3:reportMonitor(34366174),$(".login-weapp-code").addClass("exprie").on("click",function(){renderWXLoginCode()}).find(".weappcode-img").remove(),clearInterval(weappLoginStateTimer);break;case 4:reportMonitor(34366175),renderWeappCodeContainer(),clearInterval(weappLoginStateTimer);break;default:clearInterval(weappLoginStateTimer)}}else getLoginStateFailNum++,checkLoginStateDowngrade()},error:function(){getLoginStateFailNum++,checkLoginStateDowngrade()}})},reportLoginTabExposure:function(e){report.tdw({action:"exposure",page:"loginpage_pc",module:e?"QQ":"WX",position:e?"":isWeappCodeLogin?2:1,ver1:fromSource})},execTasks:function(e){for(var o=0,n=(e||[]).length;n>o;o++)try{e[o]()}catch(i){}},checkMode:function(e){return"xui"===e},str2JSON:function str2JSON(str){return eval("("+str+")")},getMaxHour:function(){var e=new Date("2038-12-31");return(e.getTime()-new Date)/36e5},cookie:{set:function(e,o){cookie.set(e,o,eduDomain,"/",Tool.getMaxHour())}}};!function(){isLogin()&&Tool.cookie.set(chooseLoginTypeCookie,Check.isWeixinUser()?2:1),global.ptlogin2_onClose=function(){Tool.execTasks(closeQuene),hide(),clearTimeout(longpoll.timeout),$.event.trigger("loginCancel")},global.ptlogin2_onResize=function(e,o){$loginFrame&&$loginFrame.css({width:e-4,height:o,"margin-top":-o/2,"margin-left":-e/2,visibility:"visible"})},global.ptlogin2_login_ok=function(){if(!config.uin)for(var e=0,o=weixinCookie.length;o>e;e++)cookie.del(weixinCookie[e],hostDomain),cookie.del(weixinCookie[e],eduDomain);Tool.execTasks(succQuene),$.event.trigger("login"),config.onStatusChanged&&config.onStatusChanged(),hide()}}();var Login={init:init,show:show,hide:hide,logout:logout,isLogin:isLogin,uin:cookie.uin,skey:skey,setUin:setUin,isUinChanged:isUinChanged};global.Login=Login,module.exports=Login});
/*!edu_modules/bkn/index*/
;define("edu_modules/bkn/index",function(e,n,t){function o(e){if(!e)return"";for(var n=5381,t=0,o=e.length;o>t;++t)n+=(n<<5)+e.charAt(t).charCodeAt();return 2147483647&n}function r(){return u("p_lskey")||u("p_skey")||u("skey")}function u(e){if(f)return"";var n=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return n?decodeURIComponent(n[2]):""}function i(){var e=0==u("uid_type");return e?r():u("uid_a2")||r()}function d(){return o(i())}var c="object"==typeof window&&window&&"undefined"!=typeof document,f=!c;t.exports=d});
/*!edu_modules/mm-report/mm-report*/
;define("edu_modules/mm-report/mm-report",function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=window,n=e.navigator,t=n?n.userAgent.toLowerCase():"";return/\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(t)?"ios":t.indexOf("android")>-1||t.indexOf("adr")>-1?"android":"pc"}function a(e){e=e||g;var n=e.length;n>10&&(n=10);var t=e.splice(0,n);if(t.length){var o=s+"&uin"+t[0].uin+"&apn="+(t[0].apn||m.apn);o+="&key=cgi,type,code,time";for(var r=["cgi","type","code","time"],a=0;a<r.length;a++)for(var i=0;i<t.length;i++){var u=t[i];o+="&"+(i+1)+"_"+(a+1)+"="+u[r[a]]}o+="&ignoreRandom="+Math.random();var c=new Image;c.src=o}}function i(){var e=["domain","appid","platform"].map(function(e){return e+"="+m[e]});s+="?"+e.join("&")}function u(e){m.platform=r(),f.default(m,e),i()}function c(e){var n=e.delay;return 0===n||e.apn!==m.apn?(a([e]),!0):!1}function d(e,n,t,o,r){if(!l){h&&clearTimeout(h);var i=f.default({},m,r);i.cgi=encodeURIComponent(e),i.code=n,i.time=t,i.uin=o,i.type=0===n?1:/^[4|5][0-9]{2}$/.test(n)?2:3,c(i)||(g.push(i),h=setTimeout(a,v))}}var p=e("babel-runtime/core-js/object/assign"),f=o(p),m={appid:10028,platform:"pc",domain:"ke.qq.com",rate:1,apn:""},l="undefined"==typeof document,s="//report.huatuo.qq.com/code.cgi",g=[],v=2e3,h=null;u(),t.exports={config:u,report:d}});
/*!edu_modules/edu-db/edu-db*/
;define("edu_modules/edu-db/edu-db",function(require,exports,module){function noop(){}function extendCallBack(e,t,a,r){return function(){!a.apply(e,t)&&r.apply(e,t)}}function extend(e,t,a){if("object"!=typeof e)return e;t=t||{};for(var r in t){var o,n;e[r]=a&&"function"==typeof(o=e[r])&&"function"==typeof(n=t[r])?extendCallBack(e,arguments,n,o):t[r]}}function encryptSkey(e){if(!e)return"";for(var t=5381,a=0,r=e.length;r>a;++a)t+=(t<<5)+e.charAt(a).charCodeAt();return 2147483647&t}var $=require("jquery"),bkn=require("edu_modules/bkn/index"),Login=require("edu_modules/edu-login/edu-login"),MM=require("edu_modules/mm-report/mm-report"),Cookie=require("edu_modules/util.cookie/util.cookie"),Check=require("edu_modules/check/check"),global=this,Badjs=window.Badjs,__DEBUG_STR__=function(){return""},$reportParam={_404:0,_5xx:0},isLoginError=!1,getCookie=Cookie.get,_uin;_uin=Check.isWeixinUser()?getCookie("uid_uin")||0:getCookie("p_luin")||getCookie("p_uin")||getCookie("uin")||0;var uinCache={},ajax=function(e,t,a,r,o,n,c){function i(e){if("string"==typeof e&&e.indexOf("uin")>=0)u=!0;else for(var t in e)"string"==typeof t&&t.indexOf("uin")>=0&&(u=!0),"object"==typeof e[t]&&i(e[t])}var s=new Date,u=!1;i(t);var l=e.split("?")[0];u&&!uinCache[l]&&(uinCache[l]=!0);var p={type:r,url:e,data:t,async:c===!1?!1:!0,success:function(t){function r(e){for(var t in e)"string"==typeof t&&t.indexOf("uin")>=0&&(o=!0),"object"==typeof e[t]&&r(e[t])}var o=!1;r(t);var n=e.split("?")[0];o&&!uinCache[n]&&(uinCache[n]=!0);var c=new Date-s;a&&a(t,c)},error:function(e){var t=new Date-s;a&&a({ec:e.status?e.status:-1e3},t)}};return n&&(p.timeout=n),o&&(p.dataType=o),$.ajax(p)},cache={};module.exports={abTest:!!(new Date%2),status:{bkn:""},"data-cache":{},isLoginError:function(){return isLoginError},encryptSkey:encryptSkey,getCookie:getCookie,getBkn:function(){return bkn()},initReport:function(){},get:function(e,t,a,r,o,n){var c=[];for(var i in t)c.push(i+"="+encodeURIComponent(t[i]));return c.push("r="+Math.random()),-1==e.indexOf("?")&&(e+="?"),e+=c.join("&"),ajax(e,null,a,"GET",r,o,n)},post:function(e,t,a,r,o,n){var c=[];for(var i in t)c.push(i+"="+encodeURIComponent(t[i]));return c.push("r="+Math.random()),ajax(e,c.join("&"),a,"POST",r,o,n)},cgiHttp:function(opt){if(!opt||!opt.url)return void 0;var _this=this;opt.param=opt.param||{};var timeOpt={url:opt.url},httpFunction,callBack=function(data,ajax_cost){if(timeOpt.time=+new Date,"object"!=typeof data)if(data)if("{"===data.charAt(0)&&"}"===data.charAt(data.length-1))try{data=window.JSON&&JSON.parse?JSON.parse(data):eval("("+data+")")}catch(e){data={ec:999,text:data,msg:"data is no json"}}else data={ec:998,text:data,msg:"data is hijack"};else data={ec:997,text:data,msg:"data is null"};data.delay=ajax_cost,"retcode"in data?data.ec=data.retcode:data.retcode=data.ec;var ec=data.ec,errFlag;switch(ec){case 0:errFlag=!1,(opt.succ||function(){})(data);break;case 111:case-1001:case 1e5:case 100021:isLoginError=!0,window.jQuery&&window.jQuery.event.trigger("logout"),opt.noNeedLogin?errFlag=!0:"undefined"!=typeof Login?Login.show({succ:function(){opt.param.bkn=_this.status.bkn=bkn(),httpFunction(opt.url,opt.param,callBack,opt.dataType,opt.timeout,opt.async)},close:function(){"function"==typeof opt.close&&opt.close.call(this),Badjs&&Badjs("CGI Error , LoginFailed , req:"+opt.url+", ec:"+ec,location.href,0,403860,2)}}):errFlag=!0,Badjs&&Badjs("CGI Error , Need Login,  req:"+opt.url+", ec:"+ec,location.href,0,403855,2);break;case 100021:opt.ldwRetry?errFlag=!0:(opt.ldwRetry=!0,_this.status.bkn=bkn(),opt.param.bkn=_this.status.bkn,httpFunction(opt.url,opt.param,callBack,opt.dataType,opt.timeout,opt.async)),Badjs&&Badjs("CGI Error , Basekey Error , req:"+opt.url+", ec:"+ec,location.href,0,403856,2);break;case 100001:errFlag=!0,Badjs&&Badjs("CGI Error , Param Error:"+JSON.stringify(opt.param)+" , req:"+opt.url+", ec:"+ec,location.href,0,403858,2);break;case 100003:errFlag=!0,Badjs&&Badjs("CGI Error , Internal Error , req:"+opt.url+", ec:"+ec,location.href,0,403857,2);break;case-1e3:errFlag=!0,ec=data.ec=0;break;case 99999:errFlag=!0,Badjs&&Badjs("CGI Error , Need Show VerifyCode Error , red:"+opt.url+", ec:"+ec,location.href,0,0,2);break;case 101402:case 101403:case 101404:case 101405:case 101406:case 102404:case 103404:case 106401:case 106402:case 106403:case 106404:case 106405:case 106406:case 106407:case 106409:case 106410:case 106411:case 106412:case 106413:case 106415:case 106416:case 106425:case 106427:case 106435:case 106457:case 110403:case 109113:case 109122:errFlag=!0,Badjs&&Badjs("CGI Error , Bussines Error , req:"+opt.url+", ec:"+ec,location.href,0,408941,2);break;default:errFlag=!0,Badjs&&Badjs("CGI Error , Other Error , req:"+opt.url+", ec:"+ec,location.href,0,403859,2)}if(MM.report(opt.url,ec,ajax_cost,Cookie.uin()),errFlag){var isBlockDefaultErr=(opt.err||function(){})(data);if(ec&&!_this.status.isDialog&&106457!==ec)if(isBlockDefaultErr){var msg=isBlockDefaultErr.msg;if(msg){msg+=__DEBUG_STR__({url:opt.url,ret:data},"info");var __opt=isBlockDefaultErr.opt||{},_onCancel=__opt.onCancel;opt.onCancel=function(){_onCancel.apply(__opt,arguments),_this.status.isDialog=!1},$.modal.alert(msg,__opt),_this.status.isDialog=!0}}else{var defaultWording="服务器繁忙，请稍后再试",wording={100001:"输入参数错误",100003:"服务器内部错误，请稍后再试",110405:"没有管理权限，请稍后再试"}[ec]||defaultWording,_finally=function(){switch(_this.status.isDialog=!1,ec){case 106507:location.href="/index.html";break;case 106406:case 106407:case 110405:location.href="/index.html"}};if(106507===ec)return _this.status.isDialog=!0,$.modal.alert("由于触犯平台规则，机构功能禁止使用7天",{title:"提示",onCancel:_finally,onAccept:_finally,onClose:_finally});$.modal.alert(wording+("("+ec+")")+__DEBUG_STR__({url:opt.url,ret:data},"info"),{type:"err",onCancel:_finally,onAccept:_finally,onClose:_finally}),_this.status.isDialog=!0}}};opt.param.bkn=bkn(),opt.type&&"GET"!=opt.type.toUpperCase()?(opt.type="POST",httpFunction=_this.post):(opt.type="GET",httpFunction=_this.get);var ret=httpFunction(opt.url,opt.param,callBack,opt.dataType,opt.timeout,opt.async);return ret},extend:function(e,t,a,r){var o=Object.prototype.toString.call(e);if("[object String]"===o){a=a||this;var n={};n[e]=t,extend(a,n,r)}else"[object Object]"===o&&((null===t||void 0===t)&&arguments.length>=4?(a=a||this,extend(a,e,r)):(r=a,a=t||this,extend(a,e,r)))},addCgi:function(e,t){var a=this,r={};r[e]=function(e){var r={};r.param=e.param||{},r.url=t,r.succ=function(t){(e.succ||function(){})(t)},r.err=function(t){(e.err||function(){})(t)},a.cgiHttp(r)},this.extend(r)},httpMethod:function(e){var t=this;return function(a){var r={};return r.async=e.async===!1?!1:!0,r.param=a.param,r.timeout=a.timeout,e.type&&(r.type=e.type),e.dataType&&(r.dataType=e.dataType),e.noNeedLogin&&(r.noNeedLogin=e.noNeedLogin),r.url=e.url,r.succ=function(t){return(e.succ||a.succ||noop)(t)},r.err=function(t){return(e.err||a.err||function(){})(t)},r.close=function(t){return(e.close||a.close||function(){})(t)},r.isUseModal=a.isUseModal,t.cgiHttp(r)}},wrapGroup:function(e){return e||{}},save:function(e,t){cache[e]=t},getCache:function(e){return cache[e]},clearCache:function(e){cache[e]=null}}});
/*!edu_modules/edu-render/edu-render*/
;define("edu_modules/edu-render/edu-render",function(e,t,r){"use strict";var n=e("jquery"),i=e("edu_modules/edu-db/edu-db");i.extend({get_taid:i.httpMethod({url:"/cgi-bin/web_ke/get_term_info",noNeedLogin:!0})}),n.render={},n.render.time=function(){function e(e,t){return parseInt(0===g?e:parseInt(e)+g*(t?1:-1))}function t(e){return("0"+e).slice(-2,3)}function r(r,n,i,u){n=n||1;var c=i?new Date(u?i:1e3*e(i,!0)):new Date,s=new Date(u?r:1e3*e(r,!0)),d=s.getHours()+":"+t(s.getMinutes()),l="";l=c.getFullYear()===s.getFullYear()&&c.getMonth()===s.getMonth()&&c.getDate()===s.getDate()?"今天":s.getMonth()+1+"月"+s.getDate()+"日";var m=["周日","周一","周二","周三","周四","周五","周六"];switch(n){case 1:return l+" "+d;case 2:return l;case 3:return d+":"+t(s.getSeconds());case 4:return a("M月DD日",s,!0)+" "+m[s.getDay()];case 5:return o(s,c,"1-en",!0);case 6:return a("YYYY-MM-DD hh:mm",s,!0);case 7:return a("YYYY-MM-DD",s,!0)}}function i(e){var t=Math.floor(e/60/60),r=Math.floor(e/60%60);return t+":"+r}function a(t,r,n){function i(e,t){return t=t.length,e=e||0,1==t?e:String(Math.pow(10,t)+e).slice(-t)}return r?("number"==typeof r&&(r=new Date(r)),!n&&(r=new Date(1e3*e(parseInt(r.valueOf()/1e3,10),!0))),t.replace(/([YMDhsm])\1*/g,function(e){switch(e.charAt()){case"Y":return i(r.getFullYear(),e);case"M":return i(r.getMonth()+1,e);case"D":return i(r.getDate(),e);case"w":return r.getDay()+1;case"h":return i(r.getHours(),e);case"m":return i(r.getMinutes(),e);case"s":return i(r.getSeconds(),e)}})):""}function o(e,t,r){r=r||"default",t=t||new Date,e=new Date(1e3*e),t=t?new Date(1e3*t):new Date;var n=p[r]||p[1],i=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1);e instanceof Date&&(e=e.getTime());for(var a,o,u=i-e,c=0,s=n.length;s>c&&(a=n[c],u>1e3*a[0]);c++)o=a[1];return o}function u(e,t){e=new Date(1e3*e),t=t?new Date(1e3*t):new Date;var r=(t-e)/1e3;return 60>r?"刚刚":3600>r?Math.floor(r/60)+"分钟前":86400>r?Math.floor(r/3600)+"小时前":864e4>r?Math.floor(r/24/3600)+"天前":"很久之前"}function c(e,t){e=new Date(1e3*e),t=t?new Date(1e3*t):new Date;var r=(e-t)/1e3;if(0>r)return"已结束";if(60>r)return"1分钟";var n=Math.floor(r/3600),i=Math.ceil((r-3600*n)/60),a=(n?n+"小时":"")+(i?i+"分钟":"");return a}function s(e,t){var r=0,n=0,i=0,a=0,o="",u="",c="dd天hh小时mm分ss秒";return e=parseInt(e,10)||0,r=Math.floor(e/86400),e%=86400,n=Math.floor(e/3600),e%=3600,i=Math.floor(e/60),a=e%60,u="function"==typeof t?t(r,n,i,a)||c:"string"==typeof t?t||c:c,o=u.replace(/dd/i,r).replace(/hh/i,n).replace(/mm/i,i).replace(/ss/i,a)}function d(e,t){if(!e||!e.begintime||!e.endtime)return{ec:1};var r=1e3*e.begintime,i=1e3*e.endtime,a=(new Date).getTime(),o=0;t&&t.server_time?o=1e3*t.server_time+100-a:e.id&&v[e.id]&&(o=v[e.id]),(o>2e3||-2e3>o)&&(o=0),e.id&&o&&(v[e.id]=o),a+=o;var u;u=r>a?1:a>i?-1:0;var c={ec:0,status:u};return o&&(c.t_delta=o),-1==u&&(c.expired_str=n.render.time.format(e.endtime,5,Math.floor(a/1e3))),c}function l(e){var t,r,n=new Date(1e3*e.bgtime),i=new Date(1e3*e.endtime),o=new Date(1e3*e.systime);return n.getFullYear()===o.getFullYear()?(t="MM月DD日",r=i.getFullYear()===o.getFullYear()?"MM月DD日":"YY年MM月"):(t="YY年MM月",r="YY年MM月"),{bgtime:a(t,n),endtime:a(r,i)}}var m=480,f=(new Date).getTimezoneOffset(),g=60*(m+f),p={1:[[0,"今天"],[86400,"昨天"],[259200,"一周内"],[604800,"更早"]],"1-en":[[0,"today"],[86400,"yesterday"],[259200,"thisweek"],[604800,"earlier"]],2:[[60,"刚刚"],[3600,"$m分钟前"],[36e3,"$h小时前"],[82800,"今天"],[86400,"昨天"],[172800,"前天"],[259200,"一周内"],[604800,"一周前"],[2592e3,"一个月前"],[7776e3,"三个月前"],[15811200,"半年前"],[31536e3,"一年前"]]},v={};return{fixTimezone:e,format:r,changeHour:i,formatDate:a,courseStatus:d,fromNow:o,fromNowStr:u,fromStartTime:c,formatTermTime:l,formatRemainTime:s}}();var a=function(e,t,r){return e>=t&&r>e?!0:!1};n.render.formatStudyNum=function(e){var t="0";return t=a(e,0,1e4)?e+"":a(e,1e4,1e8)?Math.floor(e/1e4)+"万":Math.floor(e/1e8)+"亿"},n.render.fomartTermDuration=n.render.formatTermTuration=function(e){var t,r;if(e.bgtime){var i=n.render.time.formatTermTime(e);return{begin:i.bgtime+"开课",end:i.endtime+"结课"}}t="随到随学";var a=new Date(1e3*e.endtime),o=new Date(1e3*e.systime);return r=a.getFullYear()===o.getFullYear()?"MM月DD日":"YY年MM月",{begin:t,end:n.render.time.formatDate(r,a)+"结课"}},n.render.summary=function(e){return(e||"").replace(/<br>/g,"")},n.render.wrap=function(e){return(e||"").replace(/<br>/g,"\n")},n.render.qb=function(e){var t=(e/100).toFixed(2);return(t+"").replace(/\.?0{1,2}$/,"")+"Q币"},n.render.price=function(e,t,r,n){if(0===e)return n?t?"0.00":"0.00元":"免费";if(e){var i=(e/100).toFixed(2);if(r){for(var a=i.split("."),o=a[0].split(""),u=a[1],c="",s=o.length,d=s-1,l=0;d>=0;d--,l++)l%3===0&&0!==l&&(c=","+c),c=o[d]+c;i=c+"."+u}return t?i:i+"元"}return""},n.render.formatPrice=function(e,t){var r;return t||(t={}),0===e?r=t.showFreeNumber?"¥0.00":"免费":e?(r=(e/100).toFixed(2),r=t.noYen?r:"¥"+r):r="",r},n.render.url=function(){function t(e){e+="";for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r).toString(16).toUpperCase());return t.join("")}function r(e,t,r,n){return e?"tencent://"+e+"/?subcmd="+t+"&param="+r+(n?"&fuin="+n:""):""}function a(e,n,i,a){return e?(i=t(i),r(e,n,i,a)):""}function o(e,t){var r,i,o;switch(e){case"all":r="groupwpa",i="all",o='{"groupUin":'+t.gc+', "timeStamp":1383552440}';break;case"OpenGroup":r="groupwpa",i="OpenGroup";var u=t.appId||0;o='{"ExtParam":{"appId":'+u+'},"groupUin":'+t.guin+',"visitor":1}';break;case"VisitPublicGroup":r="VisitPublicGroup",i="VisitPublicGroup",o='{"ExtParam":{"appId":"0"},"groupUin":'+t.gc+',"visitor":1}';break;case"CourseLive":r="VisitPublicGroup",i="VisitPublicGroupEx",o='{"ExtParam":{"appId":"21","appParam":"{\\"CourseId\\":'+t.courseId+'}"},"groupUin":'+t.gc+',"visitor":1}'}if(r){var c=n.cookie.uin()||void 0;return a(r,i,o,c)}return""}return{live:function(t,r){var a=e("edu_modules/edu-login/edu-login"),o=e("edu_modules/check/check");r||(r={});var u,c=n(t),s=c.data("cid"),d=(c.data("aid"),c.data("tid")),l=c.data("taid"),m=navigator.platform,f=!m||"Win32"===m||"Win64"===m||"Windows"===m;if(c.attr("report-close")&&c.trigger("doReport"),o.isWeixinUser())return l?void window.open("//ke.qq.com/webcourse/index.html#course_id="+s+"&term_id="+d+"&taid="+l):void(f?i.get_taid({param:{course_id:s,term_id:d},succ:function(e){var t=e.result.term_info.lastest_live_task,r=t&&t.taid;window.open("//ke.qq.com/webcourse/index.html#course_id="+s+"&term_id="+d+"&taid="+r)}}):(u=window.open("","_blank"),i.get_taid({param:{course_id:s,term_id:d},succ:function(e){function t(){g="//ke.qq.com/webcourse/index.html#course_id="+s+"&term_id="+d+"&taid="+n,u&&(u.location=g)}var r=e.result.term_info.lastest_live_task,n=r&&r.taid;setTimeout(t(),0)}})));var g=c.data("target"),p=(c.data("type"),0===g.indexOf("tencent"));if(c.attr("href","javascript:void(0);"),p){if(!a.isLogin())return void a.show({succ:function(){n(document).trigger("loginSucc"),setTimeout(function(){location.reload()},200)}});if(g=g.replace(/(&)?fuin=(\d)*/,""),!f)return l?(g="//ke.qq.com/webcourse/index.html#course_id="+s+"&term_id="+d+"&taid="+l,window.open(g,"_blank")):(u=window.open("","_blank"),i.get_taid({param:{course_id:s,term_id:d},succ:function(e){function t(){g="//ke.qq.com/webcourse/index.html#course_id="+s+"&term_id="+d+"&taid="+n,u?u.location=g:window.open(g,"_blank")}var r=e.result.term_info.lastest_live_task,n=r&&r.taid;setTimeout(t(),0)}})),void(p=!1)}if(p){var v=n.cookie.uin();g.indexOf("fuin")<0&&v&&(g=g+"&fuin="+v),g+="&st="+(new Date-0),r.newcard?n(document).trigger("openQQClientLiveNew",[t]):n(document).trigger("openQQClientLive",[t])}window.open(g,p?"_self":"_blank")},enterAgencyHall:function(t){var r=n(t).attr("data-target"),i=e("edu_modules/edu-login/edu-login");if(n(t).attr("href","javascript:void(0);"),n.bom.checkPlatform()){if(!i.isLogin())return void i.show({succ:function(){n(document).trigger("loginSucc"),setTimeout(function(){n(t).click()},200)}});r=r.replace(/(&)?fuin=(\d)*/,""),n(document).trigger("enterAgencyHall",[t]);var a=n.cookie.uin();r.indexOf("fuin")<0&&a&&(r=r+"&fuin="+a),r+="&st="+(new Date-0),window.open(r,"_self")}},liveForOpenRoom:function(e,t){var r=n(e).attr("data-target"),i=0===r.indexOf("tencent");if(n(e).attr("href","javascript:void(0);"),!i||n.bom.checkPlatform()){if(i&&(r=r.replace(/(&)?fuin=(\d)*/,"")),r.indexOf("fuin")<0){var a=n.cookie.uin();a&&(r+="&fuin="+a,n(e).attr("href",r))}i&&!t&&n(document).trigger("openQQClientLive",[e]),window.open(r,i?"_self":"_blank")}},discuss_old:function(e,t,r){var n=!0;return n=r.is_member?!1:r.is_pub&&r.guin?!0:!1,n?o("openGroup",{guin:r.guin}):o("all",{gc:t})},discuss:function(e,t,r){var n=!0;return r&&r.is_member&&(n=!1),n?o("VisitPublicGroup",{gc:t}):o("all",{gc:t})},course_pay:function(e){return"//ke.qq.com/course/"+e+"?pay=1"},teacher_detail:function(e){return"//ke.qq.com/teacher/"+e},course_detail:function(e){return"//ke.qq.com/course/"+e},video_play_page:function(e){return"//ke.qq.com/course/"+e},agency_detail:function(e){return"//ke.qq.com/cgi-bin/agency?aid="+e},agency_domain:function(e){return"//"+e},package_detail:function(e){return"//ke.qq.com/course/package/"+e}}}(),n.render.courseTime=function(e){var t="";return e&&e.show_id?(1==e.show_id?t=n.render.courseTimeMode1(e):2==e.show_id?t=n.render.courseTimeMode2(e):3==e.show_id&&(t=n.render.courseTimeMode3(e)),1==e.filter_holiday&&(t+="(节假日除外)"),t):t},n.render.formatLiveTime=function(e,t){var r=n.render.time.formatDate("M月D日 hh:mm",1e3*e);return r+="-",new Date(1e3*e).getDate()!=new Date(1e3*t).getDate()&&(r+="次日"),r+=n.render.time.formatDate("hh:mm",1e3*t)},n.render.timeSpan=function(e,t){var r=[],i=function(e){return 10>e?"0"+e:e};e=e||[];for(var a=0,o=e.length;o>a;a++){var u=new Date(1e3*(t?e[a].bgtime:n.render.time.fixTimezone(e[a].bgtime,!0))),c=new Date(1e3*(t?e[a].endtime:n.render.time.fixTimezone(e[a].endtime,!0)));r.push([u.getHours()+":"+i(u.getMinutes()),"~",c.getHours()+":"+i(c.getMinutes()),c.getDate()!=u.getDate()?"(第二天)":""].join(""))}return r.join("、")},n.render.formatTimeSpan=function(e,t){var r=[],i=function(e){return 10>e?"0"+e:e};e=e||[];for(var a=0,o=e.length;o>a;a++){var u=new Date(1e3*(t?e[a].bgtime:n.render.time.fixTimezone(e[a].bgtime,!0)));r.push([u.getHours()+":"+i(u.getMinutes())].join(""))}return r.join("、")},n.render.number=function(e,t,r){e=parseInt(e,10)||0,t=parseInt(t,10),r="function"==typeof r?r:function(e,t){return'<span title="'+e+'"'+(e===t?"":' class="over-size"')+">"+t+"</span>"};var n=e;return t&&(n=e>=t?t-1+"+":e),r(e,n)},n.render.number_plus=function(e){return e=parseInt(e,10)||0,(e.toString().length>4?(e/1e4).toFixed(0)+"W":e.toString()).replace(/\.0+/,"")},n.render.formatTitle=function(e){return e=e||"",e.replace(/<br>/g,"\n")},n.render.formatAnalyzeTime=function(e,t,r,n){function i(e){return 1==e.toString().length?"0"+e:e}e=e||0,r=r||"";var a=new Date;a.setDate(a.getDate()+e);var o=i(a.getFullYear()),u=i(a.getMonth()+1),c=i(a.getDate());return n?u+r+c:o+r+u+r+c},n.render.cgiErrorWording=function(){return'    <div class="section-msg">                          <div class="msg-inner">                              <i class="icon-msg-large icon-font i-info"></i>                              <div class="msg-text">服务器异常，请稍后再试!</div>                          </div>                      </div>'},n.render.showEnterRoomFailureTips=function(e){function t(){n.modal({content:c,icon:"info",title:"提示",txtYes:"使用网页上课",txtNo:"我知道了",className:"live-guide-tips",yes:function(){if(a&&o){var e="//ke.qq.com/webcourse/index.html#course_id="+a+"&term_id="+o+"&taid="+u;window.open(e)}}})}var r=n(e),a=r.data("cid"),o=r.data("tid"),u=r.data("taid"),c='<div class="modal-live-guide clearfix">              <div class="module-live-t clearfix">                  <h3 class="live-guide-title">课堂还没打开？快试试下面的修复方法</h3>              </div>              <div class="guide-hint">                  <p class="guide-hint-p">1. 浏览器是否有加载提示？若有请点击允许</p><br/>                  <p class="guide-hint-p">2. 确认已安装<a href="http://im.qq.com/pcqq" target="_blank" class="nor-link">最新版QQ</a>。若重新装了QQ，请重启浏览器。(重启浏览器前，可复制该页面的地址以便重新进入）</p><br/>                  <p class="guide-hint-p">3. 重新打开这个页面，再次进入课堂。</p>              </div>          </div>';u?t():i.get_taid({param:{course_id:a,term_id:o},succ:function(e){var r=e.result.term_info.lastest_live_task;u=r&&r.taid,t()}})},n.render.courseFlags=function(e,t,r,i){var a=0,o=[];if(n.isArray(e)){var u=e.length;a=Math.min(t,u);for(var c=0;a>c;c++)n.trim(e[c].name).length>0&&o.push('<a class="flags-item flags-item-'+e[c].id+'" data-id="'+e[c].id+'" href="javascript:;" title="'+e[c].name+'">'+strEllipsis.substring(e[c].name,84,1)+'<i class="flags-close">&times;</i></a>')}return r&&t>a&&o.push('<a class="flags-add" href="javascript:;"'+(i?' auto-test="'+i+'"':"")+'><i class="plus">+</i>添加</a>'),o.join("")},n.render.orderCourseStateMap=function(e){var t="";switch(e){case 4:t="报名失败";break;case 1:case 5:t="报名成功";break;case 2:case 3:case 6:case 7:t="订单确认中";break;case 8:case 9:t="退款中";break;case 10:t="退款完成";break;case 11:t="退款失败"}return t},n.render.orderStateMap=function(e){var t=["","待付款","付款确认中","已付款","","退款中","已退款","退款确认中"];return t[e]||""},n.render.settlemenStateMap=function(e){var t="";switch(e){case 1:t="结算中";break;case 2:t="已结算";break;case 3:t="未结算";break;case 4:t="无需结算"}return t},n.render.fixImageWidth=function(e,t){return e+(e.indexOf("/eth/")>-1?t:"")},n._toArray=function(e,t){if(n.isArray(e))return e;try{return t&&(e=html.decode(e)),e=JSON.parse(e),n.isArray(e)?e:[]}catch(r){return[]}},n.render.number_cn=function(e,t){t=t||1;var r=[],n=["","十","百","千"],i="零一二三四五六七八九十";for(e=Math.max(parseInt(e,10)||t,t).toString().split("");e.length;){var a=parseInt(e.shift(),10);r.push(i.charAt(a)+(0===a?"":n[e.length]))}return r.join("").replace(/^一(十)|零+$/g,"$1")},n.render.str={unescapeSpace:function(e){return(e||"").replace(/&nbsp;/g," ")},unescapeBR:function(e){return(e||"").replace(/<br>/g,"&#10;")},removeProtocol:function(e){var t=/(href="|src="|href=&quot;|src=&quot;)http:\/\/(jsonp.ke.qq.com|ke.qq.com|\d{1,2}.url.cn|export.highcharts.com|p.qic.cn|mobileapp.ke.qq.com|imgcache.gtimg.cn|imgcache.qq.com|qzs.qq.com|q.qlogo.cn|p.qlogo.cn|captcha.qq.com|xui.ptlogin2.qq.com|ui.ptlogin2.qq.com|open.weixin.qq.com|qplus3.idqqimg.com|badjs.qq.com|badjs2.qq.com|cgi.pub.qq.com)/g;return(e||"").replace(t,"$1//$2")}},n.render.score={toStar:function(e){var t,r,n="";e=(e||0)/100,t=parseInt(e,10),r=e-t;for(var i=0;t>i;i++)n+='<i class="no-event"></i>';r>.25&&.75>r?(t+=1,n+='<i class="no-event half-star"></i>'):r>.75&&(t+=1,n+='<i class="no-event"></i>');var a=5-t;if(a>0)for(var o=0;a>o;o++)count++,n+='<i class="no-event"></i>';return n},toString:function(e){return e=((e||0)+5)/100,e.toFixed(1)}},r.exports=n});
/*!edu_modules/modal/modal*/
;define("edu_modules/modal/modal",function(require,exports,module){var $=require("jquery"),Observer=require("@tencent/im-observer/observer"),isDebug=!0,modalIndex=0;$.template=function(tmpl,data){var evalExp=function(exp,scope){return function(){var __res;try{with(scope)__res=eval(exp)}catch(e){}return"undefined"==typeof __res?"":__res}.call(scope)},position=0,stacks=[!0],regexp=/\{if ([^\}]+)\}|\{\/if\}|\{else\}|\{else if ([^\}]+)\}/gi,res="";return tmpl.replace(regexp,function(t,e,s,n){var o=stacks.pop();return o&&(res+=tmpl.substr(position,n-position)),position=n+t.length,e?(stacks.push(o),stacks.push(o&&evalExp(e,data)?!0:!1),stacks.push(stacks[stacks.length-1])):s?stacks.push(stacks[stacks.length-1]?!1:evalExp(s,data)?!0:!1):/\{else\}/i.test(t)?stacks.push(stacks[stacks.length-1]?!1:!0):stacks.pop(),""}),stacks.pop()&&(res+=tmpl.substr(position)),tmpl=res,tmpl=tmpl.replace(/\{\$([^\{\}]+)\}/g,function(t,e){return evalExp(e,data)})};var templateBg='<div tabindex="-1" class="overlay js-modal-bg"></div>',templateModal='<div class="js-modal modal  {$className} {if icon}modal--msg{/if} {if scroll}modal--scroll{/if}" style="{if width}width:{$width}px;{/if}{if style}{$style}{/if}" >';templateModal+="{if !nohead}",templateModal+='  <div class="modal-hd"><h3 class="hd-tt js-modal-title">{$title}</h3><a href="javascript:void(0);" class="js-modal-close btn-close" {if !isClose}style="display:none;"{/if} title="关闭">×</a></div>',templateModal+="{/if}",templateModal+="{if !body}",templateModal+='  <div class="modal-bd {if padding}modal-bd--padding{/if}" style="{if height}height:{$height}px;{/if}">',templateModal+="  {if icon}",templateModal+='      <div class="bd-msg"><i class="icon-font icon-msg-large i-{$icon}"></i>',templateModal+='      <p class="msg-text">{$content}</p></div>',templateModal+="  {else}",templateModal+="      {$content}",templateModal+="  {/if}",templateModal+="  </div>",templateModal+='  <div class="modal-ft">',templateModal+='  <a href="javascript:void(0);" title="{$txtYes}" class="js-modal-yes btn-default {if !enableYes} btn-disabled{/if}" {if !isYes}style="display:none;"{/if}>{$txtYes}</a>',templateModal+="  ",templateModal+='  <a href="javascript:void(0);" title="{$txtNo}" class="js-modal-no btn-weak {if !enableNo} btn-disabled{/if}" {if !isNo}style="display:none;"{/if}>{$txtNo}</a>',templateModal+="  </div>",templateModal+="{else}",templateModal+="  {$body}",templateModal+="{/if}",templateModal+="",templateModal+="</div>";var addDrag=function(t,e,s){var n=!1,o=0,a=0,i=$(t),l=$(e),c=$.extend({opacity:.6,duration:.3},s),d=function(t){n&&l.css({left:t.pageX-o+"px",top:t.pageY-a+"px"})},r=function(){n=!1,l.css({transition:"none",opacity:"1"}),$(document.body).off("mousemove",d)};i.mousedown(function(t){n=!0,o=t.pageX-parseInt(l.css("left")),a=t.pageY-parseInt(l.css("top")),l.css({transition:"opacity "+c.duration+"s ease-in",opacity:c.opacity}),$(document.body).mousemove(d).one("mouseup",r)})};$.fn.drag=function(t,e){t||(t=this),addDrag(this,t,e)};var Modal=function(t){this._index=modalIndex++;var e={title:"提示",className:"",style:"",content:"",txtYes:"确定",txtNo:"取消",icon:"",nohead:!1,body:"",hotkey:!0,isYes:!0,isNo:!0,isClose:!0,enableYes:!0,enableNo:!0,enableClose:!0,buttonsAlign:"right",enableDrag:!0,enableBgClose:!1,width:500,height:"",padding:!0,scroll:!1,yes:function(){},no:function(){},onClose:function(){Observer.trigger("dialog.close")},onOpen:function(){Observer.trigger("dialog.show")}};this.opts=$.extend(e,t),this._buttonState={};var s={submit:"txtYes",isDisabled:"enableYes",globalClass:"className",onAccept:"yes",onCancel:"no"};$.each(s,function(t,s){"undefined"!=typeof e[t]&&(e[s]=e[t])}),this.onAccept=this.yes,this.onCancel=this.no,this.async(this.opts.onOpen,this.$,function(){this._update().update()})};Modal.prototype={$:null,$bg:null,$btnYes:null,$btnNo:null,_index:0,_buttons:["enableYes","enableNo","enableClose"],_buttonState:null,opts:null,hotkeyCallback:function(t){if(this.opts.enableBgClose&&t.target===this.$bg[0])return this.closeAsync(this.opts.no,t);if(this.opts.hotkey)return 27===t.which&&this.opts.enableNo?this.closeAsync(this.opts.no,t):13===t.which&&this.opts.enableYes?this.closeAsync(this.opts.yes,t):void 0},async:function(t,e,s){var n=this;if(t.length<2){var o=t.call(n,e);s.call(n,"undefined"==typeof o||o?!0:!1)}else t.call(n,e,function(t){s.call(n,"undefined"==typeof t||t?!0:!1)})},closeAsync:function(t,e){var s=this;this.saveButtonsState(),this.disableButtons(),this.async(t,e,function(t){return t?void(s.opts.enableClose&&s.async(s.opts.onClose,e,function(t){return t?void s.remove():s.recoverButtons()})):s.recoverButtons()})},title:function(t){return this.$.find(".js-modal-title").html(t),this},content:function(t){var e=this.$.find(".msg-text");return 0===e.length&&(e=this.$.find(".modal-bd")),e.html(t),this},remove:function(){this.$.remove(),removeHotkeyCallback(this._hotkeyCallback);var t=$(".js-modal");return 0===t.length?this.$bg.remove():void this.$bg.after(t.eq(t.length-1))},update:function(){return this.$.css({marginTop:"-"+parseInt(this.$.height()/2)+"px",marginLeft:"-"+parseInt(this.$.width()/2)+"px"}),this.$.show(),this},recoverButtons:function(){var t=this;return $.each(t._buttons,function(e,s){t[s](t._buttonState[s])}),this},saveButtonsState:function(){var t=this;return $.each(t._buttons,function(e,s){t._buttonState[s]=t.opts[s]}),this},disableButtons:function(){var t=this;return $.each(["enableYes","enableNo"],function(e,s){t[s](!1)}),this},_update:function(){var t=this;return this.$?this.$.show():(this.$bg=$(".js-modal-bg"),0===this.$bg.length&&(this.$bg=$(templateBg).appendTo($(document.body))),this.$=$($.template(templateModal,this.opts)),this.$.appendTo($(document.body)).before(this.$bg),this._hotkeyCallback=function(){t.hotkeyCallback.apply(t,arguments)},addHotkeyCallback(this._hotkeyCallback),this.opts.enableDrag&&this.$.find(".modal-hd").drag(this.$),this.bindEvents(),this)},bindBtnYesEvent:function(){var t=this;return this.$btnYes=this.$.find(".js-modal-yes").click(function(e){$(this).hasClass("btn-disabled")||t.closeAsync(t.opts.yes,e)}),this},bindBtnNoEvent:function(){var t=this;return this.$btnNo=this.$.find(".js-modal-no").click(function(e){$(this).hasClass("btn-disabled")||(e=e||{},e.btnName="cancel",t.closeAsync(t.opts.no,e))}),this},bindBtnCloseEvent:function(){var t=this;return this.$.find(".js-modal-close").click(function(e){t.$btnNo.hasClass("btn-disabled")||(e=e||{},e.btnName="close",t.closeAsync(t.opts.no,e))}),this},bindEvents:function(){return this.bindBtnYesEvent().bindBtnCloseEvent().bindBtnNoEvent()}},$.each(["enableYes","enableNo","enableClose"],function(t,e){Modal.prototype[e]=function(t){this.opts[e]=t;var s=t?"removeClass":"addClass";return"enableYes"===e&&this.$btnYes[s]("btn-disabled"),"enableNo"===e&&this.$btnNo[s]("btn-disabled"),this}}),$.each(["yes","no","onClose","onOpen"],function(t,e){Modal.prototype[e]=function(t){return this.opts[e]=t,this}}),$.each(["width","height"],function(t,e){Modal.prototype[e]=function(t){return"undefined"==typeof t?this.opts[e]:(this.opts[e]=t,this.$[e](t),this.update())}}),$(document.body).keydown(function(t){triggerHotkey(t)}).delegate(".js-modal-bg","click",function(t){triggerHotkey(t)});var hotKeyCallbacks=[],addHotkeyCallback=function(t){hotKeyCallbacks.push(t)},removeHotkeyCallback=function(t){$.each(hotKeyCallbacks,function(e,s){return s===t?(hotKeyCallbacks.splice(e,1),!1):void 0})},triggerHotkey=function(t){hotKeyCallbacks.length<1||hotKeyCallbacks[hotKeyCallbacks.length-1](t)},modalConfigs={alert:{title:"警告",content:"警告信息！",icon:"alert",isNo:!1,buttonsAlign:"right",enableBgClose:!1},retry:{txtYes:"重试",content:"是否重试？",icon:"alert",enableBgClose:!1},confirm:{title:"确认操作",icon:"alert",txtYes:"确认",content:"请确认是否操作？",enableBgClose:!1},success:{title:"成功提示",icon:"success",content:"操作成功！",isNo:!1},error:{title:"错误提示",icon:"alert",isNo:!1},help:{title:"帮助信息",icon:"info",content:"这是一条帮助信息。",isNo:!1}},modal=function(t){return new Modal(t)};$.fn.modal=function(t,e,s){var n=arguments.length;return this.click(function(){return 1===n?"object"==typeof t?(s=t,e="",t=t.type||""):(e=t,t="alert"):2===n&&(s=e||{},e=t,t=s.type||"alert"),t?modal[t](e,s):modal(s)})},$.each(modalConfigs,function(t,e){modal[t]=function(t,s){return modal($.extend({},e,{content:t||e.content},s))}}),$.modal=modal,$.Modal=Modal,$._alert=function(t,e,s){return $(".js-modal-bg, .js-modal").remove(),$.Dialog.remove(),s=$.extend({},s||{}),"function"==typeof e?(s.title="提示",s.onAccept=s.onCancel=e):s.title=e||"提示",window.top.$modal?window.top.$modal.alert(t,s):$.modal.alert(t,s)},$._loading=function(t,e,s){var n=$._alert(t,e,s),o=$('<div class="modal-loading"><div class="spin"></div><p>'+t+"</p></div>");return n.$.find(".bd-msg").empty().append(o),n.$.find(".modal-loading .spin").spin(!0),n},module.exports=modal});
/*!@tencent/im-cache/cache*/
;define("@tencent/im-cache/cache",function(){var n={},e={},t=function(e){return n[e]},c=function(t,c,i){return e[t]?void 0:(n[t]=c,void(i&&(e[t]=1)))};return{get:t,set:c}});
/*!edu_modules/anti-embed/anti-embed*/
;define("edu_modules/anti-embed/anti-embed",function(t){function e(){top.location.href=document.location}function o(){try{var t=top.window.location.href;/^http[s]*\:\/\/[^\/]+?qq.com/g.test(t)||e()}catch(o){e()}}function i(){if(top!=self)try{var t=top.window.location.href;/^http[s]*\:\/\/[^\/]+?qq.com/g.test(t)||e()}catch(i){try{document.domain="qq.com"}catch(i){}r?setTimeout(o,r):o()}}for(var n,a,c=t("@tencent/im-util.bom/util.bom"),r=0,m=[{page:"/storage_proxy.html"},{page:"/course/\\d+",query:{from:"1000502001"}},{page:"/views/courseDetail/index.html",query:{from:"1000502001"}}],f=window.location.pathname||"",u=!1,l=0;l<m.length;l++)if(n=m[l].page,a=m[l].query,f.match(new RegExp(n))){if(a){for(var d in a)if(c.query(d)===a[d]){u=!0;break}}else u=!0;if(u)break}u||i()});
/*!edu_modules/huatuo/edu-huatuo-resource*/
;define("edu_modules/huatuo/edu-huatuo-resource",function(t,e,r){var n=t("edu_modules/huatuo/index"),o=window.performance,a=o&&o.getEntries,c={duration:"1",redirect:"2",cache:"3",dns:"4",tcp:"5","ssl/tls":"6",http:"7",download:"8",startTime:"9",redirectStart:"10",redirectEnd:"11",fetchStart:"12",domainLookupStart:"13",domainLookupEnd:"14",connectStart:"15",secureConnectionStart:"16",connectEnd:"17",requestStart:"18",responseStart:"19",responseEnd:"20"},d=function(t){var e,r,n=a&&o.getEntries();if(n&&t)for(var c=0,d=n.length;d>c;c++)if(e=n[c],r=t instanceof RegExp?t.test(e.name):e.name.indexOf(t)>=0)return s(e)},s=function(t){var e,r={},n=c;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o],d=t[o],s=t.startTime;"duration"===o||"startTime"===o?r[a]=Math.round(d):"undefined"!=typeof d?(e=d>=s?d-s:0,r[a]=Math.round(e)):r[a]=Math.round(i(o,t))}return r},i=function(t,e){var r,n,o;switch(t){case"redirect":r=e.redirectStart||e.startTime,n=e.redirectEnd;break;case"cache":r=e.fetchStart||e.redirectEnd,n=e.domainLookupStart;break;case"dns":r=e.domainLookupStart,n=e.domainLookupEnd;break;case"tcp":r=e.connectStart||e.domainLookupEnd,n=e.connectEnd;break;case"ssl/tls":r=e.secureConnectionStart||0,n=e.connectEnd;break;case"http":r=e.requestStart||e.connectEnd,n=e.responseStart;break;case"download":r=e.responseStart,n=e.responseEnd}return o=n>0&&r>0&&n>=r?n-r:0},u=function(t,e){n.report(t,{url:e})};r.exports={report:function(t){var e,r;if("object"==typeof t&&a)for(var n in t)if(t.hasOwnProperty(n)){e=n,r=t[n];var o=d(r);u(o,e)}}}});
/*!@tencent/im-jquery.placeholder/jquery.placeholder*/
;define("@tencent/im-jquery.placeholder/jquery.placeholder",function(e){function a(e){var a={},t=/^jQuery\d+$/;return c.each(e.attributes,function(e,l){l.specified&&!t.test(l.name)&&(a[l.name]=l.value)}),a}function t(e,a){var t=this,l=c(t);if(t.value==l.attr("placeholder")&&l.hasClass("placeholder"))if(l.data("placeholder-password")){if(l=l.hide().next().show().attr("id",l.removeAttr("id").data("placeholder-id")),e===!0)return l[0].value=a;l.focus()}else t.value="",l.removeClass("placeholder"),t==r()&&t.select()}function l(){var e,l=this,r=c(l),o=this.id;if(""==l.value){if("password"==l.type){if(!r.data("placeholder-textinput")){try{e=r.clone().attr({type:"text"})}catch(d){e=c("<input>").attr(c.extend(a(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":r,"placeholder-id":o}).bind("focus.placeholder",t),r.data({"placeholder-textinput":e,"placeholder-id":o}).before(e)}r=r.removeAttr("id").hide().prev().attr("id",o).show()}r.addClass("placeholder"),r[0].value=r.attr("placeholder")}else r.removeClass("placeholder")}function r(){try{return document.activeElement}catch(e){}}var o,d,c=e("jquery"),n="[object OperaMini]"==Object.prototype.toString.call(window.operamini),i="placeholder"in document.createElement("input")&&!n,u="placeholder"in document.createElement("textarea")&&!n,p=c.fn,h=c.valHooks,s=c.propHooks;i&&u?(d=p.placeholder=function(){return this},d.input=d.textarea=!0):(d=p.placeholder=function(){var e=this;return e.filter((i?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":t,"blur.placeholder":l}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},d.input=i,d.textarea=u,o={get:function(e){var a=c(e),t=a.data("placeholder-password");return t?t[0].value:a.data("placeholder-enabled")&&a.hasClass("placeholder")?"":e.value},set:function(e,a){var o=c(e),d=o.data("placeholder-password");return d?d[0].value=a:o.data("placeholder-enabled")?(""==a?(e.value=a,e!=r()&&l.call(e)):o.hasClass("placeholder")?t.call(e,!0,a)||(e.value=a):e.value=a,o):e.value=a}},i||(h.input=o,s.value=o),u||(h.textarea=o,s.value=o),c(function(){c(document).delegate("form","submit.placeholder",function(){var e=c(".placeholder",this).each(t);setTimeout(function(){e.each(l)},10)})}))});
/*!edu_modules/edu-low-version/edu-low-version*/
;define("edu_modules/edu-low-version/edu-low-version",function(e){function n(){var e='<p style="'+u+'">当前的浏览器版本过低，部分功能可能会受影响，请尽快升级哦（推荐下载<a href="http://browser.qq.com/" target="blank" title="QQ浏览器">QQ浏览器</a>）</p></div>';o||(o=document.createElement("div"),o.id="edu-low-version",o.style.cssText=d,o.innerHTML=e,r(document.body).prepend(o))}function t(){return c(8)}function i(){setTimeout(function(){t()&&n()},1e3)}var o,r=e("jquery"),d="height:24px;width:100%;",u="line-height:24px;position:fixed;top:0;width:100%;text-align:center;min-width: 900px;background-color:#F6F6CC;color:#333;z-index:901;",c=(r(window),function(e){var n=document.createElement("b");return n.innerHTML="<!--[if IE "+e+"]><i></i><![endif]-->",1===n.getElementsByTagName("i").length});r(function(){i()})});
/*!core-js/library/fn/json/stringify*/
;define("core-js/library/fn/json/stringify",function(r,i,n){var s=r("core-js/library/modules/_core"),e=s.JSON||(s.JSON={stringify:JSON.stringify});n.exports=function(){return e.stringify.apply(e,arguments)}});
/*!babel-runtime/core-js/json/stringify*/
;define("babel-runtime/core-js/json/stringify",function(e,n,i){i.exports={"default":e("core-js/library/fn/json/stringify"),__esModule:!0}});
/*!@tencent/im-edu-html/edu-html*/
;define("@tencent/im-edu-html/edu-html",function(e,r,n){var t=function(){function e(e,r,n){return r||n?String.fromCharCode(r||n):u[e]||e}function r(e){return s[e]}var n=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,o=/['<> "&]/g,c=/['<>"&]/g,u={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},a=/\u00a0/g,i=/<br\s*\/?>/gi,f=/\r?\n/g,p=/\s/g,s={};for(var d in u)s[u[d]]=d;return u["&apos;"]="'",s["'"]="&#39;",{encode:function(e){return e?(""+e).replace(o,r).replace(f,"<br/>").replace(p,"&nbsp;"):""},encodeNoSpace:function(e){return e?(""+e).replace(c,r).replace(f,"<br/>"):""},decode:function(r){return r?(""+r).replace(i,"\n").replace(n,e).replace(a," "):""},encodeBase16:function(e){if(!e)return e;e+="";for(var r=[],n=0,t=e.length;t>n;n++)r.push(e.charCodeAt(n).toString(16).toUpperCase());return r.join("")},encodeBase16forJSON:function(e){if(!e)return e;e=e.replace(/[\u4E00-\u9FBF]/gi,function(e){return escape(e).replace("%u","\\u")});for(var r=[],n=0,t=e.length;t>n;n++)r.push(e.charCodeAt(n).toString(16).toUpperCase());return r.join("")},decodeBase16:function(e){if(!e)return e;e+="";for(var r=[],n=0,t=e.length;t>n;n+=2)r.push(String.fromCharCode("0x"+e.slice(n,n+2)));return r.join("")},encodeObject:function(e){if(e instanceof Array)for(var r=0,n=e.length;n>r;r++)e[r]=t.encodeObject(e[r]);else if("object"==typeof e)for(var o in e)e[o]=t.encodeObject(e[o]);else if("string"==typeof e)return t.encode(e);return e}}}();n.exports=t});
/*!@tencent/im-localstorage/localstorage*/
;define("@tencent/im-localstorage/localstorage",function(t,e,r){function n(){if("undefined"==typeof o)try{o=window.localStorage}catch(t){return!1}return!0}function c(t){return"string"!=typeof t?!1:u.test(t)}var o,u=/^[0-9A-Za-z_@-]*$/;r.exports={set:function(t,e){var r=!1;if(c(t)&&n())try{e+="",o.setItem(t,e),r=!0}catch(u){}return r},get:function(t){if(c(t)&&n())try{return o.getItem(t)}catch(e){}return null},remove:function(t){if(c(t)&&n())try{return o.removeItem(t),!0}catch(e){}return!1},clear:function(){if(n())try{for(var t in o)o.removeItem(t);return!0}catch(e){}return!1}}});
/*!/edu_modules/edu-top/src/template/hotword.tpl_tpl*/
;define("/edu_modules/edu-top/src/template/hotword.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push("",function(it,opt){with(it=it||{}){var _$out_=[],l=Math.min(4,hot_word_list.length);if(l){_$out_.push('<div class="header-index-hot--default"> <p class="hot-list-tt">热门搜索</p> <div class="hot-word-list"> ');for(var i=0;l>i;i++){var hotItem=hot_word_list[i];_$out_.push(' <a class="hot-word-item" target="_blank" href="javascript:;" title="',hotItem.hotword,'" report-tdw="module=hotword&action=recommend&platform=1&obj1=',hotItem.hotword,'&obj2=-1"> ',hotItem.hotword," </a> ")}_$out_.push(" </div></div>")}return _$out_.join("")}}(it,opt),""),_$out_.join("")}}});
/*!/edu_modules/edu-top/src/template/association.tpl_tpl*/
;define("/edu_modules/edu-top/src/template/association.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push("",function(it,opt){with(it=it||{}){var _$out_=[];if(_$out_.push('<div class="header-index-hot--history"> <div class="hot-word-list"> '),"undefined"!=typeof items)for(var i=0;i<items.length;i++){var item=items[i],title=item.content.replace("<em>","").replace("</em>","");_$out_.push(' <a class="hot-word-item association" target="_blank" href="javascript:;" title="',title,'" data-key="',i,'"> ',item.content," </a> ")}return _$out_.push(" </div></div>"),_$out_.join("")}}(it,opt),""),_$out_.join("")}}});
/*!edu_modules/edu-top/src/top.search*/
;define("edu_modules/edu-top/src/top.search",function(e,o,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var d=e("babel-runtime/core-js/json/stringify"),n=r(d),a=e("jquery"),c=e("edu_modules/edu-db/edu-db"),s=e("edu_modules/edu-report/edu-report"),i=e("@tencent/im-edu-html/edu-html"),l=e("@tencent/im-localstorage/localstorage"),h=e("/edu_modules/edu-top/src/template/hotword.tpl_tpl"),u=e("/edu_modules/edu-top/src/template/association.tpl_tpl");e("@tencent/im-util.bom/util.bom");var m=a("#js_search"),p=a("#js_keyword"),f=a("#js-searchbox"),w=a("#js-searchhot"),v=a("#js-searchAssociation"),_=f.find(".mod-search-dropdown-item"),y=f.find(".mod-search-dropdown"),g=[],b=null,k=500,j=p.attr("placeholder");"搜索课程"===j&&(j=null);var C={course:{guide_word:j||"搜索课程",search_word:j},agency:{guide_word:"搜索机构",search_word:null}},q="newIndexSearchHistory",x=p.data("sync"),I=function A(){return x?void(a.fn.placeholder&&p.placeholder()):c.httpMethod({url:"//sas.qq.com/cgi-bin/ke_newIndex_searchWord",dataType:"jsonp"})({succ:function(e){var o=e.result||{},t=i.decode(o.searchWord);t&&(j=t,C.course={guide_word:t,search_word:t},p.attr("placeholder",t),x=!0,A())},err:function(){return!0}})},$=function(){w.data("sync")||a(document).one("loaded:hotword",function(e,o){w.append(h(o))})},T=function(){clearTimeout(b),b=setTimeout(function(){var e=p.val().trim();if(!e||e.length>20)return g=[],v.hide(),void v.html("");var o=c.httpMethod({url:"/cgi-proxy/search/associate_label",type:"GET"});o({param:{text:e,page:0,count:10},succ:function(e){var o=e.result||{};o.items&&o.items.length>0?(g=o.items,v.html(u(o)),v.show()):(g=[],v.html(""),v.hide())},err:function(){return!0}})},k)},R=function(e,o){var t=w.find(".header-index-hot--history"),r=l.get(q),d="";try{r=JSON.parse(r)}catch(a){r=[]}e&&e.length&&(e=e.concat(r),r=[],e.forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),r=r.slice(0,4)),l.set(q,n.default(r)),o||(r=r||[],r.forEach(function(e){var o=i.encode(e),t=E(encodeURIComponent(e));d+='<a class="hot-word-item" target="_blank" href="${href}" title="${word}" report-tdw="module=hotword&action=history&obj1=${word}&obj2=-1&platform=1">${word}</a>'.replace(/\$\{word\}/g,o).replace("${href}",t)}),d?t.show().find(".hot-word-list").html(d):t.hide())},U=function(e){return s.tdw({action:"search_orgsearch"}),"//ke.qq.com/searchAgency.html?word="+e},E=function(e,o,t,r,d){var a="//ke.qq.com/course/list",c="";"string"==typeof e&&(a+="/"+e);var s={mt:t,st:r,tt:d};"string"==typeof o&&(s.label_filter=n.default([[o]]));for(var i in s)s.hasOwnProperty(i)&&"undefined"!=typeof s[i]&&(c+=(/\?$/.test(c)?"":"&")+i+"="+encodeURI(s[i]));return c&&(a+="?"+c),a},M=function(){m.click(function(e){e.preventDefault();var o=p.val(),t=f.find(".mod-search-dropdown-item-selected").data("type"),r="",d=a.trim(o),n=d,c=!1;if(!d&&(d=""),d=encodeURIComponent(d),"agency"===t){if(!d)return;r=U(d)}else if("course"===t){if(!d){var i=C[t].search_word;i&&(n=i,d=encodeURIComponent(i),c=!0)}r=E(d),s.tdw({module:"hotword",action:"search",obj1:n,obj2:-1,platform:1},!0),n&&R([n],!0)}a(this).attr("jump-through",o),s.tdw({action:"click",obj1:c?"search_keyword_default":"search_keyword",obj2:"course"===t?1:2,ver2:decodeURIComponent(d)}),location.href=r}),f.on("keydown",".mod-search__input",function(e){13==e.keyCode&&m.click()}),f.on("focus",".mod-search__input",function(){s.tdw({action:"seachshine_click"}),f.addClass("focus");var e=f.find(".mod-search-dropdown-item-selected").data("type"),o=p.val().trim();"course"===e&&(o?o&&g.length>0?v.show():T():w.show())}).on("blur",".mod-search__input",function(){f.removeClass("focus"),setTimeout(function(){w.hide(),v.hide()},300)}).on("input",".mod-search__input",function(){if(document.activeElement===p[0]){var e=p.val().trim(),o=f.find(".mod-search-dropdown-item-selected").data("type");"course"===o&&(e?(w.hide(),T()):(v.hide(),w.show()))}}).on("click",".header-index-hot--default a",function(e){var o=a(this);e.preventDefault(),location.href=E(o.text())}).on("click",".js-clear-history",function(){l.set(q,"[]"),R()}),v.on("click",".hot-word-item",function(){var e=a(this),o=parseInt(e.data("key"),10),t=g[o];t&&(s.tdw({module:"hotword",action:"association",obj2:t.type,ver1:t.mt,ver2:t.st,ver3:t.tt,ver7:t.label_id,platform:1},!0),location.href=E(null,t.label_name,t.mt,t.st,t.tt))})},O=function(){_.on("click",function(){a(this).hasClass("mod-search-dropdown-item-selected")||_.removeClass("mod-search-dropdown-item-hover"),_.eq(0).is(":visible")&&_.eq(1).is(":visible")?(_.hide(),y.removeClass("mod-search-dropdown-hover")):(_.show(),y.addClass("mod-search-dropdown-hover")),_.removeClass("mod-search-dropdown-item-selected"),a(this).addClass("mod-search-dropdown-item-selected");var e=f.find(".mod-search-dropdown-item-selected"),o=e.data("type"),t=p.val();e.show(),e.prependTo(a(".mod-search-dropdown")),p.attr("placeholder",C[o].guide_word),("搜索机构"===t||"搜索课程"===t||""===t)&&(p.val(" "),p.val("")),"agency"===o&&s.tdw({action:"search_orgclk"})}).on("mouseenter",function(){a(this).addClass("mod-search-dropdown-item-hover")}).on("mouseleave",function(){a(this).removeClass("mod-search-dropdown-item-hover")}),a(document).on("click",function(e){a(e.target).hasClass(".mod-search-dropdown")||0!==a(e.target).closest(".mod-search-dropdown").length||(y.removeClass("mod-search-dropdown-hover"),y.find(".mod-search-dropdown-item").eq(1).hide())})};I(),$(),R(),M(),O(),t.exports=function(){}});
/*!edu_modules/edu-user/src/user.adapter*/
;define("edu_modules/edu-user/src/user.adapter",function(e,r,o){var w;if(window.jQuery)w=window.jQuery;else{if(!window.$)throw new Error("没有找到jQuery或zepto");w=window.$}o.exports=w});
/*!edu_modules/edu-user/src/user.local*/
;define("edu_modules/edu-user/src/user.local",function(e,t,r){var a=e("edu_modules/local.data/local.data"),u="__userinfo";r.exports={get:function(){var e,t={};try{e=a.get(u),e&&(t=JSON.parse(a.get(u))||{})}catch(r){}return t},set:function(e){try{a.set(u,JSON.stringify(e))}catch(t){}}}});
/*!edu_modules/edu-user/src/user.base*/
;define("edu_modules/edu-user/src/user.base",function(e,i,s){var n=e("edu_modules/edu-user/src/user.local"),r={aid:0,is_login:0,nick_name:"",face_url:"",role_type:64,role_info:0,uid:"",skey:"",uid_type:0,isWeixinUser:!1,isQQUser:!0,isMaster:!1,isPersonal:!1,isAdmin:!1,isCustomAdmin:!1,isCourseTeacher:!1,isTeacher:!1,isStudent:!0,isPlatRole:!1};s.exports={updateInfo:function(e){for(var i in e)"undefined"!=typeof r[i]&&(r[i]=e[i]);n.set(r)},getInfoSync:function(){return r},getRoleInfoSync:function(){var e={},i=r.role_info||0,s={isRoleAssistant:1,isRoleTeacher:2,isRoleTeachingManager:7,isRoleSuperManager:8,isRoleSalesManager:16,isTeachingAffairs:17,isSaler:18,isRoleFinancialAffairs:19,isCustomize1:20,isCustomize2:21};for(var n in s){var o=s[n];e[n]=(i&1<<o)>0?!0:!1}return e},extendBaseInfo:function(e){e=e||{};for(var i in e){if("undefined"!=typeof r[i])throw new Error("定义了重复的基础字段");r[i]=e[i]}}}});
/*!edu_modules/edu-user/src/user.uid*/
;define("edu_modules/edu-user/src/user.uid",function(e,u,i){var t=e("edu_modules/util.cookie/util.cookie");i.exports=function(){var e="",u="",i=0;return 2===Number(t.get("uid_type"))?(i=2,e=t.get("uid_uin")||"",u=t.get("uid_a2")||""):(e=t.get("p_luin")||t.get("p_uin")||"",u=t.get("p_lskey")||t.get("p_skey")||"",i=0,e&&(e=parseInt(e.substring(1,e.length),10))),e=String(e),{uid:e,skey:u,uid_type:i,isWeixinUser:2===i,isQQUser:2!==i}}});
/*!edu_modules/edu-user/src/user.cgi*/
;define("edu_modules/edu-user/src/user.cgi",function(e,r,s){var u=e("edu_modules/edu-db/edu-db"),t=e("edu_modules/edu-user/src/user.adapter"),i=e("edu_modules/edu-user/src/user.base"),d={MASTER:1,PERSONAL:2,ADMIN:4,CUSTOMADMIN:8,COURSETEACHER:16,TEACHER:32,STUDENT:64};s.exports=function(){var e=t.Deferred();return u.httpMethod({url:"/cgi-bin/identity/info",type:"POST"})({}).then(function(r){if(!r||0!==r.retcode)return e.reject("server error");var s=r.result.role_type||0,u={isMaster:!!(s&d.MASTER),isPersonal:!!(s&d.PERSONAL),isAdmin:!!(s&d.ADMIN),isCustomAdmin:!!(s&d.CUSTOMADMIN),isCourseTeacher:!!(s&d.COURSETEACHER),isTeacher:!!(s&d.TEACHER),isStudent:!!(s&d.STUDENT)};u.isPlatRole=u.isMaster||u.isPersonal||u.isAdmin||u.isCustomAdmin||u.isCourseTeacher||u.isTeacher;var n=i.getInfoSync();r.result.face_url=r.result.face_url||"//q.qlogo.cn/g?b=qq&nk="+n.uin+"&s=100",r.result.uid=String(r.result.uid),r.result.face_url=r.result.face_url.replace(/&amp;/g,"&"),t.extend(r.result,u),e.resolve(r.result)},function(r){e.reject(r)}),e.promise()}});
/*!edu_modules/edu-user/src/user.cache*/
;define("edu_modules/edu-user/src/user.cache",function(e,r,u){var n=e("edu_modules/edu-user/src/user.adapter"),s=e("edu_modules/edu-user/src/user.base"),o=e("edu_modules/edu-user/src/user.local"),i=e("edu_modules/edu-user/src/user.uid"),d=e("edu_modules/edu-user/src/user.cgi"),t=e("edu_modules/modal/modal"),c=o.get(),l=i(),a=["skey","uid","uid_type"],f=function(e,r){for(var u=0;u<a.length;u++)if(e[a[u]]!==r[a[u]])return!1;return!0},m=function(){t.alert("您的账号身份角色发生变化，请刷新页面后重试！").onClose(function(){window.location.reload()})},p=function(){if(p.isLoading)return p.promise;p.isLoading=!0;var e=n.Deferred();return p.promise=e.promise(),d().then(function(r){s.updateInfo(r),e.resolve(s.getInfoSync())},e.reject),p.promise},y=n.Deferred(),_=y.promise(),g=s.getInfoSync();if(l.skey&&l.uid)if(f(l,c)){s.updateInfo(c);var v=g.role_type;y.resolve(g),p().then(function(e){e.is_login&&v&&e.role_type!==v&&m()})}else s.updateInfo(l),p().then(y.resolve,y.reject);else y.resolve(g);u.exports={asyncCache:function(){return _},asyncCGI:function(){return p.promise},isUidChanged:function(){var e=i();return!("1097244880"===e.uid)&&e.uid!==g.uid||e.skey!==g.skey},isLogin:function(){var e=i();return g.is_login&&e.skey&&e.uid}}});
/*!edu_modules/edu-user/src/index*/
;define("edu_modules/edu-user/src/index",function(e,n,u){var o=e("edu_modules/edu-user/src/user.cache"),s=e("edu_modules/edu-user/src/user.base");u.exports={getInfoAsync:function(){return o.asyncCGI()},getInfoSync:function(){return s.getInfoSync()},getRoleInfoSync:function(){return s.getRoleInfoSync()},getInfo:function(){return o.asyncCache()},extendBaseInfo:s.extendBaseInfo,updateInfo:s.updateInfo,isUidChanged:o.isUidChanged,isLogin:o.isLogin}});
/*!edu_modules/edu-user/index*/
;define("edu_modules/edu-user/index",function(e,d,u){u.exports=e("edu_modules/edu-user/src/index")});
/*!edu_modules/edu-top/src/top.menu*/
;define("edu_modules/edu-top/src/top.menu",function(e,n,i){var o=e("jquery"),t=e("edu_modules/reportor/index"),a=e("edu_modules/edu-user/index"),r=e("edu_modules/local.data/local.data"),s=(o("#js_main_nav"),o("#js_logout_outer")),u=o("#js_logout_outer_agency"),d=o("#js-mod-header-login"),c=function(){d.removeClass("mod-header__wrap-logined")},p=function(e,n){var i=n.nick_name||"个人中心";e.find(".js-username").prop("title",i).text(i),e.find(".js-avatar").prop("src",n.face_url).one("error",function(){this.src="//8.url.cn/edu/edu_modules/edu-ui/img/bg/empty-avator.171fd695.png#unsprite"}),e.find(".js-account").addClass("i-"+(n.isWeixinUser?"weixin":"qq")),e.show()},l=function(e){p(s,e)},m=function(e){p(u,e)},f=function(e){p(u,e),o(".mod-header__user-operation span,.mod-header__user-operation b").each(function(){var e=o(this);"机构管理"===o.trim(e.text())&&e.text("老师管理")})},_=function(e){var n=e.uid;if(n){var i=o(".mod-header_live-tip"),t=function(){return-1!=navigator.userAgent.indexOf("Mac")?!0:!1},a=!r.get("unShowWebLiveTip_"+n);if(a){var s="使用Mac也可以参与直播课的聊天，快去试试吧！";t()?i.show().css({marginTop:"-30px",opacity:0}).animate({marginTop:0,opacity:1},600):e.isWeixinUser&&(s=s.replace("使用Mac","微信账号"),i.show().css({marginTop:"-30px",opacity:0}).animate({marginTop:0,opacity:1},600)),i.find("p").text(s),i.one("click","span",function(){i.hide()})}r.set("unShowWebLiveTip_"+n,!0)}},h=function(e){if(d.length){e.isPlatRole?e.isPersonal?f(e):m(e):e.is_login?(l(e),_(e)):c();var n=window.T&&window.T.length&&window.T[0];n&&t.tdw({action:"loginTiming",ver1:+new Date-n})}},g=function(){"ke.qq.com"===location.host&&/^\/(index\.html)?$/.test(location.pathname)&&o(".header-index-join").show()};g(),a.getInfo().then(function(e){h(e)}),i.exports=function(){}});
/*!core-js/library/modules/_object-sap*/
;define("core-js/library/modules/_object-sap",function(e,r,o){var c=e("core-js/library/modules/_export"),s=e("core-js/library/modules/_core"),i=e("core-js/library/modules/_fails");o.exports=function(e,r){var o=(s.Object||{})[e]||Object[e],l={};l[e]=r(o),c(c.S+c.F*i(function(){o(1)}),"Object",l)}});
/*!core-js/library/modules/es6.object.keys*/
;define("core-js/library/modules/es6.object.keys",function(e){var r=e("core-js/library/modules/_to-object"),o=e("core-js/library/modules/_object-keys");e("core-js/library/modules/_object-sap")("keys",function(){return function(e){return o(r(e))}})});
/*!core-js/library/fn/object/keys*/
;define("core-js/library/fn/object/keys",function(e,r,o){e("core-js/library/modules/es6.object.keys"),o.exports=e("core-js/library/modules/_core").Object.keys});
/*!babel-runtime/core-js/object/keys*/
;define("babel-runtime/core-js/object/keys",function(e,o,r){r.exports={"default":e("core-js/library/fn/object/keys"),__esModule:!0}});
/*!/edu_modules/edu-top/src/template/category.tpl_tpl*/
;define("/edu_modules/edu-top/src/template/category.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push("",function(it,opt){with(it=it||{}){var _$out_=[],specialCateMap={3116:"/cates/3116"},cateTextLink="undefined"!=typeof cate_text_link?cate_text_link:[],txtLinksMap=cateTextLink.reduce(function(s,t){return s[t.cateId]=t.txtLinks,s},{});_$out_.push('<nav class="mod-nav"> <ul class="mod-nav__list" jump-end="true"> ');for(var firstIndex=0,firstClassIds=Object.keys(catInfo).sort(function(s,t){return catInfo[s].o-catInfo[t].o}),k=0;k<firstClassIds.length;k++){var firstClassId=firstClassIds[k],firstClass=catInfo[firstClassId],hotClass=recommend_type[firstClassId]||{};firstIndex++,_$out_.push(' <li class="mod-nav__li'),1===firstIndex&&_$out_.push(" no-border"),_$out_.push(' js-mod-category " data-index="',firstIndex,'" jump-through="',firstIndex,'" data-id="',firstClassId,'" report-hover="obj1=first_level&obj2=',firstClassId,'"> <div class="mod-nav__wrap-nav-first"> <i class="icon-font i-v-right"></i> <h3 class="mod-nav__link-nav-first"> <a href="/course/list?mt=',firstClassId,'" class="mod-nav__link-nav-first-link" title="',firstClass.n,'" target="_blank" jump-start="title_first_click" report-tdw="module=hotword&action=category&platform=1&ver1=',firstClassId,'"> ',firstClass.n,' </a> </h3> </div> <div class="mod-nav__wrap-nav-hot"> ');for(var i=0;i<hotClass.length;i++){var classId,hotClassLink,hotClassItem=hotClass[i],hotClassLinkPart="/course/list?mt="+firstClassId+"&st="+hotClassItem.s_id;hotClassItem.t_id?(hotClassLink=hotClassLinkPart+"&tt="+hotClassItem.t_id,classId=hotClassItem.t_id):(hotClassLink=hotClassLinkPart,classId=hotClassItem.s_id),specialCateMap[hotClassItem.t_id]&&(hotClassLink=specialCateMap[hotClassItem.t_id]),_$out_.push(' <a href="',hotClassLink,'" class="mod-nav__link-nav-hot" title="',hotClassItem.s_name,'" jump-start="title_hotclassification" jump-through="',i+1,'" target="_blank" report-tdw="action=click&obj1=hot_cates&obj2=',classId,'">',hotClassItem.s_name,"</a> ")}_$out_.push(" </div> </li> ")}_$out_.push(' </ul> <div class="mod-nav__side"> ');for(var firstIndex=0,k=0;k<firstClassIds.length;k++){var firstClassId=firstClassIds[k],firstClass=catInfo[firstClassId],hotClass=recommend_type[firstClassId]||{},txtLinks=txtLinksMap[firstClassId]||[];firstIndex++,_$out_.push(' <div class="mod-nav__wrap-nav-side mod-nav__wrap-nav-side__adarea js-mod-category-side"> '),txtLinks.length&&(_$out_.push(' <div class="mod-nav__side-txt-list"> '),txtLinks.forEach(function(s){_$out_.push(' <a class="mod-nav__side-txt" href="',s.link,'" target="_blank" report-tdw="action=click&obj1=cate_huodong&obj2=',s.name,'">',s.name,"</a> ")}),_$out_.push(" </div> ")),_$out_.push(' <ul class="mod-nav__side-list"> ');for(var secondHotCount=0,secondClassIds=Object.keys(firstClass.s).sort(function(s,t){return firstClass.s[s].o>firstClass.s[t].o?1:firstClass.s[s].o<firstClass.s[t].o?-1:0}),j=0;j<secondClassIds.length;j++){secondHotCount++;var secondClassId=secondClassIds[j],secondClass=firstClass.s[secondClassId],secondClassLink="/course/list?mt="+firstClassId+"&st="+secondClassId;if(_$out_.push(' <li class="mod-nav__side-li" jump-through="',secondHotCount,'"> <h4 class="mod-nav__link-nav-second"><a href="',secondClassLink,'" title="',secondClass.n,'" class="mod-nav__link-nav-second-link" target="_blank" report-tdw="action=click&obj1=second_level&obj2=',secondClassId,'" jump-start="title_second">',secondClass.n,"</a></h4> "),secondClass.t){_$out_.push(' <div class="mod-nav__wrap-nav-third"> ');for(var thirdHotCount=0,thirdClassIds=Object.keys(secondClass.t).sort(function(s,t){return secondClass.t[s].o>secondClass.t[t].o?1:secondClass.t[s].o<secondClass.t[t].o?-1:0}),i=0;i<thirdClassIds.length;i++){thirdHotCount++;var thirdClassId=thirdClassIds[i],thirdClass=secondClass.t[thirdClassId],thirdClassLink="/course/list?mt="+firstClassId+"&st="+secondClassId+"&tt="+thirdClassId;specialCateMap[thirdClassId]&&(thirdClassLink=specialCateMap[thirdClassId]),_$out_.push(' <a href="',thirdClassLink,'" class="mod-nav__link-nav-third mod-nav__wrap-nav-third_line" title="',thirdClass.n,'" target="_blank" report-tdw="action=click&obj1=third_level&obj2=',thirdClassId,'" jump-start="title_third" jump-through="',thirdHotCount,'"> ',thirdClass.n," </a> ")}_$out_.push(" </div> ")}_$out_.push(" </li> ")}_$out_.push(" </ul> </div> ")}return _$out_.push(" </div></nav>"),_$out_.join("")}}(it,opt),""),_$out_.join("")}}});
/*!@tencent/im-jquery.menuAim/jquery.menu-aim*/
;define("@tencent/im-jquery.menuAim/jquery.menu-aim",function(e){var t=e("jquery");!function(e){function t(t){var n=e(this),i=null,u=[],o=null,r=null,c=e.extend({exitMenuSelector:"",rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:e.noop,exit:e.noop,activate:e.noop,deactivate:e.noop,exitMenu:e.noop},t),l=3,a=300,f=function(e){u.push({x:e.pageX,y:e.pageY}),u.length>l&&u.shift()},s=function(){r&&clearTimeout(r)},m=function(){r&&clearTimeout(r),c.enter(this),v(this)},h=function(){c.exit(this)},x=function(e){e!=i&&(i&&c.deactivate(i),c.activate(e),i=e)},v=function(e){var t=y();t?r=setTimeout(function(){v(e)},t):x(e)},y=function(){function t(e,t){return(t.y-e.y)/(t.x-e.x)}if(!i||!e(i).is(c.submenuSelector))return 0;var r=n.offset(),l={x:r.left+n.outerWidth(),y:r.top-c.tolerance},f={x:r.left+n.outerWidth(),y:r.top+n.outerHeight()+c.tolerance},s=u[u.length-1],m=u[0];if(!s)return 0;if(m||(m=s),m.x<r.left||m.x>f.x||m.y<r.top||m.y>f.y)return 0;if(o&&s.x==o.x&&s.y==o.y)return 0;var h=t(s,l),x=t(s,f),v=t(m,l),y=t(m,f);return v>h&&x>y?(o=s,a):(o=null,0)};n.mouseleave(s).find(c.rowSelector).mouseenter(m).mouseleave(h),e(c.exitMenuSelector).mouseleave(function(){c.exitMenu(this)&&(i&&c.deactivate(i),i=null)}),e(document).mousemove(f)}e.fn.menuAim=function(e){return this.each(function(){t.call(this,e)}),this}}(t)});
/*!edu_modules/edu-top/src/top.category*/
;define("edu_modules/edu-top/src/top.category",function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){return l.default(e).sort(function(t,n){return e[t].o>e[n].o?1:e[t].o<e[n].o?-1:0})}function d(){j.find("nav").length||_.when(c(),i()).always(function(){a(),l.default(g).length?u():y.addClass("header-index-category__alone")})}function a(){j.html(m({catInfo:g,cate_text_link:h,recommend_type:v})),y.addClass("header-index-category__show")}function u(){_(".mod-nav__list").menuAim({activate:function(e){var t=_(e),n=t.index(".js-mod-category");_(".js-mod-category-side").eq(n).show(),t.addClass("mod-nav__li_current")},deactivate:function(e){_(".js-mod-category-side").hide(),_(e).removeClass("mod-nav__li_current")},exitMenuSelector:".mod-nav",rowSelector:".mod-nav__li",exitMenu:function(){return!0}})}function c(){var e=_.Deferred();return f.getCatInfo({succ:function(t){var n=t.result||{};g=n.catInfo||{},v=n.recommend_type||{},e.resolve(n),_(document).trigger("loaded:hotword",{hot_word_list:n.hot_word_list||[],catInfo:g,orderlyCatInfo:r(g)})},err:function(){return e.reject(),!0}}),e}function i(){var e=_.Deferred();return f.getCatLinks({succ:function(t){h=t.result||[],e.resolve()},err:function(){return e.reject(),!0}}),e}var s=e("babel-runtime/core-js/object/keys"),l=o(s),_=e("jquery"),f=e("edu_modules/edu-db/edu-db"),m=e("/edu_modules/edu-top/src/template/category.tpl_tpl");e("@tencent/im-jquery.menuAim/jquery.menu-aim");var g={},h=[],v={},y=_(".js-header-index-category"),j=_(".js-index-cate");f.extend({getCatInfo:f.httpMethod({url:"/cgi-bin/get_cat_info",noNeedLogin:!0}),getCatLinks:f.httpMethod({url:"//sas.qq.com/cgi-bin/ke_newIndex_cateTextLink",dataType:"jsonp"})}),d(),n.exports={}});
/*!/edu_modules/edu-mobile-verify/template/form.tpl_tpl*/
;define("/edu_modules/edu-mobile-verify/template/form.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<section class="mobile-verify"> <div class="mobile-verify-hd"> <h3 class="mobile-verify-hd-text"> ',title,' </h3> <span class="js-close-btn btn-close"> <i class="icon-font i-close"></i> </span> </div> <div class="mobile-verify-bd"> <form class="mobile-verify-form"> <p class="mobile-verify-info-prefix"> ',prefixText,' </p> <div class="f-row"> <label class="f-label">手机号码</label> <div class="f-input"> <input type="text" name="phone" class="js-phone-field f-field" autocomplete="off"> <button type="button" class="js-verify-btn btn-verify">获取验证码</button> <div class="js-validator-msg err-msg"></div> </div> </div> <div class="f-row"> <label class="f-label">短信验证码</label> <div class="f-input"> <input type="text" name="code" class="js-code-field f-field" maxlength="6" autocomplete="off"> <div class="js-validator-msg err-msg"></div> </div> </div> <p class="mobile-verify-info-suffix"> ',suffixText,' </p> </form> </div> <div class="mobile-verify-ft"> <a href="javascript:void(0)" class="js-activate-btn btn-default btn-m btn-activate disabled"> ',activateBtn,' </a> <a href="javascript:void(0)" class="js-skip-btn btn-weak btn-m btn-skip"> ',skipBtn," </a> </div></section>"),_$out_.join("")}}});
/*!edu_modules/edu-mobile-verify/edu-mobile-verify*/
;define("edu_modules/edu-mobile-verify/edu-mobile-verify",function(e,t,n){function i(e){this.config=d.extend({},p,e),this._init()}function o(e){var t=d.extend({},p,{onVerify:function(e,t,n){r.applySmsCode({param:{phone:e,from:1},succ:function(){t()},err:function(e){return g[e.retcode]?(n.showMsg(g[e.retcode],n.$phone),!0):void 0}})},onActivate:function(e,t,n){r.checkSmsCode({param:{phone:e,code:t},succ:function(t){return t.result&&r.setUserContact({param:{mobile:e,token:t.result.token},succ:function(){n.destroy(),d.modal.success("绑定成功").yes(function(){n.config.onSuccess()}).no(function(){n.config.onSuccess()})}}),!0},err:function(e){var t=g[e.retcode]||"验证码失败";return n.showMsg(t,n.$code),!0}})},onSuccess:function(){},onSkip:function(){},onClose:function(){}},e);return new i(t)}function s(e){var t=new Date(e),n=t.getFullYear()+"-",i=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",o=t.getDate()<10?"0"+t.getDate():t.getDate();return n+i+o}function c(e){var t=d.cookie.uin();"1"===l.get(t+"mobileBindInfo_Binded")?e(!0):r.getUserContact({succ:function(n){n.result&&n.result.mobile?(l.set(t+"mobileBindInfo_Binded","1"),e(!0)):e(!1)},err:function(){e(void 0)}})}function a(){l.set("mobileBindInfo_jump","1")}var d=e("jquery"),l=e("edu_modules/local.data/local.data"),r=e("edu_modules/edu-db/edu-db"),u=e("edu_modules/reportor/index"),h=e("edu_modules/edu-login/edu-login");r.extend({applySmsCode:r.httpMethod({url:"/cgi-bin/tool/apply_sms_code"}),checkSmsCode:r.httpMethod({url:"/cgi-bin/tool/check_sms_code"}),getUserContact:r.httpMethod({url:"/cgi-bin/user/get_user_info"}),setUserContact:r.httpMethod({url:"/cgi-bin/user/set_user_info",type:"POST"}),getLoginPageList:r.httpMethod({url:"//sas.qq.com/cgi-bin/ke_operation_telCollectPage",dataType:"jsonp"})});var f=e("/edu_modules/edu-mobile-verify/template/form.tpl_tpl"),p={title:"绑定手机",prefixText:"您的手机号将有助于我们提供更多教学服务，未经授权不会主动公开，请放心",suffixText:"每个手机号只能与一个QQ和微信帐号绑定",activateBtn:"保存",skipBtn:"取消",duration:60,onVerify:function(){},onActivate:function(){},onSkip:function(){},onClose:function(){}},g={106502:"您的操作频率过快，请稍后重试！",120011:"此手机号已被其他账号绑定",106501:"验证码错误"};d.extend(i.prototype,{_init:function(){this.phoneCache={},this._render(),this._initForm(),this._initEvent()},_render:function(){var e=f(this.config);this.$bg=d('<div tabindex="-1" class="phone-collector-bg mask"></div>').appendTo(document.body),this.$el=d(e).appendTo(document.body)},_initForm:function(){this.$phone=this.$el.find(".js-phone-field"),this.$code=this.$el.find(".js-code-field"),this.$verifyBtn=this.$el.find(".js-verify-btn"),this.$activateBtn=this.$el.find(".js-activate-btn");var e=this,t=function(t){/\D/.test(t.which)&&t.preventDefault(),e._validate(d(this).attr("name"))};this.$phone.on("blur change",t),this.$code.on("keyup change",t),this.hasSend=!1,this.counting=!1,this.errMsg=""},_initEvent:function(){var e=this;e.$el.on("click",".js-close-btn",function(){e.destroy(),e.config.onClose()}).on("click",".js-skip-btn",function(){e.destroy(),e.config.onSkip()}).on("click",".js-verify-btn",function(){if(!d(this).hasClass("disabled")&&e._validate("phone")){var t=e.$phone.val();e.config.onVerify(t,function(){e.hasSend&&e.$code.val(""),e.phoneCache[t]=!0,e.hasSend=!0,e.counting=e.config.duration,e._validate("code"),e._countDown()},e)}}).on("click",".js-activate-btn",function(){d(this).hasClass("disabled")||(e.$activateBtn.addClass("disabled"),e.config.onActivate(e.$phone.val(),e.$code.val(),e))})},_validate:function(e){var t=this.$phone.val(),n={phone:/^1\d{10}$/.test(t),code:/^\d{6}$/.test(this.$code.val())};switch(this.$el.find(".js-validator-msg").html(""),this.$el.find(".f-input--error").removeClass("f-input--error"),this.errMsg="",e){case"phone":this.hasSend=!!this.phoneCache[t],n.phone||this.showMsg("手机号无效",this.$phone);case"code":this.$code.parent().removeClass("f-field--error")}return n.phone&&n.code&&this.hasSend?this.$activateBtn.removeClass("disabled"):this.$activateBtn.addClass("disabled"),n[e]},_countDown:function(){var e=this;e._refreshVerifyBtn(),e.counting&&(e.timer=setTimeout(function(){e.counting--,e._countDown()},1e3))},_refreshVerifyBtn:function(){var e=this.hasSend?"重新发送验证码":"获取验证码";this.counting?this.$verifyBtn.text(this.counting+"s后重发").addClass("disabled"):this.$verifyBtn.text(e).removeClass("disabled")},showMsg:function(e,t){this.errMsg=e;var n=t.parent();n.find(".js-validator-msg").html('<i class="icon-font i-alert"></i>'+e),n.addClass("f-input--error")},destroy:function(){this.$el.remove(),this.$bg.remove()}}),n.exports={jumpBind:a,checkBinded:c,dailog:function(e){return o(e)},checkLogin:function(){return h.isLogin()&&l.get("mobileBindInfo_lastLoginTime")?(l.remove("mobileBindInfo_lastLoginTime"),"1"===l.get("mobileBindInfo_jump")?void l.remove("mobileBindInfo_jump"):void(s(l.get("mobileBindInfo_lastDailogTime")-0)!==s(+new Date)&&c(function(e){e||r.getLoginPageList({succ:function(e){var t=[].concat(e.result.h5).concat(e.result.pc),n=!1;t.forEach(function(e){if(/^\/[^\/].*\/$/.test(e.url)){var t=new RegExp(e.url.slice(1,-1),"i");t.test(location.href)&&(n=!0)}else location.host+location.pathname===e.url.replace(/^(https?\:)?\/\//,"")&&(n=!0)}),n&&(l.set("mobileBindInfo_lastDailogTime",+new Date),u.tdw({action:"exposure",page:"login_telcollect"}),o({skipBtn:"跳过",onSuccess:function(){u.tdw({action:"click",page:"login_telcollect",module:"save"},!0)},onSkip:function(){u.tdw({action:"click",page:"login_telcollect",module:"skip"},!0)},onClose:function(){u.tdw({action:"click",page:"login_telcollect",module:"close"},!0)}}))}})}))):void 0}}});
/*!edu_modules/edu-top/src/top.login*/
;define("edu_modules/edu-top/src/top.login",function(o,e,u){function t(){n(document.body).on("click",".js-login-op",function(o){var e=n(o.target).attr("data-hook");e&&(i.tdw({action:e}),setTimeout(function(){l[e]()},500))})}var n=o("jquery"),d=o("edu_modules/edu-login/edu-login"),i=o("edu_modules/edu-report/edu-report"),c=(o("@tencent/im-observer/observer"),o("edu_modules/edu-mobile-verify/edu-mobile-verify")),l=(o("edu_modules/local.data/local.data"),{login:function(){d.show({succ:function(){location.reload()},source:2})},logout:function(){d.logout()}});t(),c.checkLogin(),u.exports=function(){}});
/*!edu_modules/edu-top/src/top.redpoint*/
;define("edu_modules/edu-top/src/top.redpoint",function(e,o,i){function n(){_.show(),c.tdw({action:"Redpoint-Exposure"})}function t(){_.hide()}function r(e){var o=[".js-live-course",".js-fav",".js-coupon",".js-course-plan",".js-signup"],i=[];e.total_num>0&&i.push(o[1]),e.coupon_red_flag>0&&i.push(o[2]),(1===e.present_vedio_red_flag||e.commodity_red_flag>0)&&(i.push(o[4]),e.commodity_red_flag>0&&c.tdw({module:"myservice",action:"redpoint_expo_head"})),d(o.join(",")).removeClass("indicate-remind"),i.length>0?(n(),d(i.join(",")).addClass("indicate-remind")):1===e.service_expired_red_flag?n():t()}var d=e("jquery"),u=e("edu_modules/edu-db/edu-db"),s=e("@tencent/im-observer/observer"),c=e("edu_modules/edu-report/edu-report"),_=d("#js_logout_outer_agency, #js_logout_outer").find(".icon-red-circle"),a=function(e){e.is_cdkey_owner&&d("#js_logout_outer").find(".js-et-course").removeClass("hide"),e.is_wt_agency&&d(".mod-header__mailbox").removeClass("hide")};u.extend({notification:u.httpMethod({url:"/cgi-bin/identity/notification",noNeedLogin:!0})}),u.notification({param:{},succ:function(e){var o=e.result;o&&(a(o),r(o),s.trigger("redpoint",o))},err:function(e){return e.retcode&&1e5===e.retcode?!1:void 0}}),s.listen("redpoint.refresh",function(e){r(e)}),i.exports=function(){}});
/*!edu_modules/edu-top/src/top.secret*/
;define("edu_modules/edu-top/src/top.secret",function(e,t,n){var o=function(){};n.exports={init:o}});
/*!edu_modules/edu-top/src/top.privatemsgs*/
;define("edu_modules/edu-top/src/top.privatemsgs",function(e,o,r){var t=e("jquery"),s=(e("edu_modules/edu-report/edu-report"),t(".header-index-private-msgs"));"ke.qq.com"===location.host&&s.show(),s.on("click",function(e){e.stopPropagation(),t("#js-private-msgs").triggerHandler("click",!0)}),r.exports=function(){}});
/*!edu_modules/edu-top/src/index*/
;define("edu_modules/edu-top/src/index",function(e,o,d){e("edu_modules/edu-top/src/top.search"),e("edu_modules/edu-top/src/top.menu"),e("edu_modules/edu-top/src/top.category"),e("edu_modules/edu-top/src/top.login"),e("edu_modules/edu-top/src/top.redpoint"),e("edu_modules/edu-top/src/top.secret"),e("edu_modules/edu-top/src/top.privatemsgs"),d.exports={}});
/*!edu_modules/edu-top/index*/
;define("edu_modules/edu-top/index",function(e,d,u){u.exports=e("edu_modules/edu-top/src/index")});
/*!@tencent/im-util.str/util.str*/
;define("@tencent/im-util.str/util.str",function(t){var e=t("jquery");return e.extend({str:{byteLen:function(t,e){var n=e||2;t+="";var r=t.match(/[^\x00-\xff]/g)||[],u=r.length;return t.length+(n-1)*u},cut:function(t,n){for(var r=e(t);r.outerHeight()>n;)r.text(r.text().replace(/(\s)*([a-zA-Z0-9]+|\W)(\.\.\.)?$/,"..."))},cutByte:function(t,e,n){function r(t){var e=t/2|0;return e>0?e:1}var e=+e,n="undefined"==typeof n?"...":n.toString(),u=this.byteLen(n);if(!(t+"").length||!e||0>=e)return"";u>e&&(n="",u=0);for(var i=e-u,f=0,s=0;i>=s;){var a=r(i-s),c=this.byteLen(t.substr(f,a));if(0==c)return t;s+=c,f+=a}return t.length-f>u||this.byteLen(t.substring(f-1))>u?t.substr(0,f-1)+n:t}}}),e});
/*!edu_modules/report.common.init/report.common.init*/
;define("edu_modules/report.common.init/report.common.init",function(o,e,n){var r=o("edu_modules/edu-report/edu-report");n.exports=function(o){r.config(o)}});
/*!@tencent/im-str-ellipsis/str-ellipsis*/
;define("@tencent/im-str-ellipsis/str-ellipsis",function(t){function n(){try{var t=u.get(p),n=t&&JSON.parse(t);n&&(f=n)}catch(e){}if(!f.length){for(var r=o('<span style="display:none"></span>').appendTo(document.body),a=0,s=256;s>a;a++)f.push(r.html("&#"+a).width());try{u.set(p,JSON.stringify(f))}catch(e){}}}function e(t,e,a){f.length||n();for(var s,i=t.length,o=t.split(""),u=0,c=3*f[46];a>=1&&i>u;)for(;i>u;u++){if(s=o[u],!s)return i;if("\n"===s){a--,c=0,u+=1;break}if(c+=r(s),c>e){a--,c=0;break}}return u}function r(t){return f[t.charCodeAt(0)]||12}function a(t,n,e,r,a){for(var s=t.toString(),i=s.length,o=0,u=0;i--;){var c=s.charAt(o),f=l(c,r);if(u+f+(1===e?a:0)>n||"\n"===c){if(0===--e)return o;u=0}u+=f,o++}return o}function s(t,n,r){r=Math.max(parseInt(r,10)||1,1),n=parseInt(n,10)||0,t=c.decode(t);var a=e(t,n,r);return a===t.length||1>n?c.encode(t):c.encode(t.substr(0,a))+"..."}function i(t,n,e,r,s){e=Math.max(parseInt(e,10)||1,1),r=parseInt(r,10)||12,s="number"==typeof s?parseInt(s,10):30,n=parseInt(n,10)||0,t=c.decode(t);var i=a(t,n,e,r,s);return i===t.length||1>n?c.encode(t):c.encode(t.substr(0,i))+"..."}var o=t("jquery"),u=t("@tencent/im-localstorage/localstorage"),c=t("@tencent/im-edu-html/edu-html"),f=[],p="CHAR_VALUE_DICTIONARY",d={},l=function(t,n){var e=(t||"").charCodeAt(0);if(isNaN(e))return 0;if(e>=19968&&40869>=e)return n;if(32===e)return parseInt(n/3,10);var r=o('<span style="display:none;font-size:'+n+'px;"></span>').appendTo(document.body),a=["u",e,"s",n].join(""),s=d[a];return void 0===s&&(s=r.html("&#"+e).width(),d[a]=s),s};return{substring:s,substring_plus:i}});
/*!edu_modules/t-record/record.wang*/
;define("edu_modules/t-record/record.wang",function(e,r,n){function a(e){p.extend(t,e)}function o(e,r){var n=e+r,a=p.extend({},t,{speedparams:n});if(a.appid&&a.speedparams){var o="//huatuo.weiyun.com/report.cgi"+d(a),i=new Image;i.src=o,i=null}}var p=e("jquery"),t={appid:10028,platform:"pc",speedparams:null},d=function(e){var r="";for(var n in e)e.hasOwnProperty(n)&&(r+=(r.length?"&":"?")+n+"="+encodeURIComponent(e[n]));return r};n.exports={init:a,report:o}});
/*!edu_modules/t-record/t-record*/
;define("edu_modules/t-record/t-record",function(e,n,r){function t(){return _}function a(e,n){_[e]=n||new Date-0}function o(){return window.performance&&window.performance.timing?window.performance.timing.navigationStart:window.T&&window.T[0]}function i(e,n){var r="",t=100*Math.random()+1;for(var a in n)n.hasOwnProperty(a)&&(r+="&"+a+"="+n[a].cost);if(l[e]={},m.isWang===!0)return u.report(e,r);if(e&&r){r="//isdspeed.qq.com/cgi-bin/r.cgi?"+e+r+"&r="+t;var o=new Image;o.src=r,o=null}}function d(e){return window.ISD_cgi_map&&window.ISD_cgi_map[e]||1}function c(e,n,r){if("number"==typeof r&&r>=0){var t=e[n];t?(t.cost=Math.round((t.num*t.cost+r)/(t.num+1)),t.num+=1):e[n]={cost:r,num:1}}}function s(e){var n=e.split("-");return"flag1="+n[0]+"&flag2="+n[1]+"&flag3="+n[2]}function p(e,n){var r=n&&n.url||m.url;e=e||["page_start","page_css_ready","page_js_ready","page_main_start","page_main_end","page_render_end","page_render_fp","inline_script_run_time"],/\d{4}-\d{1,2}-\d{1,2}/.test(r)&&(r=s(r)),"cgi"==e.type?r="flag1=7832&flag2=39&flag3=25":"cgiFail"==e.type&&(r="flag1=7832&flag2=39&flag3=27"),w[r]&&clearTimeout(w[r]),n=n||{},l[r]||(l[r]={});var t=l[r],a=g.extend(m.isd,n.isd),o=null;if(e&&"object"==typeof e)if(e instanceof Array){for(var p=0;p<e.length;p++){var u=e[p];if(0==p)o=_[u];else{var y=_[u]-o;(0>=y||isNaN(y))&&(y=1),t[a[u]]={cost:y,num:1}}}f(n.noPerformance,t)}else if("cgi"==e.type||"cgiFail"==e.type){var S=d(e.cgi);c(t,S,e.cost)}else for(var E in e)e.hasOwnProperty(E)&&c(t,E,e[E]);var h=0===n.delay?0:n.delay||v;h?w[r]=setTimeout(function(){i(r,t)},h):i(r,t)}function f(e,n){if(!window.performance||e)return n;var r,t,a,o=window.performance.timing;n||(n=[]),r=o.navigationStart;for(var i in S)t=S[i],20>t&&(a=o[i]-r,isNaN(a)||(0>=a&&(a=1),n[t]={cost:a,num:1}));return n}var g=e("jquery"),u=e("edu_modules/t-record/record.wang"),m={url:"",isd:{page_start:0,page_css_ready:20,page_js_ready:21,page_main_start:22,page_main_end:23,page_render_end:24,page_render_fp:25,inline_script_run_time:26}},_={},l={},v=500,w={},y=window.TRecord,S={unloadEventStart:1,unloadEventEnd:2,redirectStart:3,redirectEnd:4,fetchStart:5,domainLookupStart:6,domainLookupEnd:7,connectStart:8,connectEnd:9,requestStart:10,responseStart:11,responseEnd:12,domLoading:13,domInteractive:14,domContentLoadedEventStart:15,domContentLoadedEventEnd:16,domComplete:17,loadEventStart:18,loadEventEnd:19},E={core:{},agency:{},user:{}};if(y){var h=y.getCachedData();E=y.maps,g.extend(m,h.cfg),g.extend(_,h.speedPoints)}a("page_start",o()),r.exports={cfg:m,maps:E,push:a,report:p,getSpeedPoints:t}});
/*!edu_modules/edu-live/index*/
;define("edu_modules/edu-live/index",function(e,t,i){function n(){var e=navigator.platform;return!e||"Win32"===e||"Win64"===e||"Windows"===e}function r(){return"//ke.qq.com/webcourse/index.html#course_id="+f+"&term_id="+p+"&taid="+m}function a(){if(m)window.open(r());else if(n())s.get_taid({param:{course_id:f,term_id:p},succ:function(e){var t=e.result.term_info.lastest_live_task;m=t&&t.taid,window.open(r())}});else{var e=window.open("","_blank");s.get_taid({param:{course_id:f,term_id:p},succ:function(t){var i=t.result.term_info.lastest_live_task;m=i&&i.taid,e.location=r()}})}}function o(e,t){var i=l(t);if(g){if(!d.isLogin())return void d.show({succ:function(){l(document).trigger("loginSucc"),setTimeout(function(){i.click()},200)}});if(c=c.replace(/(&)?fuin=(\d)*/,""),!n()){if(m)window.open(r(),"_blank");else{var a=window.open("","_blank");s.get_taid({param:{course_id:f,term_id:p},succ:function(e){var t=e.result.term_info.lastest_live_task;m=t&&t.taid,a.location=r()},err:function(){a.close()}})}return void(g=!1)}}if(g){var o=l.cookie.uin();c.indexOf("fuin")<0&&o&&(c=c+"&fuin="+o),c+="&st="+(new Date-0),e.newcard?l(document).trigger("openQQClientLiveNew",[t]):l(document).trigger("openQQClientLive",[t])}window.open(c,g?"_self":"_blank")}var d=e("edu_modules/edu-login/edu-login"),u=e("edu_modules/check/check"),l=e("jquery"),s=e("edu_modules/edu-db/edu-db"),c=null,f=null,_=null,p=null,m=null,v=null,g=null,w=0,k={jumpLive:function(e,t){if(e){var i=l(e),n=null;if(t=t||{},f=parseInt(i.attr("data-cid")),_=parseInt(i.attr("data-aid")),p=parseInt(i.attr("data-tid")),m=parseInt(i.attr("data-taid")),v=parseInt(i.attr("data-streambitflag"))||0,c=i.attr("data-target"),n=v.toString(2).split(""),g="1"!==n[w],i.attr("report-close")&&i.trigger("doReport"),u.isWeixinUser()||!g)return void a();i.attr("href","javascript:void(0);"),g&&o(t,e)}}};i.exports=k});
/*!edu_modules/monitor-tencent-open/monitor-tencent-open*/
;define("edu_modules/monitor-tencent-open/monitor-tencent-open",function(t,e,n){"use strict";function i(t,e,n){var u=t.getAttribute("data-tid")||t.getAttribute("data-cid")||r.query("course_id");"undefined"==typeof s[u]&&(s[u]=1),o.getClientStatus({param:{cid:u},succ:function(o){if(0==o.result.info.s){var r="time: "+s[u]+"s, online: "+(o.result.onlstat?"yes":"no")+", ip: "+(o.result.cltip||"unknown")+", client ver:"+(o.result.cltvers||"unknown");c(r,"monitorTencentOpen",0,410354+2*s[u],2),5==s[u]&&c(r+", only 5s","monitorTencentOpen",0,o.result.onlstat?413175:413176,2),s[u]<l?(s[u]++,a[u]=setTimeout(function(){i(t,e,n)},1e3)):(n&&n(),c("进入课堂失败","monitorTencentOpen",0,2528841,2),$.render.showEnterRoomFailureTips(t))}else e&&e(),c("enter course success after open tencent in "+s[u]+"s","monitorTencentOpen",0,410355+2*s[u],2)},err:function(){return n&&n(),!0}})}var o=t("edu_modules/edu-db/edu-db"),u=t("edu_modules/edu-live/index"),r=t("@tencent/im-util.bom/util.bom"),c=window.Badjs;o.extend({getClientStatus:o.httpMethod({url:"/cgi-bin/tool/get_status",type:"GET"})});var s={},l=10,a={},d={};n.exports={init:function(){$(document).on("openQQClientLive",function(t,e){var n=$(e),o=n.html();if(e&&e.getAttribute){var u=e.getAttribute("data-tid")||e.getAttribute("data-cid")||$.bom.query("course_id");s[u]=1,a[u]&&clearTimeout(a[u]),a[u]=setTimeout(function(){i(e,function(){clearInterval(d[u]),n.html(o)},function(){clearInterval(d[u]),n.html(o)})},1e3),d[u]&&(clearInterval(d[u]),d[u]=null),n.html('进入中<span class="js-loading-dot loading-dot"></span>');var r=n.find(".js-loading-dot");d[u]=setInterval(function(){var t=r.text();r.text("..."==t?".":t+".")},600)}}).on("openQQClientLiveNew",function(t,e){setTimeout(function(){i(e)},1e3)}),$(document).on("click",".js-open-tencent[data-target]",function(t){u.jumpLive(this,{newcard:!0,event:t})})}}});
/*!/edu_modules/side-operation/side_operation.tpl_tpl*/
;define("/edu_modules/side-operation/side_operation.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<aside class="wrap-side-operation" id="js-side-operation"> <div class="mod-side-operation"> <div id="js-async-download" class="side-service-item" report-tdw="action=sweep" style="display: none;"> <a class="side-service-right" href="javascript:void(0);"> <i class="icon-font i-file-download item-icon"></i> <span id="download-red-point" class="side-red-point"> <span id="download-num" data-num="0"></span> </span> </a> </div> <div class="side-service-item side-service-hover side-service-qq js-c-special"> <a class="item-link-block" href="http://wpa.b.qq.com/cgi/wpa.php?ln=2&uin=800082734" target="_blank" report-tdw="action=BQQ_clk&module=agencymanage"> <i class="icon-font i-qq-border item-icon"></i> <span class="item-hover-text">在线客服</span> </a> </div> <div class="side-service-item side-service-hover side-service-weixin js-c-special"> <i class="icon-font i-weixin-border item-icon"></i> <span class="item-hover-text">扫码关注</span> <div class="item-hover-tips"></div> </div> <div id="js-private-msgs" class="side-service-item" report-tdw="action=sweep"> <a class="side-service-right" href="javascript:void(0);"> <i class="icon-font i-message item-icon"></i> <span id="msg-red-point" class="side-red-point"> <span id="red-num"></span> </span> </a> </div> <div id="js-qrcode-container" class="side-service-item side-service-phone" report-tdw="action=sweep"> <a class="side-service-right" href="//ke.qq.com/download/app.html" target="_blank"> <i class="icon-font i-phone item-icon" id="js-qrcode-icon"></i> <span class="item-hover-text" id="js-qrcode-wording">App下载</span> <span class="hidden-clip">腾讯课堂【APP Android iPhone 下载】</span> </a> <div class="item-hover-tips"></div> </div> <!-- 免费批改作业 mod.revise.scss --> <div class="side-service-item side-service-qr-code side-service-qr-design-course" style="display: none;"> <a class="side-service-right"> <i class="icon-font i-weixin-border item-icon"></i> <span class="item-hover-text">官方微信</span> </a> <a class="item-hover-tips"> <i class="icon-font i-close" id="i_design_course_close"></i> <i class="item-hover-bg"></i> <p class="item-hover-title">扫码关注腾讯课堂设计学院，第一时间查看最新批改结果。</p> </a> </div> <div id="js-jump-container" class="js-jump-container"> <a href="javascript:void(0)" class="mod-side-operation__jump-to-top" id="js-jump-to-top"><i class="icon-font i-to-top"></i></a> <div id="js-jump-plan-container" class="js-jump-plan-container"> <a href="javascript:void(0)" class="js-jump-plane" id="js-plane"></a> </div> </div> <iframe id="private-msgs-iframe" class="msg-iframe msg-iframe-show"></iframe> <iframe id="async-download-iframe" class="download-iframe msg-iframe-show"></iframe> </div></aside>'),_$out_.join("")}}});
/*!edu_modules/side-operation/side-operation*/
;define("edu_modules/side-operation/side-operation",function(e,s,o){function t(e){var s,o=function(s){var o=s&&s.is_login;o?(e.succ&&e.succ(),p=!0):e.fail?e.fail():m.show({succ:function(){window.location.reload()},source:1})};if(p){try{s=JSON.parse(localStorage.getItem("__userinfo")||"{}"),"string"==typeof s&&(s=JSON.parse(s))}catch(t){}return void o(s)}u.getInfo().then(function(e){o(e)})}function i(){var e=_.scrollTop();0!==e?v.clearQueue().fadeIn():v.clearQueue().fadeOut()}function n(e,s,o){var t=-s.slice(0,-2)/2+"px",i=-o.slice(0,-2)/2+"px";e.hasClass("msg-iframe-show")?(e.css({transform:"scale(0)",right:t,bottom:i}).removeClass("msg-iframe-show"),setTimeout(function(){e.css({transform:"scale(1)",right:"81px",bottom:0,transition:"transform 0.3s, right 0.3s, bottom 0.3s"})},0)):(e.css({transform:"scale(0)",right:t,bottom:i,opacity:0,transition:"transform 0.3s, right 0.3s, bottom 0.3s, opacity 0.3s"}),setTimeout(function(){e.addClass("msg-iframe-show"),e.css({transform:"scale(1)",right:"81px",bottom:0,opacity:1})},300))}function a(e){for(var s=!1;e[0]&&"BODY"!==e[0].tagName;){if(e[0].className.indexOf("modal")>=0){s=!0;break}e=e.parent()}return s}function c(){function e(e){var s=d(e.target),o=b.is(":visible")&&(s.hasClass("i-message")||s.hasClass("msg-iframe")||s.hasClass("btn-advice-qq")||s.hasClass("show-letter")||s.hasClass("js-modal-bg")||a(s)),t=q.is(":visible")&&(s.hasClass("i-file-download")||s.hasClass("download-iframe")||s.hasClass("btn-advice-qq")||s.hasClass("show-download")||s.hasClass("js-modal-bg")||a(s));!o&&b.is(":visible")&&(sessionStorage.crm_specific_send_msg&&sessionStorage.removeItem("crm_specific_send_msg"),b.toggleClass("msg-iframe-show"),_.toggleClass("side-service-item-active")),!t&&q.is(":visible")&&(q.toggleClass("msg-iframe-show"),j.toggleClass("side-service-item-active"))}var s,o,c=d("#js-side-operation"),l=d("#js-jump-to-top"),m=d("#js-jump-plan-container"),g=d("#js-plane"),h=d("#js-tips-close"),_=(d("#js-qrcode-icon"),d("#js-qrcode-wording"),d("#js-private-msgs")),b=d("#private-msgs-iframe"),j=(d("#msg-red-point"),d("#js-async-download")),q=d("#async-download-iframe"),x=(d("#download-red-point"),d("#js-qrcode-container"));"ke.qq.com"!==location.host&&_.hide(),-1!=d.inArray(location.pathname,C)&&c.find(".js-c-special").css({display:"block"}),u.getInfo().then(function(e){var t=e&&e.is_login;t&&(b.attr("src",r()),b.on("load",function(){s=b.css("width"),o=b.css("height")}))}),C[3]===location.pathname&&c.find(".js-feedback-link").attr("href","http://support.ke.qq.com/forum.php?mod=forumdisplay&fid=46");var I=0;d(window).on("scroll",function(){clearTimeout(I),I=setTimeout(i,300)}),v.on("mouseenter",function(){l.addClass("mod-side-operation__jump-to-top-hover"),m.show().css({top:0}),g.css("top","60px").animate({top:2})}).on("mouseleave",function(){l.removeClass("mod-side-operation__jump-to-top-hover"),g.stop().css("top","60px")}),_.on("click",function(e,i){t({succ:function(){p||b.attr("src",r(0)),s?n(b,s,o):b.toggleClass("msg-iframe-show"),_.toggleClass("side-service-item-active"),f.tdw({action:"click",module:"message",position:i?"topbar":"sidebar",ver1:_.hasClass("side-service-item-active")?"open":"close"}),sessionStorage.crm_specific_send_msg&&sessionStorage.removeItem("crm_specific_send_msg")}})}),j.on("click",function(){t({succ:function(){if(s?n(q,s,o):q.toggleClass("msg-iframe-show"),j.toggleClass("side-service-item-active"),j.hasClass("side-service-item-active")){if(!window.location.origin){var e=window.location.protocol,t=window.location.hostname,i=window.location.port;i=i?":"+i:"",window.location.origin=e+"//"+t+i}q[0].contentWindow.postMessage("update_download_list",window.location.origin)}}})}),window.addEventListener("storage",function(){var e=null;try{var s=sessionStorage.getItem("crm_specific_send_msg");s&&(e=JSON.parse(sessionStorage.getItem("crm_specific_send_msg")))}catch(o){}e&&(b.attr("src","//ke.qq.com/letter/index.html#/agency"),b.toggleClass("msg-iframe-show"),_.toggleClass("side-service-item-active"))}),d(document).on("show_private_msg",function(){t({succ:function(){b.toggleClass("msg-iframe-show"),_.toggleClass("side-service-item-active"),b.attr("src",r(1))}})}).on("show_async_download",function(){t({succ:function(){q.toggleClass("msg-iframe-show"),j.toggleClass("side-service-item-active"),j.hasClass("side-service-item-active")&&q[0].contentWindow.postMessage("update_download_list",location.origin)}})}).on("click",e).on("ready",function(){var s=document.getElementById("js-react-frame");s&&s.contentWindow&&s.contentWindow.addEventListener("click",e)}),m.on("click",function(){g.triggerHandler("click")}),g.on("click",function(e){var s=d(this),o=c.offset().top;1!=s.prop("flying")&&(s.prop("flying",1),m.animate({top:-o-500+"px"}),setTimeout(function(){d("html, body").animate({scrollTop:0},function(){s.prop("flying",0)})},50),f.tdw({action:"up"}),e.preventDefault())}),h.on("click",function(e){x.removeClass("item-hover-tips__show"),e.preventDefault(),e.stopPropagation(),w.set(y,1)}),k&&(b.toggleClass("msg-iframe-show"),_.toggleClass("side-service-item-active"))}function r(e){var s,o="",t=window.metaData||{},i=t.saler_uin,n=t.aid||t.org_id,a=parseInt(t.course_type,10)||1,c=1===a?t.cid:t.id,r=g.getHash("msg_aid")||g.query("msg_aid"),l=g.getHash("msg_re_uin")||g.query("msg_re_uin");switch(e){case 0:o=["//ke.qq.com/letter/index.html#/?",d.param({type:a,id:c})].join("");break;case 1:s=d.param({type:a,id:c,agencyId:n,receiverUin:i,isConsult:1}),o=["//ke.qq.com/letter/index.html#/?",s].join("");break;default:o="//ke.qq.com/letter/index.html",k&&l&&r&&(o+="#/?agencyId="+r+"&receiverUin="+l+"&isConsult=1")}return o}function l(){d("body").append(h());d("#js-qrcode-container");v=d("#js-jump-container"),i(),c(),window.updateDownloadPoint=function(){var e;return function(s){var o=d("#download-red-point"),t=d("#download-num");0!==o.length&&0!==t.length&&t.text()!==s+""&&("!"===s?(e&&clearTimeout(e),o.removeClass("red-point-shake"),t.removeClass("red-num-up").addClass("red-num-down"),e=setTimeout(function(){t.removeClass("red-num-down").addClass("red-num-up").text(s),o.addClass("red-point-shake").css("display","block")},200)):0>=s?(s=0,t.text(""),o.css("display","none")):(e&&clearTimeout(e),o.removeClass("red-point-shake"),t.removeClass("red-num-up").addClass("red-num-down"),e=setTimeout(function(){t.removeClass("red-num-down").addClass("red-num-up").text(99>=s?s:"99+"),o.addClass("red-point-shake").css("display","block")},200)))}}();var e;window.showAsyncDownload=function(s){var o="//ke.qq.com/async_download/index.html";s&&(o+="?aid="+s),e!==o&&(d("#async-download-iframe").attr("src",o),e=o),d("#js-async-download").css("display","block")},window.hideAsyncDownload=function(){d("#js-async-download").css("display","none")}}var d=e("jquery"),m=e("edu_modules/edu-login/edu-login"),u=e("edu_modules/edu-user/index"),g=e("@tencent/im-util.bom/util.bom"),p=!1,f=e("edu_modules/reportor/index"),h=e("/edu_modules/side-operation/side_operation.tpl_tpl"),w=e("edu_modules/local.data/local.data"),v=null,_=d(window),C=["/agency/join/index.html","/agency/personal/intro.html","/agency/personal/index.html","/agency/index/index.html","/agency/publish/index.html"],y="qrcode-close",b="auto_open_msg",k=g.getHash(b)||g.query(b);o.exports={init:l}});
/*!edu_modules/secure-check/secure-check*/
;define("edu_modules/secure-check/secure-check",function(e,r,t){function a(e,r){var t=n('<iframe name="scIframe" id="scIframe" src="about:blank">');t.appendTo("body"),t.css("display","none");var a=n("<form></form>");a.attr("action",e),a.attr("method","post"),a.attr("target","scIframe");for(var o in r){var s=n("<input type='hidden' name='"+o+"' />");s.attr("value",r[o]),a.append(s)}a.appendTo("body"),a.css("display","none"),a.submit();var c=setTimeout(function(){a.remove(),t.remove(),c=t=a=null},500)}var n=e("jquery");t.exports={check:function(e){try{if("/storage_proxy.html"===location.pathname)return}catch(r){}var t,o="//tgwsc.qq.com/sc",s=n.ajax({url:e.url,timeout:3e3,headers:{"X-Tgw-Sc":e.pageFlag},error:function(e,r,a){t={result:0,err:"timeout"===r?1:4,rsp_len:0,rsp_code:e.status,rsp_text:""}},success:function(e){e=e||"",t={result:1-(213===e.length),err:0,rsp_len:e.length,rsp_code:200,rsp_text:e}}}).always(function(){var r={};n.extend(r,t,{product:e.product,url:e.url,location:"",rsp_server:s.getResponseHeader("server")||""}),a(o,r),s=null})}}});
/*!edu_modules/order-info/index*/
;define("edu_modules/order-info/index",function(e,t,o){var r=e("@tencent/im-util.bom/util.bom"),n=e("edu_modules/util.cookie/util.cookie"),s=r.query("from")||r.getHash("from"),a=r.query("scenes")||r.getHash("scenes"),i=r.query("paysource")||r.getHash("paysource"),u=r.query("sessionUserType"),c=r.query("ADTAG"),f="from_qzone",m="from_client",d=n.get(m),q=function(){{var e=navigator.userAgent.toLowerCase();navigator.platform}return"Win32"==navigator.platform||"Windows"==navigator.platform||/windows ce/.test(e)?1:/android/.test(e)?2:/ipad/.test(e)||/iphone os/.test(e)?3:/mac/.test(e)?4:0},g=function(){{var e=n.get(f),t=navigator.userAgent.toLowerCase();navigator.platform}return e?6:"qqchat"===s||d?3:"Win32"==navigator.platform||"Windows"==navigator.platform||/windows ce/.test(t)||/mac/.test(t)?1:0},l=function(){return u.indexOf("BFT")>=0?6:"3"===s||d?4:"qqchat"===s?5:"2"===a?2:0},p=function(){return"4"===i?4:"1"===i?1:"2"===i?2:"3"===i?3:0},v={getInfo:function(){return{os:q(),entrance:g(),scenes:l(),sub_scenes:p()}},init:function(){var e=!/ke.qq.com/.test(document.referrer.replace(/\?.*/,""))||s;/qzone.qq.com/.test(document.referrer)?n.set(f,"1"):e&&n.del(f),"qqchat"!==s&&/CLIENT/.test(c)?n.set(m,"1"):e&&n.del(m)}};o.exports=v});
/*!edu_modules/edu-base/edu-base*/
;define("edu_modules/edu-base/edu-base",function(e){e("edu_modules/jquery.lazyload/jquery.lazyload"),e("@tencent/im-jquery.slider/jquery.slider"),e("@tencent/im-jquery.share/jquery.share"),e("@tencent/im-jquery.spin/jquery.spin"),e("edu_modules/edu-report/edu-report"),e("edu_modules/report.attr/report.attr"),e("edu_modules/report.cookie/report.cookie"),e("edu_modules/huatuo/index"),e("edu_modules/huatuo.common.init/huatuo.common.init"),e("edu_modules/edu-login/edu-login"),e("edu_modules/edu-db/edu-db"),e("edu_modules/edu-render/edu-render"),e("edu_modules/edu-dialog/edu-dialog"),e("edu_modules/modal/modal"),e("@tencent/im-cache/cache"),e("edu_modules/anti-embed/anti-embed"),e("edu_modules/huatuo/edu-huatuo-resource"),e("@tencent/im-jquery.placeholder/jquery.placeholder"),e("edu_modules/edu-low-version/edu-low-version"),window.isFallback||e("edu_modules/edu-top/index");var o=e("jquery");o.extend({cookie:e("edu_modules/util.cookie/util.cookie"),bom:e("@tencent/im-util.bom/util.bom"),str:e("@tencent/im-util.str/util.str"),initReport:e("edu_modules/report.common.init/report.common.init"),loadScript:function(e,d){o.ajax({type:"GET",url:e,success:d,dataType:"script",cache:!0})}}),window.html=e("@tencent/im-edu-html/edu-html"),window.cdn_switch_detector_js_base=1,window.strEllipsis=e("@tencent/im-str-ellipsis/str-ellipsis"),window.TRecord=e("edu_modules/t-record/t-record");var d=e("edu_modules/monitor-tencent-open/monitor-tencent-open");d&&d.init&&d.init();var t=e("edu_modules/side-operation/side-operation"),u=["/storage_proxy.html"];!function(){var e=window.isNotNeedToLoadSideOperation;if(t){if(-1!==u.indexOf(location.pathname)||e)return;t.init&&t.init()}}();var i=e("edu_modules/secure-check/secure-check");!function(){if("ke.qq.com"===location.hostname&&1!=o.bom.query("preload")&&1!=o.bom.getHash("preload")&&"/comment.html"!=location.pathname){var e=function(){i.check({product:"ketang",pageFlag:"ketang-sc",url:"//ke.qq.com/ketang_sc.html"})};"complete"===document.readyState?e():o(window).on("load",function(){e()})}}();var n=e("edu_modules/order-info/index");n.init()});
/*!agency/publish/common/feature.flag*/
;define("agency/publish/common/feature.flag",function(e){var u=e("jquery"),o=e("edu_modules/edu-db/edu-db"),r=u.cookie.uin(),t=function(e){return-1!==e.indexOf(r)},n=u.FT={},d=o.httpMethod({url:"/cgi-agency/course/manager/feature_toggle_auth"});return d({succ:function(e){var o=n.down_course=1===((e||{}).result||{}).flag;o&&u("body").addClass("open_down_course")}}),n.without_verify=t([312405270,3161937463]),n.verify_day=n.without_verify?0:2,n.disabled_generator_datetime=!1,n});
/*!agency/publish/common/db.publish*/
;define("agency/publish/common/db.publish",function(e){var t=e("edu_modules/edu-db/edu-db");return t.extend({get_bankinfo:t.httpMethod({url:"/cgi-agency/agency/manager/get_bankinfo",type:"GET"}),agency_ios_contrace:t.httpMethod({url:"/cgi-agency/agency/agencyIosContract",type:"GET"}),get_agency_course_limit:t.httpMethod({url:"/cgi-agency/agency/get_agency_course_limit",type:"GET"}),get_agency_info:t.httpMethod({url:"/cgi-agency/agency/manager/info",type:"GET"}),get_course_label:t.httpMethod({url:"/cgi-agency/course/manager/get_course_label",type:"GET"}),get_check_fee:t.httpMethod({url:"/cgi-bin/tool/check_fee",type:"GET"}),get_qqgroup_list:t.httpMethod({url:"/cgi-agency/agency/manager/get_qqgroup_list",type:"GET"}),get_teacher_list:t.httpMethod({url:"/cgi-agency/agency/manager/get_teacher_list",type:"GET"}),get_sale_teacher_list:t.httpMethod({url:"/cgi-agency/crm/get_seller_list",type:"GET"}),get_course_list:t.httpMethod({url:"/cgi-agency/agency/manager/get_course_list",type:"GET"}),get_course_list_simple:t.httpMethod({url:"/cgi-agency/course/manager/get_course_list_simple",type:"GET"}),check_teachers_conflict:t.httpMethod({url:"/cgi-agency/check_teachers_conflict",type:"GET"}),get_video_info:t.httpMethod({url:"/cgi-agency/manager/video/get_video_info",type:"GET"}),get_course_info:t.httpMethod({url:"/cgi-agency/course/manager/get_course_info",type:"GET"}),get_audit_term_info:t.httpMethod({url:"/cgi-agency/get_audit_term_info",type:"GET"}),upload_pic_base64:t.httpMethod({url:"/cgi-agency/teacher/upload_pic_base64",type:"POST"}),has_new_list:t.httpMethod({url:"/cgi-agency/agency/has_new_list",type:"GET"}),get_p_agency_info:t.httpMethod({url:"/cgi-agency/person_teacher/get_p_agency_info",type:"POST"}),publish_mix_course:t.httpMethod({url:"/cgi-agency/course/manager/publish_mix_course",type:"POST"}),modify_mix_course_basic:t.httpMethod({url:"/cgi-agency/course/manager/modify_mix_course_basic",type:"POST"}),modify_mix_course_terms:t.httpMethod({url:"/cgi-agency/course/manager/modify_mix_course_terms",type:"POST"}),modify_term_plan:t.httpMethod({url:"/cgi-agency/course/manager/modify_term_plan",type:"POST"}),preview_mix_course:t.httpMethod({url:"/cgi-agency/course/manager/preview_mix_course",type:"POST",async:!1}),get_all_discount:t.httpMethod({url:"/cgi-proxy/discount/get_all_discount",type:"GET"}),__last:null}),t});
/*!@tencent/im-pinyin/pinyin*/
;define("@tencent/im-pinyin/pinyin",function(){var n={},a=100;return n.dict={er:"二贰儿而耳尔饵",shi:"十时实蚀士示世市式势事侍饰试视柿是适室逝释誓拭恃嗜尸失师诗狮施湿虱史使始驶矢屎",yi:"乙已以蚁倚一衣医依伊揖壹亿义艺忆议亦异役译易疫益谊意毅翼屹抑邑绎奕逸肄溢仪宜姨移遗夷胰椅","chang,an,han":"厂","ding,zheng":"丁",qi:"七戚欺漆柒凄嘁乞企启起气弃汽器迄泣妻骑棋旗歧祈脐畦崎鳍","bu,bo":"卜簿",ren:"人仁刃认韧纫任忍",ru:"入褥如儒蠕乳辱",jiu:"九久酒玖灸韭旧救就舅臼疚纠究揪鸠",ba:"八巴疤叭芭捌笆坝爸霸把吧拔跋靶",ji:"几及吉级极即急疾集籍棘辑嫉己挤脊计记技忌际季剂迹既继寄绩妓荠寂鲫冀击饥圾机肌鸡积基激讥叽唧畸箕纪济","liao,le":"了",li:"力历厉立励利例栗粒吏沥荔俐莉砾雳痢礼李里理鲤丽厘狸离犁梨璃黎漓篱哩",dao:"刀导岛蹈捣祷到盗悼道稻倒",nai:"乃奶耐奈",san:"三叁伞散",you:"又右幼诱佑友尤由邮犹油游有优忧悠幽",yu:"于余鱼娱渔榆愚隅逾舆与予玉育狱浴预域欲遇御裕愈誉芋郁喻寓豫屿宇羽雨语迂淤",gan:"干甘肝竿柑杆秆赶敢感橄",gong:"工弓公功攻宫恭躬巩汞拱共贡供",kui:"亏盔窥葵魁愧",tu:"土吐秃突凸图徒途涂屠兔",cun:"寸存村","da,dai,tai":"大",cai:"才材财裁采菜彩睬踩猜",xia:"下夏虾瞎峡狭霞匣侠暇辖",zhang:"丈仗帐胀障杖账张章彰樟涨掌",shang:"上伤商尚晌赏","wan,mo":"万",kou:"口扣寇抠",xiao:"小晓孝笑效哮啸消宵销萧硝箫嚣肖淆",jin:"巾斤今金津筋襟仅尽进近晋浸紧锦谨禁",shan:"山删衫珊闪陕扇善擅膳赡苫",qian:"千迁牵谦签欠歉前钱钳潜黔遣谴",chuan:"川穿串船喘",ge:"个各革阁格隔哥鸽割歌戈胳搁葛",shao:"勺芍少绍哨捎稍烧",fan:"凡烦矾樊反返犯饭泛范贩帆翻",xi:"夕西吸希析牺息悉惜稀锡溪熄膝昔晰犀熙嬉蟋习席袭媳细隙喜徙",wan:"丸完玩顽弯湾豌挽晚碗惋婉腕","yao,mo,ma,me":"么","guang,an":"广","wang,wu":"亡",men:"门们闷",zhi:"之支汁芝肢脂蜘止旨址纸指趾只执直侄值职植至志帜制质治致秩智置挚掷窒滞稚知织",zi:"子紫姊籽滓自字姿资滋咨",wei:"卫未位味畏胃喂慰谓猬蔚魏为伟伪苇纬萎危威微偎薇巍违围唯维桅委",ye:"也冶野业页夜液谒腋爷掖椰","nv,ru":"女",fei:"飞非啡肺废沸费吠肥匪诽菲",ma:"马码玛吗妈蚂骂麻",cha:"叉岔衩茶察茬插杈碴",feng:"丰封疯峰锋蜂枫风凤奉讽逢缝",xiang:"乡香箱厢湘镶向项象像橡享响想相祥翔",jing:"井警阱茎京经惊晶睛精荆兢鲸径竞竟敬静境镜靖",wang:"王网往枉妄忘旺望汪",kai:"开揩凯慨",tian:"天添田甜恬舔",wu:"无吴芜梧蜈五午伍武侮舞捂鹉勿务物误悟雾坞晤乌污呜屋巫诬",fu:"夫父付负妇附咐赴复傅富腹覆赋缚伏扶俘浮符幅福凫芙袱辐蝠抚斧府俯辅腐甫脯肤麸孵敷服",zhuan:"专砖赚撰",yuan:"元园原圆援缘源袁猿辕远怨院愿冤鸳渊",yun:"云匀耘允陨孕运韵酝蕴晕","za,zha":"扎",mu:"木目牧墓幕暮慕沐募睦穆母亩牡拇姆",ting:"厅听挺艇亭庭停蜓廷","bu,fou":"不","qu,ou":"区",quan:"犬劝权全泉拳痊",tai:"太态泰汰台苔抬胎","che,ju":"车",pi:"匹皮疲脾啤批披坯霹僻屁譬劈",ju:"巨拒具俱剧距惧锯聚炬局菊橘居鞠驹矩举据沮",ya:"牙芽崖蚜涯衙轧亚讶压呀押鸦鸭哑雅",bi:"比彼笔鄙匕秕币必毕闭毙碧蔽弊避壁庇蓖痹璧逼鼻荸",jie:"皆阶接街秸介戒届界借诫节结劫杰洁捷截竭姐",hu:"互户护沪乎呼忽虎狐胡壶湖蝴弧葫糊",qie:"切茄窃怯",wa:"瓦挖蛙洼娃袜","tun,zhun":"屯",ri:"日",zhong:"中众仲忠终钟盅衷肿",gang:"冈刚纲缸肛杠岗钢","nei,na":"内",bei:"贝备倍辈狈惫焙北杯悲碑卑背",shui:"水谁税睡","jian,xian":"见",niu:"牛扭纽钮",shou:"手守首收寿受授售兽瘦",mao:"毛矛茅锚茂贸帽貌猫铆",sheng:"升生声牲笙甥圣胜剩绳","chang,zhang":"长","shi,shen":"什",pian:"片偏篇翩骗",pu:"仆扑葡菩蒲铺普谱圃浦",hua:"化划华花画话桦哗猾滑","chou,qiu":"仇","zhao,zhua":"爪",reng:"仍扔","cong,zong":"从",xiong:"凶兄胸匈汹雄熊",fen:"分坟焚芬吩纷氛奋粪愤忿粉",fa:"乏伐罚阀筏发法",cang:"仓苍舱沧",yue:"月阅悦跃越岳粤","shi,zhi":"氏识",dan:"丹耽旦但诞淡蛋氮担胆",gou:"勾沟钩构购够垢狗苟",wen:"文闻蚊问纹温瘟稳吻紊","liu,lu":"六",huo:"火伙或货获祸惑霍活",fang:"方芳仿访纺防妨房肪坊放",dou:"斗抖陡蚪豆逗痘兜",ding:"订定锭叮盯钉顶鼎",xin:"心辛欣新薪锌芯衅","chi,che":"尺",yin:"引饮蚓瘾印因阴音姻茵银吟淫隐",chou:"丑抽绸酬筹稠愁畴",kong:"孔恐空控",dui:"队对堆",ban:"办半扮伴瓣绊板版班般斑搬扳颁",shu:"书叔殊梳舒疏输蔬抒枢淑束述树竖恕庶墅漱暑鼠薯黍蜀署曙熟秫赎",shuang:"双霜爽",huan:"幻换唤患宦涣焕痪欢环缓",kan:"刊堪勘砍坎看",mo:"末沫漠墨默茉陌寞摸膜魔馍摹蘑磨",da:"打达搭答瘩",qiao:"巧乔侨桥瞧荞憔悄锹敲跷峭窍撬翘",zheng:"正挣症争征睁筝蒸怔狰证郑政整拯","ba,pa":"扒耙",qu:"去曲驱屈岖蛆躯取娶",gu:"古谷股鼓估固故顾雇孤姑辜咕沽菇箍骨",ben:"本奔笨","shu,zhu":"术属",bing:"丙柄饼秉禀冰兵并病",ke:"可克刻客课科棵颗磕蝌渴坷",zuo:"左作坐座做昨",bu:"布步怖部埠补捕哺","shi,dan":"石","long":"龙聋隆咙胧窿拢垄笼",mie:"灭蔑",ping:"平评凭瓶萍坪乒",dong:"东冬动冻栋洞董懂","qia,ka":"卡",shuai:"帅蟀甩摔",gui:"归规闺硅瑰轨鬼诡贵桂跪刽",zhan:"占斩盏展沾粘毡瞻战站栈绽蘸","qie,ju":"且","ye,xie":"叶",jia:"甲钾加佳嘉枷驾架嫁稼假荚颊",shen:"申伸身深呻绅肾渗慎审婶甚神",hao:"号好耗浩毫豪壕嚎蒿",dian:"电店垫殿玷淀惦奠典点碘颠掂",yang:"央殃秧鸯扬阳杨洋养氧痒样漾",diao:"叼雕刁碉吊钓掉",jiao:"叫轿较窖酵交郊浇娇骄胶椒焦蕉礁狡饺绞脚搅教矫",ling:"另令伶灵铃陵零龄玲凌菱蛉翎岭领","tao,dao":"叨",si:"四寺饲肆司丝私斯撕嘶死",tan:"叹炭探碳坛谈痰昙谭潭檀坦毯袒贪摊滩瘫",qiu:"丘秋蚯求球囚",he:"禾河荷盒何贺赫褐鹤",dai:"代带贷怠袋逮戴呆待歹",xian:"仙先掀锨闲贤弦咸衔嫌涎舷现限线宪陷馅羡献腺显险鲜",bai:"白百摆败拜掰","zi,zai":"仔",chi:"斥赤翅吃嗤痴池驰迟持弛齿耻侈",ta:"他它塌塔踏蹋",gua:"瓜刮挂卦褂寡",cong:"丛匆葱聪囱",yong:"用永咏泳勇蛹踊佣拥庸","le,yue":"乐","ju,gou":"句拘",ce:"册厕测策",wai:"外歪",chu:"处出初除厨锄雏橱础储楚触矗",niao:"鸟",bao:"包胞苞褒报抱爆豹饱宝保雹",zhu:"主煮嘱拄竹逐烛住注驻柱祝铸贮蛀珠株诸猪蛛筑",lan:"兰拦栏蓝篮澜览懒揽缆榄烂滥",tou:"头投透偷",hui:"汇绘贿惠慧讳诲晦秽灰挥恢辉徽回茴蛔悔毁",han:"汉旱捍悍焊撼翰憾汗含寒函涵韩喊罕酣憨",tao:"讨逃桃陶萄淘套涛掏滔",xue:"穴学雪靴薛",xie:"写协胁斜携鞋谐泻卸屑械谢懈蟹歇楔蝎","ning,zhu":"宁",rang:"让壤攘嚷瓤",xun:"训讯迅汛驯逊殉旬寻巡询循勋熏",min:"民敏皿闽悯",ni:"尼你拟泥逆昵匿腻",liao:"辽疗僚聊寥嘹缭料镣撩燎瞭",nu:"奴努怒","zhao,shao":"召",bian:"边编鞭蝙变遍辨辩辫贬匾","kang,gang":"扛",xing:"刑形型邢兴杏幸性姓星腥猩醒",kao:"考烤拷靠铐",tuo:"托拖脱妥椭驼驮鸵唾",lao:"老劳牢捞涝酪唠",kuo:"扩阔廓","di,de":"地的底",sao:"扫嫂搔骚臊",chang:"场肠尝常偿昌猖畅唱倡敞",mang:"芒忙盲茫莽",xiu:"朽秀袖绣锈嗅修羞","pu,po,piao":"朴",guo:"过果裹国锅郭",chen:"臣尘辰沉陈晨忱衬趁",zai:"再在灾栽载宰",yan:"厌艳宴验雁焰砚唁谚堰延严言岩炎沿盐颜阎蜒檐研烟淹掩眼演衍燕奄",kua:"夸垮跨胯",jiang:"匠酱江姜僵缰讲奖桨蒋将浆",duo:"夺踱朵躲多哆惰舵跺垛",lie:"列劣烈猎裂咧","xie,ya,ye,yu,xu":"邪","jia,ga,xia":"夹",cheng:"成呈诚承城程惩橙秤撑逞",mai:"迈麦卖买",ci:"此次赐词辞慈磁祠瓷雌刺",zhen:"贞针侦珍真斟榛阵振震镇诊枕疹",jian:"尖奸歼坚肩艰兼煎件建荐贱剑健舰践鉴键箭涧间监拣茧俭捡检减剪简柬碱渐溅",guang:"光逛",dang:"当挡荡档党裆",zao:"早枣澡蚤藻皂灶造燥躁噪遭糟凿","xia,he":"吓",chong:"虫崇冲充宠",tuan:"团",tong:"同统桶筒捅桐铜童彤瞳通痛","qi,kai":"岂",ze:"则责",sui:"岁碎穗祟遂隧虽随髓",rou:"肉柔揉蹂","zhu,shu":"朱",nian:"年念蔫撵碾",diu:"丢",she:"舌设社舍涉赦奢赊","chuan,zhuan":"传",pang:"乓胖庞螃","xiu,xu":"休","jia,jie":"价家","fen,bin":"份","yang,ang":"仰","xie,xue":"血","si,shi":"似",hou:"后厚候吼喉猴侯",zhou:"舟州周洲宙昼皱骤咒肘帚轴","hang,xing":"行","hui,kuai":"会",sha:"杀纱杉砂沙煞傻啥霎","he,ge":"合",zhao:"兆赵照罩找沼招昭",chuang:"创闯床疮窗",za:"杂砸",ming:"名明鸣铭螟命",se:"色涩瑟",zhuang:"壮状撞庄装妆桩",qing:"庆青轻倾清蜻氢卿顷请情晴擎",liu:"刘留流榴琉硫瘤柳溜馏","qi,ji,zi,zhai":"齐",chan:"产铲阐馋缠蝉搀","yang,xiang":"羊",deng:"灯登蹬等凳邓瞪",mi:"米迷谜靡眯密蜜觅弥咪",guan:"关官棺观冠贯惯灌罐馆管",jue:"决绝掘诀爵倔","tang,shang":"汤",zhai:"宅债寨窄摘斋",an:"安氨庵鞍岸按案暗俺",jun:"军均君钧俊峻骏竣菌","xu,hu":"许",lun:"论轮仑伦沦抡",nong:"农浓脓","na,nei":"那","sun,xun":"孙","xi,hu":"戏","ta,jie":"她","hong,gong":"红","xian,qian":"纤","yue,yao":"约钥","nong,long":"弄",tun:"吞臀","huai,pei,pi":"坏",rao:"扰饶绕",che:"扯彻撤澈",zou:"走奏揍",chao:"抄钞超吵炒潮巢","zhe,she":"折","qiang,cheng":"抢",zhua:"抓",pao:"抛泡袍咆跑",kang:"抗炕康糠慷",keng:"坑","ke,qiao":"壳",kuai:"块快筷",que:"却确鹊缺瘸",qin:"芹琴禽勤秦擒侵钦寝",lu:"芦炉卢庐颅陆录鹿路赂虏鲁卤",su:"苏诉肃素速塑粟溯俗酥",du:"杜渡妒镀肚独牍堵赌睹督",geng:"更耕羹埂耿梗",liang:"两良梁粮粱亮谅辆晾凉量","huan,hai":"还","fou,pi":"否",lai:"来莱赖癞",lian:"连怜帘莲联廉镰练炼恋链脸敛","xian,xuan":"县","zhu,chu":"助",kuang:"旷况矿框眶狂筐",zu:"足族阻组祖诅租",dun:"吨蹲墩盾顿钝盹",kun:"困昆坤捆",nan:"男","yuan,yun":"员",chui:"吹炊垂锤捶",bie:"别憋鳖瘪",gao:"告高糕羔篙搞稿镐膏",wo:"我沃卧握窝蜗",luan:"乱卵峦",mei:"每美妹昧媚眉梅煤霉玫枚媒楣","ti,ben":"体","bo,bai,ba":"伯",di:"低堤滴抵帝递第蒂缔敌笛涤嘀嫡","fo,fu,bi,bo":"佛",lin:"邻林临琳磷鳞淋吝赁躏凛檩","gui,jun,qiu":"龟",mian:"免勉娩冕缅面眠绵棉","jiao,jue":"角嚼",tiao:"条挑笤",ying:"迎盈营蝇赢荧莹萤应英樱鹰莺婴缨鹦映硬影颖","xi,ji":"系",ku:"库裤酷苦枯哭窟",leng:"冷楞","zhe,zhei":"这",xu:"序叙绪续絮蓄旭恤酗婿须虚需徐",pan:"判盼叛畔盘攀潘","di,ti,tui":"弟",can:"灿残蚕惭惨餐","mei,mo":"没","shen,chen":"沈",huai:"怀槐徊淮",song:"宋送诵颂讼松耸",hong:"宏虹洪鸿轰烘哄",qiong:"穷琼","niao,sui":"尿",ceng:"层蹭","wei,yi":"尾",gai:"改该溉概丐钙","a,e":"阿",miao:"妙庙苗描瞄秒渺藐",yao:"妖腰邀夭吆药耀要咬舀窑谣摇遥肴姚","jin,jing":"劲",chun:"纯唇醇春椿蠢",na:"纳钠捺拿",bo:"驳脖博搏膊舶渤拨波玻菠播跛簸",zong:"纵宗棕踪总",lv:"驴律虑滤氯旅屡吕侣铝缕履",biao:"表标彪膘","mo,ma":"抹摩",guai:"拐乖怪",pai:"拍派湃排牌徘",zhe:"者哲辙浙蔗遮","chai,ca":"拆",la:"垃拉啦喇蜡辣","ban,pan":"拌",po:"坡泼颇破魄婆","ze,zhai":"择","qi,ji":"其奇期","ruo,re":"若","ping,peng":"苹","zhi,qi":"枝","gui,ju":"柜",qiang:"枪腔墙呛",sang:"丧桑嗓",ou:"欧殴鸥偶藕呕","zhuan,zhuai":"转",ruan:"软",ken:"肯垦恳啃","xie,suo":"些",ang:"昂肮","ni,ne":"呢",tie:"帖贴铁",luo:"罗萝锣箩骡螺逻骆洛啰裸","he,huo,hu":"和","ce,ze,zhai":"侧",pei:"佩配沛陪培赔胚","po,pai":"迫",pa:"爬怕帕趴",suo:"所索锁琐唆梭嗦",pin:"贫拼品聘",peng:"朋棚蓬膨硼鹏澎篷捧碰砰烹",hun:"昏婚荤浑魂混","jing,cheng":"净",nao:"闹挠恼脑",zha:"闸铡眨炸渣榨乍诈",juan:"卷捐鹃倦绢眷","quan,xuan":"券","dan,shan,chan":"单","qian,jian":"浅","xie,yi":"泄",lei:"泪类垒蕾儡累雷擂","bo,po":"泊","ze,shi":"泽",lang:"郎狼廊琅榔浪朗","xiang,yang":"详","li,dai":"隶",shua:"刷耍",meng:"孟梦萌盟檬朦猛锰蒙","jiang,xiang":"降","can,shen,cen,san":"参",bang:"帮邦梆绑膀棒傍谤榜","du,dai":"毒","kua,ku":"挎",shuan:"拴栓涮","kuo,gua":"括","shi,she":"拾",mou:"某谋",nuo:"挪诺懦糯","xiang,hang":"巷",cao:"草槽曹操糙",huang:"荒慌皇黄煌凰惶蝗蟥晃谎恍幌",rong:"荣绒容熔融茸蓉溶榕冗","nan,na":"南","cha,zha":"查","bai,bo":"柏","qi,qie":"砌","sheng,xing":"省","xiao,xue":"削","mao,mo":"冒","si,sai":"思","yan,ye":"咽","zan,za":"咱",ha:"哈","na,nei,ne":"哪","ke,hai":"咳",zen:"怎",xuan:"选癣宣轩喧悬玄漩旋炫","zhong,chong":"种重","bian,pian":"便扁",lia:"俩",duan:"段断缎锻短端",cu:"促醋簇粗",shun:"顺瞬吮","xin,shen":"信","zhui,dui":"追",hen:"很狠恨痕",pen:"盆喷","shi,si,yi":"食","mai,mo":"脉",ai:"哀哎埃挨唉爱碍艾隘矮蔼癌","du,duo":"度","qin,qing":"亲","cha,chai,ci":"差","pao,bao":"炮刨",ti:"剃惕替屉涕梯踢剔题蹄啼","sa,xi":"洒",zhuo:"浊啄灼茁卓酌捉桌拙","xi,xian":"洗",qia:"洽恰掐",ran:"染然燃",heng:"恒衡横哼","jue,jiao":"觉",ao:"袄傲澳懊熬","shuo,shui,yue":"说",tui:"退蜕推腿颓",hai:"孩海害亥骇","mu,lao":"姥","gei,ji":"给","luo,lao":"络","mai,man":"埋",nie:"捏聂镊孽","du,dou":"都读",sun:"损笋",re:"热惹","mo,mu":"莫模","e,wu":"恶","xiao,jiao":"校","he,hu":"核",gen:"根跟",chai:"柴豺",shai:"晒筛",en:"恩",a:"啊","ba,pi":"罢",zei:"贼",zuan:"钻","qian,yan":"铅",te:"特","cheng,sheng":"乘","mi,bi":"秘泌","cheng,chen":"称","tang,chang":"倘淌","chou,xiu":"臭","she,ye,yi":"射",hang:"航杭",weng:"翁嗡瓮",die:"爹跌叠蝶谍碟",cui:"脆翠悴粹催摧崔",zang:"脏葬赃",e:"饿扼遏愕噩鳄鹅额讹俄","shuai,cui":"衰",zhun:"准谆",teng:"疼腾誊藤",tang:"唐堂塘膛糖棠搪烫趟躺",pou:"剖","xu,chu":"畜","pang,bang":"旁",run:"润闰","yong,chong":"涌",kuan:"宽款",bin:"宾滨彬缤濒鬓","bei,pi":"被","tiao,diao,zhou":"调","bao,bo":"剥薄",ruo:"弱",niang:"娘酿","neng,nai":"能","nan,nuo":"难",lve:"掠略","zhu,zhuo,zhe":"著","le,lei":"勒","shao,sao":"梢","fu,pi":"副",piao:"票漂飘瓢","sheng,cheng":"盛","que,qiao":"雀","chi,shi":"匙","she,yi":"蛇","zhan,chan":"崭","quan,juan":"圈",nin:"您","de,dei":"得",cou:"凑","zhuo,zhao,zhe":"着","shuai,lv":"率","gai,ge,he":"盖","qu,ju":"渠","su,xiu":"宿","dan,tan":"弹","jing,geng":"颈","lv,lu":"绿","qu,cu":"趋趣","ti,di":"提","jie,qi":"揭",sou:"搜艘嗽",lou:"搂楼娄漏陋篓","zhao,chao":"朝","la,luo,lao":"落",sen:"森","gun,hun":"棍","zhi,shi":"殖","sha,xia":"厦",zan:"暂赞",zui:"最罪醉嘴","jing,ying":"景","he,ye":"喝",hei:"黑",rui:"锐瑞蕊","bao,bu,pu":"堡","ao,yu":"奥","fan,pan":"番","la,xi":"腊",man:"蛮馒满漫慢曼幔",zun:"尊遵","gang,jiang":"港","zeng,ceng":"曾","yu,tou":"愉",cuan:"窜篡",qun:"裙群","qiang,jiang":"强","zhou,yu":"粥","she,nie":"摄","tian,zhen":"填",suan:"蒜算酸","lu,liu":"碌",nuan:"暖","tiao,tao":"跳","e,yi":"蛾",cuo:"错挫措锉搓","jie,xie":"解","shu,shuo":"数",gun:"滚","sai,se":"塞","bi,pi":"辟",pie:"撇","chang,shang":"裳","yi,ni":"疑",sai:"赛腮",nen:"嫩","suo,su":"缩",sa:"撒飒萨",zeng:"增憎赠","man,men":"瞒","bao,pu":"暴",de:"德",ning:"凝狞柠拧泞","jiao,zhuo":"缴",ca:"擦","cang,zang":"藏","fan,po":"繁","bi,bei":"臂",beng:"蹦泵崩绷","chan,zhan":"颤","jiang,qiang":"疆","lou,lu":"露",nang:"囊","hang,ben":"夯","ao,wa":"凹","feng,ping":"冯","xu,yu":"吁","lei,le":"肋","jie,gai":"芥","zhi,zi":"吱","na,ne":"呐","dun,tun":"囤","hang,keng":"吭","dian,tian":"佃","si,ci":"伺","dian,tian,sheng":"甸","dui,rui,yue":"兑",zhui:"坠缀赘锥","tuo,ta,zhi":"拓","fu,bi":"拂","ao,niu":"拗","ke,he":"苛","he,a,ke":"呵","ka,ga":"咖","jiao,yao":"侥","cha,sha":"刹","nve,yao":"疟","meng,mang":"氓","ge,yi":"疙","zu,cu":"卒","wan,yuan":"宛","qi,qie,xie":"契","xie,jia":"挟","zha,shan,shi,ce":"栅","bo,bei":"勃",nve:"虐",yo:"哟","qiao,xiao":"俏",shuo:"烁","ping,bing":"屏","na,nuo":"娜","qi,xi":"栖","gu,jia":"贾","bang,beng":"蚌","gong,zhong":"蚣","yin,yan":"殷",nei:"馁","wo,guo":"涡","lao,luo":"烙","nian,nie":"捻","chan,xian,can,shan":"掺","dan,shan":"掸","qian,gan":"乾","shuo,shi":"硕","hu,xia":"唬","dang,cheng":"铛","xian,xi":"铣","kui,gui":"傀","ji,zhai":"祭","chun,zhun":"淳","wei,yu":"尉","duo,hui":"堕","chuo,chao":"绰","zong,zeng":"综","zhuo,zuo":"琢","chuai,tuan,zhui":"揣","peng,bang":"彭","zhui,chui":"椎","leng,ling":"棱","zha,cha":"喳","ge,ha":"蛤","qian,kan":"嵌","a,yan":"腌","dun,dui":"敦","kui,hui":"溃",jiong:"窘","kai,jie":"楷","pin,bin":"频","ni,niao":"溺",miu:"谬","jiao,chao":"剿","man,wan":"蔓",seng:"僧","tui,tun":"褪","cuo,zuo":"撮","bang,pang":"磅","chao,zhao":"嘲","hei,mo":"嘿","chuang,zhuang":"幢","ji,qi":"稽","lao,liao":"潦","cheng,deng":"澄","ma,mo":"蟆","mi,mei":"糜","huo,hua":"豁","pu,bao":"瀑",chuo:"戳","zan,cuan":"攒"},n.relookup=function(){for(var a in n.dict)for(var i=n.dict[a],u=0,h=i.length;h>u;u++)n.dict[i.charAt(u)]=a;n.is_relookup=!0},n.getFullChars=function(i,u){var h,e,o,g=[],s=[];if(!i)return"";for(e=0,o=i.length;o>e;e++)g.push(n.getSingleChars(i.charAt(e),u));for(e=0,o=g.length;o>e;e++){var c=g[e];if(0===e)for(;c.length;)s.push([c.shift()]);else if(1===c.length)for(h=s.length;h;)--h,s[h].push(c[0]);else{var z=[];for(h=s.length;c.length&&a>h;){var t=c.shift();for(h=s.length;h;){--h;var l=s[h].concat();l.push(t),z.push(l)}}s=z.reverse()}}var r=[];for(e=0,o=s.length;o>e;e++)r.push(s[e].join(""));return r.join(" ")},n.getSingleChars=function(a,i){!n.is_relookup&&n.relookup();var u=a.charCodeAt(0),h=u>40869||19968>u?[a]:(n.dict[a]||"").split(",");if(i)for(var e=0,o=h.length;o>e;e++)h[e]=h[e].replace(/^[a-z]/,function(n){return n.toUpperCase()});return h},n});
/*!agency/publish/common/_pd*/
;define("agency/publish/common/_pd",function(e){var s=e("agency/publish/common/db.publish"),t={},a=100,r={limit_coupon:{name:"限时优惠",priceField:["discount_price"]},group_buy:{name:"拼团",priceField:["group_course","price"]},bargain_info:{name:"砍价",priceField:["bottom_price"]}},i=null,n=e("@tencent/im-pinyin/pinyin"),c=function(e,s){return[e,n.getFullChars(e),s].join(" ").toLowerCase()},u=function(e,s,t){e=strEllipsis.substring(e,46,1);var a="group"===t?"//p.qlogo.cn/gh/{{key}}/{{key}}/40":"//q.qlogo.cn/g?b=qq&nk={{key}}&s=40";return'<img src="{{icon}}" width="20" height="20" /><span class="name">{{value}}({{key}})</span>'.replace(/{{icon}}/g,a).replace(/{{value}}/g,e).replace(/{{key}}/g,s)},o=function(e,s){var t="";switch(s){case 2:t='<i class="icon-folder"></i>',e=strEllipsis.substring(e,114,1);break;case 3:t='<i class="icon-sub-sep"></i>',e=strEllipsis.substring(e,144,1);break;default:t="",e=strEllipsis.substring(e,144,1)}return'<span class="name">{{icon}}<span>{{value}}</span></span>'.replace(/{{icon}}/g,t).replace(/{{value}}/g,e)},l=function(e){return e.toString().replace(/<\s*br\s*\/?\s*>/g,"\n")},p=$._toArray,_=function(e){var s="[object OperaMini]"==Object.prototype.toString.call(window.operamini),t="placeholder"in document.createElement("input")&&!s;t||"function"==typeof $.fn.placeholder&&(e=e||$(":input[placeholder]"),e.placeholder())},d=function(e){return e.find(".text-tip").each(function(){var e=$(this);e.data("tip",e.html())}),e},f=function(e,s){var a=[];switch(e.data("picker")){case"teacher":e.data("sale")?$.each(s,function(e,s){var r=t.sale_teachers_map[s];r&&r.value&&a.push(html.decode(r.value))}):$.each(s,function(e,s){var r=t.teachers_map[s];r&&r.value&&a.push(html.decode(r.value))});break;case"group":$.each(s,function(e,s){var r=t.groups_map[s];r&&r.value&&a.push(html.decode(r.value))});break;default:a=s}return a.join(",")},h=function(e,s){if(0!==e.length){var t=e.find(".text");s=p(s),0===s.length?t.addClass("text-tip").text(t.data("tip")):t.removeClass("text-tip").text(f(e,s)),e.data("value",s)}},v=function(e,s){if(0!==e.length){s=p(s);var t=e.find(".f-value"),a=e.find(".placeholder");0===s.length?(t.hide(),a.show()):(a.hide(),t.show().text(f(e,s))),e.data("value",s)}},g=function(e){t._prevStep=parseInt(t.step||1,10),t.step=e;var s=$("#publish_steps"),a=s.find(".publish-step"+e);s.find(".publish-step").hide(),e>=2&&$(".steps-nav").find("li").removeClass("active").eq(e-2).addClass("active"),t.cmd=$.bom.query("cmd"),"b"===t.cmd?$(".step-detail").addClass("last")&&$("body").addClass("publish-modify--base"):$("body").addClass("p"===t.cmd?"publish-modify--plan":"n"===t.cmd||"m"===t.cmd?"publish-modify--plan":"publish-course--new"),"p"!==t.cmd&&"n"!==t.cmd&&"m"!==t.cmd&&$(".publish-main .mod-steps").show();var r=t.steps["Step"+t.step];return $("html,body").animate({scrollTop:0},0),a.length>0?(r&&r.checkThisStep&&r.checkThisStep(),a.show()):void(r&&r.init&&r.init())},m=function(e,s){e=p(e),s=p(s);var t=[];return $.each(e,function(e,a){a=parseInt(a,10),a&&$.each(s,function(e,s){parseInt(s.key,10)===a&&t.push(a)})}),t},b=function(e){return m(e,t.teachers)},y=function(e){return m(e,t.sale_teachers)},k=function(e){return m(e,t.groups)},w=function(e){return m(e,t.courses)},D=function(e){var s,t=[0,6,12,25,30,40,50,68,78,88,98,108,118,128,148,158,168,188,198,218,228,238,248,258,268,278,288,298,328,388,448,518,588,648,698,798,898,1098,1298,1598,2298,2998,3998,4998,5898,6498],a=t.length;for(s=0;a>s;s++)if(e<=t[s]){if(1>=s)return!1;var r=Math.abs(e-t[s]),i=Math.abs(e-t[s-1]);return i>r?t[s]:t[s-1]}return e>t[a-1]&&6800>=e?t[a-1]:!1},C=function(e){if(t.videos&&t.videos_end)return e&&e();if(t.videos_begin)return t.videos_cb.push(e);t.videos_begin=!0,t.videos_cb=[e];var r=1,n=1,u=function(e){s.get_video_info({param:{aid:i,page:e,type:1,count:a/5,category:1},succ:function(s){s=s||{},s.result=s.result||{};for(var a=s.result.vlist||[],i=null,l=[],p="",_=0,d=a.length;d>_;_++)if(2==a[_].type){if(a[_].name=a[_].name||"未命名合集"+r++,a[_].sub_video&&a[_].sub_video.length>0){for(var f=[],h=0,v=a[_].sub_video.length;v>h;h++)l=a[_].sub_video[h],p=l.vid,t.video_map[p]||/[a-z\d]{10,}/i.test(p)&&(l.name=l.name||"未命名视频"+n++,i={_:l,key:p,value:l.name,search:c(l.name,""),view:o(l.name,3)},f.push(i),t.video.push(i),t.video_map[i.key]=i);if(t.videos_map[a[_].setid])continue;i={_:a[_],key:a[_].setid,value:a[_].name,search:c(a[_].name,a[_].setid),view:o(a[_].name,2),child:f},t.videos.push(i),t.videos_map[i.key]=i}}else if(a[_].sub_video&&a[_].sub_video.length>0){if(l=a[_].sub_video[0],p=l.vid,t.video_map[p])continue;if(!/[a-z\d]{10,}/i.test(p))continue;l.name=l.name||"未命名视频"+n++;var g={_:l,key:p,value:l.name,search:c(l.name,""),view:o(l.name,1)};if(t.video.push(g),t.video_map[g.key]=g,t.videos_map[a[_].setid])continue;t.videos.push(g);var m={_:a[_],key:a[_].setid,value:a[_].name,search:c(a[_].name,a[_].setid),view:o(a[_].name,4),child:[g]};t.videos_map[m.key]=m}if(s.result.total_page<=e)for(t.videos_end=!0;t.videos_cb.length>0;){var b=t.videos_cb.shift();"function"==typeof b&&b()}else u(1+e)},err:function(){}})};u(1)},q=function(e,s,a){if(!t.teachers_map[e]){var r={_:a,key:e,value:s||e,search:c(s,e),view:u(s,e)};t.teachers.push(r),t.teachers_map[e]=r}},S=function(e){if(t.teachers&&t.teachers_end)return e&&e();if(t.teachers_begin)return t.teachers_cb.push(e);t.teachers_begin=!0,t.teachers_cb=[e];var r=function(e){s.get_teacher_list({param:{aid:i,page:e,type:1,count:a},succ:function(s){s=s||{},s.result=s.result||{};for(var a=s.result.tlist||[],i=0,n=a.length;n>i;i++)if(1==a[i].status){var o=a[i].uin;if(t.teachers_map[o])continue;var l=a[i].name||o,p={_:a[i],key:o,value:l||o,search:c(l,o),view:u(l,o)};t.teachers.push(p),t.teachers_map[p.key]=p}if(s.result.total_page<=e)for(t.teachers_end=!0;t.teachers_cb.length>0;){var _=t.teachers_cb.shift();"function"==typeof _&&_()}else r(1+e)},err:function(){}})};r(1)},T=function(e){if(t.sale_teachers&&t.sale_teachers_end)return e&&e();if(t.sale_teachers_begin)return t.sale_teachers_cb.push(e);t.sale_teachers_begin=!0,t.sale_teachers_cb=[e];var r=function(e){s.get_sale_teacher_list({param:{aid:i,page:e,type:1,count:a},succ:function(e){e=e||{},e.result=e.result||{};for(var s=e.result.seller_list||[],a=0,r=s.length;r>a;a++){var i=s[a].id,n=s[a].nick||i,o={_:s[a],key:i,value:n||i,search:c(n,i),view:u(n,i)};t.sale_teachers.push(o),t.sale_teachers_map[o.key]=o}for(t.sale_teachers_end=!0;t.sale_teachers_cb.length>0;){var l=t.sale_teachers_cb.shift();"function"==typeof l&&l()}},err:function(){}})};r(1)},x=function(e,s,a){if(!t.groups_map[e]){var r={_:a,key:e,value:s||e,search:c(s,e),view:u(s,e,"group")};t.groups.push(r),t.groups_map[e]=r}},E=function(e){if(t.groups&&t.groups_end)return e&&e();if(t.groups_begin)return t.groups_cb.push(e);t.groups_begin=!0,t.groups_cb=[e];var r=function(e){s.get_qqgroup_list({param:{aid:i,page:e,type:1,count:a},succ:function(s){s=s||{},s.result=s.result||{};for(var a=s.result.items||[],i=0,n=a.length;n>i;i++)if(1==a[i].state){var o=a[i].gcode;if(t.groups_map[o])continue;var l=a[i].name||o,p={_:a[i],key:o,value:l||o,search:c(l,o),view:u(l,o,"group")};t.groups.push(p),t.groups_map[p.key]=p}if(s.result.total_page<=e)for(t.groups_end=!0;t.groups_cb.length>0;){var _=t.groups_cb.shift();"function"==typeof _&&_()}else r(1+e)},err:function(e){return e=e||{},12404===e.retcode?($.Dialog.alert("你绑定的群被解散了"),!0):void 0}})};r(1)},F=function(e,s,a){if(!t.courses_map[e]||!t.courses_map[e]._){var r={_:a,key:e,value:s||e,search:c(s,e),view:strEllipsis.substring(s,140,1)};if(t.courses_map[e]&&!t.courses_map[e]._)return void(t.courses_map[e]=r);t.courses.push(r),t.courses_map[e]=r}},I=function(e){if(t.courses&&t.courses_end)return e&&e();if(t.courses_begin)return t.courses_cb.push(e);t.courses_begin=!0,t.courses_cb=[e],t.course_pages=0,t.course_total_page=0;var r=function(e,s){if(1===e){t.course_total_page=s;for(var a=2;s>=a;a++)u(a)}if(t.course_pages>=t.course_total_page)for(t.courses_end=!0;t.courses_cb.length>0;){var r=t.courses_cb.shift();"function"==typeof r&&r()}},n={aid:i,count:a},c=$.trim($.bom.query("cid"));/^\d+$/.test(c)&&(n.cid=c);var u=function(e){n.page=e,s.get_course_list_simple({param:n,succ:function(s){t.course_pages++,s=s||{},s.result=s.result||{};for(var a=s.result.clist||[],i=0,n=a.length;n>i;i++)F(a[i].cid,a[i].cname,a[i]);r(e,s.result.page_num)},err:function(){t.course_pages++,r(e,e)}})};u(1)},j=function(e,s,a){if(!t.coursesDetails_map[e]){var r={_:a,key:e,value:s||e,search:c(s,e),view:strEllipsis.substring(s,140,1)};t.coursesDetails.push(r),t.coursesDetails_map[e]=r}},M=function(e){if(t.coursesDetails&&t.coursesDetails_end)return e&&e();if(t.coursesDetails_begin)return t.coursesDetails_cb.push(e);t.coursesDetails_begin=!0,t.coursesDetails_cb=[e],t.courseDetails_pages=0,t.courseDetails_total_page=0;var r=function(){var e=t.coursesDetails_cb.shift();"function"==typeof e&&e()},n={aid:i,count:a},c=$.trim($.bom.query("cid"));/^\d+$/.test(c)&&(n.cid=c);var u=function(e){n.page=e,s.get_course_list({param:n,succ:function(s){t.courseDetails_pages++,s=s||{},s.result=s.result||{};for(var a=s.result.items||[],i=0,n=a.length;n>i;i++)a[i].terms&&a[i].price>0&&j(a[i].cid,a[i].name,a[i]);r(e,s.result.total)},err:function(){t.courseDetails_pages++,r(e,e)}})};u(1)},A=function(e,t){s.get_course_list({param:{aid:EduAgency.getInfoSync().aid,end_flag:1,page:e.page,pay_flag:0,live_flag:0,ios_flag:0,count:e.pageNum||20,state_flag:1,cname_key:e.keyword||"",bindFiles_flag:1},succ:function(e){e=e||{},e.result=e.result||{};for(var s=e.result.items||[],a=[],r=0,i=s.length;i>r;r++)s[r].terms&&s[r].price>0&&(a.push(s[r]),j(s[r].cid,s[r].name,s[r]));t(null,a,e.result.total)}})},G=function(e){"b"!==t.cmd&&e(null);var a=function(e,s,t){t=t||0;var r=e[s[t]];return t===s.length-1?r:a(r,s,t+1)};s.get_all_discount({param:{course_id:t.cid,is_agency:!0},succ:function(s){var t=s.result.discounts;if(!t)return void e(null);var i=null;s.result.discounts.map(function(e){var s=r[e.type];if(s){var t=a(e[e.type],s.priceField);(null===i||i.price<t)&&(i={price:t,actName:s.name})}}),e(i)}})},z=function(e){i=e,t.video=t.video||[],t.video_map=t.video_map||{},t.videos=t.videos||[],t.videos_map=t.videos_map||{},t.teachers=t.teachers||[],t.teachers_map=t.teachers_map||{},t.sale_teachers=t.sale_teachers||[],t.sale_teachers_map=t.sale_teachers_map||{},t.groups=t.groups||[],t.groups_map=t.groups_map||{},t.courses=t.courses||[],t.courses_map=t.courses_map||{}};return t={_decodeBr:l,_toArray:p,_placeholder:_,_setTextTip:d,_teacher_group_view:f,_save_picker_data_old:h,_save_picker_data:v,initStep:g,filterTeacher:b,filterSaleTeacher:y,filterGroup:k,filterCourse:w,getSuitableIosPrice:D,initData:z,initVideos:C,saveTeacher:q,initTeachers:S,initSaleTeachers:T,saveGroup:x,initGroups:E,saveCourse:F,initCourses:I,saveCoursesDetails:j,initCoursesDetails:M,getCourseList:A,getMaxDiscountPrice:G}});
/*!edu_modules/edu-auth/tabs.config*/
;define("edu_modules/edu-auth/tabs.config",function(n,e,o){var d=[{id:11,sub:[{id:1110,sub:[{id:111010,name:"测试本地模块",show:1,sort:1,jsmod:"agency/index/info/mod.main",link:"/agency/index/index.html#tab=showAgencyInfo",hash:"showAgencyInfo",text:"(补充更多信息)"}]}]}];o.exports=d});
/*!edu_modules/edu-auth/index*/
;define("edu_modules/edu-auth/index",function(t,e,r){function n(t,e,r){return r=r||[],e=e||{},t.forEach(function(t){t.parentId=e.id||0,r.push(t),t.sub&&t.sub.length&&n(t.sub,t,r)}),r}function u(t){try{"video_management"===t[1].sub[0].sub[4].hash&&"showVideoList"===t[1].sub[0].sub[3].hash&&t[1].sub[0].sub.splice(3,1)}catch(e){}c=t,d=n(c,{},[])}function i(){u(o);var t=a.Deferred(),e=t.promise();return s.getTabList({param:{},succ:function(e){if(e=e||{},0!==e.retcode)t.reject(e.retcode);else{var r=e.result||{},n=r.tab_list||[];try{var i=window.localStorage?window.localStorage.getItem("agency-pre"):null;if(i){var s=JSON.parse(i);n.push({flag:0,id:90,name:"预发布验证",parentId:0,show:1,sort:8,sub:[{flag:0,id:9010,name:"预发布验证",parentId:90,show:1,sort:1,sub:s,target:0}],target:0})}}catch(o){}u(n),t.resolve(n)}},err:t.reject}),e}var s=t("edu_modules/edu-db/edu-db"),o=t("edu_modules/edu-auth/tabs.config"),a=t("jquery"),c=[],d=[];s.extend({getTabList:s.httpMethod({url:"/cgi-bin/manager/right/list",type:"get"})}),r.exports={getTabList:i,init:u,getTabs:function(){return d},getTabTrees:function(){return c},getTabById:function(t){return t?d.filter(function(e){return e.id===t})[0]:void 0},getTabByHash:function(t){return t?d.filter(function(e){return e.hash===t})[0]:void 0},getRootTabByTabId:function(t){if(t){for(var e=this.getTabById(t);e&&0!==e.parentId;)e=d.filter(function(t){return t.id===e.parentId})[0];return e}},getFirstTabByRootId:function(t){var e=this.getTabById(t);if(e&&e.sub&&e.sub.length){var r,n;return e.sub.forEach(function(t){!n&&t.sub&&t.sub[0]&&(n=t.sub[0]),!r&&t.show&&t.sub&&t.sub.forEach(function(t){!r&&t.show&&(r=t)})}),r||n||{}}},getFirstRootTabWithPermission:function(){return c.filter(function(t){return!!t.show})[0]},checkPermissionByHash:function(t){return!!(this.getTabByHash(t)||{}).show},checkPermissionById:function(t){return!!(this.getTabById(t)||{}).show}}});
/*!edu_modules/edu-agency/src/info*/
;define("edu_modules/edu-agency/src/info",function(t,e,n){function r(t,e){var n=this,r=t.result||{};e&&(r.industry1=e.industry1,r.industry1_ext=e.industry1_ext);var i=r.industry1;i||(i=r.industry1=r.industry),i&&(c=u(i),l=[i],$.isArray(r.industry1_ext)&&$.each(r.industry1_ext,function(t,e){var n=u(e);n.value&&(f.push(n),!~l.indexOf(e)&&l.push(e),g.push(n.value))})),t._industry1=c,t._industry1_ext=f,t._industry1_all=l,t._industry1_ext_str=g,n._industry1=c,n._industry1_ext=f,n._industry1_all=l,n._industry1_ext_str=g}function u(t){return{key:t,value:o[t]}}function i(t){var e=this;if(s&&"function"==typeof t)return t(s);if(d.push(t),!a){a=!0;var n=y.get("userinfo")||{},r=5===n.role_type?"get_p_agency_info":"get_agency_info";return _[r]({param:{aid:n.aid},succ:function(t){for(t=t||{},t.role_type=n.role_type,t.result=t.result||{},e.rebuildIndustryData(t),y.set("agency_info",t),s=t,a=!1;d.length;){var r=d.shift();"function"==typeof r&&r(s)}},err:function(){}})}}var s,_=t("edu_modules/edu-db/edu-db"),d=[],a=!1,y=t("@tencent/im-cache/cache"),o={list:[1001,1002,1003,1004,1005,1006,1007],1001:"IT·互联网",1002:"设计·创作",1003:"语言·留学",1004:"职业·考证",1005:"升学·考研",1006:"兴趣·生活",1007:"电商营销"};y.set("course_main_tag",o);var c={},f=[],l=[],g=[];n.exports={getAgencyInfo:i,course_main_tag:o,rebuildIndustryData:r,_industry1:c,_industry1_all:l}});
/*!edu_modules/edu-agency/src/db*/
;define("edu_modules/edu-agency/src/db",function(e,d,n){var t=e("edu_modules/edu-db/edu-db");t.extend({getAgencyInfo:t.httpMethod({url:"/cgi-bin/identity/agency",type:"GET"})}),n.exports=t});
/*!edu_modules/edu-agency/src/index*/
;define("edu_modules/edu-agency/src/index",function(e,n,t){var o=e("edu_modules/edu-user/index"),r=e("edu_modules/edu-auth/index"),a=e("edu_modules/edu-login/edu-login"),i=e("edu_modules/modal/modal"),s=(e("edu_modules/edu-agency/src/info"),e("badjs")),c=e("edu_modules/edu-agency/src/db");o.extendBaseInfo({agency_state:0,isDeletePermission:!0,agency_type:0,is_wt_agency:0,is_signed:0,sign_status:{signedFee:!1,signedDistribution:!1},is_tup_agency:0,agency_info:{agency_step_flag:0,group_num:0,course_num:0,student_num:0,teacher_num:0,cover_url:"",aid:0,description:""},agency_star:{id:0,star:0,star_level:0,score:0,week_score:0,attitude_rate:0,manual_add:0,rank:0,average_rate:0,grade:0,industry:0,manual_minus:"0",sabc:"A",data_status:0,level_rate:0,quality_rate:0,manual_inc:0},agency_bank:{agency_id:0,bank_name:"",bank_account:"",bank_province:"",bank_city:"",bank_branch:"",account_type:1,account_picurl:"",bank_owner:"",audit_memo:"",end_time:0,begin_time:0,audit_status:5,mobile:"",email:"",contract_url:"",contract_name:"",contract_version:1,agency_contact:"",agency_address:"",apply_time:0},agency_overview:{course_static:{tmmr_live:0,today_live:0,ystd_absent:0,all_live:0,ystd_violation:0,data_status:1},score_detail:{pay_trend:1,add_score:"0",free_score:"0",pay_score:"0",violation_score_course:"0",week_score:"0",violation_score:"0",free_trend:1,week_rank:0}},system_time:0});var _,u=function(e){var n=e.is_signed;e.sign_status={signedFee:1&n,signedDistribution:2===(2&n)}},d=o.getInfo,l=function(){var e=$.Deferred();return c.getAgencyInfo({succ:function(n){u(n.result),window.AGENCYINFO=n.result,o.updateInfo(n.result),o.updateInfo({aid:n.result.aid}),e.resolve()},err:function(n){e.reject("get_agency_info_error"),n&&1e5!=n.retcode&&m("获取机构信息失败",2452324)}}),e.promise()},f=function(){var e=$.Deferred();return r.getTabList().then(function(){e.resolve()},function(n){e.reject("get_tab_list_error"),n&&1e5!=n.retcode&&m("获取权限列表失败",2452325)}),e.promise()},g=function(e){var n=$.Deferred(),t=e&&e.allowTeacher;return d().then(function(e){e.is_login?e.isPlatRole||t&&e.isTeacher?(e.isMaster||e.isPersonal||e.isAdmin||e.isCustomAdmin||!e.isCourseTeacher||$("html").addClass("no-publish"),n.resolve()):n.reject("auth_error"):n.reject("no_login")},function(){n.reject("get_info_error"),m("获取用户基本信息失败",2452326)}),n.promise()};o.getBaseInfo=d,o.getAgencyInfo=l;var m=function(e,n){s(e,location.href,0,n,2)};o.getInfo=function(e){if(_)return _;var n=$.Deferred();return _=n.promise(),$.when(g(e),l(),f()).then(function(){var e=o.getInfoSync();e.isDeletePermission=e.isMaster||e.isAdmin||e.isPersonal,o.updateInfo(e),m("机构侧getInfo成功",2452334),n.resolve(e)},function(e){m("机构侧getInfo失败",2452333),"get_agency_info_error"===e?i.alert("获取机构信息失败，请稍后重试！").onClose(function(){location.reload()}):"get_tab_list_error"===e?i.alert("获取权限数据失败，请稍后重试！").onClose(function(){location.reload()}):"no_login"===e?a.show({succ:function(){location.reload()},close:function(){location.href="/"}}):"auth_error"===e?i.alert("没有权限访问该页面。").onClose(function(){location.href="/"}):"get_info_error"===e?i.alert("获取用户信息失败，请稍后重试！").onClose(function(){location.reload()}):(m("机构侧getInfo其他失败",2452327),i.alert("异常错误，请稍后重试").onClose(function(){location.reload()})),n.reject(e)}),_},t.exports=o});
/*!edu_modules/edu-agency/index*/
;define("edu_modules/edu-agency/index",function(e,d,n){n.exports=e("edu_modules/edu-agency/src/index")});
/*!@tencent/im-hashchange/hashchange*/
;define("@tencent/im-hashchange/hashchange",function(){return function(n){if("onhashchange"in window&&window.addEventListener)window.addEventListener("hashchange",n,!1);else{var e="",h=function(){setTimeout(function(){e!==location.hash&&(e=location.hash,n()),h()},50)};h()}}});
/*!core-js/library/modules/_string-at*/
;define("core-js/library/modules/_string-at",function(r,e,t){var n=r("core-js/library/modules/_to-integer"),o=r("core-js/library/modules/_defined");t.exports=function(r){return function(e,t){var i,c,a=String(o(e)),d=n(t),s=a.length;return 0>d||d>=s?r?"":void 0:(i=a.charCodeAt(d),55296>i||i>56319||d+1===s||(c=a.charCodeAt(d+1))<56320||c>57343?r?a.charAt(d):i:r?a.slice(d,d+2):(i-55296<<10)+(c-56320)+65536)}}});
/*!core-js/library/modules/_redefine*/
;define("core-js/library/modules/_redefine",function(e,r,i){i.exports=e("core-js/library/modules/_hide")});
/*!core-js/library/modules/_iterators*/
;define("core-js/library/modules/_iterators",function(e,r,o){o.exports={}});
/*!core-js/library/modules/_object-dps*/
;define("core-js/library/modules/_object-dps",function(e,r,o){var s=e("core-js/library/modules/_object-dp"),c=e("core-js/library/modules/_an-object"),t=e("core-js/library/modules/_object-keys");o.exports=e("core-js/library/modules/_descriptors")?Object.defineProperties:function(e,r){c(e);for(var o,i=t(r),l=i.length,b=0;l>b;)s.f(e,o=i[b++],r[o]);return e}});
/*!core-js/library/modules/_html*/
;define("core-js/library/modules/_html",function(e,o,l){var r=e("core-js/library/modules/_global").document;l.exports=r&&r.documentElement});
/*!core-js/library/modules/_object-create*/
;define("core-js/library/modules/_object-create",function(e,r,o){var t=e("core-js/library/modules/_an-object"),c=e("core-js/library/modules/_object-dps"),n=e("core-js/library/modules/_enum-bug-keys"),l=e("core-js/library/modules/_shared-key")("IE_PROTO"),s=function(){},i="prototype",a=function(){var r,o=e("core-js/library/modules/_dom-create")("iframe"),t=n.length,c="<",l=">";for(o.style.display="none",e("core-js/library/modules/_html").appendChild(o),o.src="javascript:",r=o.contentWindow.document,r.open(),r.write(c+"script"+l+"document.F=Object"+c+"/script"+l),r.close(),a=r.F;t--;)delete a[i][n[t]];return a()};o.exports=Object.create||function(e,r){var o;return null!==e?(s[i]=t(e),o=new s,s[i]=null,o[l]=e):o=a(),void 0===r?o:c(o,r)}});
/*!core-js/library/modules/_wks*/
;define("core-js/library/modules/_wks",function(r,o,e){var s=r("core-js/library/modules/_shared")("wks"),l=r("core-js/library/modules/_uid"),i=r("core-js/library/modules/_global").Symbol,u="function"==typeof i,n=e.exports=function(r){return s[r]||(s[r]=u&&i[r]||(u?i:l)("Symbol."+r))};n.store=s});
/*!core-js/library/modules/_set-to-string-tag*/
;define("core-js/library/modules/_set-to-string-tag",function(r,o,e){var s=r("core-js/library/modules/_object-dp").f,t=r("core-js/library/modules/_has"),a=r("core-js/library/modules/_wks")("toStringTag");e.exports=function(r,o,e){r&&!t(r=e?r:r.prototype,a)&&s(r,a,{configurable:!0,value:o})}});
/*!core-js/library/modules/_iter-create*/
;define("core-js/library/modules/_iter-create",function(r,e,t){"use strict";var o=r("core-js/library/modules/_object-create"),s=r("core-js/library/modules/_property-desc"),i=r("core-js/library/modules/_set-to-string-tag"),c={};r("core-js/library/modules/_hide")(c,r("core-js/library/modules/_wks")("iterator"),function(){return this}),t.exports=function(r,e,t){r.prototype=o(c,{next:s(1,t)}),i(r,e+" Iterator")}});
/*!core-js/library/modules/_object-gpo*/
;define("core-js/library/modules/_object-gpo",function(o,t,e){var r=o("core-js/library/modules/_has"),c=o("core-js/library/modules/_to-object"),n=o("core-js/library/modules/_shared-key")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(o){return o=c(o),r(o,n)?o[n]:"function"==typeof o.constructor&&o instanceof o.constructor?o.constructor.prototype:o instanceof Object?s:null}});
/*!core-js/library/modules/_iter-define*/
;define("core-js/library/modules/_iter-define",function(e,r,t){"use strict";var i=e("core-js/library/modules/_library"),n=e("core-js/library/modules/_export"),o=e("core-js/library/modules/_redefine"),s=e("core-js/library/modules/_hide"),u=e("core-js/library/modules/_iterators"),c=e("core-js/library/modules/_iter-create"),l=e("core-js/library/modules/_set-to-string-tag"),a=e("core-js/library/modules/_object-gpo"),y=e("core-js/library/modules/_wks")("iterator"),f=!([].keys&&"next"in[].keys()),d="@@iterator",b="keys",j="values",m=function(){return this};t.exports=function(e,r,t,_,p,h,w){c(t,r,_);var k,v,x,g=function(e){if(!f&&e in O)return O[e];switch(e){case b:return function(){return new t(this,e)};case j:return function(){return new t(this,e)}}return function(){return new t(this,e)}},A=r+" Iterator",F=p==j,I=!1,O=e.prototype,P=O[y]||O[d]||p&&O[p],q=P||g(p),z=p?F?g("entries"):q:void 0,B="Array"==r?O.entries||P:P;if(B&&(x=a(B.call(new e)),x!==Object.prototype&&x.next&&(l(x,A,!0),i||"function"==typeof x[y]||s(x,y,m))),F&&P&&P.name!==j&&(I=!0,q=function(){return P.call(this)}),i&&!w||!f&&!I&&O[y]||s(O,y,q),u[r]=q,u[A]=m,p)if(k={values:F?q:g(j),keys:h?q:g(b),entries:z},w)for(v in k)v in O||o(O,v,k[v]);else n(n.P+n.F*(f||I),r,k);return k}});
/*!core-js/library/modules/es6.string.iterator*/
;define("core-js/library/modules/es6.string.iterator",function(i){"use strict";var t=i("core-js/library/modules/_string-at")(!0);i("core-js/library/modules/_iter-define")(String,"String",function(i){this._t=String(i),this._i=0},function(){var i,r=this._t,e=this._i;return e>=r.length?{value:void 0,done:!0}:(i=t(r,e),this._i+=i.length,{value:i,done:!1})})});
/*!core-js/library/modules/_add-to-unscopables*/
;define("core-js/library/modules/_add-to-unscopables",function(o,e,n){n.exports=function(){}});
/*!core-js/library/modules/_iter-step*/
;define("core-js/library/modules/_iter-step",function(e,n,r){r.exports=function(e,n){return{value:n,done:!!e}}});
/*!core-js/library/modules/es6.array.iterator*/
;define("core-js/library/modules/es6.array.iterator",function(r,e,s){"use strict";var t=r("core-js/library/modules/_add-to-unscopables"),i=r("core-js/library/modules/_iter-step"),o=r("core-js/library/modules/_iterators"),a=r("core-js/library/modules/_to-iobject");s.exports=r("core-js/library/modules/_iter-define")(Array,"Array",function(r,e){this._t=a(r),this._i=0,this._k=e},function(){var r=this._t,e=this._k,s=this._i++;return!r||s>=r.length?(this._t=void 0,i(1)):"keys"==e?i(0,s):"values"==e?i(0,r[s]):i(0,[s,r[s]])},"values"),o.Arguments=o.Array,t("keys"),t("values"),t("entries")});
/*!core-js/library/modules/web.dom.iterable*/
;define("core-js/library/modules/web.dom.iterable",function(e){e("core-js/library/modules/es6.array.iterator");for(var t=e("core-js/library/modules/_global"),i=e("core-js/library/modules/_hide"),r=e("core-js/library/modules/_iterators"),s=e("core-js/library/modules/_wks")("toStringTag"),l="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),o=0;o<l.length;o++){var a=l[o],L=t[a],n=L&&L.prototype;n&&!n[s]&&i(n,s,a),r[a]=r.Array}});
/*!core-js/library/modules/_wks-ext*/
;define("core-js/library/modules/_wks-ext",function(e,r){r.f=e("core-js/library/modules/_wks")});
/*!core-js/library/fn/symbol/iterator*/
;define("core-js/library/fn/symbol/iterator",function(r,e,o){r("core-js/library/modules/es6.string.iterator"),r("core-js/library/modules/web.dom.iterable"),o.exports=r("core-js/library/modules/_wks-ext").f("iterator")});
/*!babel-runtime/core-js/symbol/iterator*/
;define("babel-runtime/core-js/symbol/iterator",function(e,r,o){o.exports={"default":e("core-js/library/fn/symbol/iterator"),__esModule:!0}});
/*!core-js/library/modules/_meta*/
;define("core-js/library/modules/_meta",function(e,r,t){var n=e("core-js/library/modules/_uid")("meta"),i=e("core-js/library/modules/_is-object"),o=e("core-js/library/modules/_has"),u=e("core-js/library/modules/_object-dp").f,s=0,f=Object.isExtensible||function(){return!0},c=!e("core-js/library/modules/_fails")(function(){return f(Object.preventExtensions({}))}),l=function(e){u(e,n,{value:{i:"O"+ ++s,w:{}}})},a=function(e,r){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!f(e))return"F";if(!r)return"E";l(e)}return e[n].i},b=function(e,r){if(!o(e,n)){if(!f(e))return!0;if(!r)return!1;l(e)}return e[n].w},j=function(e){return c&&y.NEED&&f(e)&&!o(e,n)&&l(e),e},y=t.exports={KEY:n,NEED:!1,fastKey:a,getWeak:b,onFreeze:j}});
/*!core-js/library/modules/_wks-define*/
;define("core-js/library/modules/_wks-define",function(r,e,o){var l=r("core-js/library/modules/_global"),s=r("core-js/library/modules/_core"),a=r("core-js/library/modules/_library"),b=r("core-js/library/modules/_wks-ext"),i=r("core-js/library/modules/_object-dp").f;o.exports=function(r){var e=s.Symbol||(s.Symbol=a?{}:l.Symbol||{});"_"==r.charAt(0)||r in e||i(e,r,{value:b.f(r)})}});
/*!core-js/library/modules/_enum-keys*/
;define("core-js/library/modules/_enum-keys",function(e,r,o){var s=e("core-js/library/modules/_object-keys"),l=e("core-js/library/modules/_object-gops"),c=e("core-js/library/modules/_object-pie");o.exports=function(e){var r=s(e),o=l.f;if(o)for(var i,u=o(e),a=c.f,n=0;u.length>n;)a.call(e,i=u[n++])&&r.push(i);return r}});
/*!core-js/library/modules/_is-array*/
;define("core-js/library/modules/_is-array",function(r,a,e){var o=r("core-js/library/modules/_cof");e.exports=Array.isArray||function(r){return"Array"==o(r)}});
/*!core-js/library/modules/_object-gopn*/
;define("core-js/library/modules/_object-gopn",function(e,r){var o=e("core-js/library/modules/_object-keys-internal"),n=e("core-js/library/modules/_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return o(e,n)}});
/*!core-js/library/modules/_object-gopn-ext*/
;define("core-js/library/modules/_object-gopn-ext",function(e,o,t){var r=e("core-js/library/modules/_to-iobject"),n=e("core-js/library/modules/_object-gopn").f,c={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],b=function(e){try{return n(e)}catch(o){return i.slice()}};t.exports.f=function(e){return i&&"[object Window]"==c.call(e)?b(e):n(r(e))}});
/*!core-js/library/modules/_object-gopd*/
;define("core-js/library/modules/_object-gopd",function(r,e){var o=r("core-js/library/modules/_object-pie"),i=r("core-js/library/modules/_property-desc"),s=r("core-js/library/modules/_to-iobject"),c=r("core-js/library/modules/_to-primitive"),l=r("core-js/library/modules/_has"),t=r("core-js/library/modules/_ie8-dom-define"),d=Object.getOwnPropertyDescriptor;e.f=r("core-js/library/modules/_descriptors")?d:function(r,e){if(r=s(r),e=c(e,!0),t)try{return d(r,e)}catch(a){}return l(r,e)?i(!o.f.call(r,e),r[e]):void 0}});
/*!core-js/library/modules/es6.symbol*/
;define("core-js/library/modules/es6.symbol",function(r){"use strict";var e=r("core-js/library/modules/_global"),o=r("core-js/library/modules/_has"),t=r("core-js/library/modules/_descriptors"),s=r("core-js/library/modules/_export"),i=r("core-js/library/modules/_redefine"),n=r("core-js/library/modules/_meta").KEY,l=r("core-js/library/modules/_fails"),u=r("core-js/library/modules/_shared"),a=r("core-js/library/modules/_set-to-string-tag"),c=r("core-js/library/modules/_uid"),b=r("core-js/library/modules/_wks"),f=r("core-js/library/modules/_wks-ext"),y=r("core-js/library/modules/_wks-define"),m=r("core-js/library/modules/_enum-keys"),d=r("core-js/library/modules/_is-array"),j=r("core-js/library/modules/_an-object"),p=r("core-js/library/modules/_is-object"),h=r("core-js/library/modules/_to-object"),_=r("core-js/library/modules/_to-iobject"),g=r("core-js/library/modules/_to-primitive"),v=r("core-js/library/modules/_property-desc"),S=r("core-js/library/modules/_object-create"),O=r("core-js/library/modules/_object-gopn-ext"),w=r("core-js/library/modules/_object-gopd"),k=r("core-js/library/modules/_object-gops"),P=r("core-js/library/modules/_object-dp"),F=r("core-js/library/modules/_object-keys"),E=w.f,N=P.f,J=O.f,x=e.Symbol,I=e.JSON,T=I&&I.stringify,C="prototype",M=b("_hidden"),D=b("toPrimitive"),G={}.propertyIsEnumerable,K=u("symbol-registry"),Q=u("symbols"),W=u("op-symbols"),Y=Object[C],q="function"==typeof x&&!!k.f,z=e.QObject,A=!z||!z[C]||!z[C].findChild,B=t&&l(function(){return 7!=S(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(r,e,o){var t=E(Y,e);t&&delete Y[e],N(r,e,o),t&&r!==Y&&N(Y,e,t)}:N,H=function(r){var e=Q[r]=S(x[C]);return e._k=r,e},L=q&&"symbol"==typeof x.iterator?function(r){return"symbol"==typeof r}:function(r){return r instanceof x},R=function(r,e,t){return r===Y&&R(W,e,t),j(r),e=g(e,!0),j(t),o(Q,e)?(t.enumerable?(o(r,M)&&r[M][e]&&(r[M][e]=!1),t=S(t,{enumerable:v(0,!1)})):(o(r,M)||N(r,M,v(1,{})),r[M][e]=!0),B(r,e,t)):N(r,e,t)},U=function(r,e){j(r);for(var o,t=m(e=_(e)),s=0,i=t.length;i>s;)R(r,o=t[s++],e[o]);return r},V=function(r,e){return void 0===e?S(r):U(S(r),e)},X=function(r){var e=G.call(this,r=g(r,!0));return this===Y&&o(Q,r)&&!o(W,r)?!1:e||!o(this,r)||!o(Q,r)||o(this,M)&&this[M][r]?e:!0},Z=function(r,e){if(r=_(r),e=g(e,!0),r!==Y||!o(Q,e)||o(W,e)){var t=E(r,e);return!t||!o(Q,e)||o(r,M)&&r[M][e]||(t.enumerable=!0),t}},$=function(r){for(var e,t=J(_(r)),s=[],i=0;t.length>i;)o(Q,e=t[i++])||e==M||e==n||s.push(e);return s},re=function(r){for(var e,t=r===Y,s=J(t?W:_(r)),i=[],n=0;s.length>n;)o(Q,e=s[n++])&&(t?o(Y,e):!0)&&i.push(Q[e]);return i};q||(x=function(){if(this instanceof x)throw TypeError("Symbol is not a constructor!");var r=c(arguments.length>0?arguments[0]:void 0),e=function(t){this===Y&&e.call(W,t),o(this,M)&&o(this[M],r)&&(this[M][r]=!1),B(this,r,v(1,t))};return t&&A&&B(Y,r,{configurable:!0,set:e}),H(r)},i(x[C],"toString",function(){return this._k}),w.f=Z,P.f=R,r("core-js/library/modules/_object-gopn").f=O.f=$,r("core-js/library/modules/_object-pie").f=X,k.f=re,t&&!r("core-js/library/modules/_library")&&i(Y,"propertyIsEnumerable",X,!0),f.f=function(r){return H(b(r))}),s(s.G+s.W+s.F*!q,{Symbol:x});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),oe=0;ee.length>oe;)b(ee[oe++]);for(var te=F(b.store),se=0;te.length>se;)y(te[se++]);s(s.S+s.F*!q,"Symbol",{"for":function(r){return o(K,r+="")?K[r]:K[r]=x(r)},keyFor:function(r){if(!L(r))throw TypeError(r+" is not a symbol!");for(var e in K)if(K[e]===r)return e},useSetter:function(){A=!0},useSimple:function(){A=!1}}),s(s.S+s.F*!q,"Object",{create:V,defineProperty:R,defineProperties:U,getOwnPropertyDescriptor:Z,getOwnPropertyNames:$,getOwnPropertySymbols:re});var ie=l(function(){k.f(1)});s(s.S+s.F*ie,"Object",{getOwnPropertySymbols:function(r){return k.f(h(r))}}),I&&s(s.S+s.F*(!q||l(function(){var r=x();return"[null]"!=T([r])||"{}"!=T({a:r})||"{}"!=T(Object(r))})),"JSON",{stringify:function(r){for(var e,o,t=[r],s=1;arguments.length>s;)t.push(arguments[s++]);return o=e=t[1],!p(e)&&void 0===r||L(r)?void 0:(d(e)||(e=function(r,e){return"function"==typeof o&&(e=o.call(this,r,e)),L(e)?void 0:e}),t[1]=e,T.apply(I,t))}}),x[C][D]||r("core-js/library/modules/_hide")(x[C],D,x[C].valueOf),a(x,"Symbol"),a(Math,"Math",!0),a(e.JSON,"JSON",!0)});
/*!core-js/library/modules/es6.object.to-string*/
;define("core-js/library/modules/es6.object.to-string",function(){});
/*!core-js/library/modules/es7.symbol.async-iterator*/
;define("core-js/library/modules/es7.symbol.async-iterator",function(e){e("core-js/library/modules/_wks-define")("asyncIterator")});
/*!core-js/library/modules/es7.symbol.observable*/
;define("core-js/library/modules/es7.symbol.observable",function(e){e("core-js/library/modules/_wks-define")("observable")});
/*!core-js/library/fn/symbol/index*/
;define("core-js/library/fn/symbol/index",function(e,r,o){e("core-js/library/modules/es6.symbol"),e("core-js/library/modules/es6.object.to-string"),e("core-js/library/modules/es7.symbol.async-iterator"),e("core-js/library/modules/es7.symbol.observable"),o.exports=e("core-js/library/modules/_core").Symbol});
/*!babel-runtime/core-js/symbol*/
;define("babel-runtime/core-js/symbol",function(e,o,l){l.exports={"default":e("core-js/library/fn/symbol/index"),__esModule:!0}});
/*!babel-runtime/helpers/typeof*/
;define("babel-runtime/helpers/typeof",function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=e("babel-runtime/core-js/symbol/iterator"),u=n(o),f=e("babel-runtime/core-js/symbol"),r=n(f),l="function"==typeof r.default&&"symbol"==typeof u.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};t.default="function"==typeof r.default&&"symbol"===l(u.default)?function(e){return"undefined"==typeof e?"undefined":l(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":"undefined"==typeof e?"undefined":l(e)}});
/*!agency/index/db*/
;define("agency/index/db",function(e){var t=e("edu_modules/edu-db/edu-db");return t.extend({get_bankinfo:t.httpMethod({url:"/cgi-agency/agency/manager/get_bankinfo",type:"GET"}),get_check_fee:t.httpMethod({url:"/cgi-bin/tool/check_fee",type:"GET"}),shelves_ios:t.httpMethod({url:"/cgi-agency/course/manager/shelves_ios",type:"POST"}),agency_ios_contrace:t.httpMethod({url:"/cgi-agency/agency/agencyIosContract",type:"GET"}),get_agency_info:t.httpMethod({url:"/cgi-agency/agency/manager/info",type:"GET"}),update_agency_info:t.httpMethod({url:"/cgi-agency/agency/manager/update_info",type:"POST"}),get_teacher:t.httpMethod({url:"/cgi-agency/agency/manager/get_teacher",type:"POST"}),save_teacher:t.httpMethod({url:"/cgi-agency/agency/manager/save_teacher",type:"POST"}),resave_teacher:t.httpMethod({url:"/cgi-agency/agency/manager/resave_teacher",type:"POST"}),modify_teacher:t.httpMethod({url:"/cgi-agency/agency/manager/modify_teacher",type:"POST"}),del_teacher:t.httpMethod({url:"/cgi-agency/agency/manager/del_teacher",type:"POST"}),get_teacher_list:t.httpMethod({url:"/cgi-agency/agency/manager/get_teacher_list",type:"GET"}),save_qqgroup:t.httpMethod({url:"/cgi-agency/agency/manager/save_qqgroup",type:"POST"}),resave_qqgroup:t.httpMethod({url:"/cgi-agency/agency/manager/resave_qqgroup",type:"POST"}),del_qqgroup:t.httpMethod({url:"/cgi-agency/agency/manager/del_qqgroup",type:"POST"}),get_qqgroup_list:t.httpMethod({url:"/cgi-agency/agency/manager/get_qqgroup_list",type:"GET"}),del_manager:t.httpMethod({url:"/cgi-agency/agency/manager/del_manager",type:"POST"}),get_manager_list:t.httpMethod({url:"/cgi-agency/agency/manager/get_manager_list",type:"GET"}),get_course_list:t.httpMethod({url:"/cgi-agency/agency/manager/get_course_list",type:"GET"}),get_course_list_simple:t.httpMethod({url:"/cgi-agency/course/manager/get_course_list_simple",type:"GET"}),delSignInfo:t.httpMethod({url:"/cgi-agency/agency/manager/del_sign_info",type:"POST"}),get_course_label:t.httpMethod({url:"/cgi-agency/course/manager/get_course_label",type:"GET"}),modify_course_label:t.httpMethod({url:"/cgi-agency/course/manager/modify_course_label",type:"GET"}),course_delete:t.httpMethod({url:"/cgi-agency/course/manager/delete",type:"POST"}),get_agency_course_list:t.httpMethod({url:"/cgi-agency/agency/manager/get_agency_course_list",type:"GET"}),account_sum:t.httpMethod({url:"/cgi-agency/ke_order/get_order_amounts_for_days",type:"GET"}),account_sum_service:t.httpMethod({url:"/cgi-agency/ke_order/get_comm_order_amounts_for_days",type:"GET"}),pending_record:t.httpMethod({url:"/cgi-agency/agency/pending_record",type:"GET"}),get_present_class_list:t.httpMethod({url:"/cgi-agency/agency/get_present_class_list",type:"GET"}),check_present_condition:t.httpMethod({url:"/cgi-agency/agency/check_present_condition",type:"GET"}),get_present_list_status:t.httpMethod({url:"/cgi-agency/agency/get_present_list_status",type:"GET"}),get_present_class_status:t.httpMethod({url:"/cgi-agency/agency/get_present_class_status",type:"GET"}),send_present_course:t.httpMethod({url:"/cgi-agency/agency/present_course",type:"POST"}),add_black_list:t.httpMethod({url:"/cgi-agency/manage/add_black_list",type:"POST"}),del_black_list:t.httpMethod({url:"/cgi-agency/agency/del_black_stu",type:"POST"}),del_kick_list:t.httpMethod({url:"/cgi-agency/agency/del_kick_stu",type:"POST"}),get_black_list:t.httpMethod({url:"/cgi-agency/agency/get_black_stu_list",type:"GET"}),get_kick_list:t.httpMethod({url:"/cgi-agency/agency/get_kick_stu_list",type:"GET"}),get_sensitive_words_list:t.httpMethod({url:"/cgi-proxy/agency/get_sensitive_words_list",type:"POST"}),delete_sensitive_word:t.httpMethod({url:"/cgi-proxy/agency/delete_sensitive_word",type:"POST"}),add_sensitive_word:t.httpMethod({url:"/cgi-proxy/agency/add_sensitive_word",type:"POST"}),add_video_info:t.httpMethod({url:"/cgi-agency/manager/video/add_video_info",type:"POST"}),get_video_info:t.httpMethod({url:"/cgi-agency/manager/video/get_video_info",type:"GET"}),del_video_info:t.httpMethod({url:"/cgi-agency/manager/video/del_video_info",type:"POST"}),add_sub_video_info:t.httpMethod({url:"/cgi-agency/manager/video/add_sub_video_info",type:"POST"}),del_sub_video_info:t.httpMethod({url:"/cgi-agency/manager/video/del_sub_video_info",type:"POST"}),modify_video_info:t.httpMethod({url:"/cgi-agency/manager/video/modify_video_info",type:"POST"}),modify_sub_video_info:t.httpMethod({url:"/cgi-agency/manager/video/modify_sub_video_info",type:"POST"}),modify_sub_video_order:t.httpMethod({url:"/cgi-agency/manager/video/modify_sub_video_order",type:"POST"}),submit_replay_set:t.httpMethod({url:"/cgi-agency/manager/video/submit_replay_set",type:"POST"}),get_qualified_live_courses:t.httpMethod({url:"/cgi-agency/video/get_qualified_live_courses",type:"GET"}),role_staff:t.httpMethod({url:"/cgi-agency/manager/right/role_staff",type:"GET"}),getConversionStatus:t.httpMethod({url:"/cgi-agency/manager/right/get_conversion_status",type:"GET"}),get_right_by_role:t.httpMethod({url:"/cgi-agency/manager/right/get_right_by_role",type:"GET"}),set_role_right:t.httpMethod({url:"/cgi-agency/manager/right/set_role_right",type:"POST"}),remove_staff:t.httpMethod({url:"/cgi-agency/manager/right/remove_staff",type:"POST"}),add_staff:t.httpMethod({url:"/cgi-agency/manager/right/add_staff",type:"POST"}),get_agency_info_v2:t.httpMethod({url:"/cgi-agency/agency/home/get_agency_info_json",type:"GET"}),set_agency_info_v2:t.httpMethod({url:"/cgi-agency/agency/home/set_agency_info",type:"POST"}),check_word:t.httpMethod({url:"/cgi-bin/tool/check_word",type:"POST"}),get_latest_notices:t.httpMethod({url:"/cgi-agency/agency/get_latest_notices",type:"GET"}),get_notices:t.httpMethod({url:"/cgi-agency/agency/get_notices",type:"GET"}),get_notice_content:t.httpMethod({url:"/cgi-agency/agency/get_notice_content",type:"GET"}),get_latest_tips_notice:t.httpMethod({url:"/cgi-agency/agency/get_latest_tips_notice",type:"GET"}),read_notice:t.httpMethod({url:"/cgi-agency/agency/read_notice",type:"GET"}),get_student_label:t.httpMethod({url:"/cgi-agency/agency/manager/get_student_label",type:"GET"}),operate_student_label:t.httpMethod({url:"/cgi-agency/agency/manager/operate_student_label",type:"POST"}),student_label_history:t.httpMethod({url:"/cgi-agency/agency/manager/student_label_history",type:"GET"}),flag_grade_notice:t.httpMethod({url:"/cgi-agency/agency/flag_grade_notice",type:"POST"}),get_last_one_grade_notice:t.httpMethod({url:"/cgi-agency/agency/get_last_one_grade_notice",type:"GET"}),get_latest_grade_notice:t.httpMethod({url:"/cgi-agency/agency/get_latest_grade_notice",type:"GET"}),get_star_rating:t.httpMethod({url:"/cgi-agency/agency/get_star_rating",type:"GET"}),get_overview_info:t.httpMethod({url:"/cgi-agency/agency/agency_grade/get_overview_info",type:"GET"}),get_week_score_detail:t.httpMethod({url:"/cgi-agency/agency/agency_grade/get_week_score_detail",type:"GET"}),get_week_grow_overview:t.httpMethod({url:"/cgi-agency/agency/agency_grade/get_week_grow_overview",type:"GET"}),get_category_week_grow_overview:t.httpMethod({url:"/cgi-agency/agency/agency_grade/get_category_week_grow_overview",type:"GET"}),set_notification_read:t.httpMethod({url:"/cgi-agency/agency/agency_grade/set_notification_read",type:"GET"}),getActivityList:t.httpMethod({url:"/cgi-agency/actcenter/get_acts",type:"GET"}),getActivityCoursesApplying:t.httpMethod({url:"/cgi-agency/actcenter/get_act_detail",type:"GET"}),getActivityCourseApplyed:t.httpMethod({url:"/cgi-agency/actcenter/get_audit_status",type:"GET"}),activityAddCourse:t.httpMethod({url:"/cgi-agency/actcenter/submit_courses",type:"POST"}),getAgencyAD:t.httpMethod({url:"/cgi-agency/agency/get_agency_ad",type:"GET"}),getGdtInfo:t.httpMethod({url:"/cgi-agency/agency/get_gdt_info",type:"GET"}),applyGdt:t.httpMethod({url:"/cgi-agency/agency/apply_gdt",type:"POST"}),applyAgencyAd:t.httpMethod({url:"/cgi-agency/agency/apply_agency_ad",type:"POST"}),agency_analyze:t.httpMethod({url:"/cgi-agency/data_center/agency_analyze",type:"GET"}),course_order:t.httpMethod({url:"/cgi-agency/data_center/agency_course_order_analyze",type:"GET"}),agency_course_analyze:t.httpMethod({url:"/cgi-agency/data_center/agency_course_analyze",type:"GET"}),get_top5_course:t.httpMethod({url:"/cgi-agency/data_center/get_top5_course",type:"GET"}),agency_channel_analyze:t.httpMethod({url:"/cgi-agency/data_center/agency_channel_analyze",type:"GET"}),get_student_info:t.httpMethod({url:"/cgi-agency/data_center/get_student_info",type:"GET"}),is_supper_user:t.httpMethod({url:"/cgi-agency/data_center/is_supper_user",type:"GET"}),has_new_list:t.httpMethod({url:"/cgi-agency/agency/has_new_list",type:"GET"}),settle_accounts_list:t.httpMethod({url:"/cgi-agency/agency/settle_accounts_list",type:"GET"}),settle_accounts_detail:t.httpMethod({url:"/cgi-agency/agency/settle_accounts_detail",type:"GET"}),confirm_bill:t.httpMethod({url:"/cgi-agency/agency/confirm_bill",type:"POST"}),pending_record_new:t.httpMethod({url:"/cgi-agency/agency/pending_record_new",type:"GET"}),settled_record:t.httpMethod({url:"/cgi-agency/agency/settled_record",type:"GET"}),getRecordQuery:t.httpMethod({url:"/cgi-agency/agency/record_query",type:"GET"}),transaction_order_query:t.httpMethod({url:"/cgi-agency/agency/transaction_order_query",type:"GET"}),getCourses:t.httpMethod({url:"/cgi-agency/agency/get_courses",type:"GET"}),publish_coupon:t.httpMethod({url:"/cgi-agency/coupon/agency/publish_coupon",type:"POST"}),white_list:t.httpMethod({url:"/cgi-agency/coupon/agency/white_list",type:"GET"}),get_coupon_list:t.httpMethod({url:"/cgi-agency/coupon/agency/get_coupon_list",type:"GET"}),del_coupon:t.httpMethod({url:"/cgi-agency/coupon/agency/del_coupon",type:"POST"}),get_agency_course:t.httpMethod({url:"/cgi-agency/coupon/agency/get_agency_course",type:"GET"}),get_agency_package:t.httpMethod({url:"/cgi-agency/coupon/agency/get_agency_course_package",type:"GET"}),get_coupon_course_list:t.httpMethod({url:"/cgi-agency/agency/get_coupon_course_list",type:"GET"}),hideCoupon:t.httpMethod({url:"/cgi-agency/coupon/agency/hide_coupon",type:"POST"}),get_coupon_user_list:t.httpMethod({url:"/cgi-agency/coupon/agency/get_coupon_user_list",type:"POST"}),get_element_list:t.httpMethod({url:"/cgi-agency/agency/manager/get_element_list",type:"GET"}),get_term_list:t.httpMethod({url:"/cgi-agency/course/term/list",type:"GET"}),get_discount_list:t.httpMethod({url:"/cgi-agency/agency/discount/list",type:"GET"}),add_discount:t.httpMethod({url:"/cgi-agency/agency/discount/add_discount",type:"POST"}),del_discount:t.httpMethod({url:"/cgi-agency/agency/discount/del_discount",type:"POST"}),mod_discount:t.httpMethod({url:"/cgi-agency/agency/discount/mod_discount",type:"POST"}),getVioInfo:t.httpMethod({url:"/cgi-agency/agency/get_break_rule_record_list",type:"GET"}),getComplainInfo:t.httpMethod({url:"/cgi-agency/agency/get_complain_record_list",type:"GET"}),doComplain:t.httpMethod({url:"/cgi-agency/agency/do_complain",type:"POST"}),getOrderList:t.httpMethod({url:"/cgi-agency/ke_order/get_order_msg_list",type:"GET"}),refundConfirm:t.httpMethod({url:"/cgi-agency/refund/confirm",type:"POST"}),getSettleTotal:t.httpMethod({url:"/cgi-agency/ke_order/get_agency_total_amount",type:"GET"}),getSettleList:t.httpMethod({url:"/cgi-agency/ke_order/get_agency_settle_list",type:"GET"}),getUnsettleList:t.httpMethod({url:"/cgi-agency/ke_order/get_agency_unsettle_list",type:"GET"}),updateSettleState:t.httpMethod({url:"/cgi-agency/ke_order/agency_confirm_settle",type:"GET"}),getSettlementFile:t.httpMethod({url:"/cgi-agency/ke_order/agency_settle_detail_file_download",type:"GET"}),get_p_agency_info:t.httpMethod({url:"/cgi-agency/person_teacher/get_p_agency_info",type:"POST"}),qualification_update:t.httpMethod({url:"/cgi-agency/person_teacher/qualification_update",type:"POST"}),add_teaching_exper:t.httpMethod({url:"/cgi-agency/person_teacher/add_teaching_exper",type:"POST"}),del_teaching_exper:t.httpMethod({url:"/cgi-agency/person_teacher/del_teaching_exper",type:"POST"}),update_teaching_exper:t.httpMethod({url:"/cgi-agency/person_teacher/update_teaching_exper",type:"POST"}),add_teaching_profile:t.httpMethod({url:"/cgi-agency/person_teacher/add_teaching_profile",type:"POST"}),del_teaching_profile:t.httpMethod({url:"/cgi-agency/person_teacher/del_teaching_profile",type:"POST"}),add_teaching_result:t.httpMethod({url:"/cgi-agency/person_teacher/add_teaching_result",type:"POST"}),del_teaching_result:t.httpMethod({url:"/cgi-agency/person_teacher/del_teaching_result",type:"POST"}),update_teaching_result:t.httpMethod({url:"/cgi-agency/person_teacher/update_teaching_result",type:"POST"}),add_teaching_subject:t.httpMethod({url:"/cgi-agency/person_teacher/add_teaching_subject",type:"POST"}),del_teaching_subject:t.httpMethod({url:"/cgi-agency/person_teacher/del_teaching_subject",type:"POST"}),update_teaching_subject:t.httpMethod({url:"/cgi-agency/person_teacher/update_teaching_subject",type:"POST"}),update_teaching_age:t.httpMethod({url:"/cgi-agency/person_teacher/update_teaching_age",type:"POST"}),update_teaching_base_info:t.httpMethod({url:"/cgi-agency/person_teacher/update_teaching_base_info",type:"POST"}),update_basic_info_for_person:t.httpMethod({url:"/cgi-agency/person_teacher/basic_info_update",type:"POST"}),update_teaching_info_more:t.httpMethod({url:"/cgi-agency/person_teacher/modify_portrait_info",type:"POST"}),get_core_course:t.httpMethod({url:"/cgi-agency/person_teacher/get_core_course",type:"POST"}),set_core_course:t.httpMethod({url:"/cgi-agency/person_teacher/set_core_course",type:"POST"}),send_agency_expire_warn:t.httpMethod({url:"/cgi-agency/agency/send_agency_expire_warn",type:"GET"}),agency_renew:t.httpMethod({url:"/cgi-agency/agency/agency_renew",type:"GET"}),fileAdd:t.httpMethod({url:"/cgi-bin/file/addFileInfo",type:"POST"}),coursesToFileBindRelation:t.httpMethod({url:"/cgi-bin/file/coursesToFileBindRelation",type:"POST"}),fileDelete:t.httpMethod({url:"/cgi-bin/file/delete",type:"POST"}),fileDownload:t.httpMethod({url:"/cgi-bin/file/download",type:"POST"}),filesToCourseBindsRelation:t.httpMethod({url:"/cgi-bin/file/filesToCourseBindsRelation",type:"POST"}),getBindedFiles:t.httpMethod({url:"/cgi-bin/file/getBindedFiles",type:"POST"}),getFileList:t.httpMethod({url:"/cgi-bin/file/getFileList",type:"GET"}),getDownloadAddress:t.httpMethod({url:"/cgi-bin/file/get_download_addr",type:"POST"}),getUploadAddress:t.httpMethod({url:"/cgi-bin/file/get_upload_addr",type:"POST"}),fileUpload:t.httpMethod({url:"/cgi-bin/file/upload",type:"POST"}),getSign:t.httpMethod({url:"/cgi-bin/file/getSignature",type:"GET"}),getAgencyRuleScore:t.httpMethod({url:"/cgi-agency/agency/agency_grade/getAgencyRuleScore",type:"GET"}),getSignature:t.httpMethod({url:"/cgi-agency/exam/get_signature",type:"GET"}),get_agency_graph_permission:t.httpMethod({url:"/cgi-agency/ke_graph/get_agency_graph_permission",type:"GET"}),get_agency_course_package_list:t.httpMethod({url:"/cgi-agency/agency/manager/get_agency_course_package_list",type:"GET"}),delete_course_package:t.httpMethod({url:"/cgi-agency/course/manager/delete_course_package",type:"POST"}),set_course_package_offline:t.httpMethod({url:"/cgi-agency/course/manager/set_course_package_offline",type:"POST"}),get_agency_manage_advidor:t.httpMethod({url:"/cgi-agency/chat/agency_manage_advidor",type:"GET"}),agency_manage_commodity_advidor:t.httpMethod({url:"/cgi-agency/chat/agency_manage_commodity_advidor",type:"GET"}),modify_course_teachers:t.httpMethod({url:"/cgi-agency/chat/modify_course_teachers",type:"GET"}),modify_commodity_teachers:t.httpMethod({url:"/cgi-agency/chat/modify_commodity_teachers",type:"GET"}),getCourseComment:t.httpMethod({url:"/cgi-bin/comment_new/course_comment_list",type:"GET"}),getTeacherComment:t.httpMethod({url:"/cgi-bin/comment_new/teacher_comment_list",type:"GET"}),getDropdownCourse:t.httpMethod({url:"/cgi-agency/comment_new/course_dropdown",type:"GET"}),getDropdownTeacher:t.httpMethod({url:"/cgi-agency/comment_new/teacher_dropdown",type:"GET"}),reportTeacherComment:t.httpMethod({url:"/cgi-agency/comment_new/report_teacher_comment",type:"POST"}),reportCourseComment:t.httpMethod({url:"/cgi-bin/comment_new/report_course_comment",type:"POST"}),courseCommentStat:t.httpMethod({url:"/cgi-agency/comment_new/course_comment_stat",type:"GET"}),replyCourseComment:t.httpMethod({url:"/cgi-agency/comment_new/reply_comment",type:"POST"}),get_video_download_url:t.httpMethod({url:"/cgi-bin/tool/get_video_info",type:"GET"}),get_agency_qidian_status:t.httpMethod({url:"/cgi-proxy/agency/get_agency_qidian_status",type:"GET"}),agency_sign_qidian_contract:t.httpMethod({url:"/cgi-proxy/agency/agency_sign_qidian_contract",type:"GET"}),__last:null}),t});
/*!/agency/index/qidian/tpl/applyDialog.tpl_tpl*/
;define("/agency/index/qidian/tpl/applyDialog.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];_$out_.push('<div class="modal-bd"> <div class="mod-steps"> <ul class="steps-nav"> <li class="active"><span>1</span>签订使用协议<i class="triangle step1"></i></li> <li><span>2</span>填写注册账号信息</li> </ul> </div> <div class="wrap-step wrap-step-1"> <div class="reg-protocol qidian-protocol" id="regProtocol"> <div id="qidian-pro-wrap"> <div class="qidian-pro-t" id="regProCon" unselectable="on" style="-moz-user-select:none;-webkit-user-select:none;" onselectstart="return false;"> <p class="pro-title"> 腾讯课堂企点客服使用协议 </p> <p class="pro-guide"> 欢迎您使用腾讯课堂提供的企点客服！ </p> <p> 为使用腾讯课堂提供的企点客服（以下简称：企点客服），您应当阅读并遵守《腾讯课堂企点客服使用协议》、（以下简称：本协议）、《腾讯服务协议》、《腾讯企点软件许可及服务协议》、《腾讯QQ软件许可及服务协议》及《腾讯课堂课程发布者注册协议》以及专项规则等，请您务必审慎阅读、充分理解各条款内容，特别是免除或者限制责任的条款，以及开通或使用某项服务的单独协议、规则。若腾讯根据实际情况对相关协议、规则内容进行单方调整的，您也无异议，将予以同意和遵守。相关协议、规则、规范等与本协议构成一个不可分割的一个整体，您将予以全部同意和遵守。 </p> <p> 除非您已阅读并接受本协议及相关协议、规则等所有条款，否则，您无权使用腾讯课堂提供的企点客服。您使用企点客服，即视为您已阅读并同意上述协议、规则等的约束。 </p> <p> 您有违反本协议的任何行为时，腾讯有权依照违反情况，随时单方限制、中止或终止向您提供企点客服，并有权追究您的相关责任。 </p> <p class="pro-guide"> 1.术语含义 </p> <p> 如无特别说明，下列术语在本协议中的含义为： </p> <p> <b>1.1 课程发布者：</b>指经有效注册、申请后，将其享有相应权利的各种课程接入腾讯课堂并向用户提供各种免费或收费类的在线直播、录播服务以实现与用户进行在线交流与学习目的的个人、法人或其他组织，因前述主体的不同，课程发布者在对外展现上也称“机构”或“老师”，本协议中简称为“您”。 </p> <p> <b>1.2 课程：</b>指由课程发布者开发，或课程开发者经权利人授权，通过腾讯课堂向相关用户提供各种免费或收费类的在线直播、录播形式的交流与学习服务，包括但不限于网络营销类、语言类、公务员考试类、小学/初中/高中教育辅导类（非学历教育）等现存的各种培训服务及今后可能出现的各种培训服务。课程是否收费、课程收费的数额及课程收费方式等均由课程发布者自行决定。 </p> <p> <b>1.3 腾讯课堂：</b>指由腾讯所拥有、控制、经营的腾讯网（qq.com）、朋友网（pengyou.com）、未来将上线的其他平台或网站及前述各平台网站的下属子页面，以下简称为“腾讯平台”、“腾讯课堂”、“平台”。腾讯通过腾讯课堂向您提供的服务包括但不限于提供课程运营平台、费用支付服务、广点通推广服务等服务，具体以腾讯提供和您选择的服务为准，前述服务称为腾讯课堂服务、平台服务、本服务。 </p> <p> <b>1.4 腾讯课堂企点客服服务：</b>是指由腾讯课堂提供的即时通讯工具，课程发布者向腾讯课堂申请通过后，可以通过登录企点客服账户使用该工具，进行课程的咨询与销售服务。企点客服服务有标准版本、专业版本、企业版本，本协议下腾讯课堂企点客服服务指专业版本的定制版本，并对部分的功能进行了调整或限制，具体的功能以腾讯课堂实际提供的为准。腾讯课堂企点客服服务，作为向您提供平台服务的一部分，腾讯课堂不会就向您提供企点客服服务额外收取服务费用，但后续腾讯课堂可能会对企点客服服务进行调整，并有权根据运营情况单独决定是否向您收取相应服务费用，您可以在支付相应的费用后继续使用，否则您可以选择放弃继续使用，对此造成的损失由您自行承担。腾讯课堂企点客服服务以下简称“企点客服”，详细功能可见腾讯企点产品网站<a href="//www.qidian.qq.com" target="_blank">腾讯企点产品网站(www.qidian.qq.com)</a>的腾讯企点相关软件产品介绍及说明。 </p> <p class="pro-guide"> 2.课程发布者的权利和义务 </p> <p> <b>2.1 帐户申请</b> </p> <p> <b>2.1.1</b> 您通过腾讯课堂申请使用企点客服，统一由课堂申请并创建企点客服账户并遵守《QQ号码规则》及相关协议、规则等的约束。 </p> <p> <b>2.1.2</b> 您不得违反本协议约定将您的企点客服账户用于其他目的。否则，腾讯有权随时单方限制、中止或终止向您提供企点客服，且未经腾讯同意您不得再次使用企点客服。 </p> <p> <b>2.1.3</b> 您申请注册企点客服帐户，是您登录及使用企点客服的凭证。您应当做好企点客服号码、密码，以及进入和管理企点客服中的各类产品与服务的号码、密码的保密措施。因您保密措施不当或您的其他行为，致使上述号码、密码丢失或泄漏所引起的一切损失和后果，均由您自行承担。 </p> <p> <br/> </p> <p> <b>2.2 资质材料</b> </p> <p> <b>2.2.1</b> 您同意：将在腾讯课堂入驻提交的资质材料作为申请企点客服帐户的认证资料（包括但不限于涉及的身份证、手机号码、银行卡、行政许可证明等信息），并保证公司注册名称与提供的营业执照或公司证明的名称一致，且申请时由腾讯课堂代为提交至企点客服审核，作为企点客服帐户的企业资料展示。</b> </p> <p> <b>2.2.2</b> 您保证：通过企点客服的提供的各种课程咨询服务，均符合国家相关法规的规定，不违反任何相关法规及相关协议、规则，也不会侵犯任何人的合法权益，同时，会依法、依约或按照腾讯的要求提供版权、专利权等相关证明文件。 </p> <p <br/> </p> <p> <b>2.3 使用方式</b> </p> <p> <b>2.3.1</b> 您将使用企点客服作为在腾讯课堂提供课程咨询的工具，您可以具有企点客服相关功能的使用权，具体的功能以腾讯课堂实际提供的为准。腾讯课堂企点客服服务，作为向您提供平台服务的一部分，腾讯课堂不会就向您提供企点客服服务额外收取服务费用，但后续腾讯课堂可能会对服务进行调整，并有权根据运营情况单独决定是否向您收取相应服务费用，您可以在支付相应的费用后继续使用，否则您可以选择放弃继续使用，对此造成的损失由您自行承担。同时为了保障您对企点客服的使用权，腾讯在收到第一次审核通过的公司名称且已经开通企点账号后，您无法以任何理由更换公司名称。 </p> <p> <b>2.3.2</b> 您必须通过腾讯提供的企点客服客户端软件来访问或使用，不得利用企点客服进行侵权、违法、违规行为，否则腾讯有权随时单方终止您对企点客服的使用许可；对于通过其它手段登录、使用所造成的后果，腾讯将不承担任何责任。 </p> <p> <b>2.3.3</b> 您需凭腾讯课堂发放的企点客服账户、密码登录企点客服。腾讯仅根据您的帐号和密码确认使用企点客服的用户身份。您应妥善保管您的帐号和密码，并对其使用及其遗失自行承担责任。您同意，如其您的帐号和密码遭到未获授权的使用，或者发生其他任何安全问题时，将立即通知腾讯。您在此同意并确认，腾讯对因上述情形产生的遗失或损害不负责任。 </p> <p> <b>2.3.4</b> 您成功申请后，腾讯课堂将向您入驻课堂的管理员QQ帐户邮件以及联系电话发放企点客服账户和密码，且会自动赋予成为您在腾讯课堂所运营机构的销售角色，您可以根据自己的需求，将企点客服设定为其他角色，进行您指定或授权的操作。 </p> <p> <b>2.3.5</b> 您同意登录使用企点客服，使用企点客服将个人QQ好友关系复制至企点客服后，由腾讯课堂将课程绑定、身份角色、学员关系的迁移至对应的企点客服帐户。 </p> <p> <b>2.3.6</b> 您保证不得出售、转售或复制、开发腾讯课堂授予的企点客服使用权限，且以任何有偿及无偿的形式进行转让，不得基于商业目的模仿企点客服的产品和服务；不得复制和模仿企点客服的设计理念、界面、功能和图表；不得未经腾讯许可基于此软件或其内容进行修改或制造派生其他产品。 </p> <p> <b>2.3.7</b> 腾讯课堂保留在任何时候自行决定对企点客服及其相关功能的变更、升级、修改、转移的权利。腾讯课堂进一步保留在企点客服软件系统中开发新的功能或其它语种服务的权利。上述所有新的功能、软件服务的提供，除非腾讯课堂有说明，否则仍适用本协议。 </p> <p> <br/> </p> <p> <b>2.4 服务费用</b> </p> <p> <b>2.4.1</b> 您理解并同意：您申请本服务通过腾讯课堂审核后，在服务期内，腾讯课堂向您提供腾讯课堂企点客服服务。作为腾讯课堂向您提供平台服务的一部分，腾讯课堂不会就向您提供企点客服服务额外收取服务费用。但腾讯课堂可能会对企点客服服务进行调整，并有权根据运营情况单独决定是否向您收取相应服务费用。您应该在服务期到期前，提前联系腾讯课堂办理完成相关续约手续，否则，腾讯有权在服务期到期后，在不通知您的情况下收回、终止企点客服相关服务，收回之后，您不可以再使用相关服务，同时，腾讯有权在到期一个月后随时清空您因使用相关服务产生的全部数据、信息等，包括但不限于群发信息、员工信息、客户或好友信息和聊天记录等。若由此，给您造成任何损失，您应自行全部承担全部损失，并无权向腾讯、腾讯课堂提出任何主张。回收后，您若还需使用本服务，需向腾讯课堂再次申请服务，腾讯课堂会重新分配新的企点客服账户号码，您将不能继续使用原有企点客服账户号码和相应数据。您对此予以理解并认可，同时，您会在服务期限到期前自行备份存储相关数据。后续腾讯课堂可能会对服务进行调整，并有权根据运营情况单独决定是否向您收取相应服务费用。 </p> <p> <b>2.4.2</b> 您理解并同意：本协议下腾讯课堂企点客服服务指为课程发布者提供的专业版本的定制版本，并对部分的功能进行了调整或限制，具体的功能以腾讯课堂实际提供的为准。如您需要使用腾讯课堂企点客服服务外其他企点产品或功能，您需要就使用此等企点产品或功能支付相应费用，具体收费标准以腾讯书面通知或网站公告为准。 </p> <p> <b>2.4.3</b> 如后续腾讯课堂向您收取使用企点客服相应服务费用时，您因使用企点客服提供的相关服务而产生的所有服务费用由您自行承担，您应按相关协议、规则等的规定支付费用，否则，腾讯课堂有权不提供相关服务。您选择使用相关服务并支付费用后，在服务未到期之前，若您单方要求提前解除服务的，腾讯有权将您未使用的服务对应的费用不予退还而作为您单方违约的违约金予以没收。 </p> <p> <b>2.4.4</b> 在本服务中，腾讯课堂如需对服务收取相应服务费用时，腾讯课堂有权单方根据实际需要对收费服务的收费标准、方式进行修改和变更，前述修改、变更前，腾讯课堂将在相应服务页面进行通知或公告。如果您不同意上述修改、变更，则应立即停止使用相应服务，否则，您的任何使用行为，即视为您同意上述修改、变更，腾讯课堂亦有权终止本服务。 </p> <p> <b>2.4.5</b> 您理解并同意：若腾讯课堂按照前述约定对于本服务是否收费、收费标准等单方做出调整、变化的，您会予以全部遵守、同意，但您依法或按照约定终止使用本服务的除外。 </p> <p> <br/> </p> <p class="pro-guide"> 3.腾讯的权利义务 </p> <p> <b>3.1</b> 腾讯课堂将按照本协议的规定许可您使用企点客服，保护您个人信息是腾讯的一项基本原则，腾讯课堂将会采取合理的措施保护您个人信息。除法律法规规定的情形外，未经您许可腾讯不会向第三方公开、透露您个人信息。在您使用本产品的过程中，腾讯课堂可能会收集您在使用服务时提供或因为使用服务而产生的信息，目的是为了向您提供服务、优化我们的服务以及保障您的账号安全等。腾讯对相关信息采用专业加密存储与传输方式，保障您个人信息的安全。 </p> <p> <b>3.2</b> 腾讯课堂有权随时删除含有任何违反法律、法规、软件使用许可协议、各项规则的信息或链接，包括腾讯课堂对此有合理怀疑的信息。腾讯课堂有权单独对您提供的信息是否属于上述范围做出判断。 </p> <p> <b>3.3</b> 腾讯课堂可将本协议下的企点客服相使用权利和义务的部分或全部转让给他人，并向您收回企点客服的使用权限。 </p> <p> <b>3.4</b> 腾讯课堂有权在企点客服中或通过企点客服向您展现各种信息，包括但不限于广告信息、新闻信息及宣传信息等，该信息可能以系统消息或弹出窗口等形式出现。 </p> <p> <b>3.5</b> 您可以选择不向腾讯课堂提供您的某些信息，或者根据产品设置取消腾讯收集某些信息，但因此可能会导致相关服务功能无法实现。 </p> <p> <b>3.6</b> 如果您停止使用本软件及服务或服务被终止或取消，腾讯课堂可以从服务器上永久地删除您的数据。您的服务停止、终止或取消后，腾讯课堂无法、也没有义务向您返还任何数据。 </p> <p> <b>3.7</b> 您理解并同意：企点客服是腾讯课堂专门为方便您或经您授权使用的个人用户，基于相应单位的业务运营等目的，而进行内部或外部信息交流、沟通的工具，因此，您可能会基于内部信息安全管理、业务运营等目的，接触到因您使用企点客服产生的全部数据、信息等（包括但不限于发送信息、员工信息、客户或好友信息等），并对其进行查询、管理等操作。若您需要与他人进行与您所在单位中的本职工作无关的信息交流、沟通，请您使用您的私人通讯工具，以免您的个人信息泄露。 </p> <p> <br/> </p> <p class="pro-guide"> 4.知识产权 </p> <p> <b>4.1</b> 腾讯是本软件的知识产权权利人。本软件的著作权、商标权、专利权、商业秘密等知识产权，以及与本软件相关的所有信息内容（包括但不限于文字、图片、音频、视频、图表、界面设计、版面框架、有关数据或电子文档等）均受中华人民共和国法律法规和相应的国际条约保护，腾讯依法享有上述相关知识产权，但相关权利人依照法律规定应享有的权利除外。 </p> <p> <b>4.2</b> 未经腾讯事先书面同意，您不得为任何营利性或非营利性的目的自行实施、利用、转让或许可任何第三方实施、利用、转让上述知识产权。 </p> <p> <br/> </p> <p class="pro-guide"> 5.关于免责 </p> <p> <b>5.1 您理解并同意，腾讯或腾讯课堂对您提交的资料及信息仅进行合理、谨慎的形式审查，但在腾讯的合法权限和合理能力范围内，腾讯无法实质审查用户提交的资料和信息以及您的实际经营、运营、推广等行为并无法确保其实质的真实性、合法性。您通过审核或申请开通账号成功，不代表腾讯对您或您在账号中的任何行为的合法性、真实性进行认证或确认，腾讯也无法为您或您在账号中的任何行为提供任何担保，相关的责任或风险仍然由您自行承担。您与其他用户或第三方发生争议的，由您独立对外承担责任，若因此给腾讯、其他用户或第三方造成损害的，您应当依法独立承担责任并予以赔偿。</b> </p> <p> <b>5.2 您理解并同意：鉴于网络服务的特殊性，腾讯有权在无需通知您的情况下根据腾讯课堂的整体运营情况或相关运营规范、规则等，可以随时变更、中止或终止部分或全部的服务，若由此给您造成损失的，您同意放弃追究腾讯的责任。</b> </p> <p> <b>5.3 您理解并同意：为了向您提供更完善的服务，腾讯有权定期或不定期地对提供企点客服的平台或相关设备进行检修、维护、升级等，此类情况可能会造成相关服务在合理时间内中断或暂停的，若由此给您造成损失的，您同意放弃追究腾讯的责任。</b> </p> <p> <b>5.4 您理解并同意：腾讯的服务是按照现有技术和条件所能达到的现状提供的。腾讯会尽最大努力向您提供服务，确保服务的连贯性和安全性；但腾讯不能保证其所提供的服务毫无瑕疵，也无法随时预见和防范法律、技术以及其他风险，包括但不限于不可抗力、病毒、木马、黑客攻击、系统不稳定、第三方服务瑕疵、政府行为等原因可能导致的服务中断、数据丢失以及其他的损失和风险。所以您也同意：即使腾讯提供的服务存在瑕疵，但上述瑕疵是当时行业技术水平所无法避免的，其将不被视为腾讯违约，同时，由此给您造成的数据或信息丢失等损失的，您同意放弃追究腾讯的责任。</b> </p> <p> <b>5.5 您理解并同意：在使用企点客服的过程中，可能会遇到不可抗力等风险因素，使企点客服发生中断。不可抗力是指不能预见、不能克服并不能避免且对一方或双方造成重大影响的客观事件，包括但不限于自然灾害如洪水、地震、瘟疫流行和风暴等以及社会事件如战争、动乱、政府行为等。出现上述情况时，腾讯将努力在第一时间与相关单位配合，及时进行修复，若由此给您造成损失的，您同意放弃追究腾讯的责任。</b> </p> <p> <b>5.6 您理解并同意：若由于对以下情形导致的服务中断或受阻，给您造成损失的，您同意放弃追究腾讯的责任：</b> </p> <p> （1）受到计算机病毒、木马或其他恶意程序、黑客攻击的破坏； </p> <p> （2）您或腾讯的电脑软件、系统、硬件和通信线路出现故障； </p> <p> （3）您操作不当； </p> <p> （4）您通过非腾讯授权的方式使用本服务； </p> <p> （5）其他腾讯无法控制或合理预见的情形。 </p> <p> <br/> </p> <p class="pro-guide"> 6.服务的中止或终止 </p> <p> <b>6.1</b> 因不可抗力因素导致您无法继续使用企点客服或腾讯无法提供企点客服的，腾讯有权随时终止协议。 </p> <p> <b>6.2</b> 本协议约定的其他中止或终止条件发生或实现的，腾讯有权随时中止或终止向您提供企点客服。 </p> <p> <b>6.3</b> 由于您违反本协议约定，腾讯依约终止向您提供企点客服后，如您后续再直接或间接，或以他人名义注册使用企点客服的，腾讯有权直接单方面暂停或终止提供企点客服。 </p> <p> <b>6.4</b> 如本协议或企点客服因为任何原因终止的，对于您的帐号中的全部数据或您因使用企点客服而存储在腾讯服务器中的数据等任何信息，腾讯可将该等信息保留或删除，包括服务终止前您尚未完成的任何数据 </p> <p> <b>6.5 如本协议或企点客服因为任何原因终止的，您应自行处理好关于数据等信息的备份以及与您的用户之间的相关事项的处理等，由此造成腾讯损失的，您应负责赔偿。</b> </p> <p> <br/> </p> <p class="pro-guide"> 7. 其他 </p> <p> <b>7.1</b> 本协议构成您和腾讯课堂间就使用企点客服相的完整的协议，。本协议被视为《<a class="nor-link" href="http://www.qq.com/contract.shtml" target="_blank">腾讯服务协议</a>》及《腾讯QQ软件许可及服务协议》、《腾讯课堂课程发布者注册协议》的补充协议，是其不可分割的组成部分，与其构成统一整体。本协议与上述内容存在冲突的，以本协议为准。本协议内容同时包括腾讯可能不断发布的关于企点客服的相 关协议、服务声明、业务规则及公告指引等内容（以下统称为“专项规则”）。专项规则一经正式发布，即为本协议不可分割的组成部分，您同样应当遵守。 </p> <p> <b>7.2</b> 本协议签订地为中华人民共和国广东省深圳市南山区。 </p> <p> <b>7.3</b> 本协议的成立、生效、履行、解释及纠纷解决，适用中华人民共和国大陆地区法律（不包括冲突法）。 </p> <p> <b>7.4</b> 若您和腾讯之间发生任何纠纷或争议，首先应友好协商解决；协商不成功的，双方均同意将纠纷或争议提交本协议签订地有管辖权的人民法院解决。 </p> <p> <b>7.5</b> 如本协议的任何条款被视作无效或无法执行，则上述条款可被分离，其余部分则仍具有法律效力 </p> <p> <b>7.6</b> 腾讯课堂有权随时根据中华人民共和国有关法律、法规的变化、互联网的发展以及公司经营状况和经营策略的调整等修改本协议。您要继续使用企点客服相就有必要对最新的《腾讯课堂企点客服使用协议》进行仔细阅读和确认。当发生有关争议时，以最新的协议为准。如果不同意所改动的内容，您可以以书面方式通知腾讯课堂终止您对腾讯企点的使用，并自行删除腾讯企点。如果您继续使用腾讯企点，则视为您接受本协议的变动。 </p> <p> <br/> </p> </div> </div> <div class="qidian-pro-op"> <span class="qidian-pro-agree pro-agree-dis cursor-default" id="proAgree" onselectstart="return false;">我已阅读并同意以上协议 (温馨提示：请阅读整个协议后再操作)</span> <!--<a href="/agency/personal/intro.html" class="pro-n-btn btn-weak" id="proNBtn">上一步</a>--> <a href="javascript:;" class="qidian-y-btn btn-default dis-btn" id="proYBtn">同意协议并注册</a> </div> </div> </div> <div class="wrap-step wrap-step-2 hide"> <div class="qidian-account"> <h2 class="h-tit">请填写企点客服的注册账号信息</h2> <form class="qidian-apply-form form"> ');for(var i=0;applyNum>i;i++)_$out_.push(' <div class="f-form-line clearfix"> <div class="f-item account-num"> <label class="f-label f-num">',i+1,'</label> </div> <div class="f-item account"> <div class="f-field f-name f-field--inline"> <input class="f-text" type="text" placeholder="账号名称" name="account" data-pattern="form_account" data-tips="请填写账号名称"，最多10个英文字符" data-msg="请填写账号名称"，最多10个英文字符> </div> </div> <div class="f-item"> <div class="f-field f-phone f-field--inline"> <input class="f-text" name="phone" autocomplete=\'tel-national\' type="text" placeholder="联系手机" maxlength="11" autocomplete="off" data-pattern="form_phone" data-tips="联系手机号"> </div> </div> </div> ');return _$out_.push(' </form> </div> <div class="qidian-account-op"> <a href="javascript:;" class="qidian-pre-btn op-btn" id="proPre">上一步</a> <a href="javascript:;" class="qidian-submit-btn dis-btn btn-default op-btn" id="proSubmit">提交</a> </div> </div> <div class="wrap-step wrap-step-3 hide"> <div class="qidian_submit_info"> <i class="icon-font i-tick"></i> <p>您已成功提交企点客服的使用申请</p> <p>审核结果将在7-14个工作日内发送到您的邮箱：312405270@qq.com</p> </div> </div></div>'),_$out_.join("")}}});
/*!/agency/index/qidian/tpl/applySucc.tpl_tpl*/
;define("/agency/index/qidian/tpl/applySucc.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push(' <div class="wrap-step wrap-step-3"> <div class="qidian_submit_info"> <i class="icon-font i-tick apply-succ"></i> <p class="title">您已成功提交企点客服的使用申请</p> <p class="tip">审核结果将在7-14个工作日内发送到您的邮箱：',email,"</p> </div> </div>"),_$out_.join("")}}});
/*!/agency/index/qidian/tpl/assignDialog.tpl_tpl*/
;define("/agency/index/qidian/tpl/assignDialog.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="assign-bg"></div><div class="assign-des">您已成功通过审核并获得 <span class="num">',grantNum,"</span> 个企点客服账号。在正式使用前，请分配未关联企点客服的课程，若不分配，将无法使用企点客服。</div>"),_$out_.join("")}}});
/*!edu_modules/validator/validator*/
;define("edu_modules/validator/validator",function(t,e,r){function n(){var t=this.validator={version:"0.0.1",succCls:"g-succ",infoCls:"g-info",errCls:"g-err",notAsciiWidth:2,parentSelector:".mod-form__line",resultSelector:".field-help",fieldSelector:".f-field",validate_timeout:300,msg:"",reg:{email:/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,mobile:/^1\d{10}$/,uin:/^[1-9](\d{4,10}|\d{17})$/,ascii:/^[\x00-\x7F]+$/,asciiSingle:/[\x00-\xFF]/,notAscii:/[^\x00-\x7F]/,fullWidth:/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,halfWidth:/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,uppercase:/[A-Z]/,lowercase:/[a-z]/,integer:/^\d+$/,date:/^(?:20|19)\d\d([-\/\\\.])(?:0?[1-9]|1[0-2])\1(?:[012]?\d|3[01])$/,time:/^(?:[01]?\d|2[0-3])[:：][0-5]?\d$/,url:/^https?:\/\//,ltrim:/^\s+/,rtrim:/\s+$/,matches:function(t,e,r){return("[object RegExp]"!==Object.prototype.toString.call(e)?new RegExp(e,r):e).test(t)},extend:function(t,e){this[t]=e}},toNumber:function(t){return t.replace(/\D/g,"")},toInt:function(t,e,r){return parseInt(t,e||10)||r||0},toDate:function(e,r){return/^\d{13}$/.test(e)?new Date(parseInt(e,10)):("string"==typeof e&&(e=e.replace(/-/g,"/")),t.date(e)?new Date(e):r||new Date)},toDateWithOutHMS:function(e,r){return e=t.toDate(e,r),e.setHours(0,0,0,0),e},getTime:function(e,r){return e=t.toDate(e),e?e.getTime():r||+new Date},pass:function(){return!0},integer:function(e){return t.reg.integer.test(e.toString())},not_null:function(t){return 0!==t.length},date_ipt:function(e){return t.reg.date.test(e.toString())},time:function(e){return t.reg.time.test(e.toString())},url:function(e){return t.reg.url.test(e.toString())},limit_number:function(e,r){var n=parseInt(e,10),a=parseInt(r.data("min"),10),s=parseInt(r.data("max"),10);return a>n||n>s?(t.msg=["请输入",a,"-",s].join(""),!1):!0},str_length:function(e,r,n){e=(e||"").toString(),!n&&(e=a.trim(e));var s=0;r=r||t.notAsciiWidth;for(var i=0,o=e.length;o>i;i++)s+=e.charCodeAt(i)<128?1:r;return Math.ceil(s/r)},limit:function(e,r){e=(e||"").toString(),r.data("trim")&&(e=a.trim(e));for(var n=0,s=t.notAsciiWidth,i=0,o=e.length;o>i;i++)n+=e.charCodeAt(i)<128?1:s;var l=parseInt(r.data("min"),10),u=parseInt(r.data("max"),10);return l&&s*l>n?(t.msg=(u?["请填写",l,"-",u,"个字"]:["请至少填写",l,"个字"]).join(""),!1):u&&n>s*u?(t.msg="字数超出"+Math.ceil((n-s*u)/s)+"个",!1):!0},limitByLength:function(e,r){var n=(e||"").length,a=parseInt(r.data("min"),10),s=parseInt(r.data("max"),10);return a&&a>n?(t.msg=(s?["请填写",a,"-",s,"个字"]:["请至少填写",a,"个字"]).join(""),!1):s&&n>s?(t.msg="字数超出"+(n-s)+"个",!1):!0},mobile:function(e){return t.reg.mobile.test(e)},uin:function(e){return t.reg.uin.test(e)},email:function(e){return t.reg.email.test(e)},date:function(t){return"string"==typeof t&&(t=t.replace(/-/g,"/")),"string"!=typeof t||/\d{4}\/\d{1,2}\/\d{1,2}/.test(t)?!isNaN(Date.parse(t)):!1},uppercase:function(e){return!t.reg.lowercase.test(e)},lowercase:function(e){return!t.reg.uppercase.test(e)},JSON:function(t){try{JSON.parse(t)}catch(e){return!(e instanceof SyntaxError)}return!0},getMsgHtml:function(t){return"<i></i><p>{{msg}}</p>".replace(/{{msg}}/g,t||"")},setSuccess:function(e){return t.ignore||e.closest(t.parentSelector).removeClass(t.errCls+" "+t.infoCls).addClass(t.succCls).find(t.resultSelector).html(t.getMsgHtml(t.succMsg||"","succ")),t.ignore=!1,t.msg="",t.succMsg="",!0},setTips:function(e){return e.closest(t.parentSelector).removeClass(t.errCls+" "+t.succCls).addClass(t.infoCls).find(t.resultSelector).html(t.getMsgHtml(t.msg||e.data("tips"),"tips")),t.msg="",!0},setError:function(e){return e.closest(t.parentSelector).removeClass(t.infoCls+" "+t.succCls).addClass(t.errCls).find(t.resultSelector).html(t.getMsgHtml(t.msg||e.data("msg"),"err")),t.msg="",!1},hasError:function(e){var r=e.closest(t.parentSelector);return r.hasClass(t.errCls)},clearValidateResult:function(e){return e.closest(t.parentSelector).removeClass(t.errCls+" "+t.succCls+" "+t.infoCls)},isNeedValidate:function(e){var r=e.closest(t.parentSelector);return r.hasClass(t.errCls)||r.hasClass(t.succCls)||r.hasClass(t.infoCls)},if_not_null_then:function(t){return t.length?!0:"break"},check:function(e,r,n,s){var i=!0,o=(e.data("pattern")||"").toString().split("|"),l=(e.data("msg")||"").toString().split("|"),u=e.val()||e.data("value")||"",c="";if("string"==typeof u){switch(e.data("prefix")){case"number":/\D/.test(u)&&(u=t.toNumber(u),e.val(u));break;case"float":/[^\d\-\.]/.test(u)&&(u=u.replace(/[^\d\-\.]/g,""),e.val(u));break;case"ltrim":t.reg.ltrim.test(u)&&(u=u.replace(t.reg.ltrim,""),e.val(u))}r||(u=a.trim(u))}for(var d=0,f=o.length;f>d&&i;d++){var g=o[d];if("function"==typeof t[g]){c=l[d]?l[d]:"",s&&c&&(t.msg=c);var p=t[g](u,e);i=!!p&&i;var m=e.data("msg-"+g);if(m&&(c=m),"break"===p)break}else""===g&&1===o.length?i=!0:(i=!1,console.warn&&void 0)}return n&&n(i),i},checkOne:function(e,r,n,a){t.msg="";var s=!0;return s="function"==typeof t[n]?t[n](r,e):""===n?!0:!1,"function"==typeof a&&a(s,t.msg),s=s===!1?t.msg||!1:s},validate:function(e,r){var n=t.check(e,r,!1,!0);return t.noResult&&(t.msg=""),t.noResult?n:n?t.setSuccess(e):t.setError(e)},bind:function(e){if(!e.data("__validate")){if(0===e.closest(t.parentSelector).find(t.resultSelector).length){var r=e.closest(t.fieldSelector),n='<div class="'+t.resultSelector.replace(/^\./,"")+'"></div>';r.length>0?r.append(n):e.after(n)}if(e.is(":input")){var a=function(){t.validate(e)};e.on("keyup paste",function(){e.data("noinput")||a()}),e.blur(function(){e.data("noblur")||a()}).focus(function(){e.data("nofocus")||t.setTips(e)})}e.data("__validate",1)}},all:function(e,r){t.isAll=!0,t.noResult=!!r;var n=e?a(e):a("[data-pattern]").not(".nopattern, .disabled"),s=!0;return n.each(function(){s=t.validate(a(this))&&s}),t.isAll=!1,t.noResult=!1,s},init:function(e,r){r=r||a(document);var n=r.find(e?e:":input[data-pattern]");n.each(function(){t.bind(a(this))})},extend:function(e,r){t[e]=function(){var e=Array.prototype.slice.call(arguments);return r.apply(t,e)}}}}var a=t("jquery");n.prototype.setOptions=function(t){return this.validator=a.extend(!0,this.validator,t),this},a.Validator=n,a.validator=(new n).validator,r.exports=a.validator});
/*!edu_modules/edu-datepicker/edu-datepicker*/
;define("edu_modules/edu-datepicker/edu-datepicker",function(t,e,i){var s=t("jquery"),a=function(t,e){if(this.options=e,this.element=s(t),this.format=n.parseFormat(e.format||this.element.data("date-format")||"yyyy-mm-dd"),this.picker=s(n.template(e).replace(/{{dpCls}}/,e._dpCls||"")).appendTo(this.options._body||"body").on({click:s.proxy(this.click,this)}),this.picker.data("toggle",this.element),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:s.proxy(this.show,this),keyup:s.proxy(this.update,this),click:s.proxy(this.show,this)}):this.component?this.component.on("click",s.proxy(this.show,this)):this.element.on("click",s.proxy(this.show,this)),this.minViewMode=e.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=e.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=e.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=e.onRender,this.isUp=e.isUp,this.adjustUp=e.adjustUp,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};a.prototype={constructor:a,show:function(t){this.picker.show(),this.options._show&&this.options._show(this.element),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),s(window).on("resize",s.proxy(this.place,this)),t&&!this.options._isStopProp&&(t.stopPropagation(),t.preventDefault()),!this.isInput;var e=this;s(document).on("mousedown",function(t){0===s(t.target).closest(".datepicker").length&&e.hide()}).on("navchange",function(){e.hide()}),this.element.trigger({type:"show",date:this.date})},hide:function(){!this.options._not_hide&&this.picker.hide(),this.options._hide&&this.options._hide(),s(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||s(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var t=n.formatDate(this.date,this.format);this.options._click&&this.options._click(this.date,this.element),this.isInput?this.element.prop("value",t):(this.component&&this.element.find("input").prop("value",t),this.element.data("date",t)),this.options._set&&this.options._set(this.date,this.element)},setValue:function(t){this.date="string"==typeof t?n.parseDate(t,this.format):new Date(t),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},getAdjustUp:function(t,e,i){var a=s(window),o=a.scrollTop();return t.top+e+i-o>a.height()},place:function(){var t=this.picker.outerHeight(),e=this.component?this.component.offset():this.element.offset(),i=this.height;this.adjustUp&&(this.isUp=this.getAdjustUp(e,i,t)),this.options._body?this.picker.css({top:this.isUp?-(t+i):0,left:0}):(this.isUp&&(i=-1*t),this.picker.css({top:e.top+i,left:e.left}))},update:function(t,e){if(t&&"[object Date]"===Object.prototype.toString.call(t))this.date=t;else if(e="function"==typeof this.options._defaultVal?new Date(this.options._defaultVal()):!1,this.options._isMuitPicker)this.date=e?new Date(e):n.today;else{var i="string"==typeof t?t:this.isInput?this.element.prop("value"):this.element.data("date");this.date=i?n.parseDate(i,this.format):e?new Date(e):n.today}isNaN(this.date.valueOf())&&(this.date=e&&!isNaN(e.valueOf())?e:n.today),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.viewDate.setFullYear(this.date.getFullYear()),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow dow'+t+'">'+n.dates.daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+n.dates.monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").append(t)},switchClk:function(){this.options.switchClk&&this.options.switchClk()},fill:function(){this.options._begin=this.options._begin?n.toDateWithOutHMS(this.options._begin):0,this.options._end=this.options._end?n.toDateWithOutHMS(this.options._end):0;var t=this.viewDate.getFullYear();1900>=t?(this.viewDate.setFullYear(1900),this.picker.find(".lastYear").addClass("disabled"),1900>t&&this.viewDate.setMonth(0),0===this.viewDate.getMonth()?this.picker.find(".prev").addClass("disabled"):this.picker.find(".prev").removeClass("disabled")):(this.picker.find(".lastYear").removeClass("disabled"),this.picker.find(".prev").removeClass("disabled"));var e=new Date(this.viewDate),i=e.getFullYear(),a=e.getMonth(),o=this.date.valueOf();this.picker.find(".datepicker-days th.switch").text(i+n.dates.yearSuffix+n.dates.monthsShort[a]),this.picker.find(".datepicker-days-bg").text(a+1);var h=new Date(i,a-1,28,0,0,0,0),d=n.getDaysInMonth(h.getFullYear(),h.getMonth());h.setDate(d),h.setDate(d-(h.getDay()-this.weekStart+7)%7);var r=new Date(h);r.setDate(r.getDate()+42),r=r.valueOf();for(var p,l,c,u=[],f=0,w=!1,v=0,m="function"==typeof this.options._dates?this.options._dates():this.options._dates,g="function"==typeof this.options._defaultVal?this.options._defaultVal():!1;h.valueOf()<r;){h.getDay()===this.weekStart&&(u.push("<tr"+(this.options._isView?' class="tr-view"':"")+">"),f=0),p=this.onRender(h),l=h.getFullYear(),c=h.getMonth(),w=!1,a>c&&l===i||i>l?(p+=" old",v++,w=!0):(c>a&&l===i||l>i)&&(p+=" new",w=!0),h.valueOf()===o&&(p+=" active"),g&&h.valueOf()===g&&(p+=" defaultDay current");var y="",k="";this.options._begin&&h<this.options._begin&&(k=" disabled before_begin"),this.options._end&&h>this.options._end&&(k=" disabled after_end"),""===k&&this.options._filter&&this.options._filter(h,this.element)&&(k=" disabled"),this.options._isView&&(k+=(-1!==k.indexOf("disabled")?"":" disabled")+(!this.options._isMuitPicker&&h<n.today?" pass":"")+(/(before_begin|after_end)/.test(k)?" not_allow":""),s.isArray(m)&&-1!==m.indexOf(h.getTime())?(y="current",f++):f=0,this.options._isMuitPicker||(0===f?u.push(u.pop().replace(/{{opob}}/gi,"").replace(/{{opom}}/gi,"{{opoe}}")):1===f?k+=" date-view {{opob}}":f>1&&(k+=" date-view {{opom}}")));var D=[h.getFullYear(),h.getMonth()+1,h.getDate()].join("/");if(this.options._isView){var M=[["",h.getDate()],["day-today","今天"],["day-holiday","假日"]],b=0;"function"==typeof this.options._isHoliday&&this.options._isHoliday(+h)&&(b=2),h.getTime()===n.today.getTime()&&(b=1),u.push(('<td class="day'+p+k+' {{viewCls}}" data-date="'+D+'"><div><i>{{viewText}}</i><b></b><u></u></div></td>').replace(/{{viewCls}}/gi,this.options._isMuitPicker?y:M[b][0]).replace(/{{viewText}}/gi,M[b][1]))}else u.push('<td class="day'+p+k+'" data-date="'+D+'">'+h.getDate()+"</td>");h.getDay()===this.weekEnd&&(u.push(u.pop().replace(/{{opob}}/gi,"").replace(/{{opom}}/gi,"{{opoe}}")),u.push("</tr>")),h.setDate(h.getDate()+1)}var _=this.picker.find(".datepicker-days tbody");_.empty().append(u.join("").replace(/{{opo([bem])}}/gi,"view-day-$1")),v>=7&&_.find("tr:eq(0)").hide();var Y=this.date.getFullYear(),x=this.picker.find(".datepicker-months").find("th.switch").text(i+n.dates.yearSuffix).end().find("span").removeClass("active");Y===i&&x.eq(this.date.getMonth()).addClass("active"),u="",i=10*parseInt(i/10,10);var F=this.picker.find(".datepicker-years").find("th.switch").text(i+"-"+(i+9)).end().find("td");i-=1;for(var S=-1;11>S;S++)u+='<span class="year'+(-1===S||10===S?" old":"")+(Y===i?" active":"")+'">'+i+"</span>",i+=1;F.html(u)},click:function(t){!this.options._isMuitPicker&&t.stopPropagation(),t.preventDefault();var e=s(t.target).closest("span, td, th");if(1===e.length){var i,a;switch(e[0].nodeName.toLowerCase()){case"th":switch(e[0].className){case"switch":break;case"prev":case"next":this.viewDate["set"+n.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+n.modes[this.viewMode].navFnc].call(this.viewDate)+n.modes[this.viewMode].navStep*("prev"===e[0].className?-1:1)),this.switchClk(),this.fill();break;case"lastYear":case"nextYear":this.viewDate.setFullYear.call(this.viewDate,this.viewDate.getFullYear.call(this.viewDate)+("lastYear"===e[0].className?-1:1)),this.switchClk(),this.fill()}break;case"span":e.is(".month")?(a=e.parent().find("span").index(e),this.viewDate.setMonth(a)):(i=parseInt(e.text(),10)||0,this.viewDate.setFullYear(i)),0!==this.viewMode&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:n.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(e.is(".day")&&!e.is(".disabled")){var o=parseInt(e.text(),10)||1;a=this.viewDate.getMonth(),e.is(".old")?a-=1:e.is(".new")&&(a+=1),i=this.viewDate.getFullYear(),this.date=new Date(i,a,o,0,0,0,0),this.viewDate=new Date(i,a,Math.min(28,o),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:n.modes[this.viewMode].clsName})}}}},select:function(t){var e=t.day,i=t.month,s=t.year;this.date=new Date(s,i,e,0,0,0,0),this.viewDate=new Date(s,i,Math.min(28,e),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:n.modes[this.viewMode].clsName})},setOption:function(t){return s.extend(this.options,t),this.fill(),this.set(),this},getDate:function(){return this.date},mousedown:function(t){!this.options._isMuitPicker&&t.stopPropagation(),t.preventDefault()},showMode:function(t){t&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+n.modes[this.viewMode].clsName).show()}},s.fn.datepicker=function(t,e){return this.each(function(){var i=s(this),o=i.data("datepicker"),n="object"==typeof t&&t;o||i.data("datepicker",o=new a(this,s.extend({},s.fn.datepicker.defaults,n))),"string"==typeof t&&o[t](e)})},s.fn.datepicker.defaults={onRender:function(){return""},adjustUp:!1},s.fn.datepicker.Constructor=a;var o=new Date;o.setHours(0,0,0,0);var n={today:o,modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["周日","周一","周二","周三","周四","周五","周六","周日"],daysShort:["日","一","二","三","四","五","六","日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],yearSuffix:"年"},isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,n.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},toDateWithOutHMS:function(t){return"string"==typeof t&&(t=t.replace(/-/g,"/")),t=isNaN(Date.parse(new Date(t)))?new Date:new Date(t),t.setHours(0,0,0,0),t},parseFormat:function(t){var e=t.match(/[.\/\-\s].*?/),i=t.split(/\W+/);if(!e||!i||0===i.length)throw new Error("Invalid date format.");return{separator:e,parts:i}},parseDate:function(t,e){if(!t)return n.today;var i,s=t.split(e.separator);if(t=new Date,t.setHours(0,0,0,0),s.length===e.parts.length)for(var a=t.getFullYear(),o=t.getDate(),h=t.getMonth(),d=0,r=e.parts.length;r>d;d++)switch(i=parseInt(s[d],10)||1,e.parts[d]){case"dd":case"d":if(o=i,o>31)return n.today;t.setDate(i);break;case"mm":case"m":if(h=i-1,h>11)return n.today;t.setMonth(h);break;case"yy":if(a=2e3+i,1900>a||a>2099)return n.today;t.setFullYear(a);break;case"yyyy":if(a=i,1900>a||a>2099)return n.today;t.setFullYear(a)}return t},formatDate:function(t,e){var i={d:t.getDate(),m:t.getMonth()+1,yy:t.getFullYear().toString().substring(2),yyyy:t.getFullYear()};i.dd=i.d,i.mm=i.m,t=[];for(var s=0,a=e.parts.length;a>s;s++)t.push(i[e.parts[s]]);return t.join(e.separator)},headTemplate:function(t){return"<thead><tr>"+(t._showYearBtn?'<th class="lastYear"><b><i>&lsaquo;&lsaquo;</i></b></th>':"")+'<th class="prev"><b><i>&lsaquo;</i></b></th><th colspan="'+(t._showYearBtn?"3":"5")+'" class="switch"></th><th class="next"><b><i>&rsaquo;</i></b></th>'+(t._showYearBtn?'<th class="nextYear"><b><i>&rsaquo;&rsaquo;</i></b></th>':"")+"</tr></thead>"},contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};n.template=function(t){return'<div class="datepicker dropdown-menu {{dpCls}}"><div class="datepicker-days"><table class=" table-condensed">'+n.headTemplate(t)+'<tbody></tbody></table><div class="datepicker-days-bg"></div></div></div>'},i.exports=n});
/*!edu_modules/form/form*/
;define("edu_modules/form/form",function(t,e,i){var n=t("jquery"),a=(t("edu_modules/edu-datepicker/edu-datepicker"),t("edu_modules/validator/validator")),s=t("@tencent/im-edu-html/edu-html"),r="disabled",l="checked",h="selected",d="selecting",o="f-item--error",u="f-item--success",c="f-item--info",f='<div class="f-msg"><i class="icon-msg"></i><p class="f-msg-text"></p></div>',v=function(t,e,i){i=i||{},this.$clean=!0,this.$valid=!0,this.name=t,this.form=e,this.$form=e.$,this.$=this.$ele();for(var n in i)this[n]=i[n];this._patterns=[],this.init()};v.prototype={init:function(){},$ele:function(){return this.$form.find('[data-name="'+this.name+'"]')},_default:function(t){var e=["input","textarea"].indexOf(this.$[0].nodeName.toLowerCase())>-1;return e?this.$.val(t):this.$.data("value",t),this},get:function(){var t=["input","textarea"].indexOf(this.$[0].nodeName.toLowerCase())>-1,e=t?this.$.val():this.$.data("value");return"undefined"==typeof e?"":e},set:function(t){return this._default(t),this.changed()},val:function(t){return"undefined"==typeof t?this.get():this.set(t)},on:function(t,e){var i=this;return this.$.on(t,function(t){t.preventDefault(),t.stopPropagation(),e.apply(i,arguments)})},onChange:function(t){return this.on("change",t)},changed:function(){return this.$clean=!1,this.valid(),this.$.triggerHandler("change",this.get()),this},valid:function(t){if("undefined"!=typeof t)return this.$valid=t,this;var e,i,n=this.val();if(this._patterns.length>0)for(this.$valid=!0,e=0,i=this._patterns.length;i>e;e++){var s,r=this._patterns[e],l=r.call(this,n);if(l!==!0)return s=l===!1?s:l,this.err(s),this.$valid=!1,this.$valid}if(!this.$.data("pattern"))return this.$valid||this.err(),this.$valid;var h=(this.$.data("pattern")||"").toString().split("|"),d=(this.$.data("msg")||"").toString().split("|");for(e=0,i=h.length;i>e;e++){var o=h[e];if(this.$valid=a.checkOne(this.$,n,o),this.$valid!==!0)return this.err(a.msg?a.msg:d[e]?d[e]:this.$valid),this.$valid=!1,this.$valid}return this.succ(),this.$valid},getWrap:function(){return this.$.closest(".f-item")},getMsgElement:function(t){var e=t.find(".f-msg .f-msg-text");return 0===e.length&&(t.find(".f-field").append(f),e=t.find(".f-msg .f-msg-text")),e},info:function(t){var e=this.getWrap();t=t||this.$.data("tips"),"undefined"!=typeof t&&this.getMsgElement(e).html(t),e.removeClass([o,u].join(" ")).addClass(c)},err:function(t){this.$valid=!1;var e=this.getWrap();t=t||this.$.data("msg"),"undefined"!=typeof t&&this.getMsgElement(e).html(t),e.removeClass([c,u].join(" ")).addClass(o)},succ:function(t){this.$valid=!0;var e=this.getWrap();t=t||this.$.data("succ")||"",this.getMsgElement(e).html(t),e.removeClass([c,o].join(" ")).addClass(u)},clean:function(){this.$valid=!0,this.$clean=!0;var t=this.getWrap();return t.removeClass([c,o,u].join(" ")),this},pattern:function(t){return this._patterns.push(t),this}};var p={},g=function(t){this.$=t||n(document.body),this.fields=[],this.update(!0)};g.prototype={valid:function(){var t=!0;return this._loopFields(function(){this.valid()||(t=!1)}),t},update:function(t){var e=this;return this.fields.forEach(function(t){delete e[t]}),this.fields=[],this._tabIndex=0,this._init(t),this},get:function(t){return this[t].get()},set:function(t,e){return this[t].set(e)},val:function(t,e){if(2===arguments.length)this[t].set(e);else{if(1!==arguments.length){var i={};return this._loopFields(function(t){i[t]=this.get()}),i}if("string"==typeof t)return this[t].get();for(var n in t)this[n].set(t[n])}},valFilter:function(t){var e={};return this._loopFields(function(i){this.$.is(t)&&(e[i]=this.get())}),e},valNoHidden:function(){var t={};return this._loopFields(function(e){this.$.is(":visible")&&(t[e]=this.get())}),t},_init:function(t){this._initFields(t)},_initFields:function(t){var e=this,i=1;for(var a in p){var s=p[a],r=!0,l=this.$.find(s.selector);l.each(function(){e._tabIndex++;var h=n(this),d=h.data("name");d||(d=a+i,i++,h.attr("data-name",d)),r&&t&&s.handler&&s.handler.call(s,e,l,e._tabIndex),r=!1,e._createField(d,s)})}},_createField:function(t,e){return this[t]?this[t]:(this[t]=new v(t,this,n.extend({},e)),this.fields.push(t),this[t])},_loopFields:function(t){for(var e=[],i=0,n=this.fields.length;n>i;i++){var a=this.fields[i];e.push(t.call(this[a],a))}return e}},g.extend=function(t){return p[t.type]=t,this},g.extend({type:"radio",selector:".f-radio",handler:function(t){t.$.on("click",this.selector,function(e){e.preventDefault();var i=n(this),a=i.data("name");i.hasClass(r)||i.hasClass(l)||(i.addClass(l),t.$.find('.f-rc--radio[data-name="'+a+'"]').not(i).removeClass(l),t.$.find('.f-radio[data-name="'+a+'"]').not(i).removeClass(l),t[i.data("name")].changed())})},get:function(){return this.$.filter("."+l).data("value")},set:function(t){return this.$.each(function(){n(this).toggleClass(l,n(this).data("value")==t)}),this.changed()},init:function(){return this}}).extend({type:"checkbox",selector:".f-checkbox",handler:function(t){t.$.on("click",this.selector,function(e){e.preventDefault();var i=n(this);i.hasClass(r)||(i.toggleClass(l),t[i.data("name")].changed())})},get:function(){var t=[];return this.$.filter("."+l).each(function(){t.push(n(this).data("value"))}),t},set:function(t){return t=n.isArray(t)?t:[t],this.$.each(function(){var e=n(this);e.toggleClass(l,t.indexOf(e.data("value"))>-1)}),this.changed()}}).extend({type:"select",selector:".f-select",handler:function(t,e,i){e.each(function(){var t=n(this);"undefined"==typeof t.attr("tabIndex")&&(t.attr("tabIndex",i),i++)}),t.$.on("click",this.selector,function(e){e.preventDefault(),e.stopPropagation();var i=n(this);if(!i.hasClass(r)){if(i.hasClass(d))return i.removeClass(d);n(document.body).one("click",function(){i.hasClass(d)&&i.removeClass(d)}),i.addClass(d).one("blur",function(){i.removeClass(d)}).one("click",".f-value-list li",function(){var e=n(this);i.addClass(h).data("value",e.data("value")).find(".f-value").html(e.html()),t[i.data("name")].changed()})}})},set:function(t){var e='.f-value-list li[data-value="'+t+'"]',i=this.$.find(e),n=i.length>0;return this.$.toggleClass(h,n).data("value",t).find(".f-value").html(n?i.html():""),this.changed()},options:function(t,e,i,n){var a=this.$,r="",l=!1,h=this.val();t=t||[],e=e||"key",i=i||"value";for(var d=0,o=t.length;o>d;d++){var u=t[d]||{};r+='<li data-value="'+s.encode(u[i])+'">',r+=n?u[e]:s.encode(u[e]),r+="</li>",""!==h&&u[i]==this.val()&&(l=!0)}a.find(".f-value-list").html(r),!l&&this.set()&&this.clean()}}).extend({type:"input",selector:".f-text",init:function(){var t=this;this.$.on("keyup paste",function(){t.$.data("noinput")||t.valid()}).blur(function(){t.$.data("noblur")||t.valid()}).focus(function(){t.$.data("nofocus")||t.info()})}}).extend({type:"date",selector:".f-date",handler:function(t){t.$.find(this.selector).each(function(){var e=n(this),i=e.data("begin"),a=e.data("end");e.siblings(".i-calendar").click(function(){e.trigger("click")}),e.on("keyup",function(){t[n(this).data("name")].changed()}),e.datepicker({_set:function(e,i){i.data("datepicker").hide(),t[i.data("name")].changed()},_begin:new Date(i),_end:new Date(a),adjustUp:e.data("adjust")})})},_default:function(t){this.$.val(t).data("datepicker").update()}}).extend({type:"textarea",selector:".f-textarea",init:function(){var t=this;this.$.on("keyup paste",function(){t.$.data("noinput")||t.valid()}).blur(function(){t.$.data("noblur")||t.valid()}).focus(function(){t.$.data("nofocus")||t.info()})}}).extend({type:"popupSelectLines",selector:".f-popup-lines-select",handler:function(t){var e=this;t.$.find(this.selector).on("click",".item-del",function(i){i.preventDefault(),i.stopPropagation();for(var a=n(this),s=t[a.parents(e.selector).data("name")],r=s.$.data("key"),l=(s.$.data("title"),a.data("value")),h=s.val(),d=[],o=0,u=h.length;u>o;o++)h[o][r]!=l&&d.push(h[o]);s.val(d).changed()})},set:function(t){t=t||[];for(var e,i,n="",a=this.$.data("key"),r=this.$.data("title"),l=0,h=t.length;h>l;l++){var d=t[l];a?(e=d[a],i=d[r]):e=i=d,n+='<li class="f-value-item">'+s.encode(i)+' <span class="item-del" data-value="'+e+'">删除</span></li>'}return n+=t.length>0?'<li class="f-value-add">'+this.$.data("more")+"</li>":"",this.$.toggleClass("selected",t.length>0).data("value",t).find(".f-value-list").html(n),this.changed()}}).extend({type:"popupSelect",selector:".f-popup-select",set:function(t){t=t||[];var e=[],i=[],n=this.$.data("key"),a=this.$.data("title");return t.forEach(function(t){t&&(e.push(t[a]),i.push(t[n]))}),this.$.toggleClass("selected",t.length>0).data("value",i).find(".f-value").text(s.decode(e.join(","))),this.changed()},get:function(){return this.$.data("value")||[]}}).extend({type:"video",selector:".f-upload"}),n.fn.form=function(t){var e=[];return this.each(function(){var i=n(this),a=i.data("__form");a||(a=new g(i,t),i.data("__form",a)),e.push(a)}),1===e.length?e[0]:e},i.exports=g});
/*!agency/index/qidian/mod.notice*/
;define("agency/index/qidian/mod.notice",function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){var t=e&&e.page;return"billinfo"==t||-1!=t.indexOf("financial_management")?($("#important_tips").html(""),void(j=!1)):(N=N||b.getInfoSync(),void((N.isPersonal||N.isMaster||N.isAdmind)&&s()))}function a(n,e){q.get_agency_qidian_status({param:{aid:n},succ:function(n){var t=n.result;t&&e(t)},err:function(n){return n&&100012===n.retcode||$.modal.error("拉取企点信息出错，请点击重试"),!0},onCancel:function(){}})}function s(){var n=parseInt(localStorage.getItem("is_hide_qidian_pop")||0,10);a(N.aid,function(e){A=e.apply_for_qidian,D=e.sign_status,Y=e.sign_contract,P=e.grant_num,Q=e.apply_num,T=A&&0===D,z=1===Y&&0!==e.unassigned_course_num,(T||z)&&(n?c():l());var t=1===A&&1===Y;localStorage.setItem("isQidian",t)})}function l(){r(),T&&(M=S.$.find(".form"),M.form(),_())}function r(){S&&S.remove();var n={};n=T?{title:"申请使用腾讯课堂企点客服",body:x({applyNum:Q}),width:800,height:610,scroll:!0,isNo:!1,enableDrag:!1,buttonsAlign:"center",className:"modal--announcement buttons-center im-dialog modal--qidian-apply",onClose:function(){c(),localStorage.setItem("is_hide_qidian_pop",1)}}:{title:"",content:k({grantNum:P}),width:580,isYes:!0,txtYes:"立即分配",isNo:!1,enableDrag:!1,buttonsAlign:"center",className:"modal--assign buttons-center im-dialog",yes:function(){location.href="//ke.qq.com/agency/qidian_assign/index.html"},onClose:function(){c(),localStorage.setItem("is_hide_qidian_pop",1)}},S=$.modal(n),T&&(M=S.$.find(".form"),M.form())}function c(){var n="";n=T?'如需使用企点客服为学员提供咨询服务，请先签署《腾讯课堂企点客服使用协议》并提交账号注册信息，<a class="show_qidian_apply_pop">现在就去>></a>':'您已成功通过腾讯课堂企点客服的服务审核，请分配未关联企点客服的课程，<a class="link-nor" href="//ke.qq.com/agency/qidian_assign/index.html">现在就去>></a>',j||($.event.trigger("important:tips",[n]),$(document).on("click",".show_qidian_apply_pop",function(){localStorage.setItem("is_hide_qidian_pop",0),l(),j=!1}),j=!0)}function d(){$("#important_tips").remove()}function u(){$("#important_tips").hide()}function p(){$("#important_tips").show()}function m(){var n=g();if(n){if(n.length!==Q)return void $.modal.error("请填写完"+Q+"个企点客服帐号信息才能提交");q.agency_sign_qidian_contract({param:{aid:N.aid,aname:N.agency_info.name,apply_infos:y.default(n)},succ:function(n){0===n.retcode&&n.result&&f()},err:function(n){return $.modal.error(10086===n.retcode?"提交的手机号中存在已经被绑定过的手机号，不允许重复绑定，请检查！":"签署协议失败，请点击重试"+n.retcode),!0}})}}function g(){for(var n=M.find(".f-form-line"),e=[],t=$.cookie.uin(),i=0;i<n.length;i++){var o=n[i],a=$(o).find("input[name=account]").val(),s=$(o).find("input[name=phone]").val();""!=a&&""!==s&&e.push({name:a,mobile:s,operator:t+""})}return e}function f(){var n=C.get("agency_info")||{};S.remove(),S=$.modal({title:"申请使用腾讯课堂企点客服",content:w({email:n.result&&n.result.email}),width:800,height:523,scroll:!0,isNo:!1,enableDrag:!1,buttonsAlign:"right",txtYes:"我知道了",className:"modal--announcement buttons-right im-dialog modal--qidian-apply",yes:function(){S.remove(),d(),localStorage.setItem("is_hide_qidian_pop",1)},onClose:function(){d(),localStorage.setItem("is_hide_qidian_pop",1)}})}function _(){var n=$("#proYBtn"),e=$("#proAgree"),t=$("#regProCon"),i=$("#proPre"),o=$("#proSubmit"),a=50,s=$(document),l=$(".wrap-step"),r={},c={};s.on("initstep",function(n,e){e=/[12]/.test(e)?e:1,$(".steps-nav").find("li").removeClass("active").eq(e-1).addClass("active"),$(".triangle").removeClass("step"+(1===e?2:1)).addClass("step"+e);var t=$(".wrap-step-"+e);l.addClass("hide"),t.removeClass("hide")}),t.on("scroll",function(){t.scrollTop()+t.height()+a>=t.prop("scrollHeight")&&(e.removeClass("pro-agree-dis"),t.off("scroll"))}),e.on("click",function(){e.hasClass("pro-agree-dis")||(e.toggleClass("pro-y-agree"),n.toggleClass("dis-btn"))}),n.on("click",function(){n.hasClass("dis-btn")||n.trigger("initstep",[2])}),i.on("click",function(){i.hasClass("dis-btn")||i.trigger("initstep",[1])}),o.on("click",function(){i.hasClass("dis-btn")||m()}),I.init(M.find("[data-pattern]")),I.extend("form_account",function(n,e){return""===n?(I.msg="账户名称不能为空",r[e.selector]&&(r[r[e.selector]]="",r[e.selector]=""),!1):/^[a-z]+$/i.test(n)?n.length>10?(I.msg="账户名称不能超过10个字符",!1):(""===e.selector&&r[n]&&(e.selector=r[n]),r&&r[n]&&r[n]!==e.selector&&r[r[n]]===n?(I.msg="账户名称不允许重复",!1):(r[n]=e.selector,r[e.selector]=n,!0)):(I.msg="账户名称只能允许英文字符",!1)}),I.extend("form_phone",function(n,e){return""===n?(I.msg="手机号码不能为空",c[e.selector]&&(c[c[e.selector]]="",c[e.selector]=""),!1):/^(0|86|17951)?1[0-9]{10}$/.test(n)?(""===e.selector&&c[n]&&(e.selector=c[n]),c&&c[n]&&c[n]!==e.selector&&c[c[n]]===n?(I.msg="手机号码不允许重复",!1):(c[n]=e.selector,c[e.selector]=n,!0)):(I.msg="手机号码格式错误",!1)}),M.on("blur",".f-text",function(){I.all(M.find("[data-pattern]"))?o.removeClass("dis-btn"):o.hasClass("dis-btn")||o.addClass("dis-btn")})}function h(){window.noticeInitFlag=!0,$(document).on("navchange renewQidianCheck",o)}var v=n("babel-runtime/core-js/json/stringify"),y=i(v),b=n("edu_modules/edu-agency/index"),q=n("agency/index/db"),C=n("@tencent/im-cache/cache"),x=n("/agency/index/qidian/tpl/applyDialog.tpl_tpl"),w=n("/agency/index/qidian/tpl/applySucc.tpl_tpl"),k=n("/agency/index/qidian/tpl/assignDialog.tpl_tpl"),I=n("edu_modules/validator/validator"),S=null,N=null;n("edu_modules/form/form");var A=null,D=null,Y=null,P=0,Q=0,j=!1,M=null,T=!1,z=!1;t.exports={init:h,getQidian:a,hideYellowTip:d,hide:u,show:p}});
/*!/agency/index/side/tpl/side.tpl_tpl*/
;define("/agency/index/side/tpl/side.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push(" "),tabTree.forEach(function(s){_$out_.push(' <div class="js-type" data-type="',s.id,'" style="display:none;"> <div class="l-nav-area"> '),s.sub.forEach(function(s){_$out_.push(' <div class="l-nav-block"> '),s.name&&_$out_.push(" <h3> ",s.name," </h3> "),_$out_.push(' <ul class="l-nav"> '),s.sub.forEach(function(s){_$out_.push(' <li class="l-nav-item js-nav-page" data-id="',s.id,'" data-hash="',s.hash,'"> <a href="',s.link,'" auto-test="',s.hash,'" title="',s.name,'">',s.name,"",s.extra,"</a> "),s.show||_$out_.push(' <span class="lock"></span> '),_$out_.push(" </li> ")}),_$out_.push(" </ul> </div> ")}),_$out_.push(" </div> "),12==s.id&&_$out_.push(' <a class="js-link-client link-service" href="/download/pcapp.html#from=teacher" target="_blank"> <i class="icon-font i-download"></i> <span class="download-wording">下载上课客户端</span> <br/> <span class="download-tips">流畅上课不卡顿</span> </a> <a class="js-link-txdocs link-service" href="https://docs.qq.com/?adtag=tencentketang" target="_blank"> <i class="tx-docs-icon"></i> <span class="tx-docs-wording">使用腾讯文档</span> <br/> <span class="download-tips">可以多人协作的在线文档</span> </a> '),_$out_.push(" </div> ")}),_$out_.join("")}}});
/*!/agency/index/side/tpl/root.tpl_tpl*/
;define("/agency/index/side/tpl/root.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return tabTrees.forEach(function(t){_$out_.push(' <a report-tdw="action=exposure&obj1=tab&obj2=',t.id,'&module=operation" class="js-nav nav" data-type="',t.id,'">',t.name,""),t.show||_$out_.push('<span class="lock"></span>'),_$out_.push("</a>")}),_$out_.join("")}}});
/*!/agency/index/side/tpl/nopower.tpl_tpl*/
;define("/agency/index/side/tpl/nopower.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="nopower-pic "></div>'),user.isPersonal?_$out_.push(' <div class="nopower-txt f18">您当前属于“个人入驻机构”的管理员，暂无此功能权限。</div>'):_$out_.push(' <div class="nopower-txt f18">所属角色暂无权限，如有需要请联系机构管理员 “',user.agency_info.owner_nick,"”</div>"),_$out_.join("")}}});
/*!agency/index/side/mod/redpoint*/
;define("agency/index/side/mod/redpoint",function(t,n,e){function a(){u.find(".red-point").show()}function i(){var t=u.data("bill-month");t&&localStorage.setItem("bill-month",t),u.find(".red-point").hide()}function d(){g(function(){"showMonthBill"===c.bom.getHash("tab")&&i()})}function o(){var t=v.getInfoSync();u=c('.js-nav-page[data-hash="showMonthBill"]'),t.aid&&t.isMaster&&f.has_new_list({param:{aid:t.aid},succ:function(t){t.result=t.result||{},t.result.month&&u.data("bill-month",t.result.month);var n=localStorage.getItem("bill-month");t.result.has_new_list&&t.result.month!=n&&a(t.result.month),"showMonthBill"===c.bom.getHash("tab")&&i()}}),d()}function s(t){var n=c('.js-nav[data-type="'+t+'"]'),e=n.find(".red-point");e.length?e.show():n.append('<span class="red-point"></span>')}function r(t){var n=c('.js-nav[data-type="'+t+'"]'),e=n.find(".red-point");e.length&&e.remove()}function h(t){var n=c('.js-type[data-type="'+t+'"]');n.find(".red-point").length?s(n.data("type")):r(n.data("type"))}function l(t){var n=c('.js-nav-page[data-id="'+t+'"]');if(n.length){var e=n.find("a"),a=e.find(".red-point");a.length?a.show():e.append('<span class="red-point"></span>');var i=n.parents(".js-type").data("type");h(i)}}function p(t){var n=c('.js-nav-page[data-id="'+t+'"]');if(n.length){var e=n.find("a"),a=e.find(".red-point");a.length&&a.remove();var i=n.parents(".js-type").data("type");h(i)}}var u,f=t("edu_modules/edu-db/edu-db"),c=t("jquery"),g=t("@tencent/im-hashchange/hashchange"),v=t("edu_modules/edu-agency/index");e.exports={init:o,showRedpointById:l,hideRedpointById:p}});
/*!agency/index/side/mod/ios*/
;define("agency/index/side/mod/ios",function(e,c,n){function i(e){var c=a.get("check_fee_callback");if($.isArray(c))for(;c.length;){var n=c.shift();n&&n(e)}}function d(e){e=e||function(){};var c=o.getInfoSync();t&&t.get_check_fee&&c.aid&&t.get_check_fee({param:{aid:c.aid},succ:function(c){c=c||{};var n=c.result||{};window.CHECKFEE=n,a.set("check_fee",n),1===n.is_fee&&$(".l-nav-item:not([data-hide])").css("display","block"),e(null),i(n)},err:function(c){e(c),i({})}})}var a=e("@tencent/im-cache/cache"),t=e("edu_modules/edu-db/edu-db"),o=(e("edu_modules/modal/modal"),e("edu_modules/edu-agency/index"));n.exports={init:function(){d()}}});
/*!agency/index/side/mod/linkserver*/
;define("agency/index/side/mod/linkserver",function(e,n,i){function o(){var e=$(".link-service"),n=0,i=function(){clearTimeout(n),n=setTimeout(function(){e.isOnScreen&&e.isOnScreen()&&($(window).off("scroll",i),r.tdw({module:"agencymanage",action:"Customer_service_Exposure"}))},100)};e.length&&$(window).on("scroll",i)}var r=e("edu_modules/edu-report/edu-report");e("@tencent/im-jquery.isOnScreen/index"),i.exports={init:o}});
/*!agency/index/side/mod/installRedpoint*/
;define("agency/index/side/mod/installRedpoint",function(n,e,t){function i(){s=$('.js-nav-page[data-hash="showInstallment"]'),a(),d()}function o(){localStorage.setItem("instalment-tab@"+c,!0),s.find(".red-point").hide()}function a(){localStorage.getItem("instalment-tab@"+c)||s.find(".red-point").show()}function d(){h(function(){"showInstallment"===$.bom.getHash("tab")&&o()})}{var s,c,h=(n("edu_modules/edu-db/edu-db"),n("@tencent/im-hashchange/hashchange"));$("#agency-side")}$.cookie&&$.cookie.uin&&(c=$.cookie.uin()),t.exports={init:i}});
/*!agency/index/side/mod/couponRedpoint*/
;define("agency/index/side/mod/couponRedpoint",function(n,o,e){function t(){localStorage.setItem("coupon-tab@"+s,!0),h.find(".red-point").hide()}function i(){d(function(){"showCoupon"===u.bom.getHash("tab")&&t()})}function a(){localStorage.getItem("coupon-tab@"+s)||h.find(".red-point").show()}function c(){h=u('.js-nav-page[data-hash="showCoupon"]'),a(),i()}var h,u=n("jquery"),d=n("@tencent/im-hashchange/hashchange"),s=u.cookie.uin();e.exports={init:c}});
/*!agency/index/side/mod/partnerRedpoint*/
;define("agency/index/side/mod/partnerRedpoint",function(n,i,t){var e=n("@tencent/im-hashchange/hashchange");n("@tencent/im-util.bom/util.bom"),n("edu_modules/util.cookie/util.cookie");var a={},o={},l={TAB:"showPartnerPlan"},c={showRedPoint:function(){a.$link&&a.$link.append('<span class="red-point"></span>')},markAsRead:function(){localStorage&&localStorage.setItem("partner-tab@"+o.uin,!0),a.$li&&a.$li.find(".red-point").hide()},initConfig:function(){$.cookie&&$.cookie.uin&&(o.uin=$.cookie.uin()),o.tab=$.bom.getHash("tab"),localStorage&&(o.flag=localStorage.getItem("partner-tab@"+o.uin))},initElement:function(){a.$li=$('.js-nav-page[data-hash="showPartnerPlan"]'),a.$link=a.$li.find("a")},initEvent:function(){e(function(){$.bom.getHash("tab")===l.TAB&&c.markAsRead()})},main:function(){o.flag||o.tab===l.TAB||c.showRedPoint()}},r={init:function(){c.initConfig(),c.initElement(),c.initEvent(),c.main()}};t.exports=r});
/*!user/info*/
;define("user/info",function(t,e,n){function r(t,e){var n=this,r=t.result||{};e&&(r.industry1=e.industry1,r.industry1_ext=e.industry1_ext);var i=r.industry1;i||(i=r.industry1=r.industry),i&&(l=u(i),g=[i],$.isArray(r.industry1_ext)&&$.each(r.industry1_ext,function(t,e){var n=u(e);n.value&&(p.push(n),!~g.indexOf(e)&&g.push(e),h.push(n.value))})),t._industry1=l,t._industry1_ext=p,t._industry1_all=g,t._industry1_ext_str=h,n._industry1=l,n._industry1_ext=p,n._industry1_all=g,n._industry1_ext_str=h}function u(t){return{key:t,value:f[t]}}function i(t){return t&&t.role_type?0!==(21&t.role_type)||0!==(48&t.role_type):!1}function s(t){var e=this;if(_&&"function"==typeof t)return t(_);if(a.push(t),!y){y=!0;var n=o.getInfoSync(),r=n.isPersonal?"get_p_agency_info":"get_agency_info";d[r]({param:{aid:n.aid},succ:function(t){for(t=t||{},t.role_type=n.role_type,t.result=t.result||{},e.rebuildIndustryData(t),c.set("agency_info",t),_=t,y=!1;a.length;){var r=a.shift();"function"==typeof r&&r(_)}},err:function(){}})}}var _,d=t("edu_modules/edu-db/edu-db"),a=[],y=!1,o=t("edu_modules/edu-agency/index"),c=t("@tencent/im-cache/cache"),f={list:[1001,1002,1003,1004,1005,1006,1007],1001:"IT·互联网",1002:"设计·创作",1003:"语言·留学",1004:"职业·考证",1005:"升学·考研",1006:"兴趣·生活",1007:"电商营销"};c.set("course_main_tag",f);var l={},p=[],g=[],h=[];n.exports={getAgencyInfo:s,isTeacherOrAdmin:i,course_main_tag:f,rebuildIndustryData:r,_industry1:l,_industry1_all:g}});
/*!agency/index/side/mod/industry*/
;define("agency/index/side/mod/industry",function(n,e,t){function i(){$(document).on("set_industry",function(){s.getInfoSync().isPersonal||$.modal.confirm('<p class="title">尊敬的机构管理者：</p><p class="cont">您好，为了更好的进行类目资源的分配，请先确认贵机构的主营类目。主营类目将与可发布课程强关联。</p>',{title:"通知",confirm:!0,submit:"去设置",globalClass:"dlg-industry-confirm",extraClass:"industry-confirm"}).yes(function(){location.href=d}).onClose(function(){"/agency/publish/index.html"===location.pathname&&(location.href=d)})})}function o(){i(),setTimeout(function(){c.getAgencyInfo&&c.getAgencyInfo(function(n){n.result.industry1||-1!==location.href.indexOf(d)||$(document).trigger("set_industry")})},0)}var c=n("user/info"),s=(n("@tencent/im-cache/cache"),n("edu_modules/modal/modal"),n("edu_modules/edu-agency/index")),d="/agency/index/index.html#tab=showAgencyInfo&edit=1";t.exports={init:o}});
/*!agency/index/side/mod.side*/
;define("agency/index/side/mod.side",function(e,n,i){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(e&&e.length>0)for(var i=0;i<e.length;i++){var t=e[i];t.redFlag&&t.show&&n.push(t.id),a(t.sub,n)}}function d(e){j('.js-nav-page[data-id="'+e+'"]').find("a").find(".red-point").length&&(U.hideRedpointById(e),R.tdw({module:"red_dot",action:"click",ver2:x.aid}),B.report_tab_click({param:{tabid:e},succ:function(){},err:function(){}}))}function o(e){b=e,j(".js-nav").removeClass("active").filter("[data-type="+b+"]").addClass("active"),j(".js-type").hide().filter("[data-type="+b+"]").show();var n=O.getTabById(_)||{},i=O.getRootTabByTabId(_)||{};if(i.id!=b){var t=A.tabToNav[x.isPersonal?"person":"agency"][b];location.href=O.checkPermissionByHash(t)?"/agency/index/index.html#tab="+t:"/agency/index/index.html#tab="+O.getFirstTabByRootId(b).hash}d(n.id)}function s(){var e=D.scrollTop();e>T&&j("html,body").animate({scrollTop:T},1e3)}function c(){j(document).on("click",".imanager-guide a",function(e){e.preventDefault(),R.tdw({module:"agencymanage",action:"Org_old_ent_clk",ver2:x.aid}),setTimeout(function(){location.href=e.target.href},400)})}function r(){return j.bom.getHash("tab")}function l(e){return e.filter(function(e){return e.id<E})}function u(){H.html(F({tabTree:l(O.getTabTrees())})),1===parseInt(localStorage.getItem("pulish_test"),10)&&j(".l-nav-area").append('<li class="l-nav-item js-nav-page l-nav-selected" data-id="121010" data-hash="course_admin#admin" style="display: block;"> <a href="/agency/index/index.html#tab=course_admin#admin" auto-test="course_admin#admin" title="课程管理">课程管理</a>  </li><li class="l-nav-item js-nav-page" data-id="121112" data-hash="course_admin#plan" style="display: block;"> <a href="/agency/index/index.html#tab=course_admin#plan" auto-test="course_admin#plan" title="课程安排">课程安排</a>  </li>')}function g(){var e=l(O.getTabTrees());j(".js-agency-switcher").html(M({tabTrees:e}));var n=O.getTabByHash(r())||{};if(n&&n.id){_=n.id;var i=O.getRootTabByTabId(_);b=i.id,o(b)}else o(O.getFirstRootTabWithPermission().id);y(_);var t=[];a(e,t);for(var d=0;d<t.length;d++)U.showRedpointById(t[d])}function h(){P(function(){var e=O.getTabByHash(r())||{};if(e&&e.id){var n=e.id;y(n);var i=O.getRootTabByTabId(n);b=i.id,o(b)}else o(O.getFirstRootTabWithPermission().id)}),j(".js-agency-switcher").on("click",".js-nav",function(){o(j(this).data("type"))}),j(".js-link-client").on("click",function(){R.tdw({module:"course_manage_adleft",action:"click",obj1:"client_downlaod",ver2:x.aid,ver3:W+";"+x.role_type,uin:W})}),j(".js-link-txdocs").on("click",function(){R.tdw({module:"course_manage_adleft",action:"click",obj1:"tencentdocs",ver2:x.aid,ver3:W+";"+x.role_type,uin:W})})}function m(){return!!~[6,7].indexOf(x.agency_info.agency_step_flag)}function f(){return L.isUidChanged()||!L.isLogin()?(C.show({succ:function(){location.reload()},close:function(){location.reload()}}),!1):!0}function p(){var e=j("#nopower");0===e.length?(S.append('<div id="nopower"></div>'),e=j("#nopower"),e.html(q({user:x}))):e.show(),j("."+N).hide()}function y(n){_=n;var i=O.getTabById(_);if(i||(_=m()?111012:101310,i=O.getTabById(_)),i&&i.jsmod){H.find(".js-cate").removeClass("l-nav-cur");var t=H.find(".js-nav-page").removeClass("l-nav-selected").filter("[data-id="+n+"]").addClass("l-nav-selected");if(t.parent().parent().find(".js-cate").addClass("l-nav-cur"),!O.checkPermissionById(i.id))return p();j("#nopower").hide(),H.trigger("Side.link.selected",[i.hash+"_link"]);var a=function(e){if(f()){var n=i.hash;"studentSearch"===n&&(n="dealSearch");var t=j("#"+n);S.find("."+N).hide(),t.length>0?(t.show(),e&&e.open&&e.open(I)):/agencyReact/.test(i.jsmod)?(S.append('<div id="js-react-wrap" class="'+n+" "+N+'"></div>'),e&&e.init&&e.init(n)):(S.append('<div id="'+n+'" class="'+n+" "+N+'"></div>'),e&&e.init&&e.init(I)),s();var a=O.getRootTabByTabId(_)||{};a.id!=b&&o(a.id)}},c=w.default(i.jsmod);"string"===c?e.async([i.jsmod],a):"function"===c&&i.jsmod(a),j.event.trigger("navchange",{page:r()}),d(n)}}function v(){location.href="/index.html"}var b,_,x,T,k=e("babel-runtime/helpers/typeof"),w=t(k),j=e("jquery"),I=e("@tencent/im-cache/cache"),B=e("edu_modules/edu-db/edu-db"),R=e("edu_modules/edu-report/edu-report"),P=e("@tencent/im-hashchange/hashchange"),C=(e("agency/index/qidian/mod.notice"),e("edu_modules/edu-login/edu-login")),H=j("#agency-side"),S=j("#agency_cont"),F=e("/agency/index/side/tpl/side.tpl_tpl"),M=e("/agency/index/side/tpl/root.tpl_tpl"),q=e("/agency/index/side/tpl/nopower.tpl_tpl"),L=e("edu_modules/edu-agency/index"),N="agency-manage-item",O=e("edu_modules/edu-auth/index"),U=e("agency/index/side/mod/redpoint"),W=j.cookie.uin(),A={tabToNav:{agency:{12:"course_admin#admin",11:"showAgencyInfo",14:"orders",13:"homework"},person:{12:"course_admin#admin",11:"personInfo",14:"orders",13:"homework"}}},D=j(window);H.length&&(T=H.offset().top),B.extend({report_tab_click:B.httpMethod({url:"/cgi-bin/tb/manager/report_tab_click",type:"GET"})});var E=18;i.exports={init:function(n,i){L.getInfo().then(function(n){if(x=n,!x.isPlatRole)return v();if(c(),e("agency/index/side/mod/ios").init(),"PUBLISH"===i){if(!O.checkPermissionByHash("course_admin#admin"))return v()}else u(),g(),h(i),e("agency/index/side/mod/linkserver").init(),x.aid&&1===x.isMaster&&e("agency/index/side/mod/redpoint").init(),x.aid&&(e("agency/index/side/mod/installRedpoint").init(),e("agency/index/side/mod/couponRedpoint").init(),e("agency/index/side/mod/partnerRedpoint").init());e("agency/index/side/mod/industry").init()})}}});
/*!/agency/publish/template/index.tpl_tpl*/
;define("/agency/publish/template/index.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="publish-main"> <header class="publish-header hide"> <span class="btn-back js-go-back"></span> </header> <nav class="breadcrumb inner-center"></nav> <div id="publish_box" class="publish-box" > <div class="mod-steps hide"> <ul class="steps-nav"> <li class="active"><i class="icon-font i-right"></i><span class="steps-num">1</span>课程概况</li> <li class="step-detail"><i class="icon-font i-right"></i><span class="steps-num">2</span>课程详情</li> <li class="last step-plan"><i class="icon-font i-right"></i><span class="steps-num">3</span>教学内容</li> </ul> </div> <div id="publish_steps" class="publish-steps"></div> </div></div>'),_$out_.join("")}}});
/*!agency/publish/step1/limit*/
;define("agency/publish/step1/limit",function(e){var i=e("edu_modules/edu-db/edu-db"),t=e("jquery"),m=e("@tencent/im-cache/cache"),r=e("agency/publish/common/_pd"),n=t.Callbacks("memory"),a=e("edu_modules/edu-agency/index"),c=!1,o=function(e,o){if(n.add(e||t.noop),!c){c=!0;var l={aid:a.getInfoSync().aid};""!==r.cmd&&"c"!==r.cmd&&r.result&&2===r.result.payid&&(l.cid=r.cid),i.get_agency_course_limit({param:l,succ:function(e){e=e||{},m.set("course_limit",e.result||{}),_(o),n.fire()},err:function(){o&&o()}})}},l=function(){r=r||{};var e=m.get("course_limit")||{};switch(r.cmd){case"":case"c":if(0===e.max_week_course)return t._alert('贵机构上周违规行为扣分已达上限，本周发布新课程将受限，申诉请联系<a course_limitass="nor-link" href="mailto:800082734@b.qq.com">800082734@b.qq.com</a>',function(){location.href="/agency/index/index.html"});if(e.published_course_num>=e.max_week_course)return t._alert("贵机构每周新增的课程数量为"+e.max_week_course+'门，已达上限，特殊申请请邮件<a course_limitass="nor-link" href="mailto:800082734@b.qq.com">800082734@b.qq.com</a>。',function(){location.href="/agency/index/index.html"});break;case"p":if(0===e.add_term_limit)return;if(0===e.max_add_term)return t._alert('贵机构上周违规行为扣分已达上限，本周新增班级将受限，申诉请联系<a course_limitass="nor-link" href="mailto:800082734@b.qq.com">800082734@b.qq.com</a>',function(){location.href="/agency/index/index.html"});if(e.added_term>=e.max_add_term)return t._alert("贵机构每周新增的班级数量为"+e.max_add_term+'个，已达上限，特殊申请请邮件<a course_limitass="nor-link" href="mailto:800082734@b.qq.com">800082734@b.qq.com</a>。',function(){location.href="/agency/index/index.html"})}},_=function(e){r=r||{};for(var i=m.get("course_limit").course_limit||{},t={},n=0,a=i.term_limit?i.term_limit.length:0;a>n;n++)t[i.term_limit[n].term_id]=i.term_limit[n];t[1]={allow_modify_num:i.allow_modify_num||0,last_modify_time:i.last_modify_time||0},m.set("term_price_limit",t||{}),e&&e()};return{init:o,tips:l}});
/*!/agency/publish/template/breadcrumb.tpl_tpl*/
;define("/agency/publish/template/breadcrumb.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<a class="breadcrumb-item" href="'),_$out_.push(opt&&-1===["course","update"].indexOf(opt.return_type)?'//ke.qq.com/agency/index/index.html#tab=course_admin#plan">返回教学安排':'//ke.qq.com/agency/index/index.html#tab=course_admin#admin">返回课程管理'),_$out_.push('</a><i class="icon-font i-v-right"></i><a class="breadcrumb-item" target="_blank" href="/course/',it.cid,'">',it.name,"</a>"),_$out_.join("")}}});
/*!agency/publish/step1/step1*/
;define("agency/publish/step1/step1",function(e){var t=e("edu_modules/edu-db/edu-db"),r=e("jquery"),n=e("agency/publish/step1/limit"),c=e("/agency/publish/template/breadcrumb.tpl_tpl"),u=e("edu_modules/edu-agency/index"),a=e("agency/publish/common/_pd"),i=function(){return!0},d=function(e){document.title="腾讯课堂-"+e},o=function(){var e="发布新课程";switch(a.cmd){case"b":r(".breadcrumb").html(c(a.result,{return_type:"course"})),e="修改课程";break;case"p":r(".breadcrumb").html(c(a.result,{return_type:"plan"})),e="安排课程";break;case"n":r(".breadcrumb").html(c(a.result,{return_type:"course"})),e="新建期次";break;case"m":r(".breadcrumb").html(c(a.result,{return_type:"update"})),e="目录升级";break;default:e="发布新课程"}return e},s=function(){a=a||{};var e=a.cmd=r.bom.query("cmd")||"b",c="c"===e;if(a.isTupAgency=u.getInfoSync().is_tup_agency,a.cid){var i={course_id:a.cid,aid:u.getInfoSync().aid,isCopy:c?1:0},s=r.bom.query("term_id");s&&(i.tid=s),t.get_course_info({param:i,succ:function(e){var t=e&&e.result||{},u=2;c&&(t.category_label_state=u),a.result=t;var i=r.isArray(t.terms)?t.terms:[],s="p"===a.cmd||"n"===a.cmd||"m"===a.cmd?4:r.bom.query("step")||2;return n.init(n.tips,function(){a.initStep(s)}),r.each(i,function(e,t){var r=(t||{}).t_info_map||{};for(var n in r){var c=r[n],u=c.id,i=c.name;a.saveTeacher(u,i,c)}}),1===t.black_flag?r._alert("本课程因违规已被拉黑，暂不支持修改或复制。请至“机构管理-违规记录”查看详情或进行申诉。",function(){location.href="/agency/index/index.html"}):(d(o()),void r(".publish-step2 .btn-prev-step").hide())},err:function(e){e=e||{};var t="服务器繁忙，请稍后再试("+e.retcode+")";return 101404===e.retcode&&(t="该课程已删除，不能编辑"),110405===e.retcode?(r._alert("没有管理权限，请重新刷新页面",function(){location.reload()}),!0):(r._alert(t,function(){location.href="/agency/index/index.html"}),!0)}})}else a.cmd="",a.initStep(2),r("body").addClass("publish-course--new")};return{init:s,next:i}});
/*!@tencent/im-jquery.dropdown/jquery.dropdown*/
;define("@tencent/im-jquery.dropdown/jquery.dropdown",function(e){function t(e){return e.hasClass("diy-select-checkbox")}function i(e){e.each(function(){var e=o(this);if(e.hasClass("diy-select-on")){e.removeClass("diy-select-on"),e.find(".diy-optgroud").hide(),e.find(".diy-option-save").hide();var t=e.data("pattern");t&&e.trigger("change:"+t)}})}function a(e,i,a){if(t(e)){var s=[[],[]],d=e.find(".diy-option-all");return e.find(".opt-checked").not(".diy-option-all").each(function(){var e=o(this);s[0].push(e.data("value")),s[1].push(e.find("a,span").eq(0).text())}),[s[0],d.hasClass("opt-checked")?d.find("a,span").eq(0).text():s[1].join("，")]}return[i.data("value"),i.find("a,span").eq(0)[a]()]}var o=e("jquery"),s=!1;o(document).on("keydown",function(e){13===e.keyCode&&(s=!0)}).on("click",function(){i(o(".diy-select-area"))}).on("click",".diy-select, .diy-select-toggle",function(e){e.stopPropagation(),e.preventDefault();var a=o(this);if(!a.attr("disabled")){var s=a.closest(".diy-select-area");if(!s.attr("disabled")){var d=s.data("pattern");i(o(".diy-select-on").not(s));var n,l=s.find(".diy-optgroud"),c=s.find(".diy-select");if(l.length>0){if(s.hasClass("diy-select-on"))return i(s);s.addClass("diy-select-on"),n=c.data("select"),n&&s.trigger("showopt:"+n),l.show();var r=0,p=l.find("li");p.each(function(){"none"!==o(this).css("display")&&r++});var h=o(window),f=(h.height(),s.data("position")),g={};if("fixed"===f){var v=c.offset();g={position:"fixed",top:c.height()+v.top-h.scrollTop(),left:v.left}}var y=(l.offset().top-h.scrollTop()+39,l.height()),u=100;y=u>y?u:y;var C=parseInt((y-9)/p.eq(0).height()),x=l.data("maxrows")||10;C>x?C=x:1>C&&(C=1);var k=p.eq(0).height();l.css(r>C?o.extend({maxHeight:C*k+9,height:"auto",overflowY:"auto"},g):o.extend({maxHeight:r*(k+1),height:r*(k+1)-1,overflowY:"hidden"},g)),!!window.ActiveXObject&&!window.XMLHttpRequest&&r>C&&l.css({height:C*p.eq(0).height()+9,overflowY:"auto"}),p.eq(-1).css("borderBottom",0),t(s)&&s.find(".diy-option-save").css("top",l.height()+39).show(),o(document).trigger("open:"+d)}else n=a.data("select"),n&&a.trigger("nooption:"+n)}}}).on("click",".diy-select-ipt, .diy-optgroud .diy-option a",function(e){e.preventDefault()}).on("click init",".diy-optgroud .diy-option",function(e){e.stopPropagation(),e.preventDefault();var i=o(this),d=i.parents(".diy-select-area"),n=d.find(".diy-optgroud"),l=d.find(".diy-select"),c=d.find(".diy-select-ipt"),r=d.find(".text"),p=c.add(r).eq(0),h=t(d);h?(i.toggleClass("opt-checked"),i.hasClass("diy-option-all")?i.hasClass("opt-checked")?i.siblings("li").addClass("opt-checked"):i.siblings("li").removeClass("opt-checked"):(i.hasClass("opt-checked")||d.find(".diy-option-all").removeClass("opt-checked"),d.find(".opt-checked").not(".diy-option-all").length===d.find(".diy-option").not(".diy-option-all").length&&d.find(".diy-option-all").addClass("opt-checked"))):(d.removeClass("diy-select-on"),i.addClass("selected").siblings("li").removeClass("selected"),n.hide(),d.find(".diy-option-save").hide());var f=!1,g="",v="",y="",u="",C=[],x=c.length>0;if(p.length>0){var k=r.data("set");k||(k="text"),g=x?p.val():r.text(),v=p.data("value"),C=a(d,i,k),u=C[0],y=C[1],f=u!==v,x?c.data("value",u).val(y):(h?0===u.length?(y=r.data("tips"),r.addClass("text-tip")):r.removeClass("text-tip"):i.hasClass("diy-option-tips")?r.addClass("text-tip"):r.removeClass("text-tip"),r.data("value",u)[k](y))}else y=i.text(),f=y!=l.text(),l.html(y+"<span><b></b></span>");"click"===e.type&&s&&l.focus(),s=!1;var w=l.data("select");w&&l.trigger("change:"+w,[y,u,g,v,e.type])})});
/*!edu_modules/jquery.picker/jquery.picker*/
;define("edu_modules/jquery.picker/jquery.picker",function(e){var t=e("jquery"),i=1e5,a=[];a.push('<div class="mod-picker mod-picker_qq {{pickerCls}}" id={{id}}>'),a.push('<div class="mod-picker__hd">'),a.push('<h2 class="mod-picker__hd-title">选择{{title}}</h2>'),a.push('<a auto-test="picker-atx-{{id}}" href="javascript:;" class="mod-picker__close" title="关闭">×</a>'),a.push("</div>"),a.push('<div class="mod-picker__bd">'),a.push('<div class="mod-picker__data-options">'),a.push('<h3 class="mod-picker__list-title">选择{{title1}}：</h3>'),a.push('<div class="mod-picker__cont">'),a.push('<input auto-test="picker-ati-{{id}}" type="text" placeholder="输入关键字或拼音进行筛选" class="mod-picker__input" />'),a.push('<ul class="mod-picker__options-ul"></ul>'),a.push("</div>"),a.push("</div>"),a.push('<div class="mod-picker__action-btns">'),a.push('<a auto-test="picker-ata-{{id}}" href="javascript:;" class="btn-add btn-weak disabled">添加</a>'),a.push('<a auto-test="picker-atd-{{id}}" href="javascript:;" class="btn-del btn-weak disabled">删除</a>'),a.push('<span class="mod-picker__tips">支持选择<i class="mod-picker__max"></i>{{unit}}{{title}}</span>'),a.push('<span class="mod-picker__warning">{{warning}}</span>'),a.push("</div>"),a.push('<div class="mod-picker__data-selected">'),a.push('<h3 class="mod-picker__list-title">已选择{{title2}}：</h3>'),a.push('<div class="mod-picker__cont">'),a.push('<ul class="mod-picker__selected-ul"></ul>'),a.push("</div>"),a.push("</div>"),a.push("</div>"),a.push('<div class="mod-picker__ft">'),a.push('<span class="picker-help"></span>'),a.push('<a auto-test="picker-ats-{{id}}" href="javascript:;" class="btn-default btn-save" title="确定">确定</a>'),a.push("</div>"),a.push("</div>"),a=a.join("");var s=function(e,t){var i,a,s,n,d,l;return d=0,l=function(){d=new Date,s=null,n=e.apply(i,a)},function(){var c=new Date,o=t-(c-d);return i=this,a=arguments,0>=o?(clearTimeout(s),s=null,d=c,n=e.apply(i,a)):s||(s=setTimeout(l,o)),n}},n=function(e){var t=e[0];t.onselectstart=t.ondrag=function(){return!1}},d=function(e,t,i){return'<li auto-test="picker-ato-'+i+'" class="'+(t>100?"mod-picker__options-item-hide ":"")+"opt-"+e.key+" "+(e.cls||"")+'" data-key="'+e.key+'" title="'+e.value+'" data-value="'+e.value+'">'+e.view+"</li>"},l=function(e,t,i){for(var a=[],s=0,n=e.length;n>s;s++){var l=e[s],c=l.child;if(c){if(l.cls="mod-picker__with-sub",a.push(d(l,a.length,i)),t.isOpenChild)for(var o="opt-parent-"+l.key+" opt-hidden",r=c.length,p=0;r>p;)l=c[p],l.cls="mod-picker__sub-li "+o,a.push(d(l,a.length,i)),p++}else a.push(d(l,a.length,i))}return a.join("")},c=function(e,t){for(var i=[],a=0,s=e.length;s>a;a++)e[a]!==t&&i.push(e[a]);return i};t.fn.picker=function(e){if(!t(this).data("__cache__"))return e=t.extend({unit:"个",mode:"auto",isOpenChild:!1,getData:function(){return[]},onOpen:function(){},onSave:function(){},onClose:function(){},autoSaveByOne:!0,lazytime:300},e),this.each(function(){var d=t(this),o=("picker_"+ +new Date+Math.random()).replace(/\W/g,"");d.data("id",o),t("body").append(a.replace(/{{title1}}/gi,e.title1||"{{title}}").replace(/{{title2}}/gi,e.title2||"{{title}}").replace(/{{title}}/gi,e.title||"").replace(/{{unit}}/gi,e.unit).replace(/{{warning}}/gi,e.warning||"").replace(/{{id}}/gi,o).replace(/{{pickerCls}}/gi,e.pickerCls||""));var r=t("#"+o);d.data("picker-box",r);var p=e.getData(),u=[];r.find(".mod-picker__options-ul").html(l(p,e,o)),n(r);var h=d.hasClass("diy-picker-toggle")?d:d.parent().find(".diy-picker-toggle");h=h.length?h:d,h.click(function(a){a.preventDefault(),t(".modal-bg").length||t(document.body).prepend('<div class="modal-bg hide"></div>'),t(".modal-bg").removeClass("hide").insertBefore(r).show(),k()<i?(r.find(".mod-picker__max").text(k()),r.find(".mod-picker__tips").show()):r.find(".mod-picker__tips").hide(),r.show(),u=(d.data("value")||[]).slice(0);var s=r.find(".mod-picker__options-ul"),n=r.find(".mod-picker__selected-ul");s.find("li").removeClass("selected"),n.empty();for(var l=0,c=u.length;c>l;l++){var o=s.find(".opt-"+u[l]).addClass("selected");n.append(o.clone().removeClass("selected"))}e.onOpen(r,u.slice(0)),setTimeout(function(){r.addClass("mod-picker__options-item-optimize")},0),t(document).on("keydown",y)});var _=r.find("input"),f=r.find(".btn-add"),m=r.find(".btn-del"),v=function(e){p=e};_.on("keyup paste",s(function(){var e,t,i=_.val().replace(/^\s+|\s+$/g,"").toLowerCase(),a=[];if(i.length>0)for(e=0,t=p.length;t>e;e++)-1===p[e].search.indexOf(i)&&a.push(p[e]);for(r.find(".mod-picker__data-options .not-match").removeClass("not-match"),e=0,t=a.length;t>e;e++)r.find(".opt-"+a[e].key).addClass("not-match")},e.lazytime));var k=function(){var e=parseInt(d.data("max"),10)||5;return 0>=e&&(e=i),e},g=function(){var e=parseInt(d.data("min"),10)||-1;return e},b=function(){var e=r.find(".mod-picker__data-options li.selected").length,t=g(),i=r.find(".mod-picker__ft .btn-save");e>=t?i.removeClass("disabled"):i.addClass("disabled")},C=function(t){var i=k(),a=t.data("key");return 1===i&&(u=[],t.siblings("li").removeClass("selecting selected"),r.find(".mod-picker__selected-ul").empty()),u.length<i&&(t.removeClass("selecting").addClass("selected"),u.push(a),r.find(".mod-picker__selected-ul").append(t.clone().removeClass("selected")),1===i&&e.autoSaveByOne)?r.find(".mod-picker__ft .btn-save").trigger("click"):void 0},y=function(e){switch(e.which){case 13:r.find(".mod-picker__ft .btn-save").click();break;case 27:r.find(".mod-picker__close").click()}};r.on("click",".mod-picker__data-options li",function(i){i.preventDefault();var a=t(this);if("single"===e.mode&&a.hasClass("mod-picker__with-sub"))return a.toggleClass("mod-picker__sub-open"),a.nextAll(".opt-parent-"+a.data("key")).toggleClass("opt-hidden");var s=k();1===s&&r.find(".mod-picker__data-options li.selecting").removeClass("selecting"),a.toggleClass("selecting");var n=r.find(".mod-picker__data-options li.selecting").length,d=u.length,l=s>1?n+d:n;n>0&&s>=l?f.removeClass("disabled"):f.addClass("disabled")}),r.on("dblclick",".mod-picker__data-options li",function(i){i.preventDefault();var a=t(this);if("single"===e.mode&&a.hasClass("mod-picker__with-sub"))return a.toggleClass("mod-picker__sub-open"),a.nextAll(".opt-parent-"+a.data("key")).toggleClass("opt-hidden");var s=k(),n=r.find(".mod-picker__data-options li.selected").length;(1===s||s>n)&&C(a),b()}),f.click(function(e){if(e.preventDefault(),!f.hasClass("disabled")){var i=r.find(".mod-picker__data-options li.selecting");i.removeClass("selecting").addClass("selected").each(function(){C(t(this))}),f.addClass("disabled"),b()}});var w=function(e){var i=e.data("key");u=c(u,i),e.remove(),t(".opt-"+i).removeClass("selected")};r.on("click",".mod-picker__data-selected li",function(e){e.preventDefault();var i=t(this);i.hasClass("disabled")||(i.toggleClass("selecting"),r.find(".mod-picker__data-selected li.selecting").length>0?m.removeClass("disabled"):m.addClass("disabled"))}),r.on("dblclick",".mod-picker__data-selected li",function(e){e.preventDefault();var i=t(this);i.hasClass("disabled")||(w(i),b())}),m.click(function(e){if(e.preventDefault(),!m.hasClass("disabled")){var i=r.find(".mod-picker__data-selected li.selecting");i.each(function(){w(t(this))}),m.addClass("disabled"),b()}});var D=function(){r.hide(),t(".modal-bg").addClass("hide").hide(),e.onClose(r),t(document).off("keydown",y)};r.find(".mod-picker__close").click(function(e){e.preventDefault(),D()}),r.find(".mod-picker__ft .btn-save").click(function(t){t.preventDefault(),D(),d.data("value",u),e.onSave&&e.onSave(d,u)}),d.data("__cache__",{update:function(t){r.find(".mod-picker__options-ul");r.find(".mod-picker__options-ul").html(l(t.data,e,o)),v(t.data)},setSelected:function(e){d.data("value",e)}})});if("string"==typeof e){var d=arguments.length<=1?[]:[].slice.apply(arguments),o=t(this).data("__cache__");o[e].apply(o,d.slice(1))}}});
/*!edu_modules/edu-picker/edu-picker*/
;define("edu_modules/edu-picker/edu-picker",function(t){var e=t("jquery"),i=(t("edu_modules/modal/modal"),1e5),s=function(t){function e(){}return e.prototype=t.prototype,new e},l=function(t,e){var i,s,l,n,o=function(){i=null,n=t.apply(s,l)};return function(){i&&clearTimeout(i),s=this,l=arguments,i=setTimeout(o,e)}},n='<div class="mod-picker__data-options">';n+='       <h3 class="mod-picker__list-title">选择{$name}：<span class="js-picker-leftnum"></span></h3>',n+='       <div class="mod-picker__cont">',n+='           <input type="text" placeholder="输入关键字或拼音进行筛选" class="mod-picker__input" />',n+='           <ul class="mod-picker__options-ul js-options" onselectstart="return false;">',n+='              <li class="select-li-loading js-select-loading">数据加载中…</li>',n+="           </ul>",n+="       </div>",n+="   </div>",n+='   <div class="mod-picker__action-btns">',n+='       <a href="javascript:;" class="js-picker-add btn-add btn-weak disabled">添加</a>',n+='       <a href="javascript:;" class="js-picker-del btn-del btn-weak disabled">删除</a>',n+='       <span class="mod-picker__tips">支持选择<i class="mod-picker__max"></i>{$max}{$unit}{$name}</span>',n+="   </div>",n+='   <div class="mod-picker__data-selected">',n+='       <h3 class="mod-picker__list-title">已选择{$name}：<span class="js-picker-rightnum"></span></h3>',n+='       <div class="mod-picker__cont">',n+='           <ul class="mod-picker__selected-ul js-selected" onselectstart="return false;"></ul>',n+="       </div>",n+="   </div>";var o=0,d=function(){this._id=++o,this.eventName="custom_ob_"+this._id};d.prototype={eventName:null,watch:function(t,i){return i=i||{},e(document.body).on(this.eventName,function(e,s){t.apply(i,s.data)}),this},fire:function(){return e(document.body).trigger(this.eventName,{data:arguments}),this}};var a=function(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&e++;return e},c=function(t){this.data={},e.extend(this,t),this.leftData={},this.rightData={},this.leftSelected={},this.rightSelected={},this.obDataAdd=new d,this.obLeftAdd=new d,this.obLeftDel=new d,this.obLeftRemove=new d,this.obRightAdd=new d,this.obRightDel=new d,this.obSelectedAdd=new d,this.obSelectedDel=new d};c.prototype={model:"auto",keyField:"id",max:4,min:0,data:null,obDataAdd:null,leftData:null,rightData:null,leftSelected:null,rightSelected:null,obData:null,obLeftAdd:null,obLeftDel:null,obLeftRemove:null,obRightAdd:null,obRightDel:null,obSelectedAdd:null,obSelectedDel:null,insertData:function(t){t=t||[];for(var e=t.length,i=[],s=0;e>s;s++){var l=t[s],n=l[this.keyField];this.data[n]||(this.data[n]=l,this.leftData[n]=l,this.obDataAdd.fire(l),i.push(l))}return i},insertSelected:function(t){t=t||[],this.insertData(t);for(var e=t.length,i=0;e>i;i++)this.selectedAdd(t[i][this.keyField])},idsToArray:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.data[t[i]]);return e},leftToggle:function(t){this.leftSelected[t]?this.leftDel(t):this.leftAdd(t)},rightToggle:function(t){this.rightSelected[t]?this.rightDel(t):this.rightAdd(t)},leftAdd:function(t){var e=a(this.leftSelected),i=a(this.rightData);return"single"===this.mode&&e>0?!1:e+i>=this.max?!1:(this.leftSelected[t]=this.data[t],this.obLeftAdd.fire(t),this)},leftDel:function(t){return delete this.leftSelected[t],this.obLeftDel.fire(t),this},leftToRight:function(t){return a(this.rightData)>=this.max?!1:(delete this.leftData[t],this.obLeftDel.fire(t),this.rightData[t]=this.data[t],void this.obSelectedAdd.fire(t))},rightToLeft:function(t){this.selectedDel(t)},rightAdd:function(t){return this.rightSelected[t]=this.data[t],this.obRightAdd.fire(t),this},rightDel:function(t){return delete this.rightSelected[t],this.obRightDel.fire(t),this},selectedAdd:function(t){this.leftData[t]&&(this.rightData[t]=this.leftData[t],delete this.leftData[t],this.leftDel(t),this.obSelectedAdd.fire(t))},selectedDel:function(t){this.leftData[t]=this.rightData[t],delete this.rightData[t],this.rightDel(t),this.obSelectedDel.fire(t)},allSelectedAdd:function(){for(var t in this.leftSelected)this.selectedAdd(t)},allSelectedDel:function(){for(var t in this.rightSelected)this.selectedDel(t)},reset:function(){this.leftSelected={};for(var t in this.leftData)delete this.leftData[t],delete this.data[t],this.obLeftRemove.fire(t)},getSelectedIDs:function(){var t=[];for(var e in this.rightData)t.push(this.rightData[e][this.keyField]);return t}};var h=function(t){function s(){r.$btnAdd.toggleClass("disabled",0===a(r.model.leftSelected))}function o(){r.$btnDel.toggleClass("disabled",0===a(r.model.rightSelected))}function d(){return}function h(){var t=a(r.model.rightData);r.enableYes(t<r.opts.min?!1:!0)}var r=this;t=e.extend({title:"选择"+(t.name||"名称"),name:t.name||"名称",mode:"auto",className:"mod-picker mod-picker_qq",style:"padding-bottom:0px;",width:"",content:"",max:1,min:0,unit:"个",page:1,pageNum:10,padding:!1,totalPage:1,keyField:"id",titleField:"name",listField:"items",totalField:"total",onPageChange:function(){},onInit:function(){},isOpenChild:!1,list:[],selectedList:[],lazytime:300,enableYes:!1},t),t&&-1===t.max&&(t.max=i),e.Modal.call(this,t),this.$.find(".modal-bd").html(e.template(n,this.opts)).addClass("mod-picker__bd"),t&&t.max>=i&&this.$.find(".mod-picker__tips").hide(),this.model=new c({max:"single"===this.opts.mode?this.opts.max+1:this.opts.max,mode:this.opts.mode,min:this.opts.min,keyField:this.opts.keyField}),this.model.obDataAdd.watch(function(t){r.$.find(".js-options .js-select-loading").before(r.getTemplateLi(t)),d(),h()}),this.model.obLeftAdd.watch(function(t){r.$.find('.js-options .js-select-li[data-cid="'+t+'"]').addClass("selecting"),s(),d()}),this.model.obLeftDel.watch(function(t){r.$.find('.js-options .js-select-li[data-cid="'+t+'"]').removeClass("selecting"),s(),d()}),this.model.obLeftRemove.watch(function(t){r.$.find('.js-options .js-select-li[data-cid="'+t+'"]').remove(),s(),d()}),this.model.obRightAdd.watch(function(t){r.$.find('.js-selected .js-select-li[data-cid="'+t+'"]').addClass("selecting"),o(),h()}),this.model.obRightDel.watch(function(t){r.$.find('.js-selected .js-select-li[data-cid="'+t+'"]').removeClass("selecting"),o(),h()}),this.model.obSelectedAdd.watch(function(t){var e=' .js-select-li[data-cid="'+t+'"]';r.$.find(".js-options"+e).removeClass("selecting").addClass("selected").clone().appendTo(r.$.find(".js-selected")).removeClass("selected"),d(),h(),r.checkPage()}),this.model.obSelectedDel.watch(function(t){var e=' .js-select-li[data-cid="'+t+'"]';r.$.find(".js-options"+e).removeClass("selected"),r.$.find(".js-selected"+e).remove(),d(),h()}),this.$btnAdd=this.$.find(".js-picker-add").click(function(t){return r.$btnAdd.hasClass("disabled")?void 0:"single"===r.opts.mode?(r.getSelectedIDs=function(){var t=[];for(var e in r.model.leftSelected)t.push(e);return t},void r.closeAsync(r.opts.yes,t)):void r.model.allSelectedAdd()}),this.$btnDel=this.$.find(".js-picker-del").click(function(){r.$btnDel.hasClass("disabled")||r.model.allSelectedDel()}),this.$.find(".js-options").scroll(function(){r.checkPage()}),this.$.on("click",".js-select-li",function(){var t=e(this);t.parent().hasClass("js-options")?r.model.leftToggle(t.data("cid")):r.model.rightToggle(t.data("cid"))}).on("dblclick",".js-select-li",function(t){var i=e(this),s=i.data("cid");if(i.parent().hasClass("js-options")){if("single"===r.opts.mode)return r.getSelectedIDs=function(){return[s]},void r.closeAsync(r.opts.yes,t);r.model.leftToRight(s)}else r.model.rightToLeft(s)}),this.$.find(".mod-picker__input").on("keyup paste",l(function(){r.opts.keyword=e(this).val(),r.opts.page=1,r.opts.totalPage=1,r.model.reset(),r.loadAsyncData()},this.opts.lazytime)),this.insertData(this.opts.list),setTimeout(function(){r.async(r.opts.onInit,r,function(){r.loadAsyncData(),r.insertSelected(r.opts.selectedList)})},0)};return h.prototype=s(e.Modal),h.prototype.constructor=h,e.extend(h.prototype,{onPageChange:function(t){return this.opts.onPageChange=t,this},onInit:function(t){return this.opts.onInit=t,this},getTemplateLi:function(t){var e="";if(this.opts.isOpenChild){if(e+='<li class="select-li js-select-li" data-cid="'+t[this.opts.keyField]+'" title="'+t[this.opts.titleField]+'">'+t.view+"</li>",t.child)for(var i=0,s=t.child.length;s>i;i++){var l=t.child[i];e+='<li class="select-li js-select-li" data-cid="'+l[this.opts.keyField]+'" title="'+l[this.opts.titleField]+'">'+l.view+"</li>"}}else e+=this.opts.customField&&t[this.opts.customField]?'<li class="select-li js-select-li" data-cid="'+t[this.opts.keyField]+'" title="'+t[this.opts.titleField]+'"><span class="select-li-name">'+t[this.opts.customField]+"</span></li>":'<li class="select-li js-select-li" data-cid="'+t[this.opts.keyField]+'" title="'+t[this.opts.titleField]+'"><span class="select-li-name">'+t[this.opts.titleField]+"</span></li>";return e},idsToArray:function(t){return this.model.idsToArray(t)},loadAsyncData:function(t){var e=this;return"undefined"==typeof this.opts.totalPage||this.opts.page>this.opts.totalPage?(this.$.find(".js-options .js-select-loading").hide(),!1):(this.$.find(".js-options .js-select-loading").show(),void(this._lock||(this._lock=!0,this.opts.onPageChange.call(this,{page:this.opts.page,pageNum:this.opts.pageNum,keyword:this.opts.keyword||""},function(i,s){"function"==typeof t&&t(i,s),i||(e.insertData(s),e.opts.page++),e._lock=!1,e.checkPage()}))))},getSelectedIDs:function(){var t=[],i=this;return this.$.find(".js-selected .js-select-li").each(function(){var s=e(this).data("cid");t.push(i.model.rightData[s][i.model.keyField])}),t},insertData:function(t){this.model.insertData(t)},reset:function(){this.model.reset()},insertSelected:function(t){this.model.insertSelected(t)},setMaxPage:function(t){return this.opts.totalPage=t,this},checkPage:function(){if(!this._lock){var t=this.$.find(".js-options");if(!t.is(":hidden")){var e=t.find(".js-select-loading"),i=t.outerHeight(),s=t.offset().top,l=e.offset().top-s;l+=e.outerHeight(),l>=0&&i>l-10&&this.loadAsyncData()}}}}),e.picker=h,e.each(["yes","no","onClose"],function(t,e){h.prototype[e]=function(t){var i,s=this;i=t.length<2?function(){return t.call(this,s.getSelectedIDs())}:function(e,i){return t.call(this,s.getSelectedIDs(),i)},this.opts[e]=i}}),e.each(["enableAdd","enableDel"],function(t,e){h.prototype[e]=function(t){this.opts[e]=t;var i=t?"removeClass":"addClass";return"enableAdd"===e&&this.$btnAdd[i]("disabled"),"enableDel"===e&&this.$btnDel[i]("disabled"),this}}),h});
/*!agency/index/hovertips*/
;define("agency/index/hovertips",function(t,o,e){var i=t("jquery");e.exports={init:function(){i(document).on("mouseenter.hovertip","[data-hovertip]",function(){var t,o,e=i(this),a=e.data("box"),n=e.data("type");a?a.show():(t=e.hasClass("icon-font")?e.offset():e.find(".icon-font").offset(),a=i('<div class="index-manager-hovertips"><p>预览图加载中...</p></div>').appendTo(document.body).css({top:t.top+24,left:t.left-5,padding:"10px"}),o=e.data("hovertip"),"img"===n&&(o='<img src="'+o+'">'),a.html(o),e.data("box",a))}).on("mouseleave.hovertip","[data-hovertip]",function(){var t=i(this).data("box");t&&t.hide()})}}});
/*!@tencent/im-jquery.form/jquery.form*/
;define("@tencent/im-jquery.form/jquery.form",function(e){function t(e){var t=e.data;e.isDefaultPrevented()||(e.preventDefault(),n(e.target).ajaxSubmit(t))}function r(e){var t=e.target,r=n(t);if(!r.is("[type=submit],[type=image]")){var a=r.closest("[type=submit]");if(0===a.length)return;t=a[0]}var i=this;if(i.clk=t,"image"==t.type)if(void 0!==e.offsetX)i.clk_x=e.offsetX,i.clk_y=e.offsetY;else if("function"==typeof n.fn.offset){var o=r.offset();i.clk_x=e.pageX-o.left,i.clk_y=e.pageY-o.top}else i.clk_x=e.pageX-t.offsetLeft,i.clk_y=e.pageY-t.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(n.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var n=e("jquery"),i={};i.fileapi=void 0!==n("<input type='file'/>").get(0).files,i.formdata=void 0!==window.FormData;var o=!!n.fn.prop;n.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},n.fn.ajaxSubmit=function(e){function t(t){var r,a,i=n.param(t,e.traditional).split("&"),o=i.length,s=[];for(r=0;o>r;r++)i[r]=i[r].replace(/\+/g," "),a=i[r].split("="),s.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])]);return s}function r(r){for(var a=new FormData,i=0;i<r.length;i++)a.append(r[i].name,r[i].value);if(e.extraData){var o=t(e.extraData);for(i=0;i<o.length;i++)o[i]&&a.append(o[i][0],o[i][1])}e.data=null;var s=n.extend(!0,{},n.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:u||"POST"});e.uploadProgress&&(s.xhr=function(){var t=n.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(t){var r=0,a=t.loaded||t.position,n=t.total;t.lengthComputable&&(r=Math.ceil(a/n*100)),e.uploadProgress(t,a,n,r)},!1),t}),s.data=null;var c=s.beforeSend;return s.beforeSend=function(t,r){r.data=e.formData?e.formData:a,c&&c.call(this,t,r)},n.ajax(s)}function s(t){function r(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(r){a("cannot get iframe.contentWindow document: "+r)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a("cannot get iframe.contentDocument: "+r),t=e.document}return t}function i(){function e(){try{var t=r(g).readyState;a("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(n){a("Server abort: ",n," (",n.name,")"),s(k),j&&clearTimeout(j),j=void 0}}var t=f.attr2("target"),i=f.attr2("action"),o="multipart/form-data",c=f.attr("enctype")||f.attr("encoding")||o;S.setAttribute("target",d),(!u||/post/i.test(u))&&S.setAttribute("method","POST"),i!=m.url&&S.setAttribute("action",m.url),m.skipEncodingOverride||u&&!/post/i.test(u)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(j=setTimeout(function(){T=!0,s(D)},m.timeout));var l=[];try{if(m.extraData)for(var p in m.extraData)m.extraData.hasOwnProperty(p)&&l.push(n.isPlainObject(m.extraData[p])&&m.extraData[p].hasOwnProperty("name")&&m.extraData[p].hasOwnProperty("value")?n('<input type="hidden" name="'+m.extraData[p].name+'">').val(m.extraData[p].value).appendTo(S)[0]:n('<input type="hidden" name="'+p+'">').val(m.extraData[p]).appendTo(S)[0]);m.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout(e,15);try{S.submit()}catch(h){var x=document.createElement("form").submit;x.apply(S)}}finally{S.setAttribute("action",i),S.setAttribute("enctype",c),t?S.setAttribute("target",t):f.removeAttr("target"),n(l).remove()}}function s(e){if(!x.aborted&&!F){if(M=r(g),M||(a("cannot access response document"),e=k),e===D&&x)return x.abort("timeout"),void w.reject(x,"timeout");if(e==k&&x)return x.abort("server abort"),void w.reject(x,"error","server abort");if(M&&M.location.href!=m.iframeSrc||T){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var t,i="success";try{if(T)throw"timeout";var o="xml"==m.dataType||M.XMLDocument||n.isXMLDoc(M);if(a("isXml="+o),!o&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O)return a("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var u=M.body?M.body:M.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=M.XMLDocument?M.XMLDocument:M,o&&(m.dataType="xml"),x.getResponseHeader=function(e){var t={"content-type":m.dataType};return t[e.toLowerCase()]},u&&(x.status=Number(u.getAttribute("status"))||x.status,x.statusText=u.getAttribute("statusText")||x.statusText);var c=(m.dataType||"").toLowerCase(),l=/(json|script|text)/.test(c);if(l||m.textarea){var f=M.getElementsByTagName("textarea")[0];if(f)x.responseText=f.value,x.status=Number(f.getAttribute("status"))||x.status,x.statusText=f.getAttribute("statusText")||x.statusText;else if(l){var d=M.getElementsByTagName("pre")[0],h=M.getElementsByTagName("body")[0];d?x.responseText=d.textContent?d.textContent:d.innerText:h&&(x.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==c&&!x.responseXML&&x.responseText&&(x.responseXML=X(x.responseText));try{E=_(x,c,m)}catch(b){i="parsererror",x.error=t=b||i}}catch(b){a("error caught: ",b),i="error",x.error=t=b||i}x.aborted&&(a("upload aborted"),i=null),x.status&&(i=x.status>=200&&x.status<300||304===x.status?"success":"error"),"success"===i?(m.success&&m.success.call(m.context,E,"success",x),w.resolve(x.responseText,"success",x),p&&n.event.trigger("ajaxSuccess",[x,m])):i&&(void 0===t&&(t=x.statusText),m.error&&m.error.call(m.context,x,i,t),w.reject(x,"error",t),p&&n.event.trigger("ajaxError",[x,m,t])),p&&n.event.trigger("ajaxComplete",[x,m]),p&&!--n.active&&n.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,x,i),F=!0,m.timeout&&clearTimeout(j),setTimeout(function(){m.iframeTarget?v.attr("src",m.iframeSrc):v.remove(),x.responseXML=null},100)}}}var c,l,m,p,d,v,g,x,b,y,T,j,S=f[0],w=n.Deferred();if(w.abort=function(e){x.abort(e)},t)for(l=0;l<h.length;l++)c=n(h[l]),o?c.prop("disabled",!1):c.removeAttr("disabled");if(m=n.extend(!0,{},n.ajaxSettings,e),m.context=m.context||m,d="jqFormIO"+(new Date).getTime(),m.iframeTarget?(v=n(m.iframeTarget),y=v.attr2("name"),y?d=y:v.attr2("name",d)):(v=n('<iframe name="'+d+'" src="'+m.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var t="timeout"===e?"timeout":"aborted";a("aborting upload... "+t),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(r){}v.attr("src",m.iframeSrc),x.error=t,m.error&&m.error.call(m.context,x,t,e),p&&n.event.trigger("ajaxError",[x,m,t]),m.complete&&m.complete.call(m.context,x,t)}},p=m.global,p&&0===n.active++&&n.event.trigger("ajaxStart"),p&&n.event.trigger("ajaxSend",[x,m]),m.beforeSend&&m.beforeSend.call(m.context,x,m)===!1)return m.global&&n.active--,w.reject(),w;if(x.aborted)return w.reject(),w;b=S.clk,b&&(y=b.name,y&&!b.disabled&&(m.extraData=m.extraData||{},m.extraData[y]=b.value,"image"==b.type&&(m.extraData[y+".x"]=S.clk_x,m.extraData[y+".y"]=S.clk_y)));var D=1,k=2,A=n("meta[name=csrf-token]").attr("content"),L=n("meta[name=csrf-param]").attr("content");L&&A&&(m.extraData=m.extraData||{},m.extraData[L]=A),m.forceSync?i():setTimeout(i,10);var E,M,F,O=50,X=n.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},C=n.parseJSON||function(e){return window.eval("("+e+")")},_=function(e,t,r){var a=e.getResponseHeader("content-type")||"",i="xml"===t||!t&&a.indexOf("xml")>=0,o=i?e.responseXML:e.responseText;return i&&"parsererror"===o.documentElement.nodeName&&n.error&&n.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,t)),"string"==typeof o&&("json"===t||!t&&a.indexOf("json")>=0?o=C(o):("script"===t||!t&&a.indexOf("javascript")>=0)&&n.globalEval(o)),o};return w}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var u,c,l,f=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),u=e.type||this.attr2("method"),c=e.url||this.attr2("action"),l="string"==typeof c?n.trim(c):"",l=l||window.location.href||"",l&&(l=(l.match(/^([^#]+)/)||[])[1]),e=n.extend(!0,{url:l,success:n.ajaxSettings.success,type:u||n.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var m={};if(this.trigger("form-pre-serialize",[this,e,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=e.traditional;void 0===p&&(p=n.ajaxSettings.traditional);var d,h=[],v=this.formToArray(e.semantic,h);if(e.data&&(e.extraData=e.data,d=n.param(e.data,p)),e.beforeSubmit&&e.beforeSubmit(v,this,e)===!1)return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,e,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=n.param(v,p);d&&(g=g?g+"&"+d:d),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+g,e.data=null):e.data=g;var x=[];if(e.resetForm&&x.push(function(){f.resetForm()}),e.clearForm&&x.push(function(){f.clearForm(e.includeHidden)}),!e.dataType&&e.target){var b=e.success||function(){};x.push(function(t){var r=e.replaceTarget?"replaceWith":"html";n(e.target)[r](t).each(b,arguments)})}else e.success&&x.push(e.success);if(e.success=function(t,r,a){for(var n=e.context||this,i=0,o=x.length;o>i;i++)x[i].apply(n,[t,r,a||f,f])},e.error){var y=e.error;e.error=function(t,r,a){var n=e.context||this;y.apply(n,[t,r,a,f])}}if(e.complete){var T=e.complete;e.complete=function(t,r){var a=e.context||this;T.apply(a,[t,r,f])}}var j=n("input[type=file]:enabled",this).filter(function(){return""!==n(this).val()}),S=j.length>0,w="multipart/form-data",D=f.attr("enctype")==w||f.attr("encoding")==w,k=i.fileapi&&i.formdata;a("fileAPI :"+k);var A,L=(S||D)&&!k;e.iframe!==!1&&(e.iframe||L)?e.closeKeepAlive?n.get(e.closeKeepAlive,function(){A=s(v)}):A=s(v):A=(S||D)&&k?r(v):n.ajax(e),f.removeData("jqxhr").data("jqxhr",A);for(var E=0;E<h.length;E++)h[E]=null;return this.trigger("form-submit-notify",[this,e]),this},n.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&n.isFunction(n.fn.on),!e.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!n.isReady&&i.s?(a("DOM not ready, queuing ajaxForm"),n(function(){n(i.s,i.c).ajaxForm(e)}),this):(a("terminating; zero elements found by selector"+(n.isReady?"":" (DOM not ready)")),this)}return e.delegation?(n(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,e,t).on("click.form-plugin",this.selector,e,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,t).bind("click.form-plugin",e,r)},n.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},n.fn.formToArray=function(e,t){var r=[];if(0===this.length)return r;var a,o=this[0],s=this.attr("id"),u=e?o.getElementsByTagName("*"):o.elements;if(u&&!/MSIE [678]/.test(navigator.userAgent)&&(u=n(u).get()),s&&(a=n(':input[form="'+s+'"]').get(),a.length&&(u=(u||[]).concat(a))),!u||!u.length)return r;var c,l,f,m,p,d,h;for(c=0,d=u.length;d>c;c++)if(p=u[c],f=p.name,f&&!p.disabled)if(e&&o.clk&&"image"==p.type)o.clk==p&&(r.push({name:f,value:n(p).val(),type:p.type}),r.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}));else if(m=n.fieldValue(p,!0),m&&m.constructor==Array)for(t&&t.push(p),l=0,h=m.length;h>l;l++)r.push({name:f,value:m[l]});else if(i.fileapi&&"file"==p.type){t&&t.push(p);var v=p.files;if(v.length)for(l=0;l<v.length;l++)r.push({name:f,value:v[l],type:p.type});else r.push({name:f,value:"",type:p.type})}else null!==m&&"undefined"!=typeof m&&(t&&t.push(p),r.push({name:f,value:m,type:p.type,required:p.required}));if(!e&&o.clk){var g=n(o.clk),x=g[0];f=x.name,f&&!x.disabled&&"image"==x.type&&(r.push({name:f,value:g.val()}),r.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}))}return r},n.fn.formSerialize=function(e){return n.param(this.formToArray(e))},n.fn.fieldSerialize=function(e){var t=[];return this.each(function(){var r=this.name;if(r){var a=n.fieldValue(this,e);if(a&&a.constructor==Array)for(var i=0,o=a.length;o>i;i++)t.push({name:r,value:a[i]});else null!==a&&"undefined"!=typeof a&&t.push({name:this.name,value:a})}}),n.param(t)},n.fn.fieldValue=function(e){for(var t=[],r=0,a=this.length;a>r;r++){var i=this[r],o=n.fieldValue(i,e);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?n.merge(t,o):t.push(o))}return t},n.fieldValue=function(e,t){var r=e.name,a=e.type,i=e.tagName.toLowerCase();if(void 0===t&&(t=!0),t&&(!r||e.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!e.checked||("submit"==a||"image"==a)&&e.form&&e.form.clk!=e||"select"==i&&-1==e.selectedIndex))return null;if("select"==i){var o=e.selectedIndex;if(0>o)return null;for(var s=[],u=e.options,c="select-one"==a,l=c?o+1:u.length,f=c?o:0;l>f;f++){var m=u[f];if(m.selected){var p=m.value;if(p||(p=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),c)return p;s.push(p)}}return s}return n(e).val()},n.fn.clearForm=function(e){return this.each(function(){n("input,select,textarea",this).clearFields(e)})},n.fn.clearFields=n.fn.clearInputs=function(e){var t=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,a=this.tagName.toLowerCase();t.test(r)||"textarea"==a?this.value="":"checkbox"==r||"radio"==r?this.checked=!1:"select"==a?this.selectedIndex=-1:"file"==r?/MSIE/.test(navigator.userAgent)?n(this).replaceWith(n(this).clone(!0)):n(this).val(""):e&&(e===!0&&/hidden/.test(r)||"string"==typeof e&&n(this).is(e))&&(this.value="")})},n.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},n.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},n.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var t=this.type;if("checkbox"==t||"radio"==t)this.checked=e;else if("option"==this.tagName.toLowerCase()){var r=n(this).parent("select");e&&r[0]&&"select-one"==r[0].type&&r.find("option").selected(!1),this.selected=e}})},n.fn.ajaxSubmit.debug=!1});
/*!edu_modules/jquery.uploader/jquery.uploader*/
;define("edu_modules/jquery.uploader/jquery.uploader",function(e){var r=e("jquery"),t=e("edu_modules/bkn/index"),a=e("edu_modules/edu-db/edu-db"),n=e("edu_modules/edu-login/edu-login");e("edu_modules/edu-dialog/edu-dialog"),e("@tencent/im-jquery.form/jquery.form");var u={},o=function(e){return e.wrap("<form method='post' enctype='multipart/form-data'></form>"),e.parent()},i=function(e){e.unwrap()},c=function(e){var r=o(e),t=r.html();return i(e),t},f=function(e,r,t){var a=o(e);e.replaceWith(r.__html__),e=a.find("input"),"function"==typeof r.resetInput&&r.resetInput(e),i(e),d(e,r,t)},s=function(e,i){switch(e){case 111:case-1001:case 1e5:case 100021:n.show({succ:function(){u.data.bkn=a.status.bkn=t(),o(i).ajaxSubmit(u)},close:function(){window.reload()}});break;case 110405:r._alert("没有管理权限，请重新刷新页面",function(){location.reload()});break;case 106425:r._alert("不能上传空文件","上传失败");break;case 106439:case 106466:r._alert("上传的文件类型不对","上传失败");break;case 106444:r._alert("上传的文件过大，请上传2M以内的文件","上传失败");break;case 106465:r._alert("请先选择要上传的文件","上传失败");break;case 106467:case 106468:r._alert("Excel文件出错，请重新上传","上传失败");break;case 106627:r._alert("图片过大，请上传分辨率不超过96dip，尺寸不超过3500*2500大小的图片","上传失败");break;default:r._alert("服务器繁忙，请稍后再试("+(e||-1)+")","上传失败")}},d=function(e,a,n){var c=function(r){i(e),f(e,a,n),r=r||{};var t=r.retcode;if(0!==t){if("function"==typeof a.error){var u=a.error(r);if(u===!0)return}return s(t,e)}"function"==typeof a.success&&a.success(r)},d=function(){var i=r.trim(e.val());if(i){if(this.files&&this.files[0]&&this.files[0].size<1)return r._alert("不能上传空文件！"),void f(e,a,n);if("function"==typeof a.beforeSend){var s=a.beforeSend.call(this,e);if(s===!1)return void f(e,a,n)}var d={r:Math.random(),bkn:t()},l=a.data;if("object"==typeof l)for(var _ in l)d[_]=l[_];u={data:d,url:a.url,dataType:a.dataType||"json",success:function(e){c(e)},error:function(){c()}},o(e).ajaxSubmit(u)}};n?d():e.change(d)},l=function(e,r,t){r.url&&(r.__html__=r.__html__||c(e),d(e,r,t))};return{upload:l,show_retcode:s}});
/*!/agency/publish/template/term.price.tpl_tpl*/
;define("/agency/publish/template/term.price.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="mod-form__line term-price-item-wrap"> <label class="mod-form__label"><b>*</b>',it.name,'</label> <div class="mod-form__content"> <input type="text" name="price" value="',it.price>0?parseFloat(it.price/100).toFixed(2):"",'" class="input-text" style="width:84px" data-termid="',it.term_id,'" data-prefix="float" data-tips="课程发布后，每月只能修改2次价格，每次相隔7天" data-msg="班级价格不能为空|" data-pattern="not_null|term_price" disabled > <span class="unit">元</span> <div class="field-help"></div> </div></div>'),_$out_.join("")}}});
/*!agency/publish/common/state*/
;define("agency/publish/common/state",function(n){var r=(n("jquery"),n("@tencent/im-cache/cache"),n("agency/publish/common/_pd")),t=function(){return"c"===(r||{}).cmd},c=function(){return"n"===(r||{}).cmd},e=function(){return-1!==["p","b","m"].indexOf((r||{}).cmd)},i=function(){return"p"===(r||{}).cmd},u=function(){return"m"===(r||{}).cmd},a=function(){return""===(r||{}).cmd},s=function(){return r=r||{},e()?1===r.result.passcard:1===r.data.passcard},d=function(){return r=r||{},e()?1===r.result.payid:1===r.data.payid},o=function(){return r=r||{},e()?1===r.result.train:1===r.data.train};return{is_copy:t,is_modify:e,is_newterm:c,is_update:u,is_plan:i,is_publish:a,is_passcard:s,is_free_course:d,is_train_course:o}});
/*!agency/publish/common/disabled.manager*/
;define("agency/publish/common/disabled.manager",function(e){var i=e("jquery"),t=e("@tencent/im-cache/cache"),d=e("agency/publish/common/_pd"),a=e("agency/publish/common/state"),n=function(){return d=d||{},"b"===d.cmd},s=function(e){"n"===d.cmd&&i.bom.query("limit")&&(e.find(".item--add, .item--insert, .item-line--part .item--edit").hide(),e.find(".item-line--part .oper-list").addClass("disabled-del"))},m=function(e,t){t=t||{};var n=e.find(".part-list .part-item--view");Date.now()/1e3>t.endtime?o(e.data("crossover",!0).find([".term-edit",".term-clone",".td-value",".upload-batch-btn",".add-btn",".item-line--chapter",".item--insert",".item--edit",".item--del",".item--add"].join(","))):a.is_free_course()||(o(e.addClass("disabled-aways").find(".term-del")),o(e.find(".item-line--chapter").addClass("disabled-del").find(".item--del").hide()),s(e),"p"===d.cmd&&n.each(function(e,t){i(this).find(".task-item--data").length!==i(t).find(".task-item--data.schedule-task").length&&(i(this).find(".item-line--part .oper-list").addClass("disabled-del"),i(this).find(".item-line--part .oper-list").find(".oper-item.item--edit").hide())}),"m"===d.cmd&&e.find(".item-line--part .oper-list").addClass("disabled-del"),o(e.find(".task-item").not(".item--add").not(".schedule-task").addClass("disabled-del").find(".item--del").hide()))},l=function(e){"m"!==d.cmd||a.is_free_course()||(o(e.find(".task-item.update-task").find(".item--del, .item--move").hide()),o(e.find(".task-item.schedule-task").find(".item--edit").hide()))},r=function(e,i){n()&&("b"===d.cmd&&o(".mod-feeType .radio"),(i.apply_num>0||1===i.train)&&o(".mod-feeType .radio"))},o=function(e,t){var d=i(e);return d.find(":input, a, div, .diy-select-toggle, label").add(d).not(t||"").attr("disabled","disabled").addClass("disabled").attr("tabindex","-1")},c=function(e,t){var d=i(e);return d.find(":input, a, div, .diy-select-toggle, label").add(d).not(t||"").removeAttr("disabled","").removeClass("disabled").removeAttr("tabindex","")},f=function(e,i,a){if(1===parseInt(localStorage.getItem("disLimitModifyPrice"),10)||"c"===d.cmd)return!0;var n=t.get("term_price_limit")||{};if(n[i]&&n[i].allow_modify_num<=0)return o(e),a.succMsg="已达到2次/月的改价次数上限",!0;if(n[i]&&0!==n[i].last_modify_time){var s=1e3*(n[i].last_modify_time+604800),m=new Date(s);return m.setHours(0),m.setMinutes(0),m.setSeconds(0),(new Date).getTime()>m.getTime()?!1:(o(e),a.succMsg="距离上次改价时间未超过7天",!0)}return!1};return{basic:r,term:m,add:o,remove:c,disabledModifyPrice:f,newTermTaskDisable:s,updateTermTaskDisable:l}});
/*!agency/publish/step2/term.price*/
;define("agency/publish/step2/term.price",function(e){var t=(e("edu_modules/edu-db/edu-db"),e("jquery")),r=(e("@tencent/im-cache/cache"),e("/agency/publish/template/term.price.tpl_tpl")),a=e("agency/publish/common/_pd"),n=e("agency/publish/common/disabled.manager"),c=function(){return a=a||{},"b"===a.cmd},i=function(){return 1===t(".mod-feeType .radio-check").data("value")},s=function(e){var a=[];t.each(t._toArray(e),function(e,t){a.push(r(t))}),a.length&&t(".term-price-wrap").html(a.join(""))},u=function(e){return parseInt(parseFloat(t.trim(e)).toFixed(2).replace(/^0+|\./g,""),10)||0},o=function(e){var r=[];return t(".term-price-wrap input").each(function(){var a=t(this),n=u(a.val());r.push(e?{term_id:a.data("termid"),price:n}:n)}),r},p=function(){return l()},d=function(){return u(t("#cp_price_pass").val())},l=function(){return u(t("#course_price").val())},m=function(){return i()?!1:d()<p()},f=function(e){c()&&e.extend("term_price",function(t,r){if(i())return!0;if(0==t)return e.msg="价格不能小于0.02元",!1;if(t=t.replace(/^0+/,""),!/^\d+$/.test(t.replace(/\./,"")))return e.msg="请输入正确的价格",!1;if(/\.\d\d\d+$/.test(t))return e.msg="小数点后请保留两位",!1;var c=parseFloat(t);if(.02>c)return e.msg="价格不能小于0.02元",!1;if(c>1e5)return e.msg="价格不能大于100000元",!1;if(a=a||{},e.succMsg="",n.disabledModifyPrice(r.closest(".mod-form__content"),r.data("termid"),e))return r.closest(e.parentSelector).addClass("g-advice"),!0;if(a.data._tmp_ios_flag){var s=a.getSuitableIosPrice(c);s&&s!=c?(e.succMsg='<span class="advice-text">为了更好售卖课程，建议将课程价格调整为'+s+'元。</span><a href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=735" target="_blank">为什么？</a>',r.closest(e.parentSelector).addClass("g-advice")):r.closest(e.parentSelector).removeClass("g-advice")}else r.closest(e.parentSelector).removeClass("g-advice");return!0})},g=function(e){if(c())if(e=e||{},i())delete e._terms;else{var t=o(!0);t.length&&(e._terms=t)}},_=function(){a=a||{},c()&&s((a.result||{}).terms)};return{init:_,update:g,validator:f,has_term_price_greater_than_passcard_price:m}});
/*!/agency/publish/template/step2.tpl_tpl*/
;define("/agency/publish/template/step2.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="publish-step publish-step2"> <div class="mod-form"> <div class="content-guide"> <div class="guide-hd"> <h3 class="guide-tt">基本信息</h3> <div class="content-form"> <!-- 课程名称 --> <div class="mod-form__line mod-form__name-wrap"> <label class="mod-form__label" for="cp_name"><b>*</b>课程名称</label> <div class="mod-form__content"> <input type="text" class="input-text" data-pattern="not_null|name|limit" data-min="5" data-max="30" data-tips="请填写5-30个字，两个字母算一个字。该字段修改需审核，请确认后提交。" data-msg="课程名称不能为空" name="name" id="cp_name" placeholder="请填写课程名称" /><div class="field-help"></div> </div> </div> <!-- 分类和标签 --> <!-- 类目 --> <div class="mod-form__line mod-form__select-wrap"> <label class="mod-form__label" for="cp_tag"><b>*</b>所属类目</label> <div class="mod-form__content"> <div class="diy-select-area tmpl-tag1" data-pattern="tag"> <a href="javascript:;" id="cp_tag1" class="diy-select" data-select="tag1"> <i class="text text-tip">请选择分类</i><span><b></b></span> </a> </div> <div class="diy-select-area tmpl-tag2 hide nopattern" data-pattern="tag"> <a href="javascript:;" id="cp_tag2" class="diy-select" data-select="tag2"> <i class="text text-tip">请选择分类</i><span><b></b></span> </a> </div> <div class="diy-select-area tmpl-tag3 hide nopattern" data-pattern="tag"> <a href="javascript:;" id="cp_tag3" class="diy-select" data-select="tag3"> <i class="text text-tip">请选择分类</i><span><b></b></span> </a> </div> <div class="field-help"></div> </div> </div> <!-- <div id="course_tag_wrap"></div> --> <!-- 上传封面 --> <div class="mod-form__line mod-form__upload-img-wrap g-info"> <label class="mod-form__label mod-form__label_top" for="cp_cover"><b>*</b>课程封面</label> <div class="mod-form__content"> <!-- mod-form__upload-img_redo --> <div class="upload mod-form__upload-img" id="cp_cover"> <div class="mod-form__upload-img-text"> <span>+</span><i>点击上传图片</i> </div> <img class="hide" id="cover_view" data-pattern="not_null" data-msg="课程封面不能为空" width="222" height="125" /> <div class="mask"> <div class="mask-bg"></div> <div class="mask-cont">重新上传图片</div> </div> <input type="file" name="filename" accept="image/*" id="cover_upload" /> </div> <div class="mod-form__upload-tips"> <p class="cover-tip">图片要求 <a href="//ke.qq.com/docs/cover-description.jpg" class="nor-link" target="_blank">点击查看课程封面模版规范</a> <br>尺寸大于1080*608 分辨率小于96dpi<br>大小小于2M<br>支持JPG/PNG/BMP等格式图片</p> <div class="field-help"> <i></i><p>该字段修改需审核，请确认后提交。</p> </div> </div> </div> </div> <!-- 课程简介 --> <div class="mod-form__line mod-form__textarea-wrap"> <label class="mod-form__label" for="cp_summary"><b>*</b>课程简介</label> <div class="mod-form__content mod-form__content-long"> <textarea class="f-textarea" name="summary" data-pattern="not_null|limit" data-min="10" data-max="150" data-tips="请填写课程简介" data-msg="课程简介不能为空" id="cp_summary" placeholder="课程简介将在一些特殊的场景使用，例如：分享到空间、腾讯微博等地。或一些合辑中，都将默认展示课程简介。简介内容请根据课程的实际内容进行简短的概括。 "></textarea> <div class="field-help"></div> </div> </div> <!-- 费用类型 --> <div class="pay-id-wrap"> <!-- 收费方式 --> <div class="mod-form__line mod-form__radios-wrap"> <label class="mod-form__label"><b>*</b>是否收费</label> <div class="mod-form__content mod-pay-id-wrap"> <div class="radios mod-feeType"> <div class="radio radio-check" data-value="1" data-type="0"> <i></i><label><a href="javascript:;">免费</a></label> </div> <div class="radio disabled" data-value="2" data-type="0"> <i></i><label><a href="javascript:;">收费</a></label> </div> </div> <div class="pay_id_bill_tips pay_id_bill_tips-fee"> <i class="icon-font i-info"></i><p class="js-fee-cont">如需开设收费课程，需要关联银行帐号并签署收益协议，<a target="_blank" class="nor-link" href="/agency/billing/index.html">点击进入</a></p> </div> </div> <div class="mod-form__content" style="display: none;"> <div class="f-dropdown-tip pay-fee-type after-tip"> <input type="checkbox" id="checkbox_toggle" checked> <label class="nor-link not-sel" for="checkbox_toggle">课程价格修改规则说明<i class="icon-v icon-font i-v-bottom"></i></label> <div class="f-dropdown-content"> <p>课程发布后，课程价格修改规则如下： </p> <p>1、每次修改价格生效后，最少需要等待7天后的00：00才可进行第二次修改。 </p> <p>2、每门课程在每个自然月，可以进行两次价格修改。 </p> <p>3、若需要对课程进行限时促销，可至“机构管理后台-销售管理-课程销售-限时优惠”操作。</p> <p>4、同时修改课程并提交算一次修改，单独修改并提交各算一次。 </p> <p>5、未发布的课程可随时修改价格，不受本规则限制。</p> </div> </div> </div> </div> </div> <div class="free-relate-pay" style="display: none;"> <!-- 免费关联付费 --> <div class="mod-form__line"> <label class="mod-form__label">关联付费课程</label> <div class="mod-form__content"> <p class="mod-form__tip">1.关联后将获得付费课程的标签，用于学员筛选本课程；2.详情页将展示该付费课程。<a data-type="img" class="flp-demo icon-font" style="font-size: 14px;" data-hovertip="',"//8.url.cn/edu/modules/img/nohash/course_publish/relate-demo.jpg?max_age=3153600",'" href="javascript:void(0);">示意图</a></p> </div> </div> <div class="mod-form__line" style="margin-left: 114px;"> <label class="mod-form__label">选择付费课程</label> <div class="mod-form__content mod-form__content-long"> <div class="diy-select-area select-paycourse"> <a id="new_pay_picker" href="javascript:;" class="diy-select diy-picker diy-picker-toggle" data-max="1"> <i class="text text-tip">仅能选择标签已经通过审核的付费课</i> <span><i class="icon-font i-add diy-picker-icon"></i></span> </a> </div><div class="field-help"></div> </div> </div> <div class="label_feature_select" style="display:none;margin-left: 114px;"> <div class="mod-form__line"> <label class="mod-form__label">将获得标签</label> <div class="mod-form__content label__list"> <ul> </ul> </div> </div> <div class="mod-form__line"> <label class="mod-form__label">付费课特色</label> <div class="mod-form__content feature__list"> <div class="feature_ct"> </div> <a class="add__feature" id="feature_list_add"><span><i class="icon-font i-add"></i></span>点击添加</a> <p class="mod-form__tip">例：有就业指导、有问题优先回答、小班课、实时咨询、远程桌面手把手指导</p> </div> </div> </div> </div> <!-- 付费 --> <div class="mod-form__line pay-id-choose-wrap" style="display:none"> <!-- 课程价格 --> <div class="mod-form__line course-price-wrap" > <label class="mod-form__label" for="course_price"><b>*</b>课程价格</label> <div class="mod-form__content"> <input type="text" class="input-text" style="width: 120px" maxlength="7" name="course_price" data-pattern="course_price" data-prefix="float" data-tips="课程发布后，每月只能修改2次价格，每次相隔7天" data-msg="课程价格不能为空" id="course_price" tabindex="-1" /><span class="unit">元</span> <div class="field-help"></div> </div> </div> <!--班级价格 隐藏班级价格 http://tapd.oa.com/QQ_EDU/prong/stories/view/1010084321059280369 @jayccchen--> <div class="term-price-wrap" style="display: none;"></div> <!-- 任意学价格，下线任意学，vienwu，20171012 --> <div class="mod-form__line price-pass-wrap price-pass-disabled" style="display:none"> <label class="mod-form__label" for="cp_price-pass"> <div class="checkbox" id="price_pass_box"> <i></i><span>任意学收费</span> </div> </label> <div class="mod-form__content"> <input type="text" class="input-text disabled" style="width:84px" maxlength="7" name="price" data-pattern="money_pass" data-prefix="float" data-tips="课程发布后，每月只能修改2次价格，每次相隔7天" data-msg="任意学价格不能为空" id="cp_price_pass" disabled="disabled" tabindex="-1" /><span class="unit">元</span> <div class="field-help"></div> </div> </div> <!-- 课程标签 --> <div class="mod-form__line mod-form__label-wrap course-label__line"> <label class="mod-form__label" for="cp_course_label"><b class="cp-required-course-tag" id="requiredCourseTag">*</b>课程标签<span>[<a target="_blank" href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=8" class="nor-link">?</a>]</span></label> <div class="mod-form__content mod-course-label-wrap"> <p class="mod-course-labels-tips">用于帮助用户筛选课程，让到访的流量更精准</p> <span class="mod-course-labels-lock-tips"><i class="icon-font i-alert"></i>您申请的标签正在审核，暂时无法修改</span> <div class="mod-course-labels-wrap"></div> </div> </div> <!-- ios 支持 --> <div class="mod-form__line mod-form__radios-wrap mod-form__ios-support-wrap" style="display:none"> <label class="mod-form__label">iOS渠道',$.render.faq(),'</label> <div class="mod-form__content" > <div class="radios"> <div class="radio radio-check" data-value="0"> <i></i><label><a href="javascript:;">课程不上架iOS app</a></label> </div> <div class="radio" data-value="1"> <i></i><label><a href="javascript:;">课程上架iOS app</a></label> </div> </div> <!-- <div class="pay_id_bill_tips pay_id_bill_tips-ios"> <i class="icon-font i-info"></i><p>课程如需上架iOS app，需签署iOS app收益补充协议，<a id="ios-support-deal" class="nor-link" href="javascript:;">点击进入</a></p> </div> --> <div class="f-dropdown-tip ios-pay"> <input type="checkbox" id="ios_pay_more"> <label class="nor-link not-sel" for="ios_pay_more">iOS支付结算规则说明<i class="icon-v icon-font i-v-bottom"></i></label> <div class="f-dropdown-content"> <div class="paragraph">由于苹果公司的规定，您在iOS App内的课程售卖必须分成30%给苹果公司。同时腾讯课堂将收取5%作为苹果黑卡用户造成损失的弥补。</div> <div class="paragraph">但这不会影响您在PC、Android 或者任何网页版腾讯课堂上的课程售卖，苹果仅仅只对交易产生在iOS App的部分分成。</div> </div> </div> <div class="clear"></div> <div style="display:none"> <div class="checkbox" data-pattern="need_check_ios" id="ios_pay_box" style="margin-top:10px;float:left" data-msg="上架iOS app需同意协议"> <i></i><label>我接受在iOS App中的课程售卖分成35%（PC、 Android、H5不受影响）<!--<a href="javascript:;" id="ios_pay_more" class="nor-link">点击查看支付结算规则</a>--> </label> </div> <div class="field-help" style="top:10px;left:10px"></div> </div> </div> </div> </div> <!-- 退款承诺 --> <div class="refund-choose-wrap mod-form__line" style="display:none"> <div class="mod-form__line mod-form__radios-wrap mod-form__refund-wrap"> <label class="mod-form__label"><b>*</b>退款承诺[<a target="_blank" href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=8" class="nor-link">?</a>]</label> <div class="mod-form__content"> <div class="radios mod-refund"> <div class="radio radio-check" data-value="1" data-type="0"> <i></i><label><a href="javascript:;"><b class="refund-icon1"> </b>课前随时退</a></label> </div> <div class="radio" data-value="2" data-type="0"> <i></i><label><a href="javascript:;"><b class="refund-icon2"> </b>七天包退</a></label> </div> <div class="radio" data-value="3" data-type="0" style="display:none;"> <i></i><label><a href="javascript:;"><b class="refund-icon3"> </b>课中包退</a></label> </div> </div> <div class="refund-hover-tip refund-hover-tip--first"> <span class="triangle"></span> <div class="refund-hover-tip-content"> <ol> <li><span>选择退款承诺后，后续不可更改；</span></li> <li>课程开始前，用户可直接退款；</li> <li>该退款承诺适用于全部课程。</li> </ol> </div> </div> <div class="refund-hover-tip refund-hover-tip--second hide"> <span class="triangle"></span> <div class="refund-hover-tip-content"> <ol> <li><span>选择退款承诺后，后续不可更改；</span></li> <li>课程开始前，用户可直接退款；</li> <li>课程开始后，<span>7天内可向机构申请退款；</span></li> <li>用户申请退款后，机构可在七天内说服学员取消退款。机构确认或逾期未处理，订单进入退款流程；</li> <li>该退款承诺适用于全部课程。</li> </ol> </div> </div> </div> </div> </div> </div> </div> </div> <!-- 课程老师设置 --> <div class="content-guide"> <div class="guide-hd"> <h3 class="guide-tt">老师介绍 <span style="color: #999;font-size: 14px;">最多可展示6名老师</span></h3> <div class="content-form"> <div class="mod-form__line mod-form__cteacher-wrap clearfix"> <div class="cteacher-tip"> <i class="triangle"></i> <i class="icon-close">×</i> <p>新功能上线啦！您可以在这里设置要介绍的老师信息，该信息将显示在课程介绍页里。</p> <a class="js-cteacher-tip-close">我知道了</a> </div> <div class="cteacher-ct add-teacher"> <div class="cteacher-add-text js-course-teacher" data-picker="c_teacher" data-max="6"> <span>+</span> <i>点击添加老师</i> </div> </div> </div> </div> </div> </div> <!-- --> <!--服务设置--> <div class="content-guide"> <div class="guide-hd"> <h3 class="guide-tt">服务设置</h3> <div class="content-form"> <!-- 咨询老师QQ --> <div id="needAddressWrapper" class="mod-form__line" style="margin-left: 30px; display: none;"> <label id="needAddress" class="checkbox"> <i></i><span style="color: #999; margin-right: 10px;"> <span style="color: #000;" class="need-address-tips">课程有配套实物</span> 若准备寄送给报名本课程的学生，请勾上此项，学生报名时可以填写收件地址 </span> </label> <a target="_blank" href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=10403&extra=page%3D1"> 点击查看如何寄送？ </a> <div id="addressOptions" class="mod-form__radios-wrap" style="margin-left: 30px; display: none;"> <div class="radios" style="line-height: 18px; padding: 10px 0 20px;"> <div class="radio radio-check" data-value="0"> <i></i><label><a href="javascript:;">报名时可不填地址</a></label> </div> <div class="radio" data-value="1" style="margin-right: 0;"> <i></i><label><a href="javascript:;">报名时必须填地址</a></label> </div> <span style="color: #999; margin-left: 5px;"> 选择此项，可能会影响学生报名意愿，请谨慎考虑 </span> </div> </div> </div> <!-- 是否支持单独报名 --> <div class="mod-form__line mod-form__radios-wrap mod-form__applytype-wrap"> <label class="mod-form__label"><b>*</b><i>支持单独报名</i></label> <div class="mod-form__content"> <div class="radios"> <div class="radio radio-check" data-value="0"> <i></i><label><a href="javascript:;">是</a></label> </div> <div class="radio" data-value="1"> <i></i><label><a href="javascript:;">否</a></label> </div> </div> <div class="onlypky_tip"> <a class="nor-link" target="_blank" href="//ke.qq.com/service_agency.html#id=15&anchor=SellInLoose">点击查看如何设置</a> </div> </div> </div> <!-- 销售老师 --> <div class="mod-server_qq"> <div class="mod-form__line"> <label class="mod-form__label"><b>*</b><i>销售老师</i>',$.render.faq(),'</label> <div class="mod-form__content mod-form__radios-wrap"> <div class="radios"> <div class="radio radio-check" data-value="0"> <i></i><label><a href="javascript:;">绑定的',isQidian?"企点客服":"销售QQ","</a></label> </div> "),isQidian||_$out_.push(' <div class="server_qq_tip"> <span>还没绑定老师？</span> <a class="nor-link" target="_blank" href="//ke.qq.com/agency/index/index.html#tab=teacherAndGroup">打开新页面去绑定</a> </div> '),_$out_.push(' </div> </div> </div> <div class="mod-form__line js-qq-field"> <div class="mod-form__content mod-form__content-long"> <div class="diy-select-area select-person"> <a href="javascript:;" id="cp_server_qq" name="server_qq" data-pattern="not_null" data-msg="请选择销售老师" class="diy-select diy-picker diy-picker-toggle" data-max="5" data-picker="teacher" data-sale="true"> <i class="text text-tip">请选择销售老师，用于销售课程</i> </a> </div> <div class="field-help"></div> </div> </div> </div> <!-- 报名咨询群 --> <div class="mod-form__line"> <label class="mod-form__label"><b>*</b><i>报名咨询群</i>',$.render.faq(),'</label> <div class="mod-form__content mod-form__content-long"> <div class="diy-select-area select-qun"> <a href="javascript:;" id="cp_zgroups" name="not_null" data-pattern="not_null" data-msg="请选择报名咨询群" class="diy-select diy-picker diy-picker-toggle" data-max="5" data-picker="group"> <i class="text text-tip">请填写用于接待咨询的QQ群，最多可填5个</i><span><i class="icon-font i-user-group diy-picker-icon"></i></span> </a> </div><div class="field-help"></div> </div> </div> <!-- 学习讨论群 --> <div class="mod-form__line"> <label class="mod-form__label"><b class="hide">*</b><i>学习讨论群</i>',$.render.faq(),'</label> <div class="mod-form__content mod-form__content-long"> <div class="diy-select-area select-qun"> <a href="javascript:;" id="cp_cgroups" name="cgroups" data-pattern="cgroups" class="diy-select diy-picker diy-picker-toggle" data-max="5" data-picker="group"> <i class="text text-tip">请选择合适的群接待学生，QQ用户报名后自动加入</i><span><i class="icon-font i-user-group diy-picker-icon"></i></span> </a> </div> <div class="field-help"></div> </div> </div> <!-- 咨询电话 --> <div class="mod-form__line"> <label class="mod-form__label" for="cp_server_tels"><i>咨询电话</i>',$.render.faq(),'</label> <div class="mod-form__content mod-form__content-long"> <input type="text" class="input-text" data-pattern="server_tels" name="server_tels" id="cp_server_tels" placeholder="请填写咨询热线电话，用于学生咨询" data-tips="以分号、逗号、空格分隔，最多可填写5个" /><div class="field-help"></div> </div> </div> </div> </div> </div> <!--营销设置--> <div class="content-guide"> <div class="guide-hd"> <h3 class="guide-tt">营销设置</h3> <div class="f-dropdown-tip"> <input type="checkbox" id="more_setting_toggle"> <label class="nor-link not-sel more_setting_toggle" for="more_setting_toggle"><span>展开</span><i class="icon-v icon-font i-v-bottom"></i></label> <div class="dropdown-container"> <div class="content-form"> <div class="mod-form__line flp-plf" style="display: none;"> <label class="mod-form__label"><i>关联免费课程</i>[<a target="_blank" href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=8" class="nor-link">?</a>]</label> <div class="mod-form__content mod-form__content-long"> <div class="diy-select-area select-qun"> <a id="pay-picker" href="javascript:;" class="diy-select diy-picker diy-picker-toggle" data-max="1"> <i class="text text-tip">请选择与本课程有关的免费课程，用于展示在本课程详情页上供学生体验</i> <span><i class="icon-font i-add diy-picker-icon"></i></span> </a> </div><div class="field-help"></div> </div> </div> <!-- 付费免费关联 free-link-pay --> <div class="flp-wrap" id="flp-wrap"></div> <!-- 付费免费关联 free-link-pay end --> <!-- 课程标签提示 --> <div class="mod-form__line course-level-tips__line"> <div class="mod-form__content"> <p>该类目暂无课程标签可添加</p> </div> </div> <!-- 课程等级 --> <div class="mod-form__line mod-form__radios-wrap course-level__line"> <label class="mod-form__label" for="cp_course_level">课程等级<span>[<a target="_blank" href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=8" class="nor-link">?</a>]</span></label> <div class="mod-form__content mod-course-level-wrap"> <div class="radios mod-course-level"></div> </div> </div> <!-- 关联资料 --> <div class="mod-form__line mod-related_course"> <label class="mod-form__label"><i>关联资料</i></label> <div class="mod-form__content mod-form__content-long"> <ul class="diy-select-related_files"> <li class="diy-select-area select-related_course"> <a href="javascript:;" id="cp_related_file" name="related_course" data-pattern="related_course" class="diy-select diy-picker diy-picker-toggle" data-max="5" data-picker="related_file"> <i class="text text-tip">请设置该课程的关联资料，将在该课程处提供下载</i><span><em class="diy-picker-title"><i class="icon-add">+</i>继续关联资料</em></span> </a> </li> </ul> <div class="field-help"></div> </div> </div> <!-- 关联推荐课程 --> <div class="mod-form__line mod-related_course"> <label class="mod-form__label"><i>关联推荐课程</i>',$.render.faq(),'</label> <div class="mod-form__content mod-form__content-long"> <ul class="diy-select-related_course"> <li class="diy-select-area select-related_course"> <a class="diy-select diy-picker diy-picker-toggle" id="cp_related_course" name="related_course" href="javascript:;" data-msg="请选择关联推荐课程" data-picker="related_course" data-max="5" > <i class="text text-tip">被关联的课程将获得更多曝光，更多推荐</i><span><em class="diy-picker-title"><i class="icon-add">+</i>添加课程</em></span> </a> </li> </ul> <div class="field-help"></div> </div> </div> </div> </div> </div> </div> </div> <!-- 课程类型 --> <!-- 干掉 <div class="mod-form__line mod-form__choose-card" style="display:none"> <label class="mod-form__label mod-form__label_top" for="cp_learn_type"><b>*</b><i>课程类型</i>',$.render.faq(),'</label> <div class="mod-form__content mod-learn-type"> <span href="javascript:;" class="btn-card on" data-value="1" id="learn_qgroup"> <i></i> <h3>普通课堂</h3> <p>上课工具：QQ客户端<br>课程的最高在线人数2000左右<br>老师与学生课堂中互动性要求高<br>上课时依赖PPT或屏幕分享</p> </span> <span href="javascript:;" class="btn-card" data-value="3" id="learn_qqlive"> <i></i> <h3>大型公开课',$.render.faq(),'</h3> <p>上课工具：腾讯视频<a class="nor-link" href="//ke.qq.com/docs/qqlive-20140609.doc">&nbsp;下载使用指引</a><br>预计课程报名人数500以上<br>老师愿意通过真人视频进行上课直播<br>只能使用屏幕分享授课</p> </span> </div> </div> --> <!-- 学习目标 --> <!-- 去除学习目标 <div class="mod-form__line mod-form__textarea-wrap"> <label class="mod-form__label" for="cp_goal">学习目标</label> <div class="mod-form__content mod-form__content-long"> <textarea class="f-textarea" name="goal" data-min="20" data-max="150" data-tips="请填写学习目标，20-150字" data-msg="学习目标不能为空" id="cp_goal" placeholder="请填写学习目标" ></textarea><div class="field-help"></div> </div> </div>--> <div class="f-item f-item--action-publish"> <div class="f-field publish-btn-wrap"> <a href="#step=3" class="btn-default btn-l btn-next-step">下一步</a> </div> </div> </div></div>'),_$out_.join("")}}});
/*!edu_modules/edu-message.simple/edu-message.simple*/
;define("edu_modules/edu-message.simple/edu-message.simple",function(e){var a=e("jquery");return function(e,i){if(e){i=i||{};var n="message-box-simple ";i.className&&(n+=i.className);var s=a('<div class="'+n+'">'+e+"</div>").hide();a(document.body).append(s),s.fadeIn(i.duration||100,function(){setTimeout(function(){s.fadeOut(i.duration||100,function(){s.remove()})},i.wait||2e3)})}}});
/*!agency/index/courseTag/mod.whiteList*/
;define("agency/index/courseTag/mod.whiteList",function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function u(){s.default.getCatalogBusinessConfig({succ:function(e){var t=e.result,n=void 0===t?{}:t,i=n.catalogs,u=void 0===i?[]:i;u.forEach(function(e){f[e.catId]=e})},err:function(){return!0}})}function d(e){var t=c.default.getInfoSync(),n=f[e]||{},i=n.errMsg,u=n.aidList,d=!f[e]||-1!==u.indexOf(t.aid);return{isValid:d,errMsg:i}}var a=e("jquery"),o=(i(a),e("edu_modules/edu-db/edu-db")),s=i(o),r=e("edu_modules/edu-agency/index"),c=i(r),f={};s.default.extend({getCatalogBusinessConfig:s.default.httpMethod({url:"//sas.qq.com/cgi-bin/ke_platform_catalogBusinessConfig",dataType:"jsonp",noNeedLogin:!0})}),n.exports={init:u,validate:d}});
/*!agency/index/courseTag/mod.main*/
;define("agency/index/courseTag/mod.main",function(e){{var a=e("jquery"),t=e("edu_modules/edu-db/edu-db");e("edu_modules/edu-report/edu-report")}e("edu_modules/edu-base/edu-base");var i=e("edu_modules/edu-agency/index"),l=e("edu_modules/validator/validator"),r=(e("edu_modules/edu-message.simple/edu-message.simple"),e("@tencent/im-cache/cache")),s=e("user/info"),n=e("agency/publish/common/_pd"),o=e("agency/index/courseTag/mod.whiteList"),d=10,c={},u=null,g=!1,v={},p={},f=null,h=3,m={allowModifyIndustry1st:!1};t.extend({catgoryList:t.httpMethod({url:"/cgi-bin/pubAccount/catgoryList",type:"GET"})});var _,y=function(){return a._toArray(s._industry1_all)},b=function(e){e.tag1=e.tag1||e.industry1||e.mt||e.industry_1st,e.tag2=e.tag2||e.industry2||e.st||e.industry_2nd,e.tag3=e.tag3||e.industry3||e.tt||e.industry_3rd},x=function(e){return a.extend(e||{},{isPersonal:i.getInfoSync().isPersonal})},C=function(){a(".mod-course-level").empty(),a(".mod-course-label").empty(),a(".course-level__line, .course-label__line").hide()},k=function(e,a){return'<div class="radio'+(a?" radio-check":"")+'" data-value="'+e.id+'"><i></i><label><a href="javascript:;" title="'+e.name+'">'+strEllipsis.substring(e.name,84,1)+"</a></label></div>"},A=function(e,t,i){i=i||d;var l=[];if(a.isArray(e)){e=e.slice(0,i).reverse();{e.length-1}a.each(e,function(e,a){var i=t===a.id;l.unshift(k(a,i))})}return l.join("")},I=!0,L=function(){var e=n&&n.result&&n.result.category_label;return I&&e?(e.forEach(function(e){a(".diy-optgroud .js-diy-operation[data-value="+e+"]").click()}),void(I=!1)):void(I=!1)},P=function(e,a){var t=document.createElement("div"),i=document.createElement("div");t.className+=" diy-select-area",i.className+=" diy-select",i.style.overflow="visible",i.setAttribute("data-name",a);var l=f[a]||0,r='<i class="text">请选择标签,最多'+l+"个</i><span><b></b></span>";return i.innerHTML=r+e,t.appendChild(i),t.outerHTML},S=function(e){var a=[];a.push('<ul class="diy-optgroud">');for(var t=0,i=e.length;i>t;t++){var l=e[t];a.push(w(l.name,l.id))}return a.push("</ul>"),a.join("")},w=function(e,a){return'<li class="diy-option"><a class="js-diy-operation"  data-name="'+e+'" data-value="'+a+'" href="javascript:;"><label class="checkbox"><i></i></label>'+e+"</a></li>"},T=function(){var e=a(".mod-course-labels-lock-tips"),t=a(".mod-course-labels .diy-select");t.addClass("disabled"),t.attr("disabled",!0),e.show()},j=function(e){return a("#cp_tag"+e+" .text").data("value")},D=function(e){e=e||{};var l=i.getInfoSync();if(l.aid){_||(_=n&&n.result&&n.result.category_label_state);var r={aid:l.aid,tag1:e.tag1||j(1),tag2:e.tag2||j(2),tag3:e.tag3||j(3)};r.tag1&&r.tag2&&r.tag3&&(_!==h||I)&&t.get_course_label({param:r,succ:function(t){var i=t&&t.result||{};i.level_list=i.level_list||[],i.category_list=i.category_list||[],f=i.max_choose||{},i.need_label?a("#requiredCourseTag").show():a("#requiredCourseTag").hide();var l;v={},p={},a(i.category_list).each(function(e,a){l=a.category_type,v[l]||(v[l]=[]),v[l].push(a)});var r=null,s=a(".mod-course-labels-wrap").empty(),n=document.createDocumentFragment();a.isArray(i.category_list)&&(a.each(v,function(e){p[e]=[],r=a('<div class="mod-form__line-copy"><label class="mod-form__label cate-label">'+e+'</label><div class="mod-course-labels">'+P(S(v[e]),e)+"</div></div>"),r.appendTo(n)}),s.append(n)),L(),_===h&&T();var o=e.level_label,d=(a(".mod-course-level").html(A(i.level_list,o)),i.level_list.length>0),c=i.category_list.length>0;a(".course-level__line")[d?"show":"hide"](),a(".course-label__line")[c?"show":"hide"](),a.Dialog.updatePosition&&a.Dialog.updatePosition()}})}},E={DEFAULT:function(){var e=j(1);if(!e)return l.msg="请选择分类",!1;var t=j(2);if(!t)return l.msg="请选择二级分类",!1;var i=o.validate(t);if(g&&!i.isValid)return l.msg=i.errMsg||"您没有发布该二级分类的权限",!1;var r=j(3);if(!r&&!a(".tmpl-tag3").hasClass("nodata"))return l.msg="请选择三级分类",!1;var s=o.validate(r);if(g&&!s.isValid)return l.msg=s.errMsg||"您没有发布该三级分类的权限",!1;var d=n.page_status&&n.page_status===n.COURSE_MODIFY&&-1===y().indexOf(e);if(d){var c=a._toArray(a("#cp_tag1").data("oldVal"));if(c[0]!==e||c[1]!==t||c[2]!==r)return l.msg="仅支持发布已确认的主副营类目课程，或保持现有类目",!1}return!l.isAll&&D(),!0},PUBLISH_PACKS:function(){var e=j(1);if(!e)return l.msg="请选择分类",!1;var t=n.page_status&&n.page_status===n.COURSE_MODIFY&&-1===y().indexOf(e);if(t){var i=a._toArray(a("#cp_tag1").data("oldVal"));if(i[0]!==e)return l.msg="仅支持发布已确认的主副营类目课程，或保持现有类目",!1}return!l.isAll&&D(),!0}},O=function(e){var a=E[e]||E.DEFAULT;l.extend("tag",a)},U=function(e,a,t){for(var i in e){a.push(i);var l=e[i];t[i]={name:l.n,child:[]},(l.s||l.t)&&U(l.s||l.t,t[i].child,t),0===t[i].child.length&&delete t[i].child}},M=function(e,a){return'<li class="diy-option" data-value="'+a+'"><a href="javascript:;">'+e+"</a></li>"},H=function(e,a){if(0>a)return e.hide();var t=[],i=n.tag,l=y(),r=(0===a?0===l.length?i.child:l:i[a].child)||[];if(0===r.length)return e.addClass("nodata").hide();t.push('<ul class="diy-optgroud">');for(var s=0,o=r.length;o>s;s++){var d=r[s];i[d]&&t.push(M(i[d].name,d))}t.push("</ul>"),e.children(".diy-select").html('<i class="text text-tip">请选择分类</i><span><b></b></span>'),e.children(".diy-optgroud").remove(),e.append(t.join("")),e.removeClass("nodata").show()},F=function(e,i){var l=a(".tmpl-tag1"),r=a(".tmpl-tag2"),s=a(".tmpl-tag3"),o=a("#cp_tag1"),d=function(){H(l,0);var t=n.result||e&&c[e],r=y();if(t){b(t);var s=(n.page_status&&n.page_status===n.COURSE_MODIFY||e)&&-1===r.indexOf(t.tag1);if(s){var d=n.tag[t.tag1];d&&l.find(".diy-optgroud").prepend(M(d.name,t.tag1))}if(o.data("oldVal",[t.tag1,t.tag2,t.tag3]),t.tag1){var u=a(".tmpl-tag1 li[data-value="+t.tag1+"]");u.length&&(u.trigger("init"),i&&i.allowModifyIndustry1st||l.find(".diy-select").addClass("disabled").attr("disabled",!0))}else 1===r.length&&a(".tmpl-tag1 li[data-value="+r[0]+"]").trigger("init");t.tag2&&a(".tmpl-tag2 li[data-value="+t.tag2+"]").trigger("init"),t.tag3&&a(".tmpl-tag3 li[data-value="+t.tag3+"]").trigger("init"),D(t)}var g=r[0];n.page_status&&n.page_status===n.COURSE_PUBLISH&&g&&(t||{}).tag1!==g&&a(".tmpl-tag1 li[data-value="+g+"]").trigger("click")};n.tag?d():t.catgoryList({succ:function(e){e=((e||{}).result||{}).catgoryList||{};var a=n.tag={child:[]};U(e,a.child,a),x().isPersonal&&a[1006]&&a[1006].child&&a[1006].child.splice(0,1),d()}}),l.add(r).add(s).click(function(e){e.preventDefault(),o.closest(".mod-form__line").removeClass("g-err g-succ g-info")})},B=function(){var e="radio-check";a(document).on("click init",".mod-course-level .radio",function(t){t.preventDefault();var i=a(this);"click"===t.type&&i.hasClass("disabled")||i.toggleClass(e).siblings(".radio").removeClass(e)})},V=function(e,t,i){var l=e[t],r=[];l=a.isArray(l)?l:[l],a.each(l,function(e,a){var t=(a||{}).id;t?r.push(t):/^\d+$/.test(a)&&r.push(a)}),e[t]=i?r[0]:r},q=function(e){var t="industry";e[t+1]=j(1),e[t+2]=j(2),e[t+3]=j(3);var i=parseInt(a(".mod-course-level .radio-check:eq(0)").data("value"),10)||"";i&&(e.level_label=i);var l=[];return a(".mod-course-labels-wrap .checkbox-check").each(function(){var e=a(this),t=parseInt(e.data("value"),10)||0;t&&l.push(t)}),e.category_label=l,e},R=function(e,a){var t=e.indexOf(a);t>-1&&e.splice(t,1)},K=function(e){a(document).on("change:tag1 change:tag2 change:tag3",function(t,i,r,s,o,d){var c=a(".tmpl-tag1"),u=a(".tmpl-tag2"),v=a(".tmpl-tag3"),p=a("#cp_tag1");if(n.tag){var f=parseInt(t.type.toString().replace(/[^123]/g,"").charAt(0),10)||1;switch(f){case 3:"init"!==d&&l.validate(c);break;case 2:H(v,r),C(),"init"!==d&&(v.hasClass("nodata")?l.validate(c):(l.msg="请选择三级分类",l.setTips(p),g&&l.validate(c)));break;default:if("PUBLISH_PACKS"===e){l.validate(c);break}H(u,r),H(v,-1),C(),"init"!==d&&(l.msg="请选择二级分类",l.setTips(p))}}}).on("change:tag",function(){var e=a(".tmpl-tag1");l.validate(e)}).on("click",".js-diy-operation",function(e){e.stopPropagation();var t=a(this),i=t.parents(".diy-select"),l=i.find(".text"),r=t.hasClass("checkbox-check"),s=i.data("name"),n=t.data("name"),o=p[s],d=o.length,c=f[s]||0;if(r)t.removeClass("checkbox-check"),R(o,n);else{if(d>=c)return void a.modal.error("本属性只允许选择"+c+"个标签。");t.addClass("checkbox-check"),o.push(n)}var u=o.join(",")||"请选择标签,最多"+c+"个";l.text(u)})},Y=function(e){g=!0;var a=n.result;a&&(b(a),V(a,"level_label",!0),V(a,"category_label")),F(0,e),o.init()},N=function(e,t){n=n||{},t=a.extend({},m,t),r.set("courses_map",c),n.result=n.result||(r.get("_PD")||{}).result||{},s.getAgencyInfo&&s.getAgencyInfo(function(){switch(u=r.get("agency_info"),e){case"PUBLISH":case"PUBLISH_PACKS":Y(t)}B(),K(e),O(e)})};return{init:N,getTLL:q}});
/*!agency/index/dataManagement/db*/
;define("agency/index/dataManagement/db",function(e){var i=e("agency/index/db"),n=null,t=function(e,i){return{param:e,isUseModal:!0,succ:function(e){e=e||{},e.result=e.result||{},i(null,e.result)},err:function(e){var n=i.call(this,e);return"undefined"==typeof n?!0:n}}};return{init:function(e){return n=e,this},addFile:function(e,a){i.fileAdd(t({aid:n,cw_fsize:e.fileSize,cw_title:e.fileName,cw_uploader:$.cookie.uin(),path:e.path},a))},coursesToFileBindRelation:function(e,a,l){a=a||[],i.coursesToFileBindRelation(t({aid:n,cw_id:e,cid_arr:"["+a.join(",")+"]"},l))},deleteFile:function(e,a){i.fileDelete(t({aid:n,cw_id:e},a))},downloadFile:function(e,n){i.fileDownload(t({downloader:$.cookie.uin(),fid:e},n))},filesToCourseBindsRelation:function(e,a,l){i.filesToCourseBindsRelation(t({aid:n,cid:e,cwid_arr:"["+a.join(",")+"]"},l))},getBindedFiles:function(e,a){i.getBindedFiles(t({aid:n,cid:e,count:1e3,page:1},a))},getFileList:function(e,a){var l={aid:n,page:e.page,filter_key:e.filter_key||"",count:e.pageNum||20,_flag:e.isTask?"task":"",only_owner:e.only_owner||0};e.type&&(l=$.extend(l,{type:e.type})),i.getFileList(t(l,function(i,n){if(n=n||{},n.cw_arr=n.cw_arr||[],n.total_cnt=n.total_cnt||0,e.over50filter){for(var t=[],l=0,o=n.cw_arr.length;o>l;l++){var d=n.cw_arr[l];d.course_arr&&d.course_arr.length>=50||t.push(d)}n.cw_arr=t}a(i,n)}))},getDownloadAddress:function(e,a){i.getDownloadAddress(t({aid:n,filename:e},a))},getUploadAddress:function(e,n){i.getUploadAddress(t({file_exist_option:0,file_md5:"",file_sha:"",file_size:100,filename:e,upload_type:0},n))},uploadFile:function(e,n){i.fileUpload(t({filename:e},n))},getCourseList:function(e,a){i.get_agency_course_list(t({aid:n,end_flag:1,page:e.page,pay_flag:0,live_flag:0,ios_flag:0,count:e.pageNum||20,state_flag:1,name_filter:e.keyword||"",bindFiles_flag:1},function(e,i){i=i||{},i.items=i.items||[];for(var n=[],t=0,l=i.items.length;l>t;t++){var o=i.items[t];(!o.bindedFileNum||o.bindedFileNum<50)&&n.push(o)}i.items=n,a(e,i)}))},getSign:function(e,n){i.getSign(t({},n))}}});
/*!common/pushSite*/
;define("common/pushSite",function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=v.default.uin();if(-1===h.indexOf(""+t)){"string"==typeof e&&(e=[e]);var n=e.reduce(function(e,t){var n=o(t),u=n.origin,i=e[u]||[];return i.length?i.push(t):e[u]=[t],e},{});a.default(n).forEach(function(e){if(-1!==y.indexOf(e)){var t=n[e];f.default.ajax({url:j+"&site="+e,type:"POST",contentType:"text/plain",data:t.join("\n")})}})}}function o(e){var t=document.createElement("a");return t.href=e,t}var r=e("babel-runtime/core-js/object/keys"),a=u(r),d=e("babel-runtime/core-js/json/stringify"),c=u(d),l=e("jquery"),f=u(l),s=e("edu_modules/edu-db/edu-db"),p=u(s),m=e("edu_modules/edu-agency/index"),_=u(m),g=e("edu_modules/util.cookie/util.cookie"),v=u(g),h=[],y=["https://ke.qq.com","https://m.ke.qq.com"],b="uYiWos9FDivCoMK4",j="http://data.zz.baidu.com/urls?token="+b;_.default.getInfo().then(function(e){p.default.httpMethod({url:"/cgi-agency/crm/general_access?aid="+e.aid,type:"POST"})({param:{general_options:c.default({source_id:91,req_select_body:{fields:["uin"],filter:[{field:"aid",op:6,value:""+e.aid},{field:"del_flag",op:1,value:"0"}],start_page:0,page_size:1e4}})},succ:function(e){var t=e.result,n=void 0===t?{}:t,u=n.rsp_select_body,i=void 0===u?{}:u,o=i.row,r=void 0===o?[]:o;h=r.map(function(e){return e[0]})},err:function(){return!0}})}),n.exports=i});
/*!agency/publish/common/retcode*/
;define("agency/publish/common/retcode",function(e){var n=e("jquery"),r=(e("@tencent/im-cache/cache"),' <a class="nor-link" href="mailto:800082734@b.qq.com">800082734@b.qq.com</a>'),a='<a class="nor-link" href="/agency/billing/index.html" target="_blank">点此签约</a>';return function(e,i,t){"number"==typeof e&&(e={retcode:e}),e=e||{},"function"==typeof i&&i();var o={501:"课程信息中含有特殊字符，请修改后提交",101404:"该课程已被删除，请确认后操作",101400:"课程关联的资料不存在",101401:"课程开课时间不能大于当前日期的两个月",102401:"还有未完善的记录信息，暂时不能发布课程",102406:"机构被限制不能发布课程",106509:"发布课程需关联至少一个群，请绑定后继续发布课程",106417:"发布课程需关联至少一个老师，请绑定后继续发布课程",106422:"提交的修改请求中修改了不允许修改的字段|reload",106429:"请不要发布重复的课程",106412:"请设置收费课程期次的价格",106413:"免费课程价格不能大于0",106441:"课程开始时间需大于当前时间，请确认后提交",106442:"课程信息中有敏感信息，请删除后提交",106443:"该课程是付费课程且已有人报, 课程名称不可以修改",106455:"课程名称中有特殊符号，请删除后提交",106456:"您输入的咨询QQ不存在，请修改后提交",103404:"输入过程中选择了未关联的老师，请刷新后重新选择老师",106460:"该课程已有人报名，收费类型暂不支持修改",106464:"输入过程中选择了未关联的群，请刷新后重新选择群",110405:"没有管理权限，请确认登录的QQ为管理员，确认后刷新页面重试|reload",106454:"课程详情中请勿包含非腾讯页面链接，请修改后提交",106481:"每节课程下暂时只支持添加10个任务，请确认后提交",106485:"期次学习截止日期需大于当前时间，请修改后提交",106488:"期次招生截止日期需大于当前时间，请修改后提交",106493:"直播任务开始时间需大于当前时间，请修改后提交",106605:"付费课程修改次数超出限制： 该课程的修改次数已经使用完，暂不支持修改",106609:"修改付费方式的3个限制：有人报名的付费课程不允许修改付费方式",106612:"修改付费方式的3个限制：有人报名的付费课程不允许修改付费方式",106616:"修改付费方式的3个限制：有人报名的付费课程不允许修改付费方式",106618:"用户已购买，暂不支持删除或修改",106619:"用户已购买，暂不支持删除或修改",106628:"课程目录的修改内容审核时，不支持增加期次，审核通过后，可正常添加期次",107015:"请发布主营或副营类目以内的课程，非注册主营或副营类目的课程暂不支持发布",107041:"关联的视频已被删除，请修改后提交",106635:"期次完成时间比开始时间早，请修改后提交",106636:"添加期次失败，请刷新后重试",106637:"任务的起止时间不正确，请修改后提交",106638:"直播任务的时间不能够重叠，请修改后提交",106639:"期次删除失败",106640:"期次基本信息修改失败",106641:"添加期次失败",106642:"免费课节数需少于30节，付费课需少于250节，请确认后提交",106643:"添加试题任务关系失败",106644:"添加资料任务关系失败",106645:"添加章失败",106646:"任务类型不能修改",106647:"直播任务的开始时间需确保为逐渐增大的时间，请确认后提交",106622:"免费录播开课不允许修改付费方式 ",106623:"已经有人观看的录播课程不允许修改付费类型",106624:"付费课不能转换为免费课--后台",106625:"免费课不能转换为付费课--后台",106626:"录播课不能修改或者减少子课时--后台",106627:"图片分辨率过大，请调整后提交",106629:"报名名额的限制为[1-20000]的整数值，请确认后提交",106630:"该课程已设置任意学价格，因此不支持对单个期次进行名额限制。若仍需限制期次名额，请先取消任意学设置",106631:"期次限额为1到1000之间的整数值，请确认后提交",106633:"期次限额需大于当前课程已报名人数，请确认后提交",106649:"任意学价格需为单个期次价格的120%以上，请调整任意学或者期次价格，确认后提交",106656:"课程名称长度不符，请填写30个字以内的名称，修改后提交",106657:"课程简介长度不符，请填写30个字以内的简介，修改后提交",106658:"期次名称长度不符，请填写3-8个字的名称，修改后提交",106659:"期次描述长度不符，请填写5-30个字的描述，修改后提交",106660:"章名称长度不符，请填写20字以内的名称，修改后提交",106661:"章描述长度不符，请填写30字以内的名称，修改后提交",106662:"节名称长度不符，请填写20字以内的名称，修改后提交",106663:"任务名称长度不符，请填写20字以内的名称，修改后提交",106664:"老师有话说长度不符，请填写5-30字的描述，修改后提交",106665:"修改期次价格失败",106667:"期次价格和期次数目不匹配，请刷新页面后重试",106675:"期次不存在",106676:"添加非注册类目",106677:"没有签订ios收益协议",106678:"ios课程标识不能去除",106679:"批量修改的课程过多",106668:"课程章已被删除，请刷新页面后重试",106669:"关联的视频不存在",106680:"任务视频关系不存在",106682:"有人报名，任意学不能取消",106683:"循环任务存在相同开始时间",106684:"DB写入系列课失败(服务器错误)",106685:"TMEM写入系列课失败（服务器错误）",106686:"pb序列化失败（服务器错误）",106687:"pb解析失败（服务器错误）",106688:"获取系列课失败",106689:"期次已经在系列课",106690:"db操作失败（服务器错误）",106691:"cmem设置失败（服务器错误）",106692:"课程已经在系列课",106693:"系列课中有无效的课程",106694:"系列课价格为0",106695:"系列课截止时间不对",106696:"修改系列课期次失败",106697:"系列课不支持循环期次",106698:"循环任务存在时间交叉",106699:"删除期次老师关系失败",106700:"系列课不支持任意学期次",106701:"课程已经在系列课",106702:"校验系列课课程失败",106703:"系列课已有报名用户，不可以删除",106704:"任务已经结束则无法修改",106705:"非增值任务无法修改任务名",106706:"增值任务数量超过最大限制",106707:"一个系列课一门课程只能一个期次",106708:"不支持小班",106709:"只能添加付费课",106710:"当前系列课版本不支持修改",106711:"24小时无法再次修改",106712:"发布后24小时内无法删除",106713:"系列课已被删",106714:"系列课已被下架",106715:"不允许修改学习截止日期",107016:"贵机构每周新增的课程数量已达上限，特殊申请请邮件"+r,107017:"暂时只支持最多 250 节课程，请确认后提交",107018:"贵机构上周违规行为扣分已达上限，本周新增期次将受限，申诉请联系"+r,107019:"贵机构支持同时开设课程已达上限，努力升级获得更多课程开设特权吧！",107027:"机构未签署收益协议",107028:"机构收益协议未审核通过",108100:"上传的期次班主任不能为空",108101:"上传的期次学习截止日期不能为空",106490:"报名截止日期必须小于等于最后一个直播任务的结束时间，请修改后提交",106491:"期次学习截止日期必须等于最后一个直播任务的结束时间，请修改后提交",206491:"学习有效期需大于等于最后一节课的结束时间，请修改后提交",106492:"期次老师或助教大于10个，请修改后提交",108210:"未签订新的《<腾讯课堂课程发布者注册协议>之收益补充协议》，请联系机构主"+a,108212:"签订的《<腾讯课堂课程发布者注册协议>之收益补充协议》正在审核中，请审核通过后再发布付费课程",108213:"签订的《<腾讯课堂课程发布者注册协议>之收益补充协议》审核未通过，请联系机构主重新"+a,108300:"设置了报名有效期的课程暂不支持调整为统一报名截止课程",108301:"根据有关部门规定，期次学习截止日期需为该期次上架日期起五年内，请修改后提交",108302:"设置期次有效期的课程暂不支持设置任意学",108303:"设置任意学的课程暂不支持设置有效期",108304:"开通任意学的课程，不支持将学习方式设为“报名后固定时长可学”",108305:"有人付费报名的期次暂不支持删除，请与学生协商退款后再进行操作",107048:"课程的上课老师绑定失败",106651:"期次特色任务不能超过 5 个",108515:"企业培训课，不支持将学习方式设为“报名后固定时长可学”",108700:"你修改了一个已经被删除的节，请刷新后重试|reload",108701:"你修改了一个已经被删除的任务，请刷新后重试|reload",108202:"模板导入任务类型不合法",108203:"模板导入录播任务任务视频ID不合法",109500:"课程关联理由字数不合法",109501:"课程关联特色分类数目不合法",109502:"课程关联特色分类长度不合法",109503:"课程关联具体特色数目不合法",109504:"课程关联具体特色长度不合法",106494:"付费课课程安排/新建期次最多可以是7个任务",2265:"本课程内容已被打包进系列课，暂不支持删除。若需要删除，请先到“销售管理-课程销售-系列课打包”删除对应的系列课",2266:"获取课程相关系列课信息失败，请稍后重试",2281:"非增值任务无法修改任务名",3009:"该课程存在多期目录或价格不一致，不支持修改本期招生截止时间",2053:"视频不可以关联超过50个任务",2300:"每月班级修改次数已经用完",2283:"当前直播任务已经开始，不支持修改直播时间",3031:"由于该课程在预售期间，修改后价格不得低于原价的30%",2310:"标签锁定状态不能修改",3033:"修改价格不能低于已有团课价格",3034:"本课程存在已成团或者待成团的团课，暂不支持删除",last:null},c=o[e.retcode]||e.msg;if(c){var l=c.split("|");if(t){var d=t.find(".guide--class--edit");if(d.length){var s=null;switch(e.retcode){case 106490:s=t.find("[name=sign_endtime]");break;case 106491:case 206491:s=t.find("[name=endtime]")}if(s)return n.event.trigger("retcode:error",[s,c.split("，")[0]]),!0}}return n._alert(l[0],"reload"===l[1]?function(){location.reload()}:n.noop)}}});
/*!agency/publish/step4/preview*/
;define("agency/publish/step4/preview",function(){var e=function(){$(document).on("click",".preview-iframe .close",function(){$(this).closest(".preview-iframe").remove(),$("body").removeClass("OVERFLOW_HIDDEN"),$(".modal-bg").hide()})},i=function(e){var i=$.bom.query("iframe_preview");if(i){var a=$("body");$(".modal-bg").length||a.append('<div class="modal-bg hide"></div>'),$(".modal-bg").show(),a.addClass("OVERFLOW_HIDDEN").append('<div class="preview-iframe"><div class="iframe"><a href="javascript:;" class="close">×</a><iframe src="'+e+'"></iframe></div></div>')}else window.open(e,"_blank")};return e(),{open:i}});
/*!agency/publish/common/submit*/
;define("agency/publish/common/submit",function(e){function r(e){var r={3031:"由于该课程在预售期间，课程价格修改不得低于${price}元。"};switch(e.retcode){case 3031:var t=r[e.retcode],o=(e.deduction_price/30).toFixed(2);t=t.replace("${price}",o),c.Dialog.alert(t)}}var t=e("edu_modules/edu-db/edu-db"),o=e("edu_modules/modal/modal"),c=e("jquery"),n=(e("@tencent/im-cache/cache"),e("common/pushSite")),i=e("edu_modules/edu-message.simple/edu-message.simple"),a=e("edu_modules/local.data/local.data"),d=e("agency/publish/common/state"),s=e("agency/publish/common/retcode"),u=e("agency/publish/step4/preview"),l=e("edu_modules/edu-report/edu-report"),m=e("edu_modules/edu-agency/index"),f=83,p=("undefined"==typeof window.isDebug?!1:window.isDebug,e("agency/publish/common/_pd")),_=!1,h=(new Date).getTime(),g=function(e,r){return Object.prototype.toString.call(e)==="[object "+r+"]"},y=function(e,r){var t={};r||(p=p||{},t.cid=p.cid,t.aid=m.getInfoSync().aid,t.random=Math.random());for(var o in e)if(/^_tmp/.test(o))delete e[o];else{var n=e[o];g(n,"Object")&&(n=y(n,!0)),g(n,"Array")&&c.each(n,function(e,r){r=y(r,!0)});try{t[o]=c.trim("string"==typeof n?n:JSON.stringify(n)),"name"===o&&/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g.test(t[o])&&Badjs("特殊转义字符提交"+JSON.stringify(e),location.href,0,2715524,2)}catch(i){}}return t},v=function(e,o,i){if(!((new Date).getTime()-h<500)){p=p||{},"b"===p.cmd&&(e.mod_price=p.result.price===e.price?0:1),e.passcard&&(e.passcard_price=e.mod_price&&"b"===p.cmd||"c"===p.cmd?e.price:e.passcard_price),i=i||0;var a=y(c.extend(!0,{},e)),m=null;o||(m=c._loading("正在提交..."));var f=function(){m&&m.remove()},g=function(e){return _=!1,h=(new Date).getTime(),o?null:"b"===p.cmd?Badjs("修改课程描述失败, errorCode: "+e.ec+", param:"+JSON.stringify(a),location.href,0,2465483,2):"p"===p.cmd?Badjs("修改课程安排失败, errorCode: "+e.ec+", param:"+JSON.stringify(a),location.href,0,2465485,2):"n"===p.cmd?Badjs("新建期次失败, errorCode: "+e.ec+", param:"+JSON.stringify(a),location.href,0,2603515,2):106442===e.ec?Badjs("发布课程失败(新建/敏感词), errorCode: "+e.ec+", param:"+JSON.stringify(a),location.href,0,2713660,2):Badjs("发布课程失败(新建), errorCode: "+e.ec+", param:"+JSON.stringify(a),location.href,0,2465481,2),s&&s(e,f)},v=a.cover_url;v&&(/http/.test(v)||(a.cover_url="http:"+a.cover_url)),!_&&(_=!0)?t[o?"preview_mix_course":"b"===p.cmd?"modify_mix_course_basic":"p"===p.cmd?"modify_mix_course_terms":"m"===p.cmd||"n"===p.cmd?"modify_term_plan":(delete a.cid,"publish_mix_course")]({param:a,succ:function(t){if(f(),t=t||{},t.result=t.result||{},t.result.retcode)return void r(t.result);if(o){var s=["/course/",a.cid||0,"?_view_type=",i,"&preview=1",t.result.cid?"&tmp_cid="+t.result.cid:""].join("");u.open(s)}else{"b"===p.cmd?Badjs("修改课程描述成功",location.href,0,2465482,2):"p"===p.cmd?Badjs("修改课程安排成功",location.href,0,2465484,2):"n"===p.cmd?Badjs("新建期次成功",location.href,0,2603516,2):Badjs("发布课程成功(新建)",location.href,0,2465353,2),J(),x();var m=(c._alert(d.is_modify()&&p.WITHOUT_VERIFY?"修改成功"+c.render.cdkey_manager("link"):"课程已提交审核，审核将在1-2个工作日内完成！",function(){location.href="p"===p.cmd?"//ke.qq.com/agency/index/index.html#tab=course_admin#plan":"//ke.qq.com/agency/index/index.html#tab=course_admin#admin"},{icon:"success"}),0);if(e.terms&&c.each(e.terms,function(e,r){c.isArray(r.chapter_info)&&c.each(r.chapter_info,function(e,r){c.isArray(r.sub_info)&&c.each(r.sub_info,function(e,r){c.isArray(r.task_info)&&c.each(r.task_info,function(e,r){"0"!==r.taid||2!==r.restrict_flag&&4!==r.restrict_flag||(m+=1)})})})}),m&&l.tdw({module:"Release-course",action:"ObjectSuccess",obj1:a.aid,obj2:a.cid,ver1:m}),!p.cmd||"c"===p.cmd){var g=t.result.cid;n([window.location.protocol+"//ke.qq.com/course/"+g,window.location.protocol+"//m.ke.qq.com/courseDetail.html?course_id="+g])}}_=!1,h=(new Date).getTime()},err:g}):c._alert("请勿重复提交")}},b=function(e,r){v(e,!0,r)},j=function(){var e=location.search,r=m.getInfoSync().aid||"",t=["course_draft",r,e].join("_");return t},w=0,B=3e4,S=!1,O=!1,D=function(){S=!0,w&&J(),w=setInterval(function(){!T()&&J()},B),k.open()},J=function(){S=!1,w&&(clearInterval(w),w=0),k.cancel()},x=function(){var e=j();a.remove(e)},k={event:function(e){e.ctrlKey&&e.which===f&&(e.preventDefault(),T())},open:function(){c(document).on("keydown",this.event)},cancel:function(){c(document).off("keydown",this.event)}},q=function(){J(),o.alert("保存至草稿箱失败，请清空缓存后再试！")},R=function(){var e=j();try{var r=a.get(e);return r&&"undefined"==typeof r.payid&&(r.payid=1),r&&(r=JSON.parse(r),Badjs("草稿读取localstorage成功",location.href,0,2655540,2)),r}catch(t){return Badjs("草稿读取localstorage失败",location.href,0,2655536,2),"undefined"!=typeof BJ_REPORT&&BJ_REPORT.report("Publish Draft Get Error"),q(),null}},T=function(){var e=j();p=p||{},c("#publish_steps .publish-step"+p.step).trigger("onDraftSave");try{a.set(e,JSON.stringify(c.extend(!0,{},p.data||{}))),i("草稿保存成功!"),Badjs("草稿写入localstorage成功",location.href,0,2655539,2)}catch(r){return Badjs("草稿写入localstorage失败",location.href,0,2654146,2),"undefined"!=typeof BJ_REPORT&&BJ_REPORT.report("Publish Draft Set Error"),q(),!1}return!0};return{getDraft:R,saveDraft:T,startAutoSave:D,isLoadFromDraft:O,clearDraft:x,stopSave:J,commit:v,preview:b}});
/*!agency/publish/step2/step2.flp.report*/
;define("agency/publish/step2/step2.flp.report",function(e,t,r){var o=e("jquery"),n=o(document),u="report.flp",i=e("edu_modules/edu-report/edu-report");r.exports={init:function(e){n.on(u,function(t,r,o){r&&setTimeout(function(){var t={module:"course",action:r,ver1:e||0};o&&(t.ver2=o),i.tdw(t,!0)},0)})},trigger:function(e,t){n.trigger(u,[e,t])}}});
/*!agency/publish/step2/step2.flp*/
;define("agency/publish/step2/step2.flp",function(e,t,a){var i=e("jquery"),n={cover_url:"//9.url.cn/edu/mobilev2/img/default-img_af8b7ee.png",name:"&nbsp;",from_course_id:0,to_course_id:0,category_descs:[],from_items:[{desc:"",face:0}],to_items:[{desc:"",face:1}],reason:""},r=e("agency/publish/step2/step2.flp.report"),c=(e("@tencent/im-cache/cache"),e("edu_modules/edu-db/edu-db")),s=e("edu_modules/edu-agency/index"),u=e("agency/publish/common/_pd");e("edu_modules/jquery.picker/jquery.picker"),e("@tencent/im-jquery.placeholder/jquery.placeholder");var o=a.exports={init:function(e){var t,a,c;o.validator=e,a=o._PD=u||{},t=a.data,!a.cid||"b"!==a.cmd&&"c"!==a.cmd||(t=a.result,c=t.relationships&&t.relationships[0],c&&i.extend(t,c)),o.fillData=i.extend(!0,{},n,t||{}),r.init(s.getInfoSync().aid),o._getCourse(),1===i(".mod-feeType .radio-check").data("value")&&i(".free-relate-pay").show()},_init:function(){{var e;o._PD}if(o.$control=i("#flp-control"),o.$newPayBox=i(".select-paycourse"),o.$newAdd=o.$newPayBox.find("#new_pay_picker"),o.$addFeature=e=i("#feature_list_add"),"b"===u.cmd){var t=o.$addFeature.siblings(".feature_ct"),a=t.find("input").length,n=[];o.fillData.to_items.forEach(function(e){5>a&&n.push('<div class="input_ct"><input class="input-text" type="text" value="'+e.desc+'" maxlength="11" /><i class="icon-close">×</i></div>'),a++,a>=5&&o.$addFeature.hide()}),t.append(n.join(""))}this._events(),o._payPicker()},_getCourse:function(){u.initCourses(function(){o._PD.coursesPay=o._PD.coursesPay||[],o._PD.coursesFree=o._PD.coursesFree||[];var e=o._PD.courses;e.forEach(function(e){var t=o._PD.courses_map[e.key]||{},a=t._;a&&(a.price&&a.price>0?o._PD.coursesPay.push(t):o._PD.coursesFree.push(t))}),o._PD.coursesPay&&o._PD.coursesPay.length&&o._init(),o._initPayToFree()})},_events:function(){o.$addFeature.on("click",function(){var e=o.$addFeature.siblings(".feature_ct"),t=e.find("input").length;5>t&&(e.append('<div class="input_ct"><input class="input-text" type="text" value="" maxlength="11" /><i class="icon-close">×</i></div>'),e.find("input:last").focus()),t++,t>=5&&o.$addFeature.hide()}),i(".feature__list").on("click",".icon-close",function(){i(this).parent().remove();var e=o.$addFeature.siblings(".feature_ct"),t=e.find("input").length;5>t&&o.$addFeature.show()})},_payPicker:function(){var e=o.fillData.to_course_id;o.$newAdd.data("max",1).data("value",[e]).picker({unit:"门",title:"课程",warning:"最多关联1门课程",getData:function(){var e=[];return o._PD.coursesPay.forEach(function(t){t._&&t._.category_label&&t._.category_label.length>0&&e.push(t)}),e},onSave:function(e,t){o._addPay(t[0])}}),e&&1===o.fillData.payid&&o._addPay(e)},_isFree:function(){return o._PD.result&&1===o._PD.result.payid||1===i(".mod-feeType .radio-check").data("value")},_addPay:function(e){e=e||0;var t=o._PD.courses_map[e];t?(i(".label_feature_select").show(),o.$newPayBox.data("value",e).find("#new_pay_picker .text").html(t.value).removeClass("text-tip"),o._renderLabel(t._)):(e=0,o.$newPayBox.data("value",e).find("#new_pay_picker .text").html("仅能选择标签已经通过审核的付费课").addClass("text-tip"),i(".label_feature_select").hide(),i(".label__list ul").html(""),o.$addFeature.siblings(".feature_ct").html("")),e&&r.trigger("connectvip_select",e)},_renderLabel:function(e){var t=e.category_label,a={aid:s.getInfoSync().aid,tag1:e.industry_1st,tag2:e.industry_2nd,tag3:e.industry_3rd},n=[];c.get_course_label({param:a,succ:function(e){e.result.category_list&&(e.result.category_list.forEach(function(e){for(var a=0,i=t.length;i>a;a++)t[a]===e.id&&n.push("<li>"+e.name+"</li>")}),i(".label__list ul").html(n.join("")))}})},_delPay:function(e){e.remove(),o.$newAdd.data("value",0),o.$newAdd.data("value",null)},_cacheDom:function(){var e=o.domList;return e||(e={},o.domList=e),e},getData:function(){var e={},t=[],a=[],n=[];return o._isFree()?(i(".feature__list .input_ct").each(function(e,t){var n=i(t).find("input").val();""!==n&&null!==n&&a.push({desc:n})}),e.newlabel=1,e.from_items=n,e.to_items=a,e.category_descs=t,e.to_course_id=o.$newPayBox&&o.$newPayBox.data("value")||0,o.reportLength=t.length):(e.to_course_id=o.freeCId||0,o.reportLength=0),e.from_course_id=o._PD.cid,e},setData:function(){},_initPayToFree:function(){var e=o.fillData.to_course_id,t=i("#pay-picker");o._PD.coursesFree&&o._PD.coursesFree.length?(o.fillData.to_course_id&&1!==o.fillData.payid&&(t.data("value",[e]),o._addFree(e,t)),t.data("max",1).picker({unit:"门",title:"课程",warning:"最多关联1门课程",getData:function(){return o._PD.coursesFree},onSave:function(e,t){o._addFree(t[0],e)}})):t.closest(".flp-plf").remove()},_addFree:function(e,t){function a(){o.freeCId=0,t.find(".text:first").addClass("text-tip").text(c)}e=e||0;var i,n,c="请选择与本课程有关的免费课程，用于展示在本课程详情页上供学生体验";e?(o.freeCId=e,i=o._PD.courses_map[e],i?(n=i._,t.find(".text:first").removeClass("text-tip").text(n.cname),r.trigger("connectfree_select",e)):a()):a()},_initValidate:function(e){o.$newPayBox,o._cacheDom();return e}}});
/*!/agency/publish/template/step2.cteacher.tpl_tpl*/
;define("/agency/publish/template/step2.cteacher.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){for(var _$out_=[],i=0;i<data.length;i++){var teacher=data[i]._||{};_$out_.push('<div class="cteacher-ct show-teacher" taid="',teacher.id,'"> <div class="cteacher-show-ct"> <div class="avator"> <img src="',teacher.cover_url,'" alt="老师头像"> </div> <div class="content"> <p class="name">',teacher.name,'</p> <p class="detail"> ',teacher.summary||teacher.introduce||"暂无介绍",' </p> <div class="button-group"> <a class="button edit"><i class="icon-font i-edit"></i>编辑</a> <a class="button delete"><i class="icon-font i-delete"></i>删除</a> </div> </div> </div></div>')}return _$out_.join("")}}});
/*!/agency/publish/template/step2.cteacher.edit.tpl_tpl*/
;define("/agency/publish/template/step2.cteacher.edit.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="expand-mod mt30"> <div class="expand-mod-name mt35"><b>*</b>头像</div> <div class="expand-mod-cont need-show-upload-error"> <div class="img-right"> <form class="upload-form2" id="teacherLogoForm" method="post" enctype="multipart/form-data"> <img auto-test="edit-teacher-head" lazy-src="',teacher.cover_url?teacher.cover_url+"130":"/img/temp.png",'" alt="老师头像" class="edit-teacher-logo img" /> <a href="#" tabindex="-1" id="teacherLogoBg" class="umask"><span></span><i>重新上传图片</i></a> <input auto-test="edit-teacher-url" type="hidden" name="teacher_logo" class="teacher_logo" value="',teacher.cover_url,'" data-pattern="notNull" /> <input auto-test="edit-teacher-file" type="file" name="filename" id="teacherLogo" accept="image/gif, image/jpeg, image/bmp, image/png" class="" data-holder="',teacher.cover_url,'" title="重新上传图片" /> </form> <div class="upload-wording"> 长宽均在130~500(像素)之间<br/> 图片小于2M<br/> 支持jpg/png/gif/bmp格式<br/> 课程老师请使用真人头像 <br/> <a class="view-avatar-desc" href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=882&highlight=%E8%80%81%E5%B8%88%E5%A4%B4%E5%83%8F" target="_blank">查看完整头像要求</a> </div> <div class="field-help" style="margin:10px 0 0 0"></div> </div> </div> <div class="clear"></div></div><div class="expand-mod"> <div class="expand-mod-name"><b>*</b>姓名</div> <div class="expand-mod-cont"> <input auto-test="edit-teacher-name" type="text" id="teacherName" maxlength="12" data-pattern="notNull" value="',teacher.name,'" data-holder="',teacher.name,'" data-uin="',teacher.uin,'" data-prop="name" data-tips="请输入姓名" class="am-input-text" maxlength="24" placeholder="请输入姓名" data-type="teacher" /> </div> <div class="clear"></div></div><div class="expand-mod"> <div class="expand-mod-name"><b>*</b>电话</div> <div class="expand-mod-cont"> <input auto-test="edit-teacher-phone" type="text" id="teacherPhone" data-pattern="notNull|phone" maxlength="11" value="',teacher.phone,'" data-holder="',teacher.phone,'" data-prop="phone" class="am-input-text" data-tips="请输入手机号码" placeholder="请输入手机号码" data-type="teacher" /> </div> <div class="clear"></div></div><div class="expand-mod"> <div class="expand-mod-name"><b>*</b>邮箱</div> <div class="expand-mod-cont"> <input auto-test="edit-teacher-email" type="text" id="teacherEmail" data-pattern="notNull|email" data-tips="请输入电子邮箱" value="',teacher.email,'" data-holder="',teacher.email,'" data-prop="email" class="am-input-text" placeholder="请输入电子邮箱" data-type="teacher" /> </div> <div class="clear"></div></div><div class="expand-mod expand-mod-summary"> <div class="expand-mod-name"><b>*</b>简介</div> <div class="expand-mod-cont"> <textarea auto-test="edit-teacher-summary" type="text" id="teacherSummary" data-pattern="summary" data-holder="',teacher.summary,'" data-prop="summary" class="am-input-text" placeholder="请输入30~150字成员简介，不符合要求的简介或腾讯课堂外部链接可能导致课程审核不通过" data-type="teacher">',teacher.summary,'</textarea> </div> <div class="clear"></div></div><div class="expand-mod expand-mod-summary mg-member-profile-roles"> <div class="expand-mod-name">角色</div> <div class="expand-mod-cont" title="',teacher.roles,'"> ',teacher.roles,' </div> <div class="clear"></div></div>'),_$out_.join("")}}});
/*!/agency/publish/template/step2.cteacher.errorTip.tpl_tpl*/
;define("/agency/publish/template/step2.cteacher.errorTip.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="error-tip"> <p> <i></i> '),msg?_$out_.push(" ",msg," "):_$out_.push(" 请填写正确信息 "),_$out_.push(" </p></div>"),_$out_.join("")}}});
/*!agency/publish/step2/step2.cteacher*/
;define("agency/publish/step2/step2.cteacher",function(e,t,r){e("edu_modules/jquery.picker/jquery.picker");var a=e("jquery"),i=e("edu_modules/edu-agency/index"),c=e("edu_modules/modal/modal"),o=e("/agency/publish/template/step2.cteacher.tpl_tpl"),n=e("/agency/publish/template/step2.cteacher.edit.tpl_tpl"),s=e("/agency/publish/template/step2.cteacher.errorTip.tpl_tpl"),l=e("edu_modules/edu-db/edu-db"),u=e("agency/publish/common/_pd"),d=e("edu_modules/jquery.uploader/jquery.uploader"),h=e("edu_modules/local.data/local.data"),m={reg:{email:/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,phone:/^1\d{10}$/,summary:/^[\w\W]{30,150}$/,uin:/^[1-9]\d{4,10}$/},map:{name:"#teacherName",email:"#teacherEmail",phone:"#teacherPhone",summary:"#teacherSummary"},wording:{blank:{name:"姓名不能为空",email:"邮箱不能为空",phone:"电话不能为空",summary:"简介不能为空"},invalid:{email:"邮箱格式不正确",phone:"电话号码格式不正确"}},init:function(e){a(".js-course-teacher",e).picker({unit:"位",title:"老师",warning:"最多选择6位老师",getData:function(){return u.teachers||[]},onSave:m._save_course_teacher_picker}),u.result&&u.result.course_te_list&&u.result.course_te_list.length>0&&(m._save_course_picker_data(a(".js-course-teacher"),u.result.course_te_list),m._renderCTeacher()),m._bindEvent()},_renderCTeacher:function(){a(".mod-form__cteacher-wrap .show-teacher").remove(),a(".mod-form__cteacher-wrap").prepend(o({data:u.cteacher})),this._isShowAddTeacher(),this._isShowTip(a(".mod-form__cteacher-wrap").offset().top,a(window).height())},_isShowAddTeacher:function(){u.cteacher.length>=6?a(".add-teacher").hide():a(".add-teacher").show()},_isShowTip:function(e,t){var r=h.get("cteacher_tip_flag");r||!(t>e)||a(".js-course-teacher").data("value")&&0!==a(".js-course-teacher").data("value").length?a(".cteacher-tip").removeClass("active").hide():a(".cteacher-tip").show().addClass("active")},_save_course_teacher_picker:function(e,t,r){m._save_course_picker_data(e,t,r),m._renderCTeacher()},_validateSummary:function(e){var t,r=a.trim(e).replace(/[^\x00-\xFF]/g,"xx"),i=60,c=300,o=!0;return r.length<i&&(t=0===r.length?"简介不能为空":"至少输入"+i/2+"个字",o=!1),r.length>c&&(t="字数超过"+Math.ceil((r.length-c)/2)+"个",o=!1),{word:t,isOK:o}},_bindEvent:function(){a(".mod-form__cteacher-wrap").on("click",".show-teacher .edit",function(e){e.preventDefault();var t=a(this),r=t.parents(".show-teacher"),c=r.attr("taid");l.get_teacher({param:{tid:c,aid:i.getInfoSync().aid},succ:function(e){e=e||{};var t=e.result||{};if(!t.a_name||!t.aid)return a._alert("该成员已经解除关联, 不可编辑",function(){});t.summary=t.summary.toString().replace(/<\s*br\s*\/?\s*>/g,"\n"),t.email=t.email||t.uin+"@qq.com";var r=e.result;r.roles=a.map(e.result.role_list,function(e){return e.role_name}).join(", ")||"暂无",a.Dialog.show({title:"编辑",submit:"保存并关闭",isDisabled:!1,confirm:!0,globalClass:"w560 pl19 edit-tips mg-edit-member-profile",extraClass:"update-teacher",content:n({teacher:e.result})}),a(".edit-teacher-logo").lazyload()}})}).on("click",".show-teacher .delete",function(e){e.preventDefault();var t=a(this);a.Dialog.confirm("是否不显示这位老师的介绍信息？",{onAccept:function(){var e=t.parents(".show-teacher"),r=e.index(),i=a(".add-teacher .js-course-teacher").data("value");u.cteacher.splice(r,1),i.splice(r,1),e.remove(),m._isShowAddTeacher()}})}).on("click",".js-cteacher-tip-close, .icon-close",function(){a(".cteacher-tip").hide(),h.set("cteacher_tip_flag",1)}),a(document).on("invalidate:edit:teacher",function(e,t,r,i){var c=m.map[t];if("valid"===r){if(a(c).nextAll(".error-tip").remove(),a(c).removeClass("error-input"),a(c).next().hasClass("i-success"))return;return a('<i class="icon-font i-success" style="margin-top: 8px;"></i>').insertAfter(c)}a(c).nextAll(".i-success").remove(),a(c).next().hasClass("error-tip")&&(a(c).next(".error-tip").remove(),a(c).removeClass("error-input")),i=i||m.wording[r][t],a(s({msg:i})).insertAfter(c),a(c).addClass("error-input"),a(c).on("focus",function(){a(this).next(".error-tip").remove(),a(this).removeClass("error-input")})}),a(document).delegate("#teacherLogoForm","mouseenter",function(){a("#teacherLogoBg").show()}).delegate("#teacherLogo","mouseleave",function(){a("#teacherLogoBg").hide()}),a(document).delegate("#teacherLogo","change",function(){var e=a(this);d&&d.upload&&d.upload(e,{url:"/cgi-agency/course/manager/upload_pic",data:{type:3},resetInput:function(t){e=t},beforeSend:function(){var t=a.trim(e.val());if(!/\.(PNG|JPG|JPEG|GIF|BMP)$/i.test(t))return c.alert("图片格式不正确，只支持.png，.jpg，.jpeg，.gif，.bmp格式的图片"),!1;var r=e[0].files&&e[0].files[0];return r&&r.size>2097152?(c.alert("上传的图片过大，请上传2M以内的图片！"),!1):void 0},success:function(e){e=e||{},a("#teacherLogo").data("holder",e.result.url),a(".edit-teacher-logo").attr("src",e.result.url+"130")},error:function(e){return e=e||{},106445===e.retcode?(c.alert("为保证您课程图片的展示质量，请上传至少130*130尺寸的图片文件","上传失败"),!0):void 0}},!0)}),a(document).delegate(".update-teacher","click",function(e){if(e.preventDefault(),!a(this).hasClass("btn-disabled")){var t={aid:i.getInfoSync().aid,tuin:a("#teacherName").data("uin"),name:a.trim(a("#teacherName").val()),phone:a.trim(a("#teacherPhone").val()),email:a.trim(a("#teacherEmail").val()),summary:a.trim(a("#teacherSummary").val()),cover_url:a.trim(a("#teacherLogo").data("holder"))},r=!0;a.each(t,function(e,t){if(t)if("summary"===e){var i=m._validateSummary(t);r=i.isOK,a(document).trigger("invalidate:edit:teacher",[e,r?"valid":"invalid",i.word])}else"undefined"==typeof m.reg[e]||m.reg[e].test(t)?a(document).trigger("invalidate:edit:teacher",[e,"valid"]):(r=!1,a(document).trigger("invalidate:edit:teacher",[e,"invalid"]));else a(document).trigger("invalidate:edit:teacher",[e,"blank"]),r=!1;"summary"===e&&a("#teacherSummary").trigger("keyup"),"name"===e&&a("#teacherName").trigger("keyup")}),!r||a(".edit-tips .error-tip").length>0||"undefined"!=typeof i.getInfoSync().aid&&l.modify_teacher({param:t,succ:function(){a.Dialog.remove();for(var e=0;e<u.cteacher.length;e++)u.cteacher[e]._.id===t.tuin&&(t.id=t.tuin,t.introduce=t.summary,a.extend(u.cteacher[e]._,t),a.extend(u.cteacher[e],{key:t.id,value:t.name,search:u.cteacher[e].search,view:u.cteacher[e].view}));m._renderCTeacher()},err:function(e){e=e||{},106442===e.retcode&&a.Dialog.alert("请不要录入含有不适当内容的信息",{type:"err"})}})}});var e=null;a(window).scroll(function(){clearTimeout(e),e=setTimeout(function(){m._isShowTip(a(".mod-form__cteacher-wrap").offset().top,a(window).height()+a(window).scrollTop())},300)})},_save_course_picker_data:function(e,t){0!==e.length&&(t=a._toArray(t),u.cteacher=this._course_teacher_view(e,t))},_course_teacher_view:function(e,t){var r=[],i=[];switch(e.data("picker")){case"c_teacher":a.each(t,function(e,t){var a=u.teachers_map[t];a||i.push(e),r.push(a)}),a.each(i,function(e){r.splice(e,1),t.splice(e,1)});break;default:r=t}return e.data("value",t),r}};r.exports={init:m.init,isShowTip:m._isShowTip}});
/*!agency/publish/step2/step2*/
;define("agency/publish/step2/step2",function(e){function r(e,r){r=r.find(".js-diy-operation");for(var a=0,t=r.length;t>a;a++)if(-1!==e.indexOf(parseInt(c(r[a]).attr("data-value"),10)))return!0}function a(){for(var e=k.data.category_label||[],a=!0,t=c(".mod-course-labels-wrap").find(".diy-select-area"),s=0,i=t.length;i>s;s++){var o=c(t[s]);r(e,o)||(o.addClass("g-err"),a=!1)}return a}e("@tencent/im-jquery.dropdown/jquery.dropdown"),e("edu_modules/jquery.picker/jquery.picker"),e("edu_modules/edu-picker/edu-picker");var t,s=e("agency/index/hovertips"),i=e("edu_modules/edu-agency/index"),c=("undefined"==typeof window.isDebug?!1:window.isDebug,e("jquery")),o=e("edu_modules/modal/modal"),l=e("@tencent/im-cache/cache"),n=e("edu_modules/validator/validator"),d=e("@tencent/im-str-ellipsis/str-ellipsis"),u=e("edu_modules/jquery.uploader/jquery.uploader"),p=e("agency/publish/step2/term.price"),_=e("agency/publish/common/disabled.manager"),f=e("/agency/publish/template/step2.tpl_tpl"),m=e("agency/index/courseTag/mod.main"),v=e("agency/index/dataManagement/db"),h=e("agency/publish/common/submit"),g=e("agency/publish/step2/step2.flp"),y=null,k=e("agency/publish/common/_pd"),b=e("agency/publish/step2/step2.cteacher"),w=/['"\\;<>&:]/,C=!1,x=[],q=[],S=function(e,r,a){for(var t=[],s=0;s<e.length;s++)for(var i=0;i<a.length;i++)if(a[i][r]===e[s]){t.push(a[i]);break}return t},T=function(e,r,a){k._save_picker_data_old(e,r,a),!a&&n.validate(e)},I=function(e,r){var a=[];return e=k._toArray(e),c.each(e,function(e,t){t=t||{},t[r]&&a.push(t[r])}),a},D=function(e,r){return r=parseInt(r,10),"[object Array]"===Object.prototype.toString.call(e)?e.slice(0,r||50):"[object String]"===Object.prototype.toString.call(e)&&e?e.split(",").slice(0,r||50):[]},j=function(){var e=c("#cover_upload"),r=c("#cover_view"),a="mod-form__upload-img_covered",t=function(e,t,s){r.data("value",e).attr("src",e+"222/?"+ +new Date).on("load",function(){r.show(),c(".mod-form__upload-img").addClass(a)}).on("error",function(){r.off(),r.attr("src","img/img-err2.png").show(),c(".mod-form__upload-img").addClass(a)}),t&&r.data("color",t),s?setTimeout(function(){c(".mod-form__upload-img-wrap").removeClass("g-succ g-err g-info")},50):n&&n.setSuccess(r)};k&&k.result&&k.result.cover_url&&t(k.result.cover_url,k.result.cover_url_color,!0),u&&u.upload&&u.upload(e,{url:"/cgi-agency/course/manager/upload_pic",data:{type:1},resetInput:function(r){e=r},beforeSend:function(){var r=c.trim(e.val());return/\.(PNG|JPG|JPEG|GIF|BMP)$/i.test(r)?this.files&&this.files[0]&&this.files[0].size>2097152?(c._alert("上传的图片过大，请上传2M以内的图片！"),!1):void 0:(c._alert("请选择PNG,JPG,GIF,BMP图片上传！"),!1)},success:function(e){e=e||{};var r=e.result;r&&r.url&&t(r.url,r.color),y.trigger("cover",r.url),BJ_REPORT.debug({msg:"上传课程封面成功",ext:{msid:2531820}})},error:function(e){return e=e||{},106445===e.retcode?(c._alert("为保证您课程图片的展示质量，请上传至少1080*608尺寸的图片文件","上传失败"),!0):void BJ_REPORT.debug({msg:"上传课程封面失败",ext:{msid:2530339}})}})},F=function(){var e="radio-check",r=c(".refund-hover-tip"),a=(c(".refund-tip-icon"),k.data.refund_type);c(document).on("click init",".mod-refund .radio",function(){var a=c(this),t=a.data("value");a.addClass(e).siblings(".radio").removeClass(e),r.eq(t-1).show().siblings(".refund-hover-tip").hide()}),a&&c(".mod-refund .radio").eq(a-1).trigger("click")},P=function(e){if(e=e||l.get("check_fee"),!e){var r=l.get("check_fee_callback")||[];return r.push(P),void l.set("check_fee_callback",r)}var a=i.getInfoSync(),t=a.sign_status.sign_status,s=a.agency_bank.audit_status,o=a.agency_bank.end_time||0,d=a.system_time,u=new Date(1e3*d),p=new Date(1e3*o).getFullYear()===u.getFullYear(),f=(new Date).getFullYear(),m=!t&&p&&u<new Date(f,3,11)&&6!==s;C=1===parseInt(c.bom.query("iosopen"),10)||"open"===e.ios_flag_switch,C&&c(".mod-form__ios-support-wrap").show();var v="radio-check";if(c(document).on("click init",".mod-feeType .radio",function(r){r.preventDefault();var a=c(this);if("click"!==r.type||!a.hasClass("disabled")&&!a.hasClass(v)){a.addClass(v).siblings(".radio").removeClass(v);var t=parseInt(a.data("value"),10)||1;2===t?(c("#needAddressWrapper").show(),c(".free-relate-pay").hide(),"b"===k.cmd&&(!k.signedFee&&1===e.is_fee||m)&&(c(".pay_id_bill_tips-fee").hide(),c(".pay-fee-type").removeClass("after-tip")),c(".pay-fee-type").parent().show(),c(".pay-id-choose-wrap").show(),c(".flp-plf")&&c(".flp-plf").show(),"b"!==k.cmd&&c(".refund-choose-wrap").show(),k.result=k.result||{},(1===k.result.payid||""===k.cmd)&&c(".mod-form__ios-support-wrap .radio[data-value=1]").click(),c(".publish-step4")&&c(".f-item-sign")&&(c(".f-item-sign").show(),0===k.isTupAgency&&(c.event.trigger("term:tips",[c(".term-item_current"),'<i class="icon-font i-alert mr5"></i>为了保证教学内容的完整性，收费课教学目录提交审核后，将不能删除、不能修改节和任务名称，可以调整顺序，修改直播时间、更换视频或资料或习题，新增的节和任务只有已报名学生能看到，未报名学生看不到。您可在“教务教学-教学管理-课程安排”进行相应的修改。<a class="nor_link" target="_blank" href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=1224&page=&extra=#pid4088">点击了解更多</a>。']),c(".commit_confirm").show()),c(".submit_confirm").hasClass("checkbox-check")||c(".btn-commit").addClass("disabled"),c(".guide-tt .warn-tip").html("课程最多250节，每节最多可增加至10个任务（含补充任务）。补充任务累计最多可增加至其他任务总数（不含补充任务）的20%。"))):(c(".free-relate-pay").show(),c("#needAddressWrapper").hide(),c(".pay-fee-type").parent().hide(),c(".pay-id-choose-wrap").hide(),c(".flp-plf")&&c(".flp-plf").hide(),c(".refund-choose-wrap").hide(),n.clearValidateResult(a),c(".publish-step4")&&c(".f-item-sign")&&(c(".f-item-sign").hide(),c(".guide--catalog .note-msg").remove(),c(".commit_confirm").hide(),c(".btn-commit").removeClass("disabled"),c("#submit_confirm").removeClass("checkbox-check")),c(".guide-tt .warn-tip").html("课程最多250节，每节最多10个任务。")),$(t),k.data.payid=z(),a.trigger("change:payid",[t])}}).on("click init","#price_pass_box",function(){var e=c(this);if(!e.hasClass("disabled"))if(e.hasClass("checkbox-check"))e.removeClass("checkbox-check");else{e.addClass("checkbox-check"),c(".price-pass-disabled").removeClass("price-pass-disabled");var r=c("#cp_price_pass");!r.hasClass("disabled")&&(!n.hasError(r)||n.validate(r))&&n.setTips(r),n.msg="",n.validate(c("#cp_price_pass"))}}).on("click init",".mod-form__ios-support-wrap .radio",function(e){var r=c(this);("click"!==e.type||!r.hasClass("disabled")&&!r.hasClass(v))&&(r.addClass(v).siblings(".radio").removeClass(v),k.result&&"b"===k.cmd&&1===k.result.ios_price&&r.siblings(".radio").addClass("disabled"),1===r.data("value")?c("#ios_pay_box").parent().show():c("#ios_pay_box").parent().hide(),k.data._tmp_ios_flag=c(".mod-form__ios-support-wrap .radio-check").data("value"),c('[name="price"]').trigger("iosRadioChange"))}).on("click init","#ios_pay_box",function(e){e.preventDefault();var r=c(this);r.hasClass("disabled")||(r.toggleClass("checkbox-check"),r.hasClass("checkbox-check")&&c(".mod-form__ios-support-wrap .field-help").hide())}).on("click","#needAddress",function(){var e=c("#needAddress"),r=c("#addressOptions");e.hasClass("checkbox-check")?(e.removeClass("checkbox-check"),r.hide()):(e.addClass("checkbox-check"),r.show())}).on("click","#addressOptions .radio",function(){c("#addressOptions").find(".radio-check").removeClass("radio-check"),c(this).addClass("radio-check")}).on("iosRadioChange",'[name="price"]',function(){n.validate(c(this))}),k.signedFee&&1===e.is_fee||m)c(".pay_id_bill_tips-fee").hide(),c(".pay-fee-type").removeClass("after-tip"),c(".mod-pay-id-wrap .radio.disabled").removeClass("disabled"),$(e.is_fee);else{if(!k.signedFee&&1===e.is_fee){window.setTimeout(function(){c(".mod-feeType .radio[data-value=1]").click(),c(".mod-form__ios-support-wrap .radio").addClass("disabled")},0);var h=i.getInfoSync();c(".js-fee-cont").html(h.isMaster||h.isPersonal||h.isAdmin?'如需开设收费课程，请签署收益协议，<a target="_blank" class="nor-link" href="/agency/billing/index.html">点击进入</a>':"如需开设收费课程，请联系机构超级管理员签署收益协议")}c("#flp-wrap").remove()}if(k.result&&"undefined"==typeof k.result.payid&&(k.result.payid=1),k.result&&1!==k.result.payid){if(c(".mod-feeType .radio[data-value=2]").eq(0).trigger("init"),1===k.result.passcard){c("#price_pass_box").trigger("init");var g=k.result.passcard_price;g>0&&c("#cp_price_pass").val(g/100)}else n.clearValidateResult(c("#cp_price_pass"));k.result.price>0&&(c("#course_price").val(k.result.price/100),n.validate(c("#course_price"))),1===k.result.ios_price?(c(".mod-form__ios-support-wrap .radio[data-value=1]").trigger("init"),c("#ios_pay_box").trigger("init")):c('[name="price"]').each(function(){n.validate(c(this))}),1!==k.result.refund_type&&c(".mod-refund .radio").eq(k.result.refund_type-1).trigger("init"),1==k.result.is_mail&&(c("#needAddress").trigger("click"),1==k.result.must_fill_mailing&&c("#addressOptions").find(".radio[data-value=1]").trigger("click"))}_.basic(y,k.result)},A=function(){var e="radio-check";c(document).on("click init",".mod-form__applytype-wrap .radio",function(r){var a=c(this);("click"!==r.type||!a.hasClass("disabled")&&!a.hasClass(e))&&a.addClass(e).siblings(".radio").removeClass(e)}),k.result&&c(".mod-form__applytype-wrap .radio[data-value="+(1===k.result.only_pkg?"1":"0")+"]").eq(0).trigger("init")},M=function(){if(n.extend("need_check_ios",function(){var e=c(".mod-form__ios-support-wrap .field-help"),r=c(".mod-feeType .radio-check"),a=c(".mod-form__ios-support-wrap .radio-check");return 2===r.data("value")&&1===a.data("value")?c("#ios_pay_box").hasClass("checkbox-check")?(e.hide(),!0):(e.show(),!1):(e.hide(),!0)}),n.extend("name",function(e){return e=e.replace(/[^\x00-\xFF]/g,"xx"),w.test(e)?(n.msg="课程名称中有特殊符号，请删除",!1):!0}),n.extend("integer",function(e){var r=parseInt(e,10);return""+r!=""+e||0>=r?(n.msg="必须输入正整数",!1):!0}),n.extend("course_price",function(e,r){var a=c(".mod-feeType .radio-check");if(2==a.data("value")){if(0==e)return n.msg="价格不能小于0.02元",!1;if(e=e.replace(/^0+/,""),!/^\d+$/.test(e.replace(/\./,"")))return n.msg="请输入正确的价格",!1;if(/\.\d\d\d+$/.test(e))return n.msg="小数点后请保留两位",!1;var s=parseFloat(e);if(.02>s)return n.msg="价格不能小于0.02元",!1;if(s>1e5)return n.msg="价格不能大于100000元",!1;if("b"===k.cmd){if("undefined"==typeof t)return q.push(function(){n.validate(r)}),n.msg="正在获取课程信息...",!1;if(t&&100*s<t.price)return n.msg="价格不能低于"+t.actName+"活动价格 ￥"+(t.price/100).toFixed(2),!1}if(k=k||{},n.succMsg="",_.disabledModifyPrice(r.closest(".mod-form__content"),1,n))return r.closest(n.parentSelector).addClass("g-advice"),!0;if(k.data._tmp_ios_flag){var i=k.getSuitableIosPrice(s);i&&i!=s?(n.succMsg='<span class="advice-text">为了更好售卖课程，建议将课程价格调整为'+i+'元。</span><a href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=735" target="_blank">为什么？</a>',r.closest(n.parentSelector).addClass("g-advice")):r.closest(n.parentSelector).removeClass("g-advice")}else r.closest(n.parentSelector).removeClass("g-advice");return!0}}),n.extend("money_pass",function(e,r){if(r.hasClass("disabled"))return!0;var a=c(".mod-feeType .radio-check");if(2==a.data("value")){if(0===e.length)return!1;if(0==e)return n.msg="价格不能小于0.02元",!1;if(e=e.replace(/^0+/,""),!/^\d+$/.test(e.replace(/\./,"")))return n.msg="请输入正确的价格",!1;if(/\.\d\d\d+$/.test(e))return n.msg="小数点后请保留两位",!1;var t=parseFloat(e);if(.02>t)return n.msg="价格不能小于0.02元",!1;if(t>1e5)return n.msg="价格不能大于100000元",!1;if(p.has_term_price_greater_than_passcard_price())return n.msg="任意学价格不能小于班级价格",!1;if(n.succMsg="",_.disabledModifyPrice(r.closest(".mod-form__content"),0,n))return r.closest(n.parentSelector).addClass("g-advice"),!0;if(k.data._tmp_ios_flag){var s=k.getSuitableIosPrice(t);s&&s!=t?(n.succMsg='<span class="advice-text">为了更好售卖课程，建议将课程价格调整为'+s+'元。</span><a href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=735" target="_blank">为什么？</a>',r.closest(n.parentSelector).addClass("g-advice")):r.closest(n.parentSelector).removeClass("g-advice")}else r.closest(n.parentSelector).removeClass("g-advice")}return!0}),n.extend("marketing_qq",function(e){var r=parseInt(e,10);return e?/\D/.test(e)?(n.msg="营销QQ号只能包含数字",!1):O(r)?!0:(n.msg="该号码不是营销QQ",!1):(n.msg="营销QQ号不能为空",!1)}),n.extend("server_tels",function(e){var r=e.toString().replace(/[，； ;]/g,",").replace(/[^\d,+\-]/g,"").replace(/,,+/g,",");if(r!=e&&c("#cp_server_tels").val(r),0===r.length)return!0;var a=","+r.replace(/^,+|,+$/g,""),t=((a.toString().match(/\b([-+\d]+)\b(?=.*,\1(,|$))/g)||[]).join(",").match(/(\b[-+\d]+(?=,|$)+)(?!.*,\1(,|$))/g)||[]).length;if(t>0)return n.msg="有"+t+"个电话号码重复",!1;var s=(a.toString().match(/,([^,]{1,6}|[^,]{16,})(?=,|$)/g)||[]).length;if(s>0)return n.msg="有"+s+"个号码格式不正确",!1;var i=a.toString().match(/,[^,]{7,15}/g)||[];return i.length>5?(n.msg="最多填写5个电话",!1):!0}),n.extend("cgroups",function(e){var r=parseInt(c(".mod-feeType .radio-check").data("value"),10);return 1===r?!0:e&&0!==e.length?!0:(n.msg="请选择学习讨论群",!1)}),n.extend("related_course",function(){return!0}),k.result){if(k.result.service_tels=k.result.service_tels||k.result.tel_list,k.result.name){var e=html.decode(k.result.name||"");c("#cp_name").val(e),k.result.name=e}k.result.service_tels&&c("#cp_server_tels").val(k._toArray(k.result.service_tels,!0).join(",")),k.result.summary&&c("#cp_summary").val(k._decodeBr(html.decode(k.result.summary||"")))}p.validator(n),n.init(c(".publish-step2 [data-pattern]"))},O=function(e){return e>=8e8&&800099999>=e||e>=8001e5&&800199999>=e||e>=8008e5&&800899999>=e||e>=938e6&&938199999>=e||e>=3e9&&3000999999>=e||e>=106866e4&&1068679999>=e||e>=4e9&&4009999999>=e||e>=8e9&&8009999999>=e?!0:!1},$=function(e){var r=c("#cp_cgroups"),a=r.closest(".mod-form__line");e>=2?(a.find(".mod-form__label i").text("学习讨论群"),a.find(".mod-form__label b").removeClass("hide"),r.find(".text-tip").html("请选择合适的群接待学生，QQ用户报名后自动加入")):(a.find(".mod-form__label i").text("学习讨论群"),a.find(".mod-form__label b").addClass("hide"),r.find(".text-tip").html("学生报名后可自愿加入，用户讨论课程内容")),n.clearValidateResult(r)},G=function(e){k.initGroups(function(){c(".diy-picker[data-picker=group]",e).picker({title:"群",getData:function(){return k.groups},onSave:T}),k.result&&(k.result.zgroups=k.result.zgroups||k.result.sg_list,k.result.cgroups=k.result.cgroups||k.result.cg_list,k.result.zgroups&&T(c("#cp_zgroups"),k.filterGroup(I(k.result.zgroups,"groupid")),!0),k.result.cgroups&&T(c("#cp_cgroups"),k.filterGroup(I(k.result.cgroups,"groupid")),!0))}),c(document).on("change:payid",function(e,r){$(r)})},Q=function(e){k.initTeachers(function(){b.init(e)}),b.isShowTip(c(".mod-form__cteacher-wrap").offset().top,c(window).height()),k.initSaleTeachers(function(){c(".diy-picker[data-picker=teacher]",e).picker({title:"老师",getData:function(){return k.sale_teachers||[]},onSave:T});var r=[];if(k.result&&k.result.saler_list&&(r=r.concat(k.result.saler_list)),k.result&&k.result.service_qq){var a=I(k.result.service_qq,"uin");r=r.concat(k.filterTeacher(a))}for(var t,s=k.sale_teachers.map(function(e){return e.key}),i=[],o=0;o<r.length;o++)t=r[o],s.indexOf(t)>-1&&-1===i.indexOf(t)&&i.push(t);T(c("#cp_server_qq"),i,!0)}),c(document).on("click init",".mod-server_qq .radio",function(e){e.preventDefault();var r=c(this),a=r.parents(".mod-server_qq");if(!r.hasClass("radio-check")&&(r.parent().find(".radio-check").removeClass("radio-check"),r.addClass("radio-check"),!r.closest("#addressOptions").length)){var t=r.data("value");n.validate(t?a.find("[name=marketing_qq]"):a.find("[name=server_qq]")),a.find(".js-qq-field").toggle()}})},R=function(e){var r=5,a=c(".diy-select-related_course"),t=function(e,r){return'<li class="rc-item" data-value="'+e+'"><span class="course-name" title="'+r+'">'+d.substring(r,400,1)+'</span><a href="javascript:;" class="nor-link">删除</a></li>'},s=function(e,a){var t=a.length;t>0?e.addClass("related_course-not-empty"):e.removeClass("related_course-not-empty"),t>=r?e.addClass("related_course-full"):e.removeClass("related_course-full")};a.on("click",".rc-item .nor-link",function(){var e=c(this);if(!e.hasClass("disabled")){var r=e.closest(".rc-item"),a=c("#cp_related_course"),t=parseInt(r.data("value"),10)||0,i=a.data("value"),o=[];c.each(i||[],function(e,r){r!==t&&o.push(r)}),T(a,o,!1),r.remove(),s(c(".diy-select-related_course"),o)}});var i=function(e,r,i){T(e,r,i),a.find(".rc-item").remove();var o=[],l=r.length;if(s(a,r),i){if(k.result){var n=k._toArray(k.result.related_course);n&&n.length&&c.each(n,function(e,r){k.saveCourse(r.cid,r.name),o.push(t(r.cid,r.name))})}}else{k.courses_map=k.courses_map||{};for(var d=0;l>d;d++){var u=r[d],p=k.courses_map[u];p&&p.value&&o.push(t(u,p.value))}}a.prepend(o.join(""))},o=c(".diy-picker[data-picker=related_course]",e);if(o.picker({unit:"门",title:"课程",warning:"最多只支持关联 "+r+" 门课程",getData:function(){return k.courses||[]},onSave:i}),k.initCourses(function(){if(k.result){var e=k._toArray(k.result.related_course);e&&e.length&&c.each(e,function(e,r){k.saveCourse(r.cid,r.cname)})}if(o.picker("update",{data:k.courses}),k.courses&&0===k.courses.length){var r=o.data("picker-box");r.find(".picker-help").text("您还没有其他可关联课程").show()}}),k.result&&k.result.related_course){var l=I(k.result.related_course,"cid");i(c("#cp_related_course"),l,!0)}},E=function(e){var r=c(".diy-select-related_files"),a=c("#cp_related_file"),t=function(e,r){return'<li class="rc-item" data-value="'+e+'"><span class="course-name" title="'+r+'">'+d.substring(r,400,1)+'</span><a href="javascript:;" class="nor-link">删除</a></li>'},s=function(e){var s=e.length,i=[],c=[];r.find(".rc-item").remove(),l(e);for(var o=0;s>o;o++){var n=e[o];i.push(t(n.cw_id,n.cw_name)),c.push(n.cw_id)}r.prepend(i.join("")),T(a,c,!0)},l=function(e){var a=e.length;a>0?r.addClass("related_course-not-empty"):r.removeClass("related_course-not-empty"),a>=50?r.addClass("related_course-full"):r.removeClass("related_course-full")};r.on("click",".rc-item .nor-link",function(){var e=c(this);if(!e.hasClass("disabled")){var r=e.parent(".rc-item"),t=parseInt(r.data("value"),10)||0,s=a.data("value"),i=[];c.each(s||[],function(e,r){r!==t&&i.push(r)}),T(a,i,!0),r.remove(),l(i)}}),c(".diy-picker[data-picker=related_file]",e).click(function(){var e=i.getInfoSync().aid;v.init(e);var r=S(D(a.data("value")),"cw_id",x),t=new c.picker({title:"请选择关联资料",name:"资料",max:50,min:0,pageNum:20,keyField:"cw_id",titleField:"cw_name",selectedList:r});t.onPageChange(function(e,r){var a=this;e=e||{},e.over50filter=!0,v.getFileList(e,function(e,s){return e?o.error("加载数据错误，请稍候重试！").yes(function(){a.remove()}):(s.cw_arr&&s.cw_arr.length>0&&s.cw_arr.forEach(function(e){var r=!1;x.forEach(function(a){a.cw_id===e.cw_arr&&(r=!0)}),r||x.push(e)}),t.setMaxPage(Math.ceil(s.total_cnt/20)),void r(e,s.cw_arr))})}).yes(function(e){T(a,e,!0);var r=this.idsToArray(e);l(r),s(r)})}),k.result&&k.result.files&&(x=k.result.files,s(x))},z=function(){var e=c(".mod-feeType .radio-check");return parseInt(e.data("value"),10)||1},L=null,B=function(){if(2!==k.step)return null;var e=c("#needAddress").hasClass("checkbox-check")?1:0,r=0;e&&(r="1"===c("#addressOptions").find(".radio-check").attr("data-value")?1:0);var a=c(".mod-form__applytype-wrap .radio-check").data("value"),t={payid:z(),name:c("#cp_name").val(),cover_url:c("#cover_view").data("value"),cover_url_color:c("#cover_view").data("color")||"",sg_list:D(c("#cp_zgroups").data("value")),cg_list:D(c("#cp_cgroups").data("value")),service_qq:D(c("#cp_server_qq").data("value")),saler_list:D(c("#cp_server_qq").data("value")),c_te_list:D(c(".js-course-teacher").data("value")||[]),service_tels:D(c("#cp_server_tels").val()),related_course:D(c("#cp_related_course").data("value")),cwid_arr:D(c("#cp_related_file").data("value"),50),summary:c("#cp_summary").val(),is_mail:e,must_fill_mailing:r,only_pkg:a};t.marketing_qq=0==c(".mod-server_qq .radio-check").data("value")?"":parseInt(t.marketing_qq,10),c.extend(!0,t,g.getData()),1!==t.payid?(t.train=0,t.refund_type=parseInt(c(".mod-refund .radio-check").data("value")),t.passcard=c("#price_pass_box").hasClass("checkbox-check")?1:0,t.train&&(t.passcard=0),t.passcard_price=t.passcard?parseInt(parseFloat(c.trim(c("#cp_price_pass").val())).toFixed(2).replace(/^0+|\./g,""),10)||0:0,t.price=parseInt(parseFloat(c.trim(c("#course_price").val())).toFixed(2).replace(/^0+|\./g,""),10)||0,C?(t.ios_price=parseInt(c(".mod-form__ios-support-wrap .radio-check").data("value"),10)||0,t.ios_price=1===t.ios_price?1:0):t.ios_price=0):(t.train=0,t.passcard=0,t.ios_price=0,t.passcard_price=0,t.price=0),k.data._tmp_related_course=[],k.courses_map=k.courses_map||{};for(var s=0,i=t.related_course.length;i>s;s++){var o=t.related_course[s],l=k.courses_map[o];if(l&&l.value){var n=c.extend({},l);n.cid=o,n.name=n.value,k.data._tmp_related_course.push(n)}}return k.data._tmp_files=S(t.cwid_arr,"cw_id",x),k.data._tmp_service_qq=S(t.service_qq,"key",k.teachers)||[],k.data._tmp_service_qq.forEach(function(e){e.uin=e.key}),k.data._tmp_cg_list=S(t.cg_list,"key",k.groups),k.data._tmp_cg_list.forEach(function(e){e.groupid=e.key}),k.data._tmp_sg_list=S(t.sg_list,"key",k.groups),k.data._tmp_sg_list.forEach(function(e){e.groupid=e.key}),c.extend(k.data,t),m.getTLL(k.data),p.update(k.data),k.data},J=function(){var e=c(".publish-step2 [data-pattern]").not(".nopattern, .disabled, :hidden").add("#cover_view"),r=n.all(e);if(c("#price_pass_box").hasClass("checkbox-check")||(n.clearValidateResult(c("#cp_price_pass")),L&&(clearTimeout(L),L=null)),c("#requiredCourseTag").is(":visible")&&!a()&&(r=!1),!r){var t=c(".publish-step2 .g-err").eq(0).offset();return t=t?t.top-56:0,c("html,body").animate({scrollTop:t},1e3),!1}return B()},N=function(){1===k._prevStep&&!k.cid&&c(".mod-support-mobile-wrap").hide()},V=function(e,r){k.initTeachers(function(){k.initSaleTeachers(function(){k.initCourses(function(){k.result=k.data=e||{},k.result._tmp_service_qq=k.result._tmp_service_qq||[],k.result.service_qq=k.result._tmp_service_qq,k.result._tmp_related_course=k.result._tmp_related_course||[],k.result.related_course=k.result._tmp_related_course,k.result._tmp_files=k.result._tmp_files||[],k.result.files=k.result._tmp_files,k.result.zgroups=k.result._tmp_sg_list||[],k.result.cgroups=k.result._tmp_cg_list||[],"function"==typeof r&&r()})})})},Y=function(e){if(k=k||{},s.init(),c(document.body).on("click",".mod-course-labels-wrap .js-diy-operation",function(){c(this).closest(".g-err").removeClass("g-err")}),!k.cid&&"undefined"==typeof e){var r=h.getDraft();if(r)return void o.confirm("检测到草稿箱存在数据，是否读取？<br>点击取消后将清空草稿箱内容。",{icon:"info"}).yes(function(){h.isLoadFromDraft=!0,V(r,function(){Y(!0)})}).no(function(){h.isLoadFromDraft=!1,Y(!1),h.clearDraft()})}""===k.cmd&&h.startAutoSave(),c("#publish_steps").append(f({isQidian:"true"===localStorage.getItem("isQidian")}));var a=c(".publish-step2");k.$step2=y=a,m.init("PUBLISH",{allowModifyIndustry1st:"c"===k.cmd}),k._setTextTip&&k._setTextTip(a),N(),p.init(),g.init(n),M(),j(),P(),A(),F(),G(a),Q(a),R(a),E(a),k.getMaxDiscountPrice(function(e){t=e,q.map(function(e){e&&e()}),q=[]}),k._placeholder(a.find(":input[placeholder]")),a.find(".btn-draft").click(function(e){e.preventDefault(),h.saveDraft()}),a.find(".btn-next-step").click(function(e){h.saveDraft(),J()?k.initStep(3):e.preventDefault()}),a.on("onDraftSave",function(){B()})};return{init:Y,checkThisStep:N}});
/*!/agency/publish/template/step3.tpl_tpl*/
;define("/agency/publish/template/step3.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="publish-step publish-step3"> <div class="template-guide-link"> <a href="//ke.qq.com/docs/course_detail.jpg" class="nor-link" target="_blank">点击查看课程详情页课程概述规范</a> <span class="template-download">[ <a class="nor-link" href="//ke.qq.com/docs/course-detail-template-1.zip">模板一</a> <a class="nor-link" href="//ke.qq.com/docs/course-detail-template-2.zip">模板二</a> ]</span> </div> <div class="mod-form__line mod-plugin-bd"> <div class="insert-video" id="insert_video"> <div class="mod-form__radios-wrap" style="display: none;"> <div class="radios mod-choose-mode"> <div class="radio radio-check"> <i></i><label><a href="javascript:;">从视频库选择视频</a></label> </div> <div class="radio"> <i></i><label><a href="javascript:;">填写腾讯视频链接</a></label> </div> </div> </div> <div class="mod-form__line insert-select-video"> <div class="mod-form__content"> <div class="diy-select-area select-video"> <a href="javascript:;" name="video" data-pattern="not_null" data-msg="请选择视频" class="diy-select diy-picker diy-picker-toggle" data-max="1" data-picker="video"> <i class="text text-tip" data-tip="请选择视频">请选择视频</i><span><i class="diy-picker-icon"></i></span> </a> </div> <div class="field-help"></div> </div> </div> <div class="mod-form__line insert-input-url" style="display: none;"> <div class="mod-form__content"> <div class="diy-select-area select-video"> <input type="text" id="input_url_video" data-pattern="not_null|video_url" data-msg="视频链接不能为空" data-tips="请填写腾讯视频链接" placeholder="请填写腾讯视频链接"> </div> <div class="field-help"></div> </div> </div> <div class="form-action"> <a href="javascript:;" title="确定" class="btn-7 btn-ok">确定</a> <a href="javascript:;" title="取消" class="btn-8 btn-cancel">取消</a> </div> </div> </div> <!-- 课程详情 --> <div class="mod-form__line mod-details"> <!-- <label class="mod-details-hd" for="cp_details"><b>*</b>详情简介</label> --> <div class="mod-details-bd"> <div class="mod-details-plugin"> <div class="upload ck_btn btn_img"> <input type="file" name="filename" id="ck_img_add" accept="image/*" /> </div> <div class="ck_btn btn_link"> <a href="javascript:;" id="ck_link_add" title="插入超链接">&nbsp;</a> </div> <div class="ck_btn btn_word"> <a href="javascript:;" id="ck_word_add" title="上传word文档"><i></i></a> </div> <div class="ck_btn btn_video"> <a href="javascript:;" id="ck_video_add" title="插入视频"><i></i></a> </div> </div> <div class="rich-text"> <textarea name="details" id="cp_details" rows="20" data-pattern="details" data-tips="请填写课程详细信息" data-msg="课程详细信息不能为空"></textarea> </div> </div> <div class="field-help"></div> </div> <!-- 按钮 --> <div class="f-item f-item--action-center"> <div class="f-field publish-btn-wrap"> <a href="#step=2" class="btn-weak btn-l btn-prev-step">上一步</a> <a href="javascript:;" class="btn-weak btn-l btn-preview">预览</a> <a href="#step=4" class="btn-default btn-l btn-next-step">下一步</a> <a href="javascript:;" class="btn-default btn-l btn-submit hide">提交审核</a> </div> </div></div>'),_$out_.join("")}}});
/*!edu_modules/ckeditor.init/src/default-config*/
;define("edu_modules/ckeditor.init/src/default-config",function(e,o){o.editorConfig=function(e){e.customConfig="",e.toolbarGroups=[{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"styles",groups:["styles"]},{name:"colors",groups:["colors"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker","editing"]},{name:"tools",groups:["tools"]},{name:"document",groups:["mode","document","doctools"]},"/",{name:"others",groups:["others"]},{name:"help"}],e.removeButtons="Superscript,Subscript,Cut,Copy,Paste,PasteText,PasteFromWord,Styles,Format,Blockquote,CreateDiv,Outdent,Indent,BidiLtr,BidiRtl,Language,Find,Replace,SelectAll,Scayt,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,ShowBlocks,Save,NewPage,Preview,Print,Templates,Maximize",e.removePlugins="elementspath",e.fontSize_defaultLabel="14px",e.allowedContent=!0,e.resize_enabled=!1,e.autoUpdateElement=!0,e.flashAddEmbedTag=!0,e.baseFloatZIndex=1e4,e.format_tags="p;h1;h2;h3;pre",e.removeDialogTabs="image:advanced;link:advanced",e.enterMode=CKEDITOR.ENTER_BR,e.shiftEnterMode=CKEDITOR.ENTER_BR,e.skin="flat",e.uiColor="#ffffff",e.keystrokes=[[CKEDITOR.ALT+121,"toolbarFocus"],[CKEDITOR.ALT+122,"elementsPathFocus"],[CKEDITOR.SHIFT+121,"contextMenu"],[CKEDITOR.CTRL+90,"undo"],[CKEDITOR.CTRL+89,"redo"],[CKEDITOR.CTRL+CKEDITOR.SHIFT+90,"redo"],[CKEDITOR.CTRL+76,"link"],[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"],[CKEDITOR.ALT+109,"toolbarCollapse"]]},o.defaultOpts={content:"",height:"600",uiColor:"#ffffff",skin:"moonocolor",addButtons:[],removeButtons:[],resetButtons:[],useKeystrokes:!0,resizeEnabled:!1,extraPlugins:[]}});
/*!edu_modules/ckeditor.init/src/util*/
;define("edu_modules/ckeditor.init/src/util",function(e,t,r){var i=(navigator.userAgent.match(/\bMSIE\s+(\d+)\b/)||[0,10])[1]<8,n=/\bMSIE\b/i.test(navigator.userAgent),a=function(e){return e&&e.document&&e.document.$&&e.document.$.body},c=function(e){return e&&e.getData?$.trim(e.getData().replace(/\n/g,"")):$("#"+e.name).val().replace(/\n/g,"<br/>")},o=function(e,t){e&&e.insertHtml(t)},s=function(e){var t=e[0];if(t&&"file"===t.kind&&t.type.match(/^image\//i)){var r=t.getAsFile(),i=new FileReader;i.onload=function(){var e=this.result.toString().replace(/^[^,]+/,"");DB.upload_pic_base64({param:{type:2,filename:e},succ:function(e){_uploadPicSucc(e||{})},err:function(e){_uploadPicErr(e||{})}})},i.readAsDataURL(r)}},l=function(){var e=new ActiveXObject("TXGYMailActiveX.ScreenCapture");return e?e.SaveClipBoardBmpToFile(1):!1},u=function(){uploader(l())},d=function(){setTimeout(function(e){var t=a(e);if(t){var r=$(t);r.off(n?"keydown":"paste"),r.on(n?"keydown":"paste",function(e){if(e)if(n)e.ctrlKey&&86===e.keyCode&&u();else{var t=(e.originalEvent||e).clipboardData||{};s(t.items||[])}})}else d(e)},1e3)},f=function(e){return e.replace(/[\n\r]+/g,"").replace(/^.+<\s*body[^>]*>/i,"").replace(/<\s*\/\s*body\s*>.*$/i,"").replace(/(<a\s+[^>]*)name\s*=\s*['"]?\w+['"]?([^>]*>)/gi,"$1$2").replace(/<\s*(\w+)\s*>/gi,"<$1>")},p=function(e,t,r){if(i){var n=$(e.selector);n.val(m(t))}else e.insertHtml(t),r&&d(e)},m=function(e){return e.toString().replace(/<\s*br\s*\/?\s*>/g,"\n")},g=function(e,t){$("#cke_"+e).css("borderColor","#e80808"),t&&t.setError($("#"+e))},v=function(e,t){t&&t.clearValidateResult($("#"+e))},b=function(e,t){$("#cke_"+e).css("borderColor","#dedede"),t&&t.setSuccess($("#"+e))},_=function(e,t){$("#cke_"+e).css("borderColor","#dedede"),t&&t.setTips($("#"+e))},h=function(e,t){e.validator=t,t.extend("details",function(){var r=e.name,i=c(e);if(0===$.trim(i.replace(/&nbsp;/gi,"").replace(/<\s*br\s*\/?\s*>/gi,"")).length)return t.msg="课程详细信息不能为空",g(r,t),!1;var n=i.match(/https?:\/\/(?:(?:[-\w\.])+\.)?(?:[-\w]+)\.[a-z]{2,4}\b/gi);if(n)for(;n.length;){var a=n.shift();if(!/https?:\/\/(?:(?:[-\w\.])+\.)?(qq\.com|qpic\.cn|url\.cn|myqcloud\.com)\b/i.test(a))return t.msg="腾讯课堂暂不支持外链跳转，请修改后再试",g(r,t),!1}var o=$("<div>"+i+"</div>").find("video");return o.length>e.videoLimit?(t.msg="最多只能添加"+videoLimit+"个视频",g(r,t),!1):(b(r,t),!0)})};r.exports={_getDetails:c,_insertHTML:o,_setDetails:p,_clearHTML:f,_setError:g,_clearError:v,_setSuccess:b,_setTips:_,_initValidator:h}});
/*!edu_modules/ckeditor.init/src/index*/
;define("edu_modules/ckeditor.init/src/index",function(i,t,e){function n(i){u?i():s.push(i)}function o(i,t,e){n(function(){l(i,t,e)})}var d=i("edu_modules/ckeditor.init/src/default-config"),a=i("edu_modules/ckeditor.init/src/util"),r=i("edu_modules/validator/validator"),c=i("jquery"),s=[],u=!1;i.async(["ckeditor"],function(){i.async(["ckeditorAdapter"],function(){u=!0,s.forEach(function(i){i()})})});var l=function(t,e,n){var o=c(t),s=window.CKEDITOR;d.editorConfig(s.config,e);var u=c.extend({},d.defaultOpts,e);e.rawConfig&&c.each(e.rawConfig,function(i,t){s.config[i]=t});var l=s.config.removeButtons.split(",");if(0===u.resetButtons.length){for(var f=u.addButtons.length-1;f>=0;f--){var k=l.indexOf(u.addButtons[f]);k>-1&&l.splice(k,1)}for(var f=u.removeButtons.length-1;f>=0;f--){var k=l.indexOf(u.removeButtons[f]);0>k&&l.push(u.removeButtons[f])}}else{l="Superscript,Source,Subscript,Cut,Copy,Paste,PasteText,PasteFromWord,Styles,Format,Blockquote,CreateDiv,Outdent,Indent,BidiLtr,BidiRtl,Language,Find,Replace,SelectAll,Scayt,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,ShowBlocks,Save,NewPage,Preview,Print,Templates,Bold,RemoveFormat,TextColor,NumberedList,BulletedList,BGColor,JustifyLeft,JustifyCenter,JustifyRight,JustifyBlock,Undo,Redo,Form,Maximize,About,Font,FontSize,Italic,Underline,Strike".split(",");for(var f=u.resetButtons.length-1;f>=0;f--){var k=l.indexOf(u.resetButtons[f]);k>-1&&l.splice(k,1)}}s.config.keystrokes||(s.config.keystrokes=[]),s.config.skin=u.skin,s.config.uiColor=u.uiColor,s.config.removeButtons=l.join(","),s.config.resize_enabled=u.resizeEnabled;var v=o.attr("id");v||(v="ck"+(new Date).getTime(),o.attr("id",v)),o.ckeditor({height:u.height,extraPlugins:u.extraPlugins.map(function(i){return i.name}).join(",")}),s.instances[v].on("instanceReady",function(t){var o=t.editor;if(o.detailsNotVali=!1,!e.isPreload){a._setDetails(o,u.content,!0),a._initValidator(o,r),o.on("blur",function(){u.validator&&!o.detailsNotVali&&u.validator.details(o,a),o.detailsNotVali=!1}),o.on("focus",function(){a._setTips(v,u.validator)});for(var d=u.extraPlugins.length-1;d>=0;d--){var c=u.extraPlugins[d];switch(c.name){case"addpic":window.__asyncAddPic||!function(){window.__asyncAddPic=!0,i.async(["edu_modules/ckeditor.init/src/addpic"],function(i){window._ckeditorAddPic=i})}(c);break;case"addvideo":!function(t){i.async(["edu_modules/ckeditor.init/src/addvideo"],function(i){o.videoLimit=t.videoLimit,i(v,t.initVideos,t.videoLimit,t.poster)})}(c);break;case"addword":!function(){i.async(["edu_modules/ckeditor.init/src/addword"],function(i){i(v)})}(c);break;case"addlink":window.__asyncAddLink||(window.__asyncAddLink=!0,function(){i.async(["edu_modules/ckeditor.init/src/addlink"],function(i){window._ckeditorAddLink=i})}(c));break;case"instruction":!function(t){i.async(["edu_modules/ckeditor.init/src/instruction"],function(i){i(v,t.content)})}(c);break;case"setcount":}}}n&&n(o)}),s.instances[v].on("change",function(){var i=s.instances[v];a._clearError(v,i.validator)})};e.exports={ckinit:o,util:a}});
/*!edu_modules/ckeditor.init/mod.main.ckeditor*/
;define("edu_modules/ckeditor.init/mod.main.ckeditor",function(e,i,d){d.exports=e("edu_modules/ckeditor.init/src/index")});
/*!agency/publish/step3/step3*/
;define("agency/publish/step3/step3",function(e){var t=e("jquery"),i=(e("edu_modules/edu-db/edu-db"),e("/agency/publish/template/step3.tpl_tpl")),n=(e("agency/publish/common/retcode"),e("agency/publish/common/submit")),a=e("agency/publish/common/_pd"),o=e("edu_modules/ckeditor.init/mod.main.ckeditor"),d=null,r=(navigator.userAgent.match(/\bMSIE\s+(\d+)\b/)||[0,10])[1]<8,c=null,l=["请填写课程的详细描述信息，建议包含以下几类信息：","1. 机构的品牌信息","2. 课程的师资情况（包括老师和助教）","3. 课程的服务特色","4. 课程中不同的班级的区分详细说明","5. 学员对课程的评价展示","6. 优秀学员的作品或者是事迹展示","7. 其他能够帮助学员了解课程的内容"].join("<br />"),s=function(){var i=n.getDraft(),o=n.isLoadFromDraft&&i?i.details:html.decode((a.result||{}).details);r?d.val(o):e(["edu_modules/ckeditor.init/mod.main.ckeditor"],function(e){"undefined"!=typeof window.CKEDITOR&&e.ckinit("#cp_details",{content:o,height:"600",extraPlugins:[{name:"timestamp"},{name:"addlink"},{name:"addpic"},{name:"addvideo",poster:"/modules/img/nohash/poster.jpg",videoLimit:1,initVideos:function(e){a.initVideos(function(){e(a.videos)})}},{name:"addword"},{name:"instruction",content:l}],removeButtons:["Source"]},function(e){c=e,u(),o||setTimeout(function(){var i=t(e.container.$).find("a.cke_button__instruction");i.click()},1e3)})})},u=function(){var e=0,i=setInterval(function(){e+=1,e>=10&&clearInterval(i);try{CKEDITOR.instances.ckeditor_preload&&CKEDITOR.instances.ckeditor_preload.destroy(),t("#ckeditor_preload_wrap").remove()&&clearInterval(i)}catch(n){}finally{}},500)},p=function(){a.WITHOUT_VERIFY=!0,"b"===a.cmd&&t.each(["name","cover_url"],function(e,i){if("category_label"===i){var n=t._toArray(a.data[i]).slice(0).toString(),o=t._toArray(a.result[i]).slice(0).toString();if(n!==o)return a.WITHOUT_VERIFY=!1,!1}else if(a.data[i]!==a.result[i])return a.WITHOUT_VERIFY=!1,!1})},m=function(){var e=!0;if(r||(e=null!==c&&c.validator.details()&&e),!e)return t(".publish-step3 .g-err").eq(0).offset()&&t("html,body").animate({scrollTop:t(".publish-step3 .g-err").eq(0).offset().top-56},1e3),!1;var i="";i=r?d.val():o.util._getDetails(c);var n=t("<div>"+i+"</div>").find("video"),l=1===n.length?n.data("vid"):"";return t.extend(a.data,{details:i,detail_vid:l}),!0},f=function(){p(),t(".publish-step3 .btn-submit").toggleClass("hide","b"!==a.cmd).text(a.WITHOUT_VERIFY?"提交":"提交审核")},v=function(){a=a||{},t("#publish_steps").append(i());var e=t(".publish-step3"),o=e.find(".btn-prev-step"),r=e.find(".btn-next-step"),c=e.find(".btn-preview"),l=e.find(".btn-submit");d=t("#cp_details"),p(),s(),o.click(function(){a.initStep(2)}),r.click(function(e){m()?a.initStep(4):e.preventDefault()}),l.click(function(e){if(e.preventDefault(),m()){var t=a.data||{};n.commit(t)}}),r.toggleClass("hide","b"===a.cmd),l.toggleClass("hide","b"!==a.cmd).text(a.WITHOUT_VERIFY?"提交":"提交审核"),c.toggleClass("hide","b"!==a.cmd),c.click(function(e){if(e.preventDefault(),m()){var t=a.data||{};n.preview(t,0)}})};return{init:v,checkThisStep:f}});
/*!/agency/publish/template/step4.tpl_tpl*/
;define("/agency/publish/template/step4.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="publish-step publish-step4 container"> <div class="mod-extra-wrap"></div> <ul class="mod-term-wrap"></ul> <div class="f-item f-item--action-center"> <div class="commit_confirm '),("publish"!==it.type||it.isfree)&&_$out_.push("hide"),_$out_.push('"> '),_$out_.push(1===it.isTupAgency?' <p>为了保证教学内容的完整性，收费课创建后每个自然月可以提交目录升级一次（可以新增节或任务、修改节或任务标题），审核通过后生效；提交后不论是否通过，需等下一自然才可再次申请升级；新增补充任务（未报名学生不可见）、调换目录顺序、更改直播时间、更换视频资料习题、设置免费试学可随时修改，立即生效。<br />请您确认无误后再提交。<a href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=1224&page=&extra=#pid4088" target="_blank" class="nor-link">点击了解更多</a></p> ':' <p>为了保证教学内容的完整性，课程目录提交审核后，将不能删除、不能修改名称、只能有限制的新增任务（新增节和任务只有已报名学生能看到，未报名学生看不到）。<br />提交审核后，可通过“教学管理-教学安排”调整顺序、修改直播时间或关联的视频资料习题。请您确认无误后再提交。<a href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=1224&page=&extra=#pid4088" target="_blank" class="nor-link">点击了解更多</a></p> '),_$out_.push(' <div class="checkbox '),"publish"!==it.type&&_$out_.push("checkbox-check"),_$out_.push('" id="submit_confirm" > <i></i><span>我已确认无误</span> </div> </div> <div class="f-field publish-btn-wrap"> '),"publish"===it.type&&_$out_.push(' <a href="#step=3" class="btn-weak btn-l btn-prev-step">上一步</a> <a href="javascript:;" class="btn-weak btn-l btn-preview">预览</a> '),_$out_.push(" "),-1!==["newterm","update"].indexOf(it.type)&&1===it.isTupAgency&&_$out_.push(' <a href="javascript:;" class="btn-weak btn-l btn-preview">预览</a> '),_$out_.push(' <a href="javascript:;" class="btn-default btn-l btn-commit '),"publish"!==it.type||it.isfree||_$out_.push("disabled"),_$out_.push('">提交审核</a> </div> </div></div>'),_$out_.join("")}}});
/*!agency/publish/step4/term.data*/
;define("agency/publish/step4/term.data",function(t){t("edu_modules/validator/validator");var e=t("jquery"),i=t("@tencent/im-cache/cache"),r=t("agency/publish/common/state"),a=r.is_copy,n=r.is_modify,s=r.is_newterm,_=r.is_update,o=r.is_plan,c=r.is_publish,d=r.is_passcard,f=r.is_free_course,u=r.is_train_course,l=t("agency/publish/common/_pd"),m="term-has-error",p=function(){return"p"===l.cmd&&!f()},g=(new e.Validator).setOptions({succCls:"f-item--success",infoCls:"f-item--info",errCls:"f-item--error",parentSelector:".f-item",resultSelector:".f-msg",getMsgHtml:function(t){return'<i class="icon-msg"></i><p class="f-msg-text">'+(t||"")+"</p>"}}).validator,h={NON:0,ADD:1,MOD:2,DEL:3},v={list:["term","chapter_info","sub_info","task_info"],term:["term_op_flag","term_id","name","introduce","sponsor","endtime","price","cycle","sign_endtime","sign_max","te_list","tu_list","chapter_info","inner_id"],chapter_info:["chapters_op_flag","ch_id","type","name","introduce","sub_info"],sub_info:["csid","name","task_info"],task_info:["taid","name","type","stu_cnt","resid_list","te_list","tu_list","bgtime","endtime","expr_flag","expr_range","introduce","files","video","exam","special_flag","restrict_flag","append_flag"]},y=function(t,e){return e=e||t.closest(".term-item"),e.attr("id")+"chapters_op_flag"},b=function(t){if(t&&t.term_id&&n()){var r={term_op_flag:h.DEL,term_id:t.term_id},a=i.get("term_op_flag");e.isArray(a)?a.push(r):a=[r],i.set("term_op_flag",a)}},D=function(t,r){r||(r=y(t));var a=t.attr("id"),s=i.get(a);if(s&&s.ch_id&&n()){var _={ch_id:s.ch_id,chapters_op_flag:h.DEL},o=i.get(r);e.isArray(o)?o.push(_):o=[_],i.set(r,o)}},k=function(t,e){return e=e||j(t),g.toDateWithOutHMS(new Date(e._tmp_mintime||new Date))},x=function(t,i){return i=i||k(t),new Date(+i+864e5*e.render.year_days())},O=function(t,i){var r=e(".publish-step4"),a=r.find("."+m),n=r.find(".course-time .err-tips"),s=r.find(".guide--class, .guide--catalog").find(".f-item--error").add(a);if(i&&(s=s.add(i)),t&&(s=s.add(n)),s.length){var _=s.eq(0),o=_.closest(".term-item").index();e(".mod-term-nav-wrap .mod-tab__li").eq(o).trigger("click"),e("html, body").animate({scrollTop:_.offset().top-56},1e3)}},A=function(t){var i=!0;return t.closest(".term-item").find(".guide--class, .guide--catalog").find("[data-pattern]").not(":hidden").each(function(){i=g.validate(e(this))&&i}),O(),i},w=function(t){return i.get(t.attr("id"))||{}},q=function(t){var r=[];return t.find(".task-item").each(function(){var t=e(this),a=t.attr("id"),s=i.get(a);if(s){s.id=a,s.taid=(n()?s.taid:"0")||"0";var _={};for(var o in s)("restrict_flag"!=o||"restrict_flag"===o&&0!==s[o])&&(_[o]=s[o]);r.push(_)}}),r},C=function(t){var r=[];return t.find(".part-item").each(function(){var t=e(this),a=t.attr("id"),s=i.get(a);if(s){s.id=a,s.csid=(n()?s.csid:0)||0,r.push(s);var _=q(t);_.length?s.task_info=_:delete s.task_info}}),r},N=function(t){var r=[];t.find(".chapter-item").each(function(){var t=e(this),a=t.attr("id"),s=i.get(a);if(s){s.id=a,s.type=1,s.ch_id=(n()?s.ch_id:0)||0,s.chapters_op_flag=0===s.ch_id?h.ADD:n()?h.MOD:h.ADD,r.push(s);var _=C(t);_.length?s.sub_info=_:delete s.sub_info}});var a=i.get(y(t));return e.isArray(a)&&(r=r.concat(a)),r},j=function(t,r){var a=t.attr("id"),s=i.get(a);if(s){if(s=e.extend({},s),s.id=a,s.term_id=(n()||_()?s.term_id:0)||0,s.term_op_flag=0===s.term_id?h.ADD:n()?t.data("crossover")?h.NON:h.MOD:h.ADD,s.sponsor=(s.sponsor||[])[0],r){var o=N(t);o.length?s.chapter_info=o:delete s.chapter_info}else delete s.chapter_info;return s}},M=function(){var t=[];e(".mod-term-wrap .term-item").each(function(){var i=e(this),r=j(i,!0),a=H(i,!1,r),n=i.data("term_string");n===a&&0!==r.term_id&&(r.term_op_flag=h.NON);var _=e.bom.query("inner_id");s()&&_&&(r.inner_id=parseInt(_,10)),t.push(r)});var r=i.get("term_op_flag");if(e.isArray(r)&&(t=t.concat(r)),"n"===l.cmd){var a=S(l.result.terms);t=a.concat(t)}return B(t)},S=function(t){var i=[];return e.each(t,function(t,r){r.term_op_flag=0,delete r.chapter_info,e.bom.query("inner_id")&&0===r.term_id||i.push(r)}),i},E=function(){var t=M()[0]||{},e=l.result.terms||[];return e.push(t),B(e)},I=function(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"},L=function(t){var i=null;if(I(t,"Object")){i={};for(var r in t)if(!/(^_tmp|op_flag$)/.test(r)){var a=t[r];i[r]=I(a,"Object")||I(a,"Array")?L(a):a}}else{if(!I(t,"Array"))return t;i=[],e.each(t,function(t,e){i.push(L(e))})}return i},H=function(t,e,i){var r=JSON.stringify([L(i||j(t,!0))]);return e&&t.data("term_string",r),r},B=function(t,i,r,n,s,_){if(i=parseInt(i,10)||0,l=l||{},e.isArray(t)){var o=[];return e.each(t,function(t,c){if(!c)return!0;var d={};d._tmp=c,e.each(v[v.list[i]],function(t,e){if(void 0===c[e])return!0;if(e===v.list[i+1])d[e]=B(c[e],i+1,r,n,s,_);else if((n||a())&&-1!==["term_id","ch_id","csid","taid"].indexOf(e))d[e]="taid"===e?"0":0;else if(!s||"bgtime"!==e&&"endtime"!==e){if(_&&"append_flag"===e&&1===c[e])return void(d=void 0);var o=c[e];"string"==typeof o&&r&&(o=html.decode(o),/introduce/.test(e)&&(o=l._decodeBr(o)),c[e]=o),d[e]=o}else d[e]=0}),(!_||2!==i||J(d))&&d&&o.push(d)}),o}return t=[]},J=function(t){for(var e=0,i=0,r=t.task_info.length;r>i;i++)1===t.task_info[i].append_flag&&e++;return e!==t.task_info.length},T=function(t,e,i){if(t[e?"addClass":"removeClass"](m),!e&&t.closest("."+m).removeClass(m),i){var r=t.find("input");r.length&&(g.msg=i,g.setError(r.eq(0)))}O()},V=function(t){t.find(":input").not(":hidden").eq(0).focus(),T(t,!1)},W=function(t){return!t.find(".guide--class--edit").hasClass("sign-max-disabled")},$=function(t,e){var i=t.price>=5e4?6:2,r=parseInt(+new Date/1e3,10)+2592e3*i;return e?{amount:i,max:r}:r};return{validator:g,is_copy:a,is_modify:n,is_newterm:s,is_update:_,is_publish:c,is_plan:o,is_passcard:d,is_free_course:f,is_train_course:u,is_schedule_task:p,check_sign_max:W,clear_data:B,input_focus:V,check_inputs:A,get_min_date:k,get_max_date:x,get_item_data:w,get_term_data:j,get_part_data:C,get_task_data:q,set_has_error:T,get_terms_data:M,get_new_terms_data:E,first_task_max:$,scroll_to_error:O,get_term_string:H,get_chapter_data:N,update_term_op_flag:b,update_chapter_op_flag:D,get_term_chapter_op_flag_key:y}});
/*!agency/publish/step4/course*/
;define("agency/publish/step4/course",function(t,e){{var e={LIVE:1,VIDEO:2,FILE:3,EXAM:4,QA:5,LIVE_AND_REPLAY:11},r=function(t,e,n){if("object"==typeof t)for(var i in t)if(!/^_tmp/i.test(i))if(i===e){var a=t[i];$.isArray(a)?$.each(a,function(t,e){n.push(e)}):n.push(a)}else r(t[i],e,n)},n=e.get_tasks=function(t){var e=[];return t=t||{},t=t.chapter_info||t,r(t,"task_info",e),e};e.get_tasks_live=function(t,r){r||(r=n(t));for(var i=[],a=0,f=r.length;f>a;a++){var s=r[a];s.type===e.LIVE&&i.push(s)}return i},e.get_type=function(t,e){e||(e=n(t));var r={},i=[];$.each(e,function(t,e){r[e.type]=(r[e.type]>>0)+1;var n=e.resid_list;n&&i.push(n)});var a=e.length;for(var f in r)if(r[f]===a){var s=parseInt(f,10);return s+=1===s&&i.length?10:0}return-1}}return e});
/*!@tencent/im-edu-datepicker/edu-datepicker*/
;define("@tencent/im-edu-datepicker/edu-datepicker",function(t){var e=t("jquery"),i=function(t,i){if(this.options=i,this.element=e(t),this.format=a.parseFormat(i.format||this.element.data("date-format")||"yyyy-mm-dd"),this.picker=e(a.template(i).replace(/{{dpCls}}/,i._dpCls||"")).appendTo(this.options._body||"body").on({click:e.proxy(this.click,this)}),this.picker.data("toggle",this.element),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),click:e.proxy(this.show,this)}):this.component?this.component.on("click",e.proxy(this.show,this)):this.element.on("click",e.proxy(this.show,this)),this.minViewMode=i.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=i.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=i.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=i.onRender,this.isUp=i.isUp,this.adjustUp=i.adjustUp,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};i.prototype={constructor:i,show:function(t){this.picker.show(),this.options._show&&this.options._show(this.element),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&!this.options._isStopProp&&(t.stopPropagation(),t.preventDefault()),!this.isInput;var i=this;e(document).on("mousedown",function(t){0===e(t.target).closest(".datepicker").length&&i.hide()}).on("navchange",function(){i.hide()}),this.element.trigger({type:"show",date:this.date})},hide:function(){!this.options._not_hide&&this.picker.hide(),this.options._hide&&this.options._hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var t=a.formatDate(this.date,this.format);this.options._click&&this.options._click(this.date,this.element),this.isInput?this.element.prop("value",t):(this.component&&this.element.find("input").prop("value",t),this.element.data("date",t)),this.options._set&&this.options._set(this.date,this.element)},setValue:function(t){this.date="string"==typeof t?a.parseDate(t,this.format):new Date(t),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},getAdjustUp:function(t,i,s){var a=e(window),o=a.scrollTop();return t.top+i+s-o>a.height()},place:function(){var t=this.picker.outerHeight(),e=this.component?this.component.offset():this.element.offset(),i=this.height;this.adjustUp&&(this.isUp=this.getAdjustUp(e,i,t)),this.options._body?this.picker.css({top:this.isUp?-(t+i):0,left:0}):(this.isUp&&(i=-1*t),this.picker.css({top:e.top+i,left:e.left}))},update:function(t,e){if(t&&"[object Date]"===Object.prototype.toString.call(t))this.date=t;else if(e="function"==typeof this.options._defaultVal?new Date(this.options._defaultVal()):!1,this.options._isMuitPicker)this.date=e?new Date(e):a.today;else{var i="string"==typeof t?t:this.isInput?this.element.prop("value"):this.element.data("date");this.date=i?a.parseDate(i,this.format):e?new Date(e):a.today}isNaN(this.date.valueOf())&&(this.date=e&&!isNaN(e.valueOf())?e:a.today),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.viewDate.setFullYear(this.date.getFullYear()),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow dow'+t+'">'+a.dates.daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+a.dates.monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").append(t)},switchClk:function(){this.options.switchClk&&this.options.switchClk()},fill:function(){this.options._begin=this.options._begin?a.toDateWithOutHMS(this.options._begin):0,this.options._end=this.options._end?a.toDateWithOutHMS(this.options._end):0;var t=this.viewDate.getFullYear();1900>=t?(this.viewDate.setFullYear(1900),this.picker.find(".lastYear").addClass("disabled"),1900>t&&this.viewDate.setMonth(0),0===this.viewDate.getMonth()?this.picker.find(".prev").addClass("disabled"):this.picker.find(".prev").removeClass("disabled")):(this.picker.find(".lastYear").removeClass("disabled"),this.picker.find(".prev").removeClass("disabled"));var i=new Date(this.viewDate),s=i.getFullYear(),o=i.getMonth(),n=this.date.valueOf();this.picker.find(".datepicker-days th.switch").text(s+a.dates.yearSuffix+a.dates.monthsShort[o]),this.picker.find(".datepicker-days-bg").text(o+1);var h=new Date(s,o-1,28,0,0,0,0),r=a.getDaysInMonth(h.getFullYear(),h.getMonth());h.setDate(r),h.setDate(r-(h.getDay()-this.weekStart+7)%7);var d=new Date(h);d.setDate(d.getDate()+42),d=d.valueOf();for(var p,l,c,u=[],f=0,w=!1,v=0,m="function"==typeof this.options._dates?this.options._dates():this.options._dates,g="function"==typeof this.options._defaultVal?this.options._defaultVal():!1;h.valueOf()<d;){h.getDay()===this.weekStart&&(u.push("<tr"+(this.options._isView?' class="tr-view"':"")+">"),f=0),p=this.onRender(h),l=h.getFullYear(),c=h.getMonth(),w=!1,o>c&&l===s||s>l?(p+=" old",v++,w=!0):(c>o&&l===s||l>s)&&(p+=" new",w=!0),h.valueOf()===n&&(p+=" active"),g&&h.valueOf()===g&&(p+=" defaultDay current");var y="",k="";this.options._begin&&h<this.options._begin&&(k=" disabled before_begin"),this.options._end&&h>this.options._end&&(k=" disabled after_end"),""===k&&this.options._filter&&this.options._filter(h,this.element)&&(k=" disabled"),this.options._isView&&(k+=(-1!==k.indexOf("disabled")?"":" disabled")+(!this.options._isMuitPicker&&h<a.today?" pass":"")+(/(before_begin|after_end)/.test(k)?" not_allow":""),e.isArray(m)&&-1!==m.indexOf(h.getTime())?(y="current",f++):f=0,this.options._isMuitPicker||(0===f?u.push(u.pop().replace(/{{opob}}/gi,"").replace(/{{opom}}/gi,"{{opoe}}")):1===f?k+=" date-view {{opob}}":f>1&&(k+=" date-view {{opom}}")));var D=[h.getFullYear(),h.getMonth()+1,h.getDate()].join("/");if(this.options._isView){var M=[["",h.getDate()],["day-today","今天"],["day-holiday","假日"]],b=0;"function"==typeof this.options._isHoliday&&this.options._isHoliday(+h)&&(b=2),h.getTime()===a.today.getTime()&&(b=1),u.push(('<td class="day'+p+k+' {{viewCls}}" data-date="'+D+'"><div><i>{{viewText}}</i><b></b><u></u></div></td>').replace(/{{viewCls}}/gi,this.options._isMuitPicker?y:M[b][0]).replace(/{{viewText}}/gi,M[b][1]))}else u.push('<td class="day'+p+k+'" data-date="'+D+'">'+h.getDate()+"</td>");h.getDay()===this.weekEnd&&(u.push(u.pop().replace(/{{opob}}/gi,"").replace(/{{opom}}/gi,"{{opoe}}")),u.push("</tr>")),h.setDate(h.getDate()+1)}var _=this.picker.find(".datepicker-days tbody");_.empty().append(u.join("").replace(/{{opo([bem])}}/gi,"view-day-$1")),v>=7&&_.find("tr:eq(0)").hide();var Y=this.date.getFullYear(),F=this.picker.find(".datepicker-months").find("th.switch").text(s+a.dates.yearSuffix).end().find("span").removeClass("active");Y===s&&F.eq(this.date.getMonth()).addClass("active"),u="",s=10*parseInt(s/10,10);var x=this.picker.find(".datepicker-years").find("th.switch").text(s+"-"+(s+9)).end().find("td");s-=1;for(var S=-1;11>S;S++)u+='<span class="year'+(-1===S||10===S?" old":"")+(Y===s?" active":"")+'">'+s+"</span>",s+=1;x.html(u)},click:function(t){!this.options._isMuitPicker&&t.stopPropagation(),t.preventDefault();var i=e(t.target).closest("span, td, th");if(1===i.length){var s,o;switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":break;case"prev":case"next":this.viewDate["set"+a.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+a.modes[this.viewMode].navFnc].call(this.viewDate)+a.modes[this.viewMode].navStep*("prev"===i[0].className?-1:1)),this.switchClk(),this.fill();break;case"lastYear":case"nextYear":this.viewDate.setFullYear.call(this.viewDate,this.viewDate.getFullYear.call(this.viewDate)+("lastYear"===i[0].className?-1:1)),this.switchClk(),this.fill()}break;case"span":i.is(".month")?(o=i.parent().find("span").index(i),this.viewDate.setMonth(o)):(s=parseInt(i.text(),10)||0,this.viewDate.setFullYear(s)),0!==this.viewMode&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:a.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(i.is(".day")&&!i.is(".disabled")){var n=parseInt(i.text(),10)||1;o=this.viewDate.getMonth(),i.is(".old")?o-=1:i.is(".new")&&(o+=1),s=this.viewDate.getFullYear(),this.date=new Date(s,o,n,0,0,0,0),this.viewDate=new Date(s,o,Math.min(28,n),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:a.modes[this.viewMode].clsName})}}}},select:function(t){var e=t.day,i=t.month,s=t.year;this.date=new Date(s,i,e,0,0,0,0),this.viewDate=new Date(s,i,Math.min(28,e),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:a.modes[this.viewMode].clsName})},setOption:function(t){return e.extend(this.options,t),this.fill(),this.set(),this},getDate:function(){return this.date},mousedown:function(t){!this.options._isMuitPicker&&t.stopPropagation(),t.preventDefault()},showMode:function(t){t&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+a.modes[this.viewMode].clsName).show()}},e.fn.datepicker=function(t,s){return this.each(function(){var a=e(this),o=a.data("datepicker"),n="object"==typeof t&&t;o||a.data("datepicker",o=new i(this,e.extend({},e.fn.datepicker.defaults,n))),"string"==typeof t&&o[t](s)})},e.fn.datepicker.defaults={onRender:function(){return""},adjustUp:!1},e.fn.datepicker.Constructor=i;var s=new Date;s.setHours(0,0,0,0);var a={today:s,modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["周日","周一","周二","周三","周四","周五","周六","周日"],daysShort:["日","一","二","三","四","五","六","日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],yearSuffix:"年"},isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,a.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},toDateWithOutHMS:function(t){return"string"==typeof t&&(t=t.replace(/-/g,"/")),t=isNaN(Date.parse(new Date(t)))?new Date:new Date(t),t.setHours(0,0,0,0),t},parseFormat:function(t){var e=t.match(/[.\/\-\s].*?/),i=t.split(/\W+/);if(!e||!i||0===i.length)throw new Error("Invalid date format.");return{separator:e,parts:i}},parseDate:function(t,e){if(!t)return a.today;var i,s=t.split(e.separator);if(t=new Date,t.setHours(0,0,0,0),s.length===e.parts.length)for(var o=t.getFullYear(),n=t.getDate(),h=t.getMonth(),r=0,d=e.parts.length;d>r;r++)switch(i=parseInt(s[r],10)||1,e.parts[r]){case"dd":case"d":if(n=i,n>31)return a.today;t.setDate(i);break;case"mm":case"m":if(h=i-1,h>11)return a.today;t.setMonth(h);break;case"yy":if(o=2e3+i,1900>o||o>2099)return a.today;t.setFullYear(o);break;case"yyyy":if(o=i,1900>o||o>2099)return a.today;t.setFullYear(o)}return t},formatDate:function(t,e){var i={d:t.getDate(),m:t.getMonth()+1,yy:t.getFullYear().toString().substring(2),yyyy:t.getFullYear()};i.dd=i.d,i.mm=i.m,t=[];for(var s=0,a=e.parts.length;a>s;s++)t.push(i[e.parts[s]]);return t.join(e.separator)},headTemplate:function(t){return"<thead><tr>"+(t._showYearBtn?'<th class="lastYear"><b><i>&lsaquo;&lsaquo;</i></b></th>':"")+'<th class="prev"><b><i>&lsaquo;</i></b></th><th colspan="'+(t._showYearBtn?"3":"5")+'" class="switch"></th><th class="next"><b><i>&rsaquo;</i></b></th>'+(t._showYearBtn?'<th class="nextYear"><b><i>&rsaquo;&rsaquo;</i></b></th>':"")+"</tr></thead>"},contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};return a.template=function(t){return'<div class="datepicker dropdown-menu {{dpCls}}"><div class="datepicker-days"><table class=" table-condensed">'+a.headTemplate(t)+'<tbody></tbody></table><div class="datepicker-days-bg"></div></div></div>'},a});
/*!agency/publish/step4/part.max*/
;define("agency/publish/step4/part.max",function(e){var t=(e("edu_modules/edu-db/edu-db"),e("@tencent/im-cache/cache"),e("jquery")),i=e("agency/publish/step4/term.data"),n=function(){return 250},a=function(){return 5*(i.is_free_course()?30:250)},r=function(e){var i=e.find(".part-item.item--edit"),a=[".chapter-add",".item-line--chapter .item--insert",".part-item.item--add .add-btn",".item-line--part .item--insert"];n()<=i.length?e.find(a.join(", ")).addClass("disabled"):e.find(a.join(", ")).removeClass("disabled"),t.event.trigger("task:update",[e])},s=function(e){if(e.closest(".task-list").find(".task-item").length<=2){var t=e.closest(".part-item");if(1===t.closest(".part-list").find(".part-item.item--edit").length){var i=t.closest(".chapter-item");i.remove()}else t.remove()}else e.remove()},d=function(e){for(var t=e.find(".chapter-list"),i=t.find(".task-item[type=1]"),n=a(),d=i.length,c=0,m=1e4;d>n&&m--;)!function(e){setTimeout(function(){s(e)},0)}(i.eq(--c),d--);e.data("crossover")||r(t)},c=function(e){var t=e.closest(".term-item"),i=t.find(".task-item[type=1]");return a()<=i.length?!0:!1};return{live_task_max:c,check_part_max:r,clear_over_part:d}});
/*!/agency/publish/template/term.detail.tpl_tpl*/
;define("/agency/publish/template/term.detail.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];if(_$out_.push('<div class="content-guide guide--catalog"> <div class="guide-hd"> <h3 class="guide-tt">',opt.title,'<span class="warn-tip">',opt.tip,'</span></h3> </div> <div class="guide-bd"> <div class="chapter-list"> '),it.chapter_info&&$.isArray(it.chapter_info))for(var i=0,l=it.chapter_info.length;l>i;i++)it.chapter={index:i+1,action:"view",data:it.chapter_info[i]},_$out_.push(" ",function(it,opt){with(it=it||{}){var _$out_=[];it.data=it.data||{};var uuid=it.id?it.id:$.render.chapter_uuid(it.data),chapter_data_cls="view"===it.action&&it.data.name?" chapter-item--data":"",dispart=dispart||it.dispart;if(_$out_.push('<div class="chapter-item chapter-item--',it.action,"",chapter_data_cls,'" id="',uuid,'"> <div class="item-line item-line--chapter hide" > <i class="icon-v icon-font i-v-bottom"></i> <span class="item-index item-index--chapter">第<span class="index" data-index="',it.index,'">',$.render.number_cn(it.index),'</span>章：</span> <div class="item-view--wrap"> ',function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="item-name item-name--chapter"> <p class="name-text">',html.encode(it.name||""),'</p></div><div class="oper-list"> <span class="oper-item item--insert"><i class="icon-font i-insert"></i>插入</span> <span class="oper-item item--edit"><i class="icon-font i-edit"></i>修改</span> <span class="oper-item item--del"><i class="icon-font i-delete"></i>删除</span></div>'),_$out_.join("")}}(it.data,opt)," </div> ",function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="item-name item-name--edit"> <div class="f-item"> <div class="f-field"> <input name="chapterName" class="f-text" type="text" placeholder="输入章名称，1-20个字" data-pattern="not_null|limit" data-msg="章名称不能为空|" data-tips="输入章名称，1-20个字" data-name="章" data-min="1" data-max="20" value="默认第一章" > </div> </div> <div class="f-item"> <label class="f-label">章描述：</label> <div class="f-field"> <textarea name="introduce" class="f-textarea" placeholder = "输入章描述，5-30个字" data-pattern="if_not_null_then|limit" data-min="5" data-max="30" data-tips="请填写章描述，5-30个字" >默认第一章（去掉章）</textarea> </div> </div> <div class="f-item"> <div class="f-field"> <div class="do-btn-list hide"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> <span class="btn-weak btn-del">删除</span> </div> </div> </div></div>'),_$out_.join("")}}(it.data,opt),' </div> <div class="part-list"> '),it.data&&it.data.sub_info&&$.isArray(it.data.sub_info))for(var i=0,l=it.data.sub_info.length;l>i;i++)it.part={index:i+1,action:"view",chapter_index:it.index,data:it.data.sub_info[i]},_$out_.push(" ",function(it,opt){with(it=it||{}){var _$out_=[];it.data=it.data||{};var uuid=it.id?it.id:$.render.part_uuid(it.data),num=it.data.num=(it.data.task_info||[]).length,max_class_name=num>=5?" task-max":"",part_data_cls="view"===it.action&&it.data.name?" part-item--data":"",schedule=opt.schedule||!1;if(_$out_.push('<div class="part-item item--edit part-item--',it.action,"",max_class_name,"",part_data_cls,'" id="',uuid,'"> <div class="item-line item-line--part"> <i class="icon-v icon-font i-v-bottom"></i> <span class="item-index item-index--part" data-index="',it.index,'">',$.render.part_index(it.chapter_index,it.index,opt&&opt.chapter_info?opt.chapter_info:null),'</span> <div class="item-view--wrap"> ',function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="item-name item-name--part"> <p class="name-text">',html.encode(it.name||""),'</p></div><span class="part-task">共<span class="task-num">',parseInt(it.num,10)||0,'</span>项任务</span><div class="oper-list"> <span class="oper-item item--insert"><i class="icon-font i-insert"></i>插入</span> <span class="oper-item item--edit"><i class="icon-font i-edit"></i>修改</span> <span class="oper-item item--del"><i class="icon-font i-delete"></i>删除</span> <span class="oper-item item--add"><i class="icon-font i-add"></i>'),_$out_.push(opt.schedule?"添加补充任务":"添加学习任务"),_$out_.push("</span></div>"),_$out_.join("")}}(it.data,opt)," </div> ",function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="item-name item-name--edit"> <div class="f-item"> <div class="f-field"> <input type="text" name="partName" class="f-text" placeholder="输入节名称，30个字以内" data-pattern="not_null|limit" data-msg="节名称不能为空|" data-tips="输入节名称，30个字以内" data-name="节" data-min="1" data-max="30" > </div> </div> <div class="do-btn-list hide"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> <span class="btn-weak btn-del">删除</span> </div></div>'),_$out_.join("")}}(it.data,opt),' </div> <div class="task-list"> '),it.data&&it.data.task_info&&$.isArray(it.data.task_info))for(var i=0,index=0;num>i;i++){var task_data=it.data.task_info[i];it.task={index:++index,action:"view",data:task_data},_$out_.push(" ",function(it,opt){with(it=it||{}){var _$out_=[];it.data=it.data||{};var now=parseInt(+new Date/1e3),uuid=it.id?it.id:$.render.task_uuid(it.data),task_data_cls="view"===it.action&&it.data.name?" task-item--data":"",live_end_cls=1===data.type&&data.endtime>0&&data.endtime<=now?" task-live-end ":"",schedule_task_class=1===it.data.append_flag||opt.add_schedule_task?" schedule-task":"",update_task_class=opt.update?"update-task":"",new_term_task_class=opt.newterm?"newterm-task":"";return _$out_.push('<div type="',data.type,'" class="task-item item-line task-item--',it.action," ",task_data_cls," ",live_end_cls," ",schedule_task_class," ",update_task_class," ",new_term_task_class,'" id="',uuid,'"> ',function(it,opt){with(it=it||{}){var _$out_=[];opt=opt||{};var data=it.data?it.data:it,type_view=(it.id?it.id:$.render.task_uuid(data),""),task_type="",preview="",error="",res=(parseInt(+new Date/1e3),(data.resid_list||"").toString().split(",")[0]);switch(data.type){case 1:type_view="直播",task_type="live",preview=['<span class="view">',$.render.livetime(data),"</span>"].join(""),$.trim(data.name||"")||(error="请填写任务名称"),error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 2:type_view="录播",task_type="video",preview=['<span class="view video-view" data-vid="'+res+'">',$.render.task_video(res,data),"</span>"].join(""),$.trim(data.name||"")?res||(error="请关联录播视频"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 3:type_view="资料",task_type="res",preview=['<span class="view video-view" data-vid="'+res+'">',($._toArray(data._tmp_files||data.files)[0]||{}).cw_name||"","</span>"].join(""),$.trim(data.name||"")?res||(error="请关联资料"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 4:type_view="习题",task_type="exam",preview=['<span class="view video-view" data-vid="'+res+'">',((data._tmp_exam||[])[0]||data.exam||{}).title||"","</span>"].join(""),$.trim(data.name||"")?res||(error="请关联习题"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 5:type_view="答疑",task_type="faq",$.trim(data.name||"")||(error="请填写任务名称"),error=error?['<span class="err">',error,"</span>"].join(""):""}return _$out_.push('<div class="item-view--wrap"> <div class="item-name"> <p class="name-text"><span class="name">【',type_view,"】",html.encode(data.name),"</span>"),1===data.append_flag&&_$out_.push('<span class="schedule">补充任务</span>'),_$out_.push("",error,"",preview,'</p> </div> <div class="oper-list"> <span class="oper-item item--move" data-arrow="up"><i class="icon-font id-arrowhead"></i>上移</span> <span class="oper-item item--move" data-arrow="down" ><i class="icon-font id-arrowhead id-arrowhead--bottom"></i>下移</span> <span class="oper-item item--insert"><i class="icon-font i-insert"></i>插入</span> <span class="oper-item item--edit"><i class="icon-font i-edit"></i>修改</span> <span class="oper-item item--del"><i class="icon-font i-delete"></i>删除</span> </div></div>'),_$out_.join("")}}(it.data,opt)," ",function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="form form--h item-edit--wrap '),opt&&opt.add_schedule_task&&_$out_.push("edit-schedule-task"),_$out_.push('"> '),opt&&opt.add_schedule_task&&_$out_.push("<div class='note-msg'>该任务为补充任务，只有已报名学生可见，未报名学生不可见</div>"),_$out_.push(' <!-- 任务类型 --> <div class="f-item f-type"> <label class="f-label"><span class="f-required">*</span>任务类型</label> <div class="f-field"> <div class="diy-select-area f-select-tiny-large"> <a class="diy-select" href="javascript:;" data-select="tasktype"> <i class="text text-tip" name="type" data-tips="请选择任务类型">请选择任务类型</i> <span class="diy-select-toggle"><b></b></span> </a> <ul class="diy-optgroud"> <li class="diy-option" data-value="1"><a href="javascript:;">直播</a></li> <li class="diy-option" data-value="2"><a href="javascript:;">录播</a></li> <li class="diy-option" data-value="3"><a href="javascript:;">学习资料</a></li> <li class="diy-option" data-value="4"><a href="javascript:;">习题</a></li> </ul> </div> </div> </div> <!-- 任务名称 --> <div class="f-item f-name"> <label class="f-label"><span class="f-required">*</span>任务名称</label> <div class="f-field"> <input type="text" name="name" class="f-text" placeholder="输入任务名称，20个字以内" data-pattern="not_null|limit" data-msg="任务名称不能为空|" data-tips="输入任务名称，20个字以内" data-name="节" data-min="1" data-max="20" > </div> </div> <!-- 选择录播视频（不允许选择回放） --> <div class="f-item f-item-resid_list f-video" style="display:none"></div> <!-- 选择资料 --> <div class="f-item f-item-resid_list f-file" style="display:none"></div> <!-- 选择习题 --> <div class="f-item f-item-resid_list f-exam" style="display:none"></div> <!-- 有交必改 --> <div class="f-item f-item-correct-type f-radio--group" data-use="0" style="display:none"> <label class="f-label"><span class="f-required">*</span>批改类型</label> <div class="f-field"> <div class="f-radio-list"> <label class="f-radio list--block--child checked" data-value="2" > <i class="icon-radio"></i> <span class="f-rc-label">全部批改</span> </label> </div> <div class="f-radio-list"> <label class="f-radio list--block--child" data-value="4" > <i class="icon-radio"></i> <span class="f-rc-label">部分批改</span> </label> </div> </div> </div> <!-- 老师批改时间 --> <div class="f-item f-item-studytime" style="display:none"> <label class="f-label"><span class="f-required">*</span>老师批改时间</label> <div class="f-field"> <div class="f-date-wrap"> <input type="text" class="f-date" name="study_begin" data-pattern="not_null|study_time" data-tips="请选择建议学习起始时间" data-msg="请选择建议学习起始时间" > <i class="icon-font i-calendar"></i> </div> <span class="f-join">至</span> <div class="f-date-wrap"> <input type="text" class="f-date" name="study_end" data-pattern="not_null|study_time" data-tips="请选择建议学习结束时间" data-msg="请选择建议学习结束时间" > <i class="icon-font i-calendar"></i> </div> <div class="f-msg"></div> </div> </div> <!-- 免费试学 --> <div class="f-item expr_flag--wrap"> <div class="f-field"> <div class="f-checkbox-list list--block"> <label class="f-checkbox f-checkbox--float" name="expr_flag" data-value="1"> <i class="icon-checkbox"></i> <span class="f-rc-label">支持免费试学</span> </label> <span class="f-question f-question--faq" >',$.render.faq(),'</span> <span class="expr-live-tips">仅在直播任务直播时展示试学入口</span> </div> </div> </div> <!-- 试听设置 --> <div class="f-item expr_range--wrap f-radio--group" style="display:none"> <div class="f-field"> <div class="f-radio-list list--block"> <label class="f-radio list--block--child '),it.expr_flag&&2!==it.expr_flag||_$out_.push("checked"),_$out_.push('" data-value="2" > <i class="icon-radio"></i> <span class="f-rc-label">免费试学<i class="select--gap"></i>分钟</span> </label> </div> </div> <div class="f-field"> <div class="f-radio-list list--block"> <label class="f-radio list--block--child '),1===it.expr_flag&&_$out_.push("checked"),_$out_.push('" data-value="1" > <i class="icon-radio"></i> <span class="f-rc-label">免费试学该视频</span> </label> </div> </div> <div class="f-field f-field-range"> <div class="diy-select-area f-select-tiny-small"> <a class="diy-select" href="javascript:;" data-select="expr_range"> <i class="text" name="expr_range" data-value="5">5</i> <span class="diy-select-toggle"><b></b></span> </a> <ul class="diy-optgroud"> <li class="diy-option selected" data-value="5"><a href="javascript:;">5</a></li> <li class="diy-option" data-value="10"><a href="javascript:;">10</a></li> <li class="diy-option" data-value="15"><a href="javascript:;">15</a></li> <li class="diy-option" data-value="20"><a href="javascript:;">20</a></li> </ul> </div> </div> </div> <!-- 班级特色 --> <!-- <div class="f-item"> <div class="f-field"> <div class="f-checkbox-list list--block"> <label class="f-checkbox f-checkbox--float" name="special_flag" data-value="1"> <i class="icon-checkbox"></i> <span class="f-rc-label">是否班级特色</span> </label> <span class="f-question f-question--faq" >',$.render.faq(),'</span> </div> </div> </div> --> <!--新增保存 取消按钮--> <div class="f-item"> <div class="f-field"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> </div> </div> <!--旧按钮 不知道干什么用--> <div class="do-btn-list hide"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> <span class="btn-weak btn-del">删除</span> </div></div>'),_$out_.join("")}}(it.data,opt),"</div>"),_$out_.join("")}}(it.task,opt)," ")}return _$out_.push(' <div class="task-item item-line item--add"> <div class="add-btn">'),_$out_.push(schedule?"+ 添加补充任务":"+ 添加学习任务"),_$out_.push("</div> </div> </div></div>"),_$out_.join("")}}(it.part,opt)," ");return _$out_.push(' </div> <div class="part-item item-line item--add '),opt&&opt.chapter_info&&it.index!==opt.chapter_info.length&&_$out_.push(" hide"),_$out_.push('"> <div class="add-btn">+ 新增一节</div> </div></div>'),_$out_.join("")}}(it.chapter,{chapter_info:it.chapter_info,schedule:it.schedule,update:it.update,newterm:it.newterm})," ");return _$out_.push(' <div class="chapter-item item--add" style="display:none;"> <div class="item-line"> <div class="add-btn chapter-add">+ 新增一章<span class="err"></span></div> </div> </div> </div> </div></div>'),_$out_.join("")}}});
/*!/agency/publish/template/term.base.edit.tpl_tpl*/
;define("/agency/publish/template/term.base.edit.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="content-guide guide--class guide--class--edit"> ',function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="guide-hd"> <h3 class="guide-tt">本期信息</h3> <div class="hd-right action"> <!--<a href="javascript:;" class="term-del item-action"><i class="icon-font i-delete"></i>删除班级</a>--> <!--<a href="javascript:;" class="term-edit item-action"><i class="icon-font i-edit"></i>编辑</a>--> '),_$out_.push(" </div></div>"),_$out_.join("")}}(it,{type:"edit"}),' <form class="form form--h"> <!-- 班级名称 --> <div class="f-item"> <label class="f-label"><span class="f-required">*</span>输入本期名称',$.render.faq(),'</label> <div class="f-field"> <input name="name" class="f-text" type="text" placeholder="请输入本期名称" data-pattern="not_null|limit" data-min="3" data-max="8" data-tips="请输入本期名称，3-8个字" data-msg="本期名称不能为空" > <!--<a href="javascript:;" class="btn-weak btn-name-picker btn-s">去选一个</a>--> </div> </div> <!-- 班主任 --> <div class="f-item"> <label class="f-label"><span class="f-required">*</span>班主任',$.render.faq(),'</label> <div class="f-field"> <div class="f-select f-popup-select"> <div name="sponsor" class="f-value-wrap js-picker-teacher" data-pattern="not_null" data-msg="请选择班主任" data-max="1" data-picker="teacher" > <span class="f-value"></span> <span class="placeholder">请选择班主任</span> <span class="f-select-icon"><i class="icon-font i-user"></i></span> </div> </div> </div> </div> <!-- 上课老师 --> <div class="f-item"> <label class="f-label"><span class="f-required">*</span>上课老师',$.render.faq(),'</label> <div class="f-field"> <div class="f-select f-popup-select"> <div name="te_list" class="f-value-wrap js-picker-teacher" data-pattern="not_null" data-msg="请选择上课老师" data-max="10" data-picker="teacher" > <span class="f-value"></span> <span class="placeholder">请选择上课老师</span> <span class="f-select-icon"><i class="icon-font i-user"></i></span> </div> </div> </div> </div> <!-- 助教 --> <div class="f-item"> <label class="f-label"><span class="f-required">*</span>助教',$.render.faq(),'</label> <div class="f-field"> <div class="f-select f-popup-select"> <div name="tu_list" class="f-value-wrap js-picker-teacher" data-pattern="not_null" data-msg="请选择助教" data-max="10" data-picker="teacher" > <span class="f-value"></span> <span class="placeholder">请选择助教</span> <span class="f-select-icon"><i class="icon-font i-user"></i></span> </div> </div> </div> </div> <!-- 学习方式 --> <div class="f-item public-study-mode"> <label class="f-label">学习方式',$.render.faq(),'</label> <div class="f-field"> <div class="diy-select-area f-select-tiny-large"> <a class="diy-select" href="javascript:;" data-select="applysetting"> <i class="text" name="applysetting" data-tips="请选择报名设置">学习截止日期前可学</i> <span class="diy-select-toggle"><b></b></span> </a> <ul class="diy-optgroud"> <li class="diy-option" data-value="deadline"> <a href="javascript:;">学习截止日期前可学</a> </li> <li class="diy-option" data-value="validity"> <a href="javascript:;">报名后固定时长可学</a> </li> </ul> </div> <div class="f-msg"><i class="icon-msg"></i><p class="f-msg-text">设置固定学习时长的课程不支持打包为系列课</p></div> </div> </div> <!-- 报名限额 --> <div class="f-item f-item-sign"> <label class="f-label">报名限额',$.render.faq(),'</label> <div class="f-field"> <input name="sign_max" class="f-text" type="text" placeholder="请填写报名限额" data-pattern="if_not_null_then|limit_number" data-prefix="number" data-min="0" data-max="20000" data-tips="限制报名人数的课程不支持打包为系列课" > </div> </div> <!-- 报名限额 --> <div class="f-item f-item-sign-disabled"> <label class="f-label">报名限额',$.render.faq(),'</label> <div class="f-field"> <p><span>无限额</span><span class="help">免费课、循环课与设置了任意学的课程，不支持报名限额</span></p> </div> </div> <!-- 招生截止日期 --> <div class="f-item f-item-applysetting-group f-item-deadline"> <label class="f-label"><span class="f-required">*</span>招生截止日期',$.render.faq(),'</label> <div class="f-field"> <span class="ipt-b">学生在</span> <div class="f-date-wrap"> <input name="sign_endtime" class="f-text js-picker-date edit-term-date" type="text" placeholder="请选择日期" data-pattern="if_not_null_then|date|min_date|max_date|endtime_year|term_endtime" data-tips="招生截止后不允许重新设置该时间" data-msg="|招生截止日期格式不正确|招生截止日期必须大于当前时间|招生截止日期不能大于学习截止日期|招生截止日期超出限制" > <i class="icon-font i-calendar"></i> </div> <span class="ipt-a">前可以报名</span> </div> </div> <!-- 学习时长 --> <div class="f-item f-item-applysetting-group f-item-validity" style="display:none"> <label class="f-label"><span class="f-required">*</span>学习时长',$.render.faq(),'</label> <div class="f-field"> <span class="ipt-b">报名后</span> <input name="cycle" class="f-text" type="text" maxlength="4" data-min="1" data-max="',$.render.year_days(),'" data-prefix="number" data-pattern="not_null|limit_number|validcycle|term_endtime" data-tips="请填写学习时长" data-msg="请填写学习时长" data-msg-validcycle="学习时长不能大于学习截止日期" style="width:40px;padding-right:38px" > <span class="ipt-m" style="margin-left:-26px;margin-right:12px">天</span> <span class="ipt-a">有效</span> </div> </div> <!-- 学习截止日期 --> <div class="f-item"> <label class="f-label"><span class="f-required">*</span>学习截止日期',$.render.faq(),'</label> <div class="f-field"> <span class="ipt-b">课程在</span> <div class="f-date-wrap"> <input name="endtime" class="f-text js-picker-date edit-term-date" type="text" placeholder="请选择日期" data-pattern="not_null|date|min_date|endtime_year" data-tips="学习截止时间设定后不能提前，只能延后" data-msg="学习截止日期不能为空|学习截止日期格式不正确|学习截止日期必须大于当前时间|学习截止日期超出限制" > <i class="icon-font i-calendar"></i> </div> <span class="ipt-a">前可以学习</span> </div> </div> </form></div>'),_$out_.join("")}}});
/*!/edu_modules/pagectrl/page.tpl_tpl*/
;define("/edu_modules/pagectrl/page.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];if(total>1){_$out_.push(" ");var index="undefined"!=typeof idx?idx:1,isFirst=1==index?!0:!1,isLast=index==total?!0:!1,from=parseInt(index-max/2),to=parseInt(index+max/2);(2==from||to==total-2)&&(max+=2);var pager_id="pager_id_"+Math.random().toString().replace(/\D/g,"");if(_$out_.push(" "),max>=total-2){_$out_.push(' <div class="page-box"> <a auto-test="',pager_id,'_prev" href="javascript:void(0);" class="page-prev-btn '),isFirst&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-left"></i></a> ');for(var i=1,len=total;len>=i;i++)_$out_.push(' <a auto-test="',pager_id,"_",i,'" href="javascript:void(0);" data-index="',i,'" class="page-btn'),1==i&&_$out_.push(" page-first"),i==len&&_$out_.push(" page-last"),i==index&&_$out_.push(" page-btn-cur"),_$out_.push('">',i,"</a> ");_$out_.push(' <a auto-test="',pager_id,'_next" href="javascript:void(0);" class="page-next-btn '),isLast&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-right"></i></a> </div> ')}else{if(_$out_.push(" "),from>2&&total-2>to){_$out_.push(' <div class="page-box"> <a auto-test="',pager_id,'_prev" href="javascript:void(0);" class="page-prev-btn '),isFirst&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-left"></i></a> <a auto-test="',pager_id,'_1" href="javascript:void(0);" data-index="1" class="page-btn page-first">1</a> <a auto-test="',pager_id,'_2" href="javascript:void(0);" data-index="2" class="page-btn">2</a> <span>…</span> ');for(var i=from,len=total;to>i;i++)_$out_.push(' <a auto-test="',pager_id,"_",i+1,'" href="javascript:void(0);" data-index="',i+1,'" class="page-btn'),i+1==index&&_$out_.push(" page-btn-cur"),_$out_.push('">',i+1,"</a> ");_$out_.push(' <span>…</span> <a auto-test="',pager_id,"_",len-1,'" href="javascript:void(0);" data-index="',len-1,'" class="page-btn">',len-1,'</a> <a auto-test="',pager_id,"_",len,'" href="javascript:void(0);" data-index="',len,'" class="page-btn page-last">',len,'</a> <a auto-test="',pager_id,'_next" href="javascript:void(0);" class="page-next-btn"><i class="icon-font i-v-right"></i></a> </div> ')}else{if(_$out_.push(' <div class="page-box"> '),2>=from){_$out_.push(' <a auto-test="',pager_id,'_prev" href="javascript:void(0);" class="page-prev-btn '),isFirst&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-left"></i></a> ');for(var i=1,len=total;i<=Math.max(max,to);i++)_$out_.push(' <a auto-test="',pager_id,"_",i,'" href="javascript:void(0);" data-index="',i,'" class="page-btn'),1==i&&_$out_.push(" page-first"),i==len&&_$out_.push(" page-last"),i==index&&_$out_.push(" page-btn-cur"),_$out_.push('">',i,"</a> ");_$out_.push(' <span>…</span> <a auto-test="',pager_id,"_",len-1,'" href="javascript:void(0);" data-index="',len-1,'" class="page-btn">',len-1,'</a> <a auto-test="',pager_id,"_",len,'" href="javascript:void(0);" data-index="',len,'" class="page-btn page-last">',len,'</a> <a auto-test="',pager_id,'_next" href="javascript:void(0);" class="page-next-btn"><i class="icon-font i-v-right"></i></a> ')}if(_$out_.push(" "),to>=total-2){_$out_.push(' <a auto-test="',pager_id,'_1" href="javascript:void(0);" class="page-prev-btn '),isFirst&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-left"></i></a> <a auto-test="',pager_id,'_prev" href="javascript:void(0);" data-index="1" class="page-btn page-first">1</a> <a auto-test="',pager_id,'_2" href="javascript:void(0);" data-index="2" class="page-btn">2</a> <span>…</span> ');for(var i=Math.min(from,total-max),len=total;total>i;i++)_$out_.push(' <a auto-test="',pager_id,"_",i+1,'" href="javascript:void(0);" data-index="',i+1,'" class="page-btn'),i==index-1&&_$out_.push(" page-btn-cur"),i==total-1&&_$out_.push(" page-last"),_$out_.push('">',i+1,"</a> ");_$out_.push(' <a auto-test="',pager_id,'_next" href="javascript:void(0);" class="page-next-btn '),isLast&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-right"></i></a> ')}_$out_.push(" </div> ")}_$out_.push(" ")}}return _$out_.join("")}}});
/*!edu_modules/pagectrl/pagectrl*/
;define("edu_modules/pagectrl/pagectrl",function(t){var i=t("jquery"),n={};n.page=t("/edu_modules/pagectrl/page.tpl_tpl");var e=function(){var t="defClk",e=(navigator.userAgent.match(/\bMSIE\s+(\d+)\b/)||[0,10])[1]<9,a=function(t,i){return t=parseInt(t)||parseInt(i)||0,0>t?0:t},o=function(t,n,e){this.$container=t instanceof i?t:i(t),this.pageFn=n,this.inited=!1,e&&"object"==typeof e&&this.init(e)};return o.prototype.init=function(t){var i=this;return i.inited?void i.reset(t):(t=t||{},i.begin=t.begin||0,i.total=a(void 0!==t.total?t.total:i.total,0),i.max=a(void 0!==t.max?t.max:i.max,5),i.idx=a(void 0!==t.idx?t.idx:i.idx,1),i.idx=a(t.idx-i.begin||i.idx,0),i.idx>i.total&&(i.idx=Math.max(0,i.total-1)),i.delCurPage=function(){return i.reset({total:i.total-1,max:i.max,idx:i.idx}),i.idx},i.$container.html(n.page({total:i.total,max:i.max,idx:i.idx})),void(this.inited||(this.bindEvent(),this.inited=!0)))},o.prototype.reset=function(t){t=t||{};var i=a(t.idx,0),e=a(t.max,5),o=a(t.total,0);i>o&&(i=Math.max(0,o)),(i!=this.idx||o!=this.total)&&(this.$container,this.$container.html(n.page({total:o,max:e,idx:i})),this.total=o,this.idx=i,this.max=e,this.inited||(this.bindEvent(),this.inited=!0))},o.prototype.select=function(i,e){e=e||{};var a=this,o=a.total,r=a.max;a.$container.html(n.page({total:o,max:r,idx:i}));var c=a.idx;a.idx=i,e.silent||a.pageFn(i,c,t)},o.prototype.bindEvent=function(){var n=this;n.$container.on("click",".page-btn",function(){var e=i(this),o=a(e.attr("data-index"));n.select(o),t="defClk"}),e&&n.$container.on("dblclick",".page-next-btn,page-prev-btn",function(){i(this).trigger("click")}),n.$container.on("click",".page-prev-btn",function(){var e=i(this);e.hasClass("page-btn-dis")||(t="preClk",n.$container.find(".page-btn.page-btn-cur").prev().trigger("click"))}),n.$container.on("click",".page-next-btn",function(){var e=i(this);e.hasClass("page-btn-dis")||(t="nextClk",n.$container.find(".page-btn.page-btn-cur").next().trigger("click"))})},o.prototype.getIdx=function(){return this.idx},o.prototype.getTotal=function(){return this.total},o.prototype.destroy=function(){this.$container.unbind("click dblclick"),this.$container.html("")},o}();return e});
/*!/agency/publish/template/term.chapter.tpl_tpl*/
;define("/agency/publish/template/term.chapter.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];it.data=it.data||{};var uuid=it.id?it.id:$.render.chapter_uuid(it.data),chapter_data_cls="view"===it.action&&it.data.name?" chapter-item--data":"",dispart=dispart||it.dispart;if(_$out_.push('<div class="chapter-item chapter-item--',it.action,"",chapter_data_cls,'" id="',uuid,'"> <div class="item-line item-line--chapter hide" > <i class="icon-v icon-font i-v-bottom"></i> <span class="item-index item-index--chapter">第<span class="index" data-index="',it.index,'">',$.render.number_cn(it.index),'</span>章：</span> <div class="item-view--wrap"> ',function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="item-name item-name--chapter"> <p class="name-text">',html.encode(it.name||""),'</p></div><div class="oper-list"> <span class="oper-item item--insert"><i class="icon-font i-insert"></i>插入</span> <span class="oper-item item--edit"><i class="icon-font i-edit"></i>修改</span> <span class="oper-item item--del"><i class="icon-font i-delete"></i>删除</span></div>'),_$out_.join("")}}(it.data,opt)," </div> ",function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="item-name item-name--edit"> <div class="f-item"> <div class="f-field"> <input name="chapterName" class="f-text" type="text" placeholder="输入章名称，1-20个字" data-pattern="not_null|limit" data-msg="章名称不能为空|" data-tips="输入章名称，1-20个字" data-name="章" data-min="1" data-max="20" value="默认第一章" > </div> </div> <div class="f-item"> <label class="f-label">章描述：</label> <div class="f-field"> <textarea name="introduce" class="f-textarea" placeholder = "输入章描述，5-30个字" data-pattern="if_not_null_then|limit" data-min="5" data-max="30" data-tips="请填写章描述，5-30个字" >默认第一章（去掉章）</textarea> </div> </div> <div class="f-item"> <div class="f-field"> <div class="do-btn-list hide"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> <span class="btn-weak btn-del">删除</span> </div> </div> </div></div>'),_$out_.join("")}}(it.data,opt),' </div> <div class="part-list"> '),it.data&&it.data.sub_info&&$.isArray(it.data.sub_info))for(var i=0,l=it.data.sub_info.length;l>i;i++)it.part={index:i+1,action:"view",chapter_index:it.index,data:it.data.sub_info[i]},_$out_.push(" ",function(it,opt){with(it=it||{}){var _$out_=[];it.data=it.data||{};var uuid=it.id?it.id:$.render.part_uuid(it.data),num=it.data.num=(it.data.task_info||[]).length,max_class_name=num>=5?" task-max":"",part_data_cls="view"===it.action&&it.data.name?" part-item--data":"",schedule=opt.schedule||!1;if(_$out_.push('<div class="part-item item--edit part-item--',it.action,"",max_class_name,"",part_data_cls,'" id="',uuid,'"> <div class="item-line item-line--part"> <i class="icon-v icon-font i-v-bottom"></i> <span class="item-index item-index--part" data-index="',it.index,'">',$.render.part_index(it.chapter_index,it.index,opt&&opt.chapter_info?opt.chapter_info:null),'</span> <div class="item-view--wrap"> ',function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="item-name item-name--part"> <p class="name-text">',html.encode(it.name||""),'</p></div><span class="part-task">共<span class="task-num">',parseInt(it.num,10)||0,'</span>项任务</span><div class="oper-list"> <span class="oper-item item--insert"><i class="icon-font i-insert"></i>插入</span> <span class="oper-item item--edit"><i class="icon-font i-edit"></i>修改</span> <span class="oper-item item--del"><i class="icon-font i-delete"></i>删除</span> <span class="oper-item item--add"><i class="icon-font i-add"></i>'),_$out_.push(opt.schedule?"添加补充任务":"添加学习任务"),_$out_.push("</span></div>"),_$out_.join("")}}(it.data,opt)," </div> ",function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="item-name item-name--edit"> <div class="f-item"> <div class="f-field"> <input type="text" name="partName" class="f-text" placeholder="输入节名称，30个字以内" data-pattern="not_null|limit" data-msg="节名称不能为空|" data-tips="输入节名称，30个字以内" data-name="节" data-min="1" data-max="30" > </div> </div> <div class="do-btn-list hide"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> <span class="btn-weak btn-del">删除</span> </div></div>'),_$out_.join("")}}(it.data,opt),' </div> <div class="task-list"> '),it.data&&it.data.task_info&&$.isArray(it.data.task_info))for(var i=0,index=0;num>i;i++){var task_data=it.data.task_info[i];it.task={index:++index,action:"view",data:task_data},_$out_.push(" ",function(it,opt){with(it=it||{}){var _$out_=[];it.data=it.data||{};var now=parseInt(+new Date/1e3),uuid=it.id?it.id:$.render.task_uuid(it.data),task_data_cls="view"===it.action&&it.data.name?" task-item--data":"",live_end_cls=1===data.type&&data.endtime>0&&data.endtime<=now?" task-live-end ":"",schedule_task_class=1===it.data.append_flag||opt.add_schedule_task?" schedule-task":"",update_task_class=opt.update?"update-task":"",new_term_task_class=opt.newterm?"newterm-task":"";return _$out_.push('<div type="',data.type,'" class="task-item item-line task-item--',it.action," ",task_data_cls," ",live_end_cls," ",schedule_task_class," ",update_task_class," ",new_term_task_class,'" id="',uuid,'"> ',function(it,opt){with(it=it||{}){var _$out_=[];opt=opt||{};var data=it.data?it.data:it,type_view=(it.id?it.id:$.render.task_uuid(data),""),task_type="",preview="",error="",res=(parseInt(+new Date/1e3),(data.resid_list||"").toString().split(",")[0]);switch(data.type){case 1:type_view="直播",task_type="live",preview=['<span class="view">',$.render.livetime(data),"</span>"].join(""),$.trim(data.name||"")||(error="请填写任务名称"),error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 2:type_view="录播",task_type="video",preview=['<span class="view video-view" data-vid="'+res+'">',$.render.task_video(res,data),"</span>"].join(""),$.trim(data.name||"")?res||(error="请关联录播视频"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 3:type_view="资料",task_type="res",preview=['<span class="view video-view" data-vid="'+res+'">',($._toArray(data._tmp_files||data.files)[0]||{}).cw_name||"","</span>"].join(""),$.trim(data.name||"")?res||(error="请关联资料"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 4:type_view="习题",task_type="exam",preview=['<span class="view video-view" data-vid="'+res+'">',((data._tmp_exam||[])[0]||data.exam||{}).title||"","</span>"].join(""),$.trim(data.name||"")?res||(error="请关联习题"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 5:type_view="答疑",task_type="faq",$.trim(data.name||"")||(error="请填写任务名称"),error=error?['<span class="err">',error,"</span>"].join(""):""}return _$out_.push('<div class="item-view--wrap"> <div class="item-name"> <p class="name-text"><span class="name">【',type_view,"】",html.encode(data.name),"</span>"),1===data.append_flag&&_$out_.push('<span class="schedule">补充任务</span>'),_$out_.push("",error,"",preview,'</p> </div> <div class="oper-list"> <span class="oper-item item--move" data-arrow="up"><i class="icon-font id-arrowhead"></i>上移</span> <span class="oper-item item--move" data-arrow="down" ><i class="icon-font id-arrowhead id-arrowhead--bottom"></i>下移</span> <span class="oper-item item--insert"><i class="icon-font i-insert"></i>插入</span> <span class="oper-item item--edit"><i class="icon-font i-edit"></i>修改</span> <span class="oper-item item--del"><i class="icon-font i-delete"></i>删除</span> </div></div>'),_$out_.join("")}}(it.data,opt)," ",function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="form form--h item-edit--wrap '),opt&&opt.add_schedule_task&&_$out_.push("edit-schedule-task"),_$out_.push('"> '),opt&&opt.add_schedule_task&&_$out_.push("<div class='note-msg'>该任务为补充任务，只有已报名学生可见，未报名学生不可见</div>"),_$out_.push(' <!-- 任务类型 --> <div class="f-item f-type"> <label class="f-label"><span class="f-required">*</span>任务类型</label> <div class="f-field"> <div class="diy-select-area f-select-tiny-large"> <a class="diy-select" href="javascript:;" data-select="tasktype"> <i class="text text-tip" name="type" data-tips="请选择任务类型">请选择任务类型</i> <span class="diy-select-toggle"><b></b></span> </a> <ul class="diy-optgroud"> <li class="diy-option" data-value="1"><a href="javascript:;">直播</a></li> <li class="diy-option" data-value="2"><a href="javascript:;">录播</a></li> <li class="diy-option" data-value="3"><a href="javascript:;">学习资料</a></li> <li class="diy-option" data-value="4"><a href="javascript:;">习题</a></li> </ul> </div> </div> </div> <!-- 任务名称 --> <div class="f-item f-name"> <label class="f-label"><span class="f-required">*</span>任务名称</label> <div class="f-field"> <input type="text" name="name" class="f-text" placeholder="输入任务名称，20个字以内" data-pattern="not_null|limit" data-msg="任务名称不能为空|" data-tips="输入任务名称，20个字以内" data-name="节" data-min="1" data-max="20" > </div> </div> <!-- 选择录播视频（不允许选择回放） --> <div class="f-item f-item-resid_list f-video" style="display:none"></div> <!-- 选择资料 --> <div class="f-item f-item-resid_list f-file" style="display:none"></div> <!-- 选择习题 --> <div class="f-item f-item-resid_list f-exam" style="display:none"></div> <!-- 有交必改 --> <div class="f-item f-item-correct-type f-radio--group" data-use="0" style="display:none"> <label class="f-label"><span class="f-required">*</span>批改类型</label> <div class="f-field"> <div class="f-radio-list"> <label class="f-radio list--block--child checked" data-value="2" > <i class="icon-radio"></i> <span class="f-rc-label">全部批改</span> </label> </div> <div class="f-radio-list"> <label class="f-radio list--block--child" data-value="4" > <i class="icon-radio"></i> <span class="f-rc-label">部分批改</span> </label> </div> </div> </div> <!-- 老师批改时间 --> <div class="f-item f-item-studytime" style="display:none"> <label class="f-label"><span class="f-required">*</span>老师批改时间</label> <div class="f-field"> <div class="f-date-wrap"> <input type="text" class="f-date" name="study_begin" data-pattern="not_null|study_time" data-tips="请选择建议学习起始时间" data-msg="请选择建议学习起始时间" > <i class="icon-font i-calendar"></i> </div> <span class="f-join">至</span> <div class="f-date-wrap"> <input type="text" class="f-date" name="study_end" data-pattern="not_null|study_time" data-tips="请选择建议学习结束时间" data-msg="请选择建议学习结束时间" > <i class="icon-font i-calendar"></i> </div> <div class="f-msg"></div> </div> </div> <!-- 免费试学 --> <div class="f-item expr_flag--wrap"> <div class="f-field"> <div class="f-checkbox-list list--block"> <label class="f-checkbox f-checkbox--float" name="expr_flag" data-value="1"> <i class="icon-checkbox"></i> <span class="f-rc-label">支持免费试学</span> </label> <span class="f-question f-question--faq" >',$.render.faq(),'</span> <span class="expr-live-tips">仅在直播任务直播时展示试学入口</span> </div> </div> </div> <!-- 试听设置 --> <div class="f-item expr_range--wrap f-radio--group" style="display:none"> <div class="f-field"> <div class="f-radio-list list--block"> <label class="f-radio list--block--child '),it.expr_flag&&2!==it.expr_flag||_$out_.push("checked"),_$out_.push('" data-value="2" > <i class="icon-radio"></i> <span class="f-rc-label">免费试学<i class="select--gap"></i>分钟</span> </label> </div> </div> <div class="f-field"> <div class="f-radio-list list--block"> <label class="f-radio list--block--child '),1===it.expr_flag&&_$out_.push("checked"),_$out_.push('" data-value="1" > <i class="icon-radio"></i> <span class="f-rc-label">免费试学该视频</span> </label> </div> </div> <div class="f-field f-field-range"> <div class="diy-select-area f-select-tiny-small"> <a class="diy-select" href="javascript:;" data-select="expr_range"> <i class="text" name="expr_range" data-value="5">5</i> <span class="diy-select-toggle"><b></b></span> </a> <ul class="diy-optgroud"> <li class="diy-option selected" data-value="5"><a href="javascript:;">5</a></li> <li class="diy-option" data-value="10"><a href="javascript:;">10</a></li> <li class="diy-option" data-value="15"><a href="javascript:;">15</a></li> <li class="diy-option" data-value="20"><a href="javascript:;">20</a></li> </ul> </div> </div> </div> <!-- 班级特色 --> <!-- <div class="f-item"> <div class="f-field"> <div class="f-checkbox-list list--block"> <label class="f-checkbox f-checkbox--float" name="special_flag" data-value="1"> <i class="icon-checkbox"></i> <span class="f-rc-label">是否班级特色</span> </label> <span class="f-question f-question--faq" >',$.render.faq(),'</span> </div> </div> </div> --> <!--新增保存 取消按钮--> <div class="f-item"> <div class="f-field"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> </div> </div> <!--旧按钮 不知道干什么用--> <div class="do-btn-list hide"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> <span class="btn-weak btn-del">删除</span> </div></div>'),_$out_.join("")}}(it.data,opt),"</div>"),_$out_.join("")}}(it.task,opt)," ")}return _$out_.push(' <div class="task-item item-line item--add"> <div class="add-btn">'),_$out_.push(schedule?"+ 添加补充任务":"+ 添加学习任务"),_$out_.push("</div> </div> </div></div>"),_$out_.join("")}}(it.part,opt)," ");return _$out_.push(' </div> <div class="part-item item-line item--add '),opt&&opt.chapter_info&&it.index!==opt.chapter_info.length&&_$out_.push(" hide"),_$out_.push('"> <div class="add-btn">+ 新增一节</div> </div></div>'),_$out_.join("")}}});
/*!agency/publish/step4/chapter*/
;define("agency/publish/step4/chapter",function(e){e("edu_modules/edu-render/edu-render");var t=(e("edu_modules/edu-db/edu-db"),e("@tencent/im-cache/cache")),a=e("jquery"),i=(e("edu_modules/pagectrl/pagectrl"),e("agency/publish/step4/term.data")),n=e("/agency/publish/template/term.chapter.tpl_tpl"),r=a.render.number_cn,d=a.render.chapter_uuid=function(){var e=0;return function(a){var i="chapter_increase_"+e++;return a&&t.set(i,a),i}}(),c=function(e){return e=e||a(".term-item_current"),e.find(".chapter-item").not(".item--add")},l=function(){return c().length},u=function(e){c(e).each(function(e){var t=a(this);t.find(".index").text(r(e+1)).data("index",e+1),a(document).trigger("part:update_index",[t])}),a.event.trigger("task:update")},m=function(e,i){var n=e.attr("id"),r=t.get(n);return i&&n&&(r=a.extend(r||{},i),t.set(n,r)),r},p=function(e,t,a){e.find(".item-name--chapter .name-text").text(t),m(e.removeClass("chapter-item--add chapter-item--edit").addClass("chapter-item--view"),{name:t,introduce:a})},s=function(e){var t=l()+1,r=a(n({id:d(),index:t,action:"add"}));e.before(r),u(),i.validator.init(r.find("[data-pattern]")),i.input_focus(r)},o=function(e){e.closest(".guide--catalog");if(i.update_chapter_op_flag(e),!e.find(".part-item.item--add").hasClass("hide")){var t=e.prev().find(".part-item.item--add");t&&t.removeClass("hide")}e.remove(),u()},h=function(e){m(e)?p(e):o(e,!0)},f=function(e){var t=e.find(".item-line--chapter .f-text"),n=e.find(".item-line--chapter .f-textarea"),r=i.validator.validate(t),d=i.validator.validate(n);r&&d?(p(e,a.trim(t.val()),a.trim(n.val())),e.addClass("chapter-item--data")):a.trim(t.val())||a.trim(n.val())||e.find(".item-line--part").length?e.addClass("chapter-item--data"):o(e,!0)},v=function(e,t){s(t),f(e.find(".chapter-item--add"))},g=function(){window.setTimeout(function(){a(".chapter-item--view").length<=0&&(s(a(".chapter-add").closest(".chapter-item")),f(a(".chapter-item--add")))},0),a(document).on("click clear",".item-line--chapter .btn-del, .item-line--chapter .item--del, .item-line--chapter .btn-cancel",function(e){e.stopPropagation();var t=a(this);if(!t.hasClass("disabled"))return"clear"===e.type?o(t.closest(".chapter-item"),!0):void(t.hasClass("btn-del")||t.hasClass("item--del")?o(t.closest(".chapter-item")):h(t.closest(".chapter-item")))})};return{init:g,add_defautl_chapter:v}});
/*!agency/publish/step4/term*/
;define("agency/publish/step4/term",function(e){e("edu_modules/edu-render/edu-render"),e("@tencent/im-edu-datepicker/edu-datepicker"),e("edu_modules/jquery.picker/jquery.picker");var t=(e("edu_modules/edu-db/edu-db"),e("@tencent/im-cache/cache")),i=e("jquery"),a=e("agency/publish/step4/term.data"),n=e("agency/publish/step4/part.max"),r=e("/agency/publish/template/term.detail.tpl_tpl"),s=e("/agency/publish/template/term.base.edit.tpl_tpl"),d=(e("edu_modules/edu-agency/index"),e("agency/publish/common/disabled.manager")),c=e("agency/publish/step4/chapter"),o=a.validator,u=e("agency/publish/common/_pd"),l="mod-tab__li_current";i.render.year_days=function(){return 1830};var m=i.render.term_uuid=function(){var e=0;return function(i){var n="term_increase_"+e++;return i&&(0!==i.cycle&&a.is_passcard()&&(i.cycle=0),i.sponsor=f(i.sponsor),t.set(n,i)),n}}();i.render.getApplyNum=function(e){return e=(a.is_free_course()?0:parseInt(e,10))||0,e>0?e:"无限制"};var p=[{name:"name",type:"string"},{name:"sponsor",type:"array"},{name:"te_list",type:"array"},{name:"tu_list",type:"array"},{name:"sign_endtime",type:"timestamp"},{name:"endtime",type:"timestamp"},{name:"sign_max",type:"int"},{name:"applysetting",type:"string"},{name:"cycle",type:"int"}],f=function(e){var t=i.isArray(e)?e:o.reg.uin.test(e)?[e]:i._toArray(e);return u.filterTeacher(t)},_=(i.render.teacher_name=function(e){var t=1,a=[],n=u.teachers_map||{};return i.each(f(e),function(e,t){var i=(n[t]||{}).value;i&&a.push(i)}),a.length>t?a.slice(0,t).join("，")+' <span title="还有更多" style="cursor:pointer">...</span>':a.join("，")},function(e,t,i){u._save_picker_data(e,t,i),!i&&o.validate(e)}),g=function(e){var t={},a=e.find(".guide--class--edit"),n=function(e,t){var n=a.find("[name="+e+"]");if(n.length){var r=n.is(":input")?i.trim(n.val()):n.data("value");switch(t){case"int":r=parseInt(r,10),isNaN(r)&&!(r=0)&&void 0;break;case"string":r=(r||"").toString();break;case"array":r=i._toArray(r);break;case"timestamp":r=""===r?0:v(r)}return r}};return a.length&&i.each(p,function(e,i){t[i.name]=n(i.name,i.type)}),"validity"===t.applysetting?(t.sign_endtime=0,t.cycle=86400*t.cycle):t.cycle=0,delete t.applysetting,t},h=function(e,t){t=t||{};var a=e.find(".guide--class--edit");i.each(p,function(e,n){var r=n.name,s=n.type,d=t[r];switch(s){case"timestamp":d=i.render.time.formatDate("Y-M-D",1e3*d);break;case"string":"applysetting"===r&&(d=t.cycle?"validity":"deadline")}var c=a.find("[name="+r+"]");c.is(":input")?("cycle"===r&&(d=Math.min(Math.max(0,parseInt(d/86400,10)||0),i.render.year_days())),c.val(d)):c.data("picker")?_(c,f(d),!0):c.closest(".diy-select").length&&(c.closest(".f-field").find("[data-value="+d+"]").trigger("init"),"validity"===d&&c.closest(".f-item").addClass("f-item--info"))})},v=function(e){return parseInt(+o.toDateWithOutHMS(e)/1e3,10)+86400-1},y=function(e){var t=new Date,i=t.getDate();return t.setMonth(t.getMonth()+e),t.getDate()!==i?new Date(t.setDate(1).valueOf()-864e5):t},b=function(e,t){e&&(e.sign_endtime=v(y(t?12:2)),e.endtime=v(y(60)))},k=function(){N({},"add")},w=function(e){var t=N(e,"newterm");n.clear_over_part(t),a.get_term_string(t,!0),a.validator.init(t.find(".chapter-list [data-pattern]"))},x=function(){q(M())},D=function(e){i(".js-picker-date",e).each(function(){var e=i(this),t=M(),n=a.get_min_date(t),r=a.get_max_date(t,n);e.datepicker({_begin:n,_end:r,_dpCls:"dp-calender-popup",_show:function(){e.data("noblur",!0)},_hide:function(){e.data("noblur",!1)},_click:function(){e.data("datepicker").hide(),o&&setTimeout(function(){o.validate(e)},100)}})})},T=function(e){u.initTeachers(function(){i(".js-picker-teacher",e).picker({title:"老师",getData:function(){return u.teachers||[]},onSave:_})})},C=function(){o.extend("min_date",function(e,t){var i=o.toDateWithOutHMS(e),n=o.toDateWithOutHMS(new Date);return"sign_endtime"===t.attr("name")&&a.is_modify()?!0:n>i?!1:!0}),o.extend("max_date",function(e,t){var i=o.toDateWithOutHMS(e),a=t.closest(".guide--class--edit").find("[name=endtime]");if(o.check(a)){var n=o.toDateWithOutHMS(a.val());if(i>n)return!1}return!0}),o.extend("endtime_year",function(e,t){var i=o.toDateWithOutHMS(e),n=t.closest(".term-item");return i>a.get_max_date(n)?!1:!0}),o.extend("validcycle",function(e,t){var i=parseInt(e,10),a=t.closest(".guide--class--edit").find("[name=endtime]");return!o.all&&setTimeout(function(){if(o.check(a)){var e=o.toDateWithOutHMS(a.val()).valueOf(),n=o.toDateWithOutHMS(new Date).valueOf()+864e5*i;n>e&&(o.msg="学习有效期不能大于班级下架时间",o.setError(t))}},0),!0}),o.extend("term_endtime",function(e,t){var i=t.closest(".guide--class--edit"),a=i.find("[name=endtime]");return o.hasError(a)&&setTimeout(function(){o.validate(a)},0),!0}),o.extend("apply_setting",function(e,t){var i=t.closest(".guide--class--edit"),a=i.find("[name=sign_endtime]"),n=i.find("[name=cycle]"),r=a.add(n).not(":hidden");return o.hasError(r)&&setTimeout(function(){o.validate(r)},0),!0})},M=function(e){return i("title"===e?".mod-term-nav-wrap ."+l:".mod-term-wrap .term-item_current")},O=function(e,n){e=e||M();var r=e.attr("id"),s=t.get(r);return s&&(a.is_free_course()&&(s.sign_max=0),a.is_passcard()&&(s.sign_max=0),s.cycle>0&&(s.sign_max=0)),n&&r&&(s=i.extend(s||{},n),s&&a.is_free_course(),t.set(r,s)),s.sponsor=f(s.sponsor),s},q=function(e){var t=O(e);e.find(".guide--class").replaceWith(s(t)),h(e,t),o.validate(e),H(e)},A=function(){var e=i(".mod-term-wrap .term-item").length<2;i(".guide--class .term-del").each(function(){var t=i(this),a=t.closest(".term-item");return a.data("crossover")?!0:void(a.hasClass("disabled-aways")?t.addClass("disabled"):t[e?"addClass":"removeClass"]("disabled"))})},S=function(e){e&&!e.data("crossover")&&e.find(".term-edit")[e.find(".guide--class").hasClass("guide--class--edit")?"addClass":"removeClass"]("disabled")},W=function(e){A(e),S(e)},H=function(e){var t=e.find(".guide--class--edit [data-pattern]");if(D(e),T(e),W(e),z(e),o.init(t),a.input_focus(e),!this.initTimer&&a.is_publish()){var i=setInterval(function(){var e=M(),t=e.find(".guide--class--edit [data-pattern]").not(":hidden");o.all(t)&&I(e),clearInterval(i)},2e4);this.initTimer=!0}},I=function(e){var t=e.find(".guide--class--edit").length?g(e):!1;return O(e,t)},j=function(e){var t="",n=!1;(a.is_publish()||a.is_copy())&&0===u.isTupAgency?t='<i class="icon-font i-alert mr5"></i>为了保证教学内容的完整性，收费课教学目录提交审核后，将不能删除、不能修改节和任务名称，可以调整顺序，修改直播时间、更换视频或资料或习题，新增的节和任务只有已报名学生能看到，未报名学生看不到。您可在“教务教学-教学管理-课程安排”进行相应的修改。<a class="nor_link" target="_blank" href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=1224&page=&extra=#pid4088">点击了解更多</a>。':a.is_plan()?(t='<i class="icon-font i-alert mr5"></i>本课程为收费课程，您可以调整目录顺序，修改直播时间、更换视频或资料或习题，新增的节和任务只有已报名学生能看到。若需增加所有学生可见的节或任务、或修改节或任务名称，请至“课程管理-期次-目录升级”操作或者<a class="nor-link" target="_blank" href="/agency/index/index.html#tab=course_admin#admin">点击这里</a>',0===u.isTupAgency&&(t='<i class="icon-font i-alert mr5"></i>本课程为收费课程，为了保证教学内容的完整性，您可以调整顺序，修改直播时间、更换视频或资料或习题，新增的节和任务只有已报名学生能看到，未报名学生看不到。<a class="nor-link" target="_blank" href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=1224&page=&extra=#pid4088">点击了解更多</a>')):0===u.isTupAgency&&a.is_newterm()&&(t='<i class="icon-font i-alert mr5"></i>对已有课程新开一期，机构老师可以根据已有的课程目录再次设置招生与学习，不需要再次创建课程。'),i.event.trigger("term:tips",[e,t,n])},E=function(e,t,n){-1===["plan","newterm"].indexOf(e)||a.is_free_course()||t.find(".part-item--view").each(function(){i(this).find(".task-item--view").length>=7?i(this).addClass("task-max"):i(this).removeClass("task-max")}),(a.is_modify()||a.is_newterm()&&i.bom.query("limit"))&&d.term(t,n),a.is_update()&&!a.is_free_course()&&d.updateTermTaskDisable(t)},N=function(e,t){e=e||{};var n=e.id||m(e),d=(e.name||"未命名",i('<li class="term-item term-item_current" id="'+n+'"></li>')),p=a.is_free_course();a.is_train_course()&&(e.cycle=0);var f="课程目录",_=p?"课程最多250节，每节最多10个任务。":"课程最多250节，每节最多可增加至10个任务（含补充任务）。补充任务累计最多可增加至其他任务总数（不含补充任务）的20%。";switch(t){case"add":b(e),d.append(s(e)),h(d,e);break;case"plan":O(d,e),e.schedule=!p;break;case"update":O(d,e),e.update=!0,f="本期课程目录",_=p?"本课程为免费课，对目录的所有修改不用审核，提交后立即生效。":"本收费课本月可提交一次目录升级申请，可增加节和任务、修改节和任务名称，提交审核并通过后生效。其他修改不用审核，立即生效。";break;case"newterm":b(e),d.append(s(e)),e.newterm=!p,h(d,e),f="本期课程目录",_=0===u.isTupAgency?"":i.bom.query("limit")?"本课程本月已提交过目录升级申请，暂不支持增加或删除节或任务，或修改节或任务名称。若需要修改，请等待下个月再升级目录。":"新开一期可进行目录升级，可增加和删除节和任务、修改节和任务名称，提交审核并通过后生效。若只进行其他修改，提交后直接生效。";break;default:t="init",!a.is_modify()&&b(e,!0),O(d,e),d.append(s(e))}return i(".publish-step4 .mod-term-wrap").find(".term-item").removeClass("term-item_current").end().append(d),d.append(r(e,{title:f,tip:_})),!a.is_free_course()&&(a.is_plan()||0===u.isTupAgency)&&j(d),"add"===t?c.add_defautl_chapter(d,d.find(".chapter-add").closest(".chapter-item")):"init"===t?(h(d,e),o.validate(d),H(d)):"plan"===t&&o.validate(d),E(t,d,e),i(".mod-term-nav-wrap ."+l).removeClass(l),H(d),i(document).trigger("chapter:update_index",[d]),d},V=function(e){return a.is_modify()?!!(O(e)||{}).term_id:!1},Y=function(){return a.is_passcard()||a.is_train_course()},z=function(e){var i=t.get("check_fee");if(!i){var n=t.get("check_fee_callback")||[];return n.push(function(){z(e)}),void t.set("check_fee_callback",n)}var r=e.find(".guide--class--edit"),s=1!==i.is_cycle||a.is_free_course()||Y();if(r.length){var c=e.find("[data-select=applysetting]").closest(".diy-select-area");s?(r.find("[data-value=deadline]").trigger("init"),d.add(c)):d.remove(c),V(e)&&d.add(c)}else if(s){var o=O(e);o&&(o.cycle=0)}},B=function(){i(document).on("click",".term-edit",function(){var e=i(this);e.hasClass("disabled")||x()}).on("retcode:error",function(e,t,i){setTimeout(function(){o.msg=i,o.setError(t),a.scroll_to_error()},0)}).on("change:applysetting",function(e,t,n){var r=i(e.target),s=r.closest(".term-item"),d=s.find(".f-item-applysetting-group"),c=s.find(".f-item-"+n).show();d.not(c).hide(),s.find(".f-item").removeClass("f-item--info"),a.check_sign_max(s)&&("validity"===n?(s.find(".f-item.f-item-sign").hide(),s.find(".f-item.f-item-sign-disabled").show(),s.find(".f-item").addClass("f-item--info")):(a.is_free_course()?s.find(".f-item.f-item-sign").hide():s.find(".f-item.f-item-sign").show(),s.find(".f-item.f-item-sign-disabled").hide()))}).on("term:tips",function(e,t,a,n){var r=t.find(n?".guide--class":".guide--catalog"),s=r.find(".note-msg");s.length||(s=i('<div class="note-msg"></div>'),r.prepend(s)),s.html(a)}).on("click focus",".term-item .i-calendar",function(){i(this).prev().focus()}).on("keyup",".guide--catalog",function(e){i(e.target).is(":input")&&13===e.which&&i(document).trigger("click")})},F=function(){u=u||{},C(),u.initVideos&&u.initVideos(),u.initTeachers&&u.initTeachers(),B()},G=function(e){if(i.isArray(e)){e.length>0&&(i(".mod-term-nav-wrap .mod-tab__li").remove(),i(".mod-term-wrap").empty());var t=parseInt(i.bom.query("term_id"),10)||e[0].term_id,r=a.is_plan(),s=a.is_update(),d=null;i.each(e,function(e,i){r||s?t===i.term_id&&(d=N(i,s?"update":"plan"),n.clear_over_part(d),a.get_term_string(d,!0),a.validator.init(d.find(".chapter-list [data-pattern]"))):(d=N(i),n.clear_over_part(d),a.get_term_string(d,!0),a.validator.init(d.find(".chapter-list [data-pattern]")))})}};return{add:k,newterm:w,edit:x,init:F,load:G,render:N,update_data:I,update_cycle_edit:z}});
/*!/agency/publish/template/term.part.tpl_tpl*/
;define("/agency/publish/template/term.part.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];it.data=it.data||{};var uuid=it.id?it.id:$.render.part_uuid(it.data),num=it.data.num=(it.data.task_info||[]).length,max_class_name=num>=5?" task-max":"",part_data_cls="view"===it.action&&it.data.name?" part-item--data":"",schedule=opt.schedule||!1;if(_$out_.push('<div class="part-item item--edit part-item--',it.action,"",max_class_name,"",part_data_cls,'" id="',uuid,'"> <div class="item-line item-line--part"> <i class="icon-v icon-font i-v-bottom"></i> <span class="item-index item-index--part" data-index="',it.index,'">',$.render.part_index(it.chapter_index,it.index,opt&&opt.chapter_info?opt.chapter_info:null),'</span> <div class="item-view--wrap"> ',function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="item-name item-name--part"> <p class="name-text">',html.encode(it.name||""),'</p></div><span class="part-task">共<span class="task-num">',parseInt(it.num,10)||0,'</span>项任务</span><div class="oper-list"> <span class="oper-item item--insert"><i class="icon-font i-insert"></i>插入</span> <span class="oper-item item--edit"><i class="icon-font i-edit"></i>修改</span> <span class="oper-item item--del"><i class="icon-font i-delete"></i>删除</span> <span class="oper-item item--add"><i class="icon-font i-add"></i>'),_$out_.push(opt.schedule?"添加补充任务":"添加学习任务"),_$out_.push("</span></div>"),_$out_.join("")}}(it.data,opt)," </div> ",function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="item-name item-name--edit"> <div class="f-item"> <div class="f-field"> <input type="text" name="partName" class="f-text" placeholder="输入节名称，30个字以内" data-pattern="not_null|limit" data-msg="节名称不能为空|" data-tips="输入节名称，30个字以内" data-name="节" data-min="1" data-max="30" > </div> </div> <div class="do-btn-list hide"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> <span class="btn-weak btn-del">删除</span> </div></div>'),_$out_.join("")}}(it.data,opt),' </div> <div class="task-list"> '),it.data&&it.data.task_info&&$.isArray(it.data.task_info))for(var i=0,index=0;num>i;i++){var task_data=it.data.task_info[i];it.task={index:++index,action:"view",data:task_data},_$out_.push(" ",function(it,opt){with(it=it||{}){var _$out_=[];it.data=it.data||{};var now=parseInt(+new Date/1e3),uuid=it.id?it.id:$.render.task_uuid(it.data),task_data_cls="view"===it.action&&it.data.name?" task-item--data":"",live_end_cls=1===data.type&&data.endtime>0&&data.endtime<=now?" task-live-end ":"",schedule_task_class=1===it.data.append_flag||opt.add_schedule_task?" schedule-task":"",update_task_class=opt.update?"update-task":"",new_term_task_class=opt.newterm?"newterm-task":"";return _$out_.push('<div type="',data.type,'" class="task-item item-line task-item--',it.action," ",task_data_cls," ",live_end_cls," ",schedule_task_class," ",update_task_class," ",new_term_task_class,'" id="',uuid,'"> ',function(it,opt){with(it=it||{}){var _$out_=[];opt=opt||{};var data=it.data?it.data:it,type_view=(it.id?it.id:$.render.task_uuid(data),""),task_type="",preview="",error="",res=(parseInt(+new Date/1e3),(data.resid_list||"").toString().split(",")[0]);switch(data.type){case 1:type_view="直播",task_type="live",preview=['<span class="view">',$.render.livetime(data),"</span>"].join(""),$.trim(data.name||"")||(error="请填写任务名称"),error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 2:type_view="录播",task_type="video",preview=['<span class="view video-view" data-vid="'+res+'">',$.render.task_video(res,data),"</span>"].join(""),$.trim(data.name||"")?res||(error="请关联录播视频"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 3:type_view="资料",task_type="res",preview=['<span class="view video-view" data-vid="'+res+'">',($._toArray(data._tmp_files||data.files)[0]||{}).cw_name||"","</span>"].join(""),$.trim(data.name||"")?res||(error="请关联资料"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 4:type_view="习题",task_type="exam",preview=['<span class="view video-view" data-vid="'+res+'">',((data._tmp_exam||[])[0]||data.exam||{}).title||"","</span>"].join(""),$.trim(data.name||"")?res||(error="请关联习题"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 5:type_view="答疑",task_type="faq",$.trim(data.name||"")||(error="请填写任务名称"),error=error?['<span class="err">',error,"</span>"].join(""):""}return _$out_.push('<div class="item-view--wrap"> <div class="item-name"> <p class="name-text"><span class="name">【',type_view,"】",html.encode(data.name),"</span>"),1===data.append_flag&&_$out_.push('<span class="schedule">补充任务</span>'),_$out_.push("",error,"",preview,'</p> </div> <div class="oper-list"> <span class="oper-item item--move" data-arrow="up"><i class="icon-font id-arrowhead"></i>上移</span> <span class="oper-item item--move" data-arrow="down" ><i class="icon-font id-arrowhead id-arrowhead--bottom"></i>下移</span> <span class="oper-item item--insert"><i class="icon-font i-insert"></i>插入</span> <span class="oper-item item--edit"><i class="icon-font i-edit"></i>修改</span> <span class="oper-item item--del"><i class="icon-font i-delete"></i>删除</span> </div></div>'),_$out_.join("")}}(it.data,opt)," ",function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="form form--h item-edit--wrap '),opt&&opt.add_schedule_task&&_$out_.push("edit-schedule-task"),_$out_.push('"> '),opt&&opt.add_schedule_task&&_$out_.push("<div class='note-msg'>该任务为补充任务，只有已报名学生可见，未报名学生不可见</div>"),_$out_.push(' <!-- 任务类型 --> <div class="f-item f-type"> <label class="f-label"><span class="f-required">*</span>任务类型</label> <div class="f-field"> <div class="diy-select-area f-select-tiny-large"> <a class="diy-select" href="javascript:;" data-select="tasktype"> <i class="text text-tip" name="type" data-tips="请选择任务类型">请选择任务类型</i> <span class="diy-select-toggle"><b></b></span> </a> <ul class="diy-optgroud"> <li class="diy-option" data-value="1"><a href="javascript:;">直播</a></li> <li class="diy-option" data-value="2"><a href="javascript:;">录播</a></li> <li class="diy-option" data-value="3"><a href="javascript:;">学习资料</a></li> <li class="diy-option" data-value="4"><a href="javascript:;">习题</a></li> </ul> </div> </div> </div> <!-- 任务名称 --> <div class="f-item f-name"> <label class="f-label"><span class="f-required">*</span>任务名称</label> <div class="f-field"> <input type="text" name="name" class="f-text" placeholder="输入任务名称，20个字以内" data-pattern="not_null|limit" data-msg="任务名称不能为空|" data-tips="输入任务名称，20个字以内" data-name="节" data-min="1" data-max="20" > </div> </div> <!-- 选择录播视频（不允许选择回放） --> <div class="f-item f-item-resid_list f-video" style="display:none"></div> <!-- 选择资料 --> <div class="f-item f-item-resid_list f-file" style="display:none"></div> <!-- 选择习题 --> <div class="f-item f-item-resid_list f-exam" style="display:none"></div> <!-- 有交必改 --> <div class="f-item f-item-correct-type f-radio--group" data-use="0" style="display:none"> <label class="f-label"><span class="f-required">*</span>批改类型</label> <div class="f-field"> <div class="f-radio-list"> <label class="f-radio list--block--child checked" data-value="2" > <i class="icon-radio"></i> <span class="f-rc-label">全部批改</span> </label> </div> <div class="f-radio-list"> <label class="f-radio list--block--child" data-value="4" > <i class="icon-radio"></i> <span class="f-rc-label">部分批改</span> </label> </div> </div> </div> <!-- 老师批改时间 --> <div class="f-item f-item-studytime" style="display:none"> <label class="f-label"><span class="f-required">*</span>老师批改时间</label> <div class="f-field"> <div class="f-date-wrap"> <input type="text" class="f-date" name="study_begin" data-pattern="not_null|study_time" data-tips="请选择建议学习起始时间" data-msg="请选择建议学习起始时间" > <i class="icon-font i-calendar"></i> </div> <span class="f-join">至</span> <div class="f-date-wrap"> <input type="text" class="f-date" name="study_end" data-pattern="not_null|study_time" data-tips="请选择建议学习结束时间" data-msg="请选择建议学习结束时间" > <i class="icon-font i-calendar"></i> </div> <div class="f-msg"></div> </div> </div> <!-- 免费试学 --> <div class="f-item expr_flag--wrap"> <div class="f-field"> <div class="f-checkbox-list list--block"> <label class="f-checkbox f-checkbox--float" name="expr_flag" data-value="1"> <i class="icon-checkbox"></i> <span class="f-rc-label">支持免费试学</span> </label> <span class="f-question f-question--faq" >',$.render.faq(),'</span> <span class="expr-live-tips">仅在直播任务直播时展示试学入口</span> </div> </div> </div> <!-- 试听设置 --> <div class="f-item expr_range--wrap f-radio--group" style="display:none"> <div class="f-field"> <div class="f-radio-list list--block"> <label class="f-radio list--block--child '),it.expr_flag&&2!==it.expr_flag||_$out_.push("checked"),_$out_.push('" data-value="2" > <i class="icon-radio"></i> <span class="f-rc-label">免费试学<i class="select--gap"></i>分钟</span> </label> </div> </div> <div class="f-field"> <div class="f-radio-list list--block"> <label class="f-radio list--block--child '),1===it.expr_flag&&_$out_.push("checked"),_$out_.push('" data-value="1" > <i class="icon-radio"></i> <span class="f-rc-label">免费试学该视频</span> </label> </div> </div> <div class="f-field f-field-range"> <div class="diy-select-area f-select-tiny-small"> <a class="diy-select" href="javascript:;" data-select="expr_range"> <i class="text" name="expr_range" data-value="5">5</i> <span class="diy-select-toggle"><b></b></span> </a> <ul class="diy-optgroud"> <li class="diy-option selected" data-value="5"><a href="javascript:;">5</a></li> <li class="diy-option" data-value="10"><a href="javascript:;">10</a></li> <li class="diy-option" data-value="15"><a href="javascript:;">15</a></li> <li class="diy-option" data-value="20"><a href="javascript:;">20</a></li> </ul> </div> </div> </div> <!-- 班级特色 --> <!-- <div class="f-item"> <div class="f-field"> <div class="f-checkbox-list list--block"> <label class="f-checkbox f-checkbox--float" name="special_flag" data-value="1"> <i class="icon-checkbox"></i> <span class="f-rc-label">是否班级特色</span> </label> <span class="f-question f-question--faq" >',$.render.faq(),'</span> </div> </div> </div> --> <!--新增保存 取消按钮--> <div class="f-item"> <div class="f-field"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> </div> </div> <!--旧按钮 不知道干什么用--> <div class="do-btn-list hide"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> <span class="btn-weak btn-del">删除</span> </div></div>'),_$out_.join("")}}(it.data,opt),"</div>"),_$out_.join("")}}(it.task,opt)," ")}return _$out_.push(' <div class="task-item item-line item--add"> <div class="add-btn">'),_$out_.push(schedule?"+ 添加补充任务":"+ 添加学习任务"),_$out_.push("</div> </div> </div></div>"),_$out_.join("")}}});
/*!agency/publish/step4/part*/
;define("agency/publish/step4/part",function(t){t("edu_modules/edu-render/edu-render");var e=(t("edu_modules/edu-db/edu-db"),t("@tencent/im-cache/cache")),i=t("jquery"),a=(t("edu_modules/modal/modal"),t("edu_modules/pagectrl/pagectrl"),t("edu_modules/validator/validator"),t("agency/publish/step4/part.max")),n=t("agency/publish/step4/term.data"),r=t("/agency/publish/template/term.part.tpl_tpl"),d=i.render.part_uuid=function(){var t=0;return function(i){var a="part_increase_"+t++;return i&&e.set(a,i),a}}(),s=i.render.part_index=function(t,e,i){return["第",c(t,i)+e,"节"].join("")},c=function(t,e){var a=0,n=i(".term-item_current .chapter-list").find(".chapter-item").not(".item--add");if(t>1)for(var r=0,d=t-1;d>r;r++)if(e&&e[r]&&e[r].sub_info)a+=e[r].sub_info.length;else{var s=i(n[r]).find(".part-item").not(".item--add").length;a+=s}return a},m=function(t){return parseInt(t.find(".item-index--chapter .index").data("index"),10)||1},l=function(t){return parseInt(t.find(".item-index--part .index").data("index"),10)||1},o=function(t){var e=m(t);t.find(".part-item").not(".item--add").each(function(t){var a=i(this);a.find(".item-index").text(s(e,t+1)).data("index",t+1);var n=a.find(".task-item[type=1]");n.length?a.addClass("part-item--live"):a.removeClass("part-item--live")}),a.check_part_max(t.closest(".chapter-list"))},p=function(t,a){var n=t.attr("id"),r=e.get(n);return a&&(r=i.extend(r||{},a),e.set(n,r)),r},u=function(t,e){t.find(".item-name--part .name-text").text(e),p(t.removeClass("part-item--add part-item--edit").addClass("part-item--view"),{name:e})},f=function(t){var e=t.closest(".chapter-item"),a=(i(".term-item_current .chapter-item--view"),l(t)),s=i(r({id:d(),chapter_index:m(e),index:a,action:"add",name_en:"part",name_cn:"节"},{schedule:n.is_schedule_task()}));t.hasClass("item--add")?t.prev().append(s):t.before(s),b(e),n.validator.init(s.find("[data-pattern]")),n.input_focus(s)},h=function(t,e){var a=function(){var e=t.closest(".chapter-item"),a=i(".term-item_current .chapter-item--view"),n=e.find(".part-item--view").length;t.remove(),1>=n&&a.length>1&&e.find(".item-line--chapter .item--del").click(),b(e)};e?a():i.modal.confirm("确定要删除这节吗?",{icon:"info",title:"删除节",yes:a})},v=function(t){p(t)?u(t):h(t)},_=function(t){var e=t.find(".item-line--part .f-text"),a=n.validator.validate(e);a?(u(t,i.trim(e.val())),t.addClass("part-item--data")):i.trim(e.val())||1!==t.find(".task-item").length?t.addClass("part-item--data"):h(t,!0)},x=function(t){t.removeClass("part-item--add part-item--view").addClass("part-item--edit"),t.find(".f-text").val(p(t).name)},b=function(t){var e=i(".term-item_current .chapter-item--view");e.length>1?e.each(function(){o(i(this))}):o(t)},g=function(){i(document).on("click",".part-item.item--add .add-btn, .item-line--part .item--insert",function(){var t=i(this);t.hasClass("disabled")||setTimeout(function(){f(t.closest(".part-item"))},0)}).on("click clear",".item-line--part .btn-del, .item-line--part .item--del, .item-line--part .btn-cancel",function(t){t.stopPropagation();var e=i(this);if(!e.hasClass("disabled"))return"clear"===t.type?h(e.closest(".part-item"),!0):void(e.hasClass("btn-del")||e.hasClass("item--del")?h(e.closest(".part-item")):v(e.closest(".part-item")))}).on("click",".item-line--part .btn-save",function(t){t.stopPropagation();var e=i(this);e.hasClass("disabled")||_(e.closest(".part-item"))}).on("click",".item-line--part .item--edit",function(t){t.stopPropagation();var e=i(this);e.hasClass("disabled")||x(e.closest(".part-item"))}).on("click",function(t){var e=i(t.target);e.is(":input")||i(".term-item_current .part-item--add, .term-item_current .part-item--edit").each(function(){_(i(this))})}).on("part:update_index",function(t,e){b(e)})};return{init:g}});
/*!agency/publish/step4/datetime*/
;define("agency/publish/step4/datetime",function(e){var t=e("jquery"),r=1e3,a=864e5,n=/^(?:[01]?\d|2[0-3])[:：][0-5]?\d$/,i=function(e){return parseInt(e.valueOf()/r,10)},s=function(e,t){return e="string"==typeof e?e.replace(/-/g,"/"):e,e=new Date(e),t=t.replace(/：/g,":"),t=/(\d+:)*\d+/.test(t)?t:"",e.setHours.apply(e,t.split(":").concat(0,0,0,0)),i(e)},u=function(e,t,r){for(var a=[],n=e.slice(0);n.length;)for(var i=n.shift(),u=t.slice(0);u.length;){var f=u.shift(),c=null;if("string"==typeof f)c=s(i,f);else{c={};for(var g in f)c[g]=s(i,f[g])}a.push(r?r(c):c)}return a},f=function(e,a){var n=[];return t.isArray(e)&&t.each(e,function(e,t){var i=(t||{})[a];if(i){var s=new Date(i*r);s.setHours(0,0,0,0),n.push(+s)}}),n},c=function(e){return new Date(e.valueOf()+a)},g=function(e,r){var a=[],i=e.start;if(!Date.parse(i)||!n.test(e.begin)||!n.test(e.end))return a;var s=1e4;switch(e.cycle){case 1:for(;a.length!==r&&s--;)a.push(i),i=c(i);break;case 2:if(!e.ext||!t.isArray(e.ext))break;for(;a.length!==r&&s--;){var f=i.getDay();f=0===f?7:f,-1!==e.ext.indexOf(f)&&a.push(i),i=c(i)}break;case 3:if(!e.ext||!t.isArray(e.ext))break;for(;a.length!==r&&s--;){var g=i.getDate();-1!==e.ext.indexOf(g)&&a.push(i),i=c(i)}break;case 4:if(!e.ext||!t.isArray(e.ext))break;a=e.ext.slice(0).sort()}var o=u(a,[{bgtime:e.begin,endtime:e.end}],function(e){return e.bgtime>e.endtime&&(e.endtime+=86400),e});return o.slice(0,r)},o=function(e){var a=[];return t.isArray(e)&&t.each(e,function(e,t){if(t.bgtime){var n=new Date(t.bgtime*r);!isNaN(Date.parse(n))&&a.push(n.getDay()||7)}}),(a.reverse().join(",").match(/(\b[^,]+(?=,|$)+)(?!.*,\1(,|$))/g)||[]).reverse()},v=function(e){var a=[];return t.isArray(e)&&t.each(e,function(e,t){if(t.bgtime){var n=new Date(t.bgtime*r);!isNaN(Date.parse(n))&&a.push(n.getDate())}}),(a.reverse().join(",").match(/(\b[^,]+(?=,|$)+)(?!.*,\1(,|$))/g)||[]).reverse()};return{get_dates:f,get_weeks:o,get_months:v,get_date_time:u,create_date_time:s,generate_datetime:g}});
/*!agency/publish/step4/term.datetime*/
;define("agency/publish/step4/term.datetime",function(n){var e,t=(n("@tencent/im-cache/cache"),n("agency/publish/step4/term.data")),i=t.validator,u=16,a=function(n,e,t){for(var i=[],u=n;e>u;u++){var a=u;a>=48&&(a-=48);var r=Math.floor(a/2)+":"+(a%2===1?"30":"00");i.push({value:r,name:r+(t?'<span class="f-suffix gray">('+.5*(u-n+1)+"小时)</span>":"")})}return i},r=function(n){var e=n.split(":"),t=parseInt(e[0],10),i=parseInt(e[1],10),u=2*t+i/30,a=u>>0;return{hour:t,min:i,halfs:u,iHalf:a}},_=function(n){if(n.f_begin_hour_input){var t=n.f_begin_hour_input.val();if(!/\d+:\d+/.test(t))return;var _=r(t).iHalf,o=_+u;n.f_end_hour.val(n.f_end_hour.val()||n.f_end_hour_input.val()),n.f_end_hour.options(a(_+1,o+1,!0),"name","value",!0),i&&e&&setTimeout(function(){i.validate(e)},100)}},o=function(n,u,a){if(a=a||{},e=n,!a._begin||!a._end){var r=t.get_term_data(n.closest(".term-item"));a={_begin:new Date(r._tmp_mintime),_end:new Date(1e3*r.endtime)}}n.datepicker({_begin:a._begin,_end:a._end,_defaultVal:function(){return i.toDateWithOutHMS(a._begin)},_dpCls:"dp-calender-popup",_show:function(){n.data("noblur",!0)},_hide:function(){n.data("noblur",!1)},_click:function(){n.data("datepicker").hide(),i&&setTimeout(function(){i.validate(n)},100)}}),i.init(n),u&&u(n)},f=function(n){var e=n.form();e.f_begin_hour.options(a(0,48),"name","value"),e.f_end_hour.options(a(0,48),"name","value"),e.f_begin_hour.on("change",function(n,t){e.f_begin_hour_input.val(t),_(e)}),e.f_end_hour.on("change",function(n,t){e.f_end_hour_input.val(t)}),e.f_begin_hour_input.on("blur",function(){setTimeout(function(){e.f_begin_hour.$.trigger("blur")},300)}),e.f_end_hour_input.on("blur",function(){setTimeout(function(){e.f_end_hour.$.trigger("blur")},300)})};return{init_time_select:f,init_date_picker:o}});
/*!agency/publish/step4/orderly*/
;define("agency/publish/step4/orderly",function(e){var t=e("agency/publish/step4/term.data"),n=28800,i=1800,r=function(e,t){for(var n=e.slice(0,t);n.length;){var i=n.pop();if(i.bgtime&&i.endtime)return i}return null},m=function(e,t){for(var n=e.slice(t+1);n.length;){var i=n.shift();if(i.bgtime&&i.endtime)return i}return null},u=function(e){return parseInt(e._tmp_mintime/1e3,10)},f=function(e){var t=new Date(1e3*e.endtime);return t.setHours(23,59,59,0),t=parseInt(t.valueOf()/1e3,10)},a=function(e,t,a,s,g){var l=s.endtime-s.bgtime;if(i>l)return"直播时长不能小于 30 分钟";if(l>n)return"直播时长不能超过 8 小时";var _=r(t,g),b=u(e);if(_){if(_.endtime>s.bgtime)return"开始时间不能早于上一个直播任务";if(1e3*s.bgtime<=(new Date).getTime())return"开始时间不能早于当前时间"}else if(b>s.bgtime)return e._tmp_mintime_publish?e._tmp_mintime_publish_now?"开始时间不能早于当前时间":"开始时间必须至少为 2 天以后":e._tmp_mintime_modify_stuing?"请不要设置无效的上课时间":"开始时间不能早于当前时间";var o=m(t,g);if(o){if(o.bgtime<s.endtime)return"结束时间需早于下一个任务的开始时间"}else if(f(e)<s.endtime)return"结束时间需小于班级下架日期";return!0},s=function(e,n){n.begin=Math.min(t.first_task_max(e),n.begin)},g=function(e,t,n,i,a){var g={begin:(r(t,a)||{}).endtime||u(e),end:(m(t,a)||{}).bgtime||f(e)};return 0===a&&s(e,g),g};return{check:a,min_max:g}});
/*!/agency/publish/template/term.live.time.show.tpl_tpl*/
;define("/agency/publish/template/term.live.time.show.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<span class="view">',$.render.livetime(it,!0),"</span>"),it._tmp_over||it.disEdit||_$out_.push('<a class="ct-btn" href="javascript:;">编辑</a>'),_$out_.join("")}}});
/*!/agency/publish/template/term.live.time.edit.tpl_tpl*/
;define("/agency/publish/template/term.live.time.edit.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="live-datetime f-item"> <div class="f-dates"> <input type="text" class="f-text" style="width:100px;position:absolute;top:2px;right:290px;padding:2px 4px;" placeholder="直播日期" data-tips="请选择开始日期" data-pattern="not_null|date|task_livetime" data-msg="直播日期不能为空|直播日期格式不正确" > <i class="icon-font i-calendar" style="top:1px;right:293px"></i> </div> <div class="f-times" style="position:absolute;top:0;right:78px;width:200px;line-height:28px;height:28px"> <div class="f-select f-select--scroll" data-name="f_begin_hour"> <div class="f-value-wrap" style="padding:2px 4px"> <input class="f-text" placeholder="00:00" data-name="f_begin_hour_input" data-pattern="not_null|time|task_livetime" data-tips="请选择开始时间" data-msg="开始时间不能为空|时间格式不正确" style="width:60px;padding:0px 6px;border:0px" > <span class="f-value hide"></span> <span class="f-select-icon"><i class="icon-arrow-down"></i></span> </div> <div class="f-select-dropdown"> <ul class="f-value-list" style="height:250px;"></ul> </div> </div> <span class="f-join">至</span> <div class="f-select f-select--scroll" data-name="f_end_hour"> <div class="f-value-wrap" style="padding:2px 4px"> <input class="f-text" placeholder="00:00" data-name="f_end_hour_input" data-pattern="not_null|time|task_livetime" data-tips="请选择结束时间" data-msg="结束时间不能为空|时间格式不正确" style="width:60px;padding:0px 6px;border:0px" > <span class="f-value hide"></span> <span class="f-select-icon"><i class="icon-arrow-down"></i></span> </div> <div class="f-select-dropdown"> <ul class="f-value-list" style="height:250px"></ul> </div> </div> </div> <div class="f-msg" style="width:180px;height:16px;position:absolute;top:8px;left:5px"><i class="icon-msg"></i><p class="f-msg-text">请选择结束时间</p></div></div><a class="ct-btn ct-btn-save" href="javascript:;" style="position:absolute;right:38px;top:0;width:2em">完成</a><a class="ct-btn ct-btn-cancel" href="javascript:;" style="position:absolute;right:0;top:0;width:2em">取消</a>'),_$out_.join("")}}});
/*!agency/publish/step4/term.live.time.modify*/
;define("agency/publish/step4/term.live.time.modify",function(e){e("edu_modules/form/form"),e("@tencent/im-edu-datepicker/edu-datepicker");var t=e("@tencent/im-cache/cache"),i=e("agency/publish/step4/orderly"),n=e("edu_modules/validator/validator"),a=e("agency/publish/step4/datetime"),r=e("agency/publish/step4/term.data"),d=e("agency/publish/step4/term.datetime"),s={show:e("/agency/publish/template/term.live.time.show.tpl_tpl"),edit:e("/agency/publish/template/term.live.time.edit.tpl_tpl")},m=function(e){return e.hasClass("course-time")?e:e.closest(".course-time")},c=function(e){return t.get(e.closest(".term-item").attr("id"))||{}},o=function(e){return t.get(e.closest(".guide--livetime").attr("id"))||[]},f=function(e){return m(e).data("for")},u=function(e){return t.get(f(e))||{}},l=function(e){var t=m(e),i=$.trim(t.find(".f-dates .f-text").val()),n=t.find(".f-times .f-text"),r={bgtime:a.create_date_time(i,$.trim(n.eq(0).val())),endtime:a.create_date_time(i,$.trim(n.eq(1).val()))};return r.endtime<r.bgtime&&(r.endtime+=86400),r},h=function(e){return m(e).data("index")};!function(e){var t=!1;$.each(e,function(e,n){n.extend("task_livetime",function(a,r){if(t)return!0;t=!0;var d=i.check(c(r),o(r),f(r),l(r),h(r));if(e&&"string"==typeof d&&(n.msg=d,d=!1),r.closest(".f-times").length){var s=r.closest(".ct-edit").find(".f-dates .f-text");setTimeout(function(){0===s.val().length&&s.focus()},0)}return t=!1,d})})}([n,r.validator]);var v=function(e){return i.min_max(c(e),o(e),f(e),l(e),h(e))},p=$.render.time.formatDate,_=function(e){var t=u(e);if(t.bgtime&&t.endtime){var i=new Date(1e3*t.bgtime),n=new Date(1e3*t.endtime),a=e.find(".f-dates .f-text");a.val(p("YYYY-M-D",i));var r=e.find(".f-times input");r.eq(0).val(p("h:mm",i)),r.eq(1).val(p("h:mm",n))}},g=function(e){var t=e.closest(".f-livetime-detail").find(".course-time .f-dates input").not(":hidden");if(t.length)return void t.each(function(){r.set_has_error($(this).closest(".course-time"),!0,"请保存直播任务时间")});var i=m(e);i.find(".ct-show").hide();var a=i.find(".ct-edit").html(s.edit()).show();_(i);var c=a.find(".f-dates .f-text"),o=v(c),f={_begin:n.toDateWithOutHMS(new Date(1e3*o.begin)),_end:n.toDateWithOutHMS(new Date(1e3*o.end))};d.init_date_picker(c,!1,f),d.init_time_select(a.find(".f-times")),r.set_has_error(i,!1)},w=function(e){var t=m(e),i=t.find(".ct-edit");if(r.validator.all(i.find("[data-pattern]"))){var n=l(e);t.find(".ct-show").html(s.show(n)).show(),i.empty().hide(),$.event.trigger("task:update_livetime",[f(t),n]),r.set_has_error(t,!1)}},b=function(e){var t=m(e),i=u(e);t.find(".ct-show").html(s.show(i)).show(),t.find(".ct-edit").empty().hide(),r.set_has_error(t,!1)};return{edit:g,save:w,cancel:b}});
/*!/agency/publish/template/term.live.time.tpl_tpl*/
;define("/agency/publish/template/term.live.time.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[],uuid=$.render.livetime_uuid(it.data);return _$out_.push('<div class="content-guide guide--livetime" id="',uuid,'"> <div class="guide-hd"> <h3 class="guide-tt">直播任务时间</h3> </div> <div class="guide-bd form form--h"> <div class="f-generator"> <!-- 直播开始日期 --> <div class="f-item"> <label class="f-label">直播开始日期</label> <div class="f-field"> <div class="f-date-wrap"> <input type="text" class="f-text datepicker-start" placeholder="直播开始日期" data-tips="直播开始日期" data-pattern="date_range" > <i class="icon-font i-calendar"></i> </div> </div> </div> <!-- 上课时间 --> <div class="f-item f-item-timeselect"> <label class="f-label">上课时间</label> <div class="f-field"> <div class="f-select f-select--scroll" data-name="f_begin_hour"> <div class="f-value-wrap"> <input class="f-text" data-pattern="living_time_begin" data-tips="请选择起始时间" placeholder="请选择起始时间" data-name="f_begin_hour_input" style="width:120px;padding:0px 6px;border:0px" > <span class="f-value hide"></span> <span class="f-select-icon"><i class="icon-arrow-down"></i></span> </div> <div class="f-select-dropdown"> <ul class="f-value-list" style="height:250px;"></ul> </div> </div> <span class="f-join">至</span> <div class="f-select f-select--scroll" data-name="f_end_hour"> <div class="f-value-wrap"> <input class="f-text" data-pattern="living_time_end" data-tips="请选择结束时间" placeholder="请选择结束时间" data-name="f_end_hour_input" style="width:132px;padding:0px 6px;border:0px" > <span class="f-value hide"></span> <span class="f-select-icon"><i class="icon-arrow-down"></i></span> </div> <div class="f-select-dropdown"> <ul class="f-value-list" style="height:250px"></ul> </div> </div> </div> </div> <!-- 循环方式 --> <div class="f-item f-item-cycle-style"> <label class="f-label">循环方式</label> <div class="f-field"> <div class="f-radio-list list--block"> <label class="f-radio" data-value="1" > <i class="icon-radio"></i> <span class="f-rc-label">每天</span> </label> <label class="f-radio list--block--child" data-value="2" > <i class="icon-radio"></i> <span class="f-rc-label">每周</span> </label> <label class="f-radio list--block--child" data-value="3" > <i class="icon-radio"></i> <span class="f-rc-label">每月</span> </label> <label class="f-radio list--block--child checked" data-value="4" > <i class="icon-radio"></i> <span class="f-rc-label">直接选日期</span> </label> </div> </div> </div> <!-- 周循环 --> <div class="f-item f-item-childs f-item-childs-2" style="display:none"></div> <!-- 月循环 --> <div class="f-item f-item-childs f-item-childs-3" style="display:none"></div> <!-- 选日期 --> <div class="f-item f-item-childs f-item-childs-4"></div> </div> <!-- 直播任务列表 --> <div class="f-item f-item-livetask"> <label class="f-label">直播任务列表</label> <div class="f-field"> <ul class="f-livetime-detail"></ul> </div> </div> </div></div>'),_$out_.join("")}}});
/*!/agency/publish/template/term.live.time.details.tpl_tpl*/
;define("/agency/publish/template/term.live.time.details.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[],PAGE_SIZE=1e4,page=parseInt(it.page,10);page=1>page?1:page;for(var items=$._toArray(it.data).slice(0).splice(PAGE_SIZE*(page-1),PAGE_SIZE),items_new=$._toArray(it.gdt).slice(0).splice(PAGE_SIZE*(page-1),PAGE_SIZE),i=0,l=items.length;l>i;i++){var item=items[i]||{},item_new=items_new[i]||{};item.bgtime=item.bgtime||item_new.bgtime,item.endtime=item.endtime||item_new.endtime;var index=i+1+(page-1)*PAGE_SIZE;_$out_.push('<li class="course-time',index%2===0?" course-time-odd":"",'" data-index="',index-1,'" data-for="',item.id,'"> <span class="ct-index">',index,'. </span> <span class="ct-name" title="',html.encode(item.name),'">',strEllipsis.substring(item.name,200,1),'</span> <span class="cte-err"></span> <div class="ct-show">',function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<span class="view">',$.render.livetime(it,!0),"</span>"),it._tmp_over||it.disEdit||_$out_.push('<a class="ct-btn" href="javascript:;">编辑</a>'),_$out_.join("")}}(item,opt),'</div> <div class="ct-edit"></div></li>')}return _$out_.join("")}}});
/*!/agency/publish/template/term.live.time.week.tpl_tpl*/
;define("/agency/publish/template/term.live.time.week.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];_$out_.push('<div class="f-field mod-calender mod-calender_days mod-calender_week"> <table> <tr> ');for(var i=1,weeks="一二三四五六日";8>i;i++)_$out_.push(" <td",7===i?' class="td_last"':"",'> <a data-id="',i,'" href="javascript:;" class="mod-calender__day"> <span class="icon-corner"><i class="icon-font i-right"></i></span> <span>周',weeks.charAt((i-1)%7),"</span> </a> </td> ");return _$out_.push(" </tr> </table></div>"),_$out_.join("")}}});
/*!/agency/publish/template/term.live.time.month.tpl_tpl*/
;define("/agency/publish/template/term.live.time.month.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];_$out_.push('<div class="f-field mod-calender mod-calender_days mod-calender_month"> <table> ');for(var i=1;36>i;i++)_$out_.push(" ",i%7===1?"<tr>":""," <td",i%7===0?' class="td_last"':"","> "),32>i?_$out_.push(' <a data-id="',i,'" href="javascript:;" class="mod-calender__day"> <span class="icon-corner"><i class="icon-font i-right"></i></span> <span>',i,"</span> </a> "):_$out_.push(" &nbsp; "),_$out_.push(" </td>",i%7===0?"</tr>":""," ");return _$out_.push(" </table></div>"),_$out_.join("")}}});
/*!agency/publish/step4/term.live.time*/
;define("agency/publish/step4/term.live.time",function(e){e("edu_modules/form/form"),e("@tencent/im-edu-datepicker/edu-datepicker");var t=e("jquery"),i=e("@tencent/im-cache/cache"),a=e("edu_modules/validator/validator"),n=e("agency/publish/step4/datetime"),r=e("agency/publish/step4/term.data"),d=e("agency/publish/step4/term.datetime"),s=e("agency/publish/step4/term.live.time.modify"),c=e("agency/publish/common/disabled.manager"),m=e("/agency/publish/template/term.live.time.tpl_tpl"),l=e("/agency/publish/template/term.live.time.details.tpl_tpl"),o={week:e("/agency/publish/template/term.live.time.week.tpl_tpl"),month:e("/agency/publish/template/term.live.time.month.tpl_tpl")},u=[],f=t.FT.without_verify?0:2,_=(t.render.livetime_uuid=function(){var e=0;return function(t){var a="livetime_increase_"+e++;return t&&i.set(a,t),a}}(),function(e,t){var n=e.closest(".term-item"),d=i.get(n.attr("id"))||{};if(!d._tmp_mintime){var s,c=+new Date;if(r.is_modify()){s=c;var m=((t||[])[0]||{}).bgtime;if(m){var l=+new Date(1e3*m);s>l?(d._tmp_mintime=l,d._tmp_mintime_modify_stuing=!0):(d._tmp_mintime=s,d._tmp_mintime_modify_not_stuing=!0)}else d._tmp_mintime=s,d._tmp_mintime_modify_not_stuing=!0}else f?d._tmp_mintime=+a.toDateWithOutHMS(c+864e5*f):(d._tmp_mintime=c,d._tmp_mintime_publish_now=!0),d._tmp_mintime_publish=!0}}),v=function(e){if(e.hasClass("guide--livetime"))return e;var t=e.closest(".guide--livetime");return t.length?t:e.find(".guide--livetime")},h=function(e,t){var a=v(e),n=a.attr("id"),r=i.get(n);return t&&(_(a,t),r=t.slice(0),i.set(n,r)),r},p=function(e,t,i){var a=t.length,n=[];e=v(e).data("length",a).find(".f-livetime-detail").html(l({data:t,gdt:n,page:i||1})),h(e,t),j(e)},g=t.render.time.formatDate,b=function(e,t){var i,a,n=t[0],d=!1;if(n.bgtime&&n.endtime)i=new Date(1e3*n.bgtime),a=new Date(1e3*n.endtime);else{var s=r.get_term_data(e.closest(".term-item"));i=new Date(s._tmp_mintime),a=new Date(+i+72e5),d=!0}e.find(".datepicker-start").val(g("YYYY-M-D",i));var c=e.find(".f-item-timeselect input");c.eq(0).val(d?"0:00":g("h:mm",i)),c.eq(1).val(d?"2:00":g("h:mm",a))},k=function(e){v(e).remove()},w=function(e,i){var n=v(e),s=y(e,i);for(n.length?p(e,s):(n=t(m()),e.append(n),p(n,s),b(n,s),d.init_date_picker(n.find(".datepicker-start"),!1,{},a.toDateWithOutHMS(new Date(1e3*r.first_task_max(r.get_term_data(e))))),d.init_time_select(n.find(".f-item-timeselect")),W(n.find(".f-item-childs-4"),M(4)));u.length;)u.shift()()},y=function(e,a){a=a||D(e);var n=[],d=!1;return a.length&&a.each(function(){var e=t(this),a=i.get(e.attr("id"))||{};e.hasClass("task-live-end")&&(a._tmp_over=!0,d=!0),r.is_update&&e.hasClass("update-task")&&(a.disEdit=!0),n.push(a)}),t.FT.disabled_generator_datetime&&d&&u.push(function(){c.add(e.find(".f-generator"))}),n},D=function(e){var t=[];return e.find(".task-item[type=1]").not(t.join(","))},C=function(e){if(!e.data("crossover")){var t=D(e);t.length>0?w(e,t):k(e)}},M=function(e){return["week","month","dates"][e-2]},O=function(e){var t=v(e),i=h(t)||[],r=n.get_dates(i,"bgtime"),d=r[0];if(d)d=a.toDateWithOutHMS(new Date(d));else{var s=t.find(".datepicker-start").val();d=a.toDateWithOutHMS(s),r=[d]}return{begin:d,dates:r}},x=function(e){var t=E(e),i=t.params,a=i.cycle;if(i.start&&1!==a){var n,r,d,s=i.start;switch(a){case 2:n=s.getDay(),n=0===n?7:n,r=e.find(".mod-calender_week .mod-calender__day.disabled"),d=e.find(".mod-calender_week [data-id="+n+"]"),S(r.removeClass("disabled")),S(d.addClass("disabled"),!0);break;case 3:n=s.getDate(),r=e.find(".mod-calender_month .mod-calender__day.disabled"),d=e.find(".mod-calender_month [data-id="+n+"]"),S(r.removeClass("disabled")),S(d.addClass("disabled"),!0)}}},S=function(e,t){var i=".icon-corner",a="icon-corner-selected",n=e.find(i);t?n.addClass(a):n.toggleClass(a)},Y=function(e){var i=[];if(t.isArray(e))for(var a,n=e.slice(0).sort(function(e,t){return e-t});n.length;){var r=n.shift();a!==r&&i.push(r),a=r}return i},H=function(e,t,i){var a=e.find("[data-id="+t+"]");i&&a.addClass("disabled"),S(a,!0)},W=function(e,i){var a=O(e),d=h(e)||[];switch(i){case"week":var s=t(o.week());e.empty().append(s),t.each(n.get_weeks(d),function(e,t){s.find("[data-id="+t+"]").trigger("init")});var c=a.begin.getDay();c=0===c?7:c,H(s,c,!0);break;case"month":var m=t(o.month());e.empty().append(m),t.each(n.get_months(d),function(e,t){m.find("[data-id="+t+"]").trigger("init")});var l=a.begin.getDate();H(m,l,!0);break;case"dates":var u=Y(n.get_dates(d,"bgtime"));if(q(e,u),!e.data("datepicker")){var f=r.get_term_data(e.closest(".term-item"));e.datepicker({_begin:new Date(f._tmp_mintime),_end:new Date(1e3*f.endtime),_isView:!0,_isMuitPicker:!0,_dates:function(){return q(e)},_defaultVal:function(){return!1},_not_hide:!0,_isStopProp:!0,_body:e,_dpCls:"dp-calender-view dp-muit-picker"}),e.data("datepicker").show()}j(e)}},T=function(e,i){var a=[];return e.find(".mod-calender_"+i+" .icon-corner-selected").each(function(){a.push(t(this).closest(".mod-calender__day").data("id"))}),a},q=function(e,a){e=v(e);var n=e.find(".f-item-childs-4"),r=n.attr("id");if(r||(r=["dates",+new Date,Math.random().toString().substr(-6)].join("_"),n.attr("id",r)),!a){var d=i.get(r);a=Y(t.isArray(d)?d:[])}var s=e.data("length"),c=a.slice(0,s);return i.set(r,c),c},A=function(e,t){e=v(e);var i=(e.find(".f-item-childs-4"),q(e));if(t){var a=i.indexOf(t);-1===a?i.push(t):i.splice(a,1)}var n=Y(i)[0];n&&e.find(".datepicker-start").val(g("YYYY-M-D",new Date(n))),j(e)},j=function(e){e=v(e);var t=e.data("length"),i=q(e);e[i.length>=t?"addClass":"removeClass"]("dates-max-disabled");var a=e.find(".f-item-childs-4").data("datepicker");a&&a.update&&a.update(new Date(i[0]))},V=function(e){e=v(e);var i=(e.find(".f-item-childs-4"),e.find(".datepicker-start")),n=a.toDateWithOutHMS(t.trim(i.val())).valueOf(),r=[];r.push(n),t.each(q(e),function(e,t){t>=n&&r.push(t)}),q(e,Y(r)),j(e)},E=function(e){var i=e.find(".datepicker-start"),n=e.find("[data-name=f_begin_hour_input]"),r=e.find("[data-name=f_end_hour_input]"),d=e.find(".f-item-cycle-style .f-radio.checked"),s=i.add(n).add(r).add(d),c={};c.start=a.toDateWithOutHMS(t.trim(i.val())),B(n.closest(".f-item-timeselect"),!0)?(c.begin=t.trim(n.val()),c.end=t.trim(r.val())):(c.begin="",c.end="");var m=c.cycle=d.data("value");switch(m){case 2:c.ext=T(e,"week");break;case 3:c.ext=T(e,"month");break;case 4:c.ext=q(e)}return{params:c,$params:s}},F=function(e,i){var a=t("#"+e),n=a.find(".item-view--wrap .view");n.text(t.render.livetime(i))},I=function(e,a){var n=h(e);return t.isArray(n)&&t.isArray(a)&&t.each(n,function(e,t){var n=t.id,r=a[e]||{},d=i.get(n)||{};t._tmp_over||(d.bgtime=t.bgtime=r.bgtime,d.endtime=t.endtime=r.endtime),F(n,d)}),n},P=function(e,t){var i=E(e);return n.generate_datetime(i.params,t||e.data("length"))},$=function(e){e=v(e);var t=I(e,P(e));t.length&&p(e,t,1,!0)},N=function(){var e=t(document).on("click",".dp-muit-picker .day",function(i){i.preventDefault(),e.trigger("mousedown");var a=t(this);if(!a.hasClass("not_allow")){var n=v(a);n.find(".f-item-cycle-style").hasClass("disabled")||(!n.hasClass("dates-max-disabled")||a.hasClass("current"))&&(a.toggleClass("current"),A(n,new Date(a.data("date")).getTime()),$(n))}}).on("click",".f-radio-list .f-radio",function(){var e=t(this);if(!e.hasClass("disabled")&&!e.hasClass("checked")){e.addClass("checked").siblings().removeClass("checked");var i=e.data("value"),a=v(e),n=a.find(".f-item-childs-"+i).show();a.find(".f-item-childs").not(n).hide(),/^[234]$/.test(i)&&W(n,M(i)),$(a)}}).on("click",".f-livetime-detail .ct-show .ct-btn",function(){s.edit(t(this))}).on("click init",".mod-calender__day",function(e){var i=t(this);i.hasClass("disabled")||(S(i),"click"===e.type&&$(i))}).on("click",".f-livetime-detail .ct-edit .ct-btn-save",function(){s.save(t(this))}).on("click",".f-livetime-detail .ct-edit .ct-btn-cancel",function(){s.cancel(t(this))});N=t.noop},z=function(e){var t=e.split(/[:：]/);return 60*parseInt(t[0],10)+parseInt(t[1],10)},B=function(e,i){var n=e.find("input"),d=n.eq(0),s=n.eq(1),c=t.trim(d.val()),m=t.trim(s.val()),l=r.validator,o=function(e){return i||(l.msg=e,l.setError(d)),!1};if(!a.time(c)||!a.time(m))return o("上课时间格式不正确");var u=z(c),f=z(m),_=f-u;if(0>_){if(!(480>f))return o("结束时间需大于开始时间");f+=1440,_=f-u}return 30>_?o("上课时间不能小于 30 分钟"):_>480?o("上课时间不能超过 8 小时"):(l.isNeedValidate(d)&&l.setSuccess(d),!0)},G=0,J=function(e){clearTimeout(G),G=setTimeout(function(){$(e)},300)},K=function(){!function(e){t.each(e,function(e,t){t.extend("date_range",function(e,i){{var a=r.get_term_data(i.closest(".term-item"))||{},n=t.toDateWithOutHMS(new Date(a._tmp_mintime));t.toDateWithOutHMS(new Date(1e3*r.first_task_max(a)))}if(!t.date(e)||t.toDateWithOutHMS(e).valueOf()<n.valueOf()){i.val(g("YYYY-M-D",n));var d=i.data("datepicker");d&&d.update&&d.update()}var s=v(i);return V(s),x(s),$(s),!0}),t.extend("living_time_begin",function(e,t){return setTimeout(function(){B(t.closest(".f-item-timeselect"))},0),J(t),!0}),t.extend("living_time_end",function(e,t){return setTimeout(function(){B(t.closest(".f-item-timeselect"))},0),J(t),!0})})}([a,r.validator])},L=function(e){C(e),N(),K()};return{init:L,get_live_data:y,get_live_tasks:D,check_live_tasks:C,generate_datetime:P}});
/*!/agency/publish/template/term.task.tpl_tpl*/
;define("/agency/publish/template/term.task.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];it.data=it.data||{};var now=parseInt(+new Date/1e3),uuid=it.id?it.id:$.render.task_uuid(it.data),task_data_cls="view"===it.action&&it.data.name?" task-item--data":"",live_end_cls=1===data.type&&data.endtime>0&&data.endtime<=now?" task-live-end ":"",schedule_task_class=1===it.data.append_flag||opt.add_schedule_task?" schedule-task":"",update_task_class=opt.update?"update-task":"",new_term_task_class=opt.newterm?"newterm-task":"";return _$out_.push('<div type="',data.type,'" class="task-item item-line task-item--',it.action," ",task_data_cls," ",live_end_cls," ",schedule_task_class," ",update_task_class," ",new_term_task_class,'" id="',uuid,'"> ',function(it,opt){with(it=it||{}){var _$out_=[];opt=opt||{};var data=it.data?it.data:it,type_view=(it.id?it.id:$.render.task_uuid(data),""),task_type="",preview="",error="",res=(parseInt(+new Date/1e3),(data.resid_list||"").toString().split(",")[0]);switch(data.type){case 1:type_view="直播",task_type="live",preview=['<span class="view">',$.render.livetime(data),"</span>"].join(""),$.trim(data.name||"")||(error="请填写任务名称"),error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 2:type_view="录播",task_type="video",preview=['<span class="view video-view" data-vid="'+res+'">',$.render.task_video(res,data),"</span>"].join(""),$.trim(data.name||"")?res||(error="请关联录播视频"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 3:type_view="资料",task_type="res",preview=['<span class="view video-view" data-vid="'+res+'">',($._toArray(data._tmp_files||data.files)[0]||{}).cw_name||"","</span>"].join(""),$.trim(data.name||"")?res||(error="请关联资料"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 4:type_view="习题",task_type="exam",preview=['<span class="view video-view" data-vid="'+res+'">',((data._tmp_exam||[])[0]||data.exam||{}).title||"","</span>"].join(""),$.trim(data.name||"")?res||(error="请关联习题"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 5:type_view="答疑",task_type="faq",$.trim(data.name||"")||(error="请填写任务名称"),error=error?['<span class="err">',error,"</span>"].join(""):""}return _$out_.push('<div class="item-view--wrap"> <div class="item-name"> <p class="name-text"><span class="name">【',type_view,"】",html.encode(data.name),"</span>"),1===data.append_flag&&_$out_.push('<span class="schedule">补充任务</span>'),_$out_.push("",error,"",preview,'</p> </div> <div class="oper-list"> <span class="oper-item item--move" data-arrow="up"><i class="icon-font id-arrowhead"></i>上移</span> <span class="oper-item item--move" data-arrow="down" ><i class="icon-font id-arrowhead id-arrowhead--bottom"></i>下移</span> <span class="oper-item item--insert"><i class="icon-font i-insert"></i>插入</span> <span class="oper-item item--edit"><i class="icon-font i-edit"></i>修改</span> <span class="oper-item item--del"><i class="icon-font i-delete"></i>删除</span> </div></div>'),_$out_.join("")}}(it.data,opt)," ",function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="form form--h item-edit--wrap '),opt&&opt.add_schedule_task&&_$out_.push("edit-schedule-task"),_$out_.push('"> '),opt&&opt.add_schedule_task&&_$out_.push("<div class='note-msg'>该任务为补充任务，只有已报名学生可见，未报名学生不可见</div>"),_$out_.push(' <!-- 任务类型 --> <div class="f-item f-type"> <label class="f-label"><span class="f-required">*</span>任务类型</label> <div class="f-field"> <div class="diy-select-area f-select-tiny-large"> <a class="diy-select" href="javascript:;" data-select="tasktype"> <i class="text text-tip" name="type" data-tips="请选择任务类型">请选择任务类型</i> <span class="diy-select-toggle"><b></b></span> </a> <ul class="diy-optgroud"> <li class="diy-option" data-value="1"><a href="javascript:;">直播</a></li> <li class="diy-option" data-value="2"><a href="javascript:;">录播</a></li> <li class="diy-option" data-value="3"><a href="javascript:;">学习资料</a></li> <li class="diy-option" data-value="4"><a href="javascript:;">习题</a></li> </ul> </div> </div> </div> <!-- 任务名称 --> <div class="f-item f-name"> <label class="f-label"><span class="f-required">*</span>任务名称</label> <div class="f-field"> <input type="text" name="name" class="f-text" placeholder="输入任务名称，20个字以内" data-pattern="not_null|limit" data-msg="任务名称不能为空|" data-tips="输入任务名称，20个字以内" data-name="节" data-min="1" data-max="20" > </div> </div> <!-- 选择录播视频（不允许选择回放） --> <div class="f-item f-item-resid_list f-video" style="display:none"></div> <!-- 选择资料 --> <div class="f-item f-item-resid_list f-file" style="display:none"></div> <!-- 选择习题 --> <div class="f-item f-item-resid_list f-exam" style="display:none"></div> <!-- 有交必改 --> <div class="f-item f-item-correct-type f-radio--group" data-use="0" style="display:none"> <label class="f-label"><span class="f-required">*</span>批改类型</label> <div class="f-field"> <div class="f-radio-list"> <label class="f-radio list--block--child checked" data-value="2" > <i class="icon-radio"></i> <span class="f-rc-label">全部批改</span> </label> </div> <div class="f-radio-list"> <label class="f-radio list--block--child" data-value="4" > <i class="icon-radio"></i> <span class="f-rc-label">部分批改</span> </label> </div> </div> </div> <!-- 老师批改时间 --> <div class="f-item f-item-studytime" style="display:none"> <label class="f-label"><span class="f-required">*</span>老师批改时间</label> <div class="f-field"> <div class="f-date-wrap"> <input type="text" class="f-date" name="study_begin" data-pattern="not_null|study_time" data-tips="请选择建议学习起始时间" data-msg="请选择建议学习起始时间" > <i class="icon-font i-calendar"></i> </div> <span class="f-join">至</span> <div class="f-date-wrap"> <input type="text" class="f-date" name="study_end" data-pattern="not_null|study_time" data-tips="请选择建议学习结束时间" data-msg="请选择建议学习结束时间" > <i class="icon-font i-calendar"></i> </div> <div class="f-msg"></div> </div> </div> <!-- 免费试学 --> <div class="f-item expr_flag--wrap"> <div class="f-field"> <div class="f-checkbox-list list--block"> <label class="f-checkbox f-checkbox--float" name="expr_flag" data-value="1"> <i class="icon-checkbox"></i> <span class="f-rc-label">支持免费试学</span> </label> <span class="f-question f-question--faq" >',$.render.faq(),'</span> <span class="expr-live-tips">仅在直播任务直播时展示试学入口</span> </div> </div> </div> <!-- 试听设置 --> <div class="f-item expr_range--wrap f-radio--group" style="display:none"> <div class="f-field"> <div class="f-radio-list list--block"> <label class="f-radio list--block--child '),it.expr_flag&&2!==it.expr_flag||_$out_.push("checked"),_$out_.push('" data-value="2" > <i class="icon-radio"></i> <span class="f-rc-label">免费试学<i class="select--gap"></i>分钟</span> </label> </div> </div> <div class="f-field"> <div class="f-radio-list list--block"> <label class="f-radio list--block--child '),1===it.expr_flag&&_$out_.push("checked"),_$out_.push('" data-value="1" > <i class="icon-radio"></i> <span class="f-rc-label">免费试学该视频</span> </label> </div> </div> <div class="f-field f-field-range"> <div class="diy-select-area f-select-tiny-small"> <a class="diy-select" href="javascript:;" data-select="expr_range"> <i class="text" name="expr_range" data-value="5">5</i> <span class="diy-select-toggle"><b></b></span> </a> <ul class="diy-optgroud"> <li class="diy-option selected" data-value="5"><a href="javascript:;">5</a></li> <li class="diy-option" data-value="10"><a href="javascript:;">10</a></li> <li class="diy-option" data-value="15"><a href="javascript:;">15</a></li> <li class="diy-option" data-value="20"><a href="javascript:;">20</a></li> </ul> </div> </div> </div> <!-- 班级特色 --> <!-- <div class="f-item"> <div class="f-field"> <div class="f-checkbox-list list--block"> <label class="f-checkbox f-checkbox--float" name="special_flag" data-value="1"> <i class="icon-checkbox"></i> <span class="f-rc-label">是否班级特色</span> </label> <span class="f-question f-question--faq" >',$.render.faq(),'</span> </div> </div> </div> --> <!--新增保存 取消按钮--> <div class="f-item"> <div class="f-field"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> </div> </div> <!--旧按钮 不知道干什么用--> <div class="do-btn-list hide"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> <span class="btn-weak btn-del">删除</span> </div></div>'),_$out_.join("")}}(it.data,opt),"</div>"),_$out_.join("")}}});
/*!/agency/publish/template/term.task.view.tpl_tpl*/
;define("/agency/publish/template/term.task.view.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];opt=opt||{};var data=it.data?it.data:it,type_view=(it.id?it.id:$.render.task_uuid(data),""),task_type="",preview="",error="",res=(parseInt(+new Date/1e3),(data.resid_list||"").toString().split(",")[0]);switch(data.type){case 1:type_view="直播",task_type="live",preview=['<span class="view">',$.render.livetime(data),"</span>"].join(""),$.trim(data.name||"")||(error="请填写任务名称"),error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 2:type_view="录播",task_type="video",preview=['<span class="view video-view" data-vid="'+res+'">',$.render.task_video(res,data),"</span>"].join(""),$.trim(data.name||"")?res||(error="请关联录播视频"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 3:type_view="资料",task_type="res",preview=['<span class="view video-view" data-vid="'+res+'">',($._toArray(data._tmp_files||data.files)[0]||{}).cw_name||"","</span>"].join(""),$.trim(data.name||"")?res||(error="请关联资料"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 4:type_view="习题",task_type="exam",preview=['<span class="view video-view" data-vid="'+res+'">',((data._tmp_exam||[])[0]||data.exam||{}).title||"","</span>"].join(""),$.trim(data.name||"")?res||(error="请关联习题"):error="请填写任务名称",error=error?['<span class="err">',error,"</span>"].join(""):"";break;case 5:type_view="答疑",task_type="faq",$.trim(data.name||"")||(error="请填写任务名称"),error=error?['<span class="err">',error,"</span>"].join(""):""}return _$out_.push('<div class="item-view--wrap"> <div class="item-name"> <p class="name-text"><span class="name">【',type_view,"】",html.encode(data.name),"</span>"),1===data.append_flag&&_$out_.push('<span class="schedule">补充任务</span>'),_$out_.push("",error,"",preview,'</p> </div> <div class="oper-list"> <span class="oper-item item--move" data-arrow="up"><i class="icon-font id-arrowhead"></i>上移</span> <span class="oper-item item--move" data-arrow="down" ><i class="icon-font id-arrowhead id-arrowhead--bottom"></i>下移</span> <span class="oper-item item--insert"><i class="icon-font i-insert"></i>插入</span> <span class="oper-item item--edit"><i class="icon-font i-edit"></i>修改</span> <span class="oper-item item--del"><i class="icon-font i-delete"></i>删除</span> </div></div>'),_$out_.join("")}}});
/*!/agency/publish/template/term.task.edit.tpl_tpl*/
;define("/agency/publish/template/term.task.edit.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="form form--h item-edit--wrap '),opt&&opt.add_schedule_task&&_$out_.push("edit-schedule-task"),_$out_.push('"> '),opt&&opt.add_schedule_task&&_$out_.push("<div class='note-msg'>该任务为补充任务，只有已报名学生可见，未报名学生不可见</div>"),_$out_.push(' <!-- 任务类型 --> <div class="f-item f-type"> <label class="f-label"><span class="f-required">*</span>任务类型</label> <div class="f-field"> <div class="diy-select-area f-select-tiny-large"> <a class="diy-select" href="javascript:;" data-select="tasktype"> <i class="text text-tip" name="type" data-tips="请选择任务类型">请选择任务类型</i> <span class="diy-select-toggle"><b></b></span> </a> <ul class="diy-optgroud"> <li class="diy-option" data-value="1"><a href="javascript:;">直播</a></li> <li class="diy-option" data-value="2"><a href="javascript:;">录播</a></li> <li class="diy-option" data-value="3"><a href="javascript:;">学习资料</a></li> <li class="diy-option" data-value="4"><a href="javascript:;">习题</a></li> </ul> </div> </div> </div> <!-- 任务名称 --> <div class="f-item f-name"> <label class="f-label"><span class="f-required">*</span>任务名称</label> <div class="f-field"> <input type="text" name="name" class="f-text" placeholder="输入任务名称，20个字以内" data-pattern="not_null|limit" data-msg="任务名称不能为空|" data-tips="输入任务名称，20个字以内" data-name="节" data-min="1" data-max="20" > </div> </div> <!-- 选择录播视频（不允许选择回放） --> <div class="f-item f-item-resid_list f-video" style="display:none"></div> <!-- 选择资料 --> <div class="f-item f-item-resid_list f-file" style="display:none"></div> <!-- 选择习题 --> <div class="f-item f-item-resid_list f-exam" style="display:none"></div> <!-- 有交必改 --> <div class="f-item f-item-correct-type f-radio--group" data-use="0" style="display:none"> <label class="f-label"><span class="f-required">*</span>批改类型</label> <div class="f-field"> <div class="f-radio-list"> <label class="f-radio list--block--child checked" data-value="2" > <i class="icon-radio"></i> <span class="f-rc-label">全部批改</span> </label> </div> <div class="f-radio-list"> <label class="f-radio list--block--child" data-value="4" > <i class="icon-radio"></i> <span class="f-rc-label">部分批改</span> </label> </div> </div> </div> <!-- 老师批改时间 --> <div class="f-item f-item-studytime" style="display:none"> <label class="f-label"><span class="f-required">*</span>老师批改时间</label> <div class="f-field"> <div class="f-date-wrap"> <input type="text" class="f-date" name="study_begin" data-pattern="not_null|study_time" data-tips="请选择建议学习起始时间" data-msg="请选择建议学习起始时间" > <i class="icon-font i-calendar"></i> </div> <span class="f-join">至</span> <div class="f-date-wrap"> <input type="text" class="f-date" name="study_end" data-pattern="not_null|study_time" data-tips="请选择建议学习结束时间" data-msg="请选择建议学习结束时间" > <i class="icon-font i-calendar"></i> </div> <div class="f-msg"></div> </div> </div> <!-- 免费试学 --> <div class="f-item expr_flag--wrap"> <div class="f-field"> <div class="f-checkbox-list list--block"> <label class="f-checkbox f-checkbox--float" name="expr_flag" data-value="1"> <i class="icon-checkbox"></i> <span class="f-rc-label">支持免费试学</span> </label> <span class="f-question f-question--faq" >',$.render.faq(),'</span> <span class="expr-live-tips">仅在直播任务直播时展示试学入口</span> </div> </div> </div> <!-- 试听设置 --> <div class="f-item expr_range--wrap f-radio--group" style="display:none"> <div class="f-field"> <div class="f-radio-list list--block"> <label class="f-radio list--block--child '),it.expr_flag&&2!==it.expr_flag||_$out_.push("checked"),_$out_.push('" data-value="2" > <i class="icon-radio"></i> <span class="f-rc-label">免费试学<i class="select--gap"></i>分钟</span> </label> </div> </div> <div class="f-field"> <div class="f-radio-list list--block"> <label class="f-radio list--block--child '),1===it.expr_flag&&_$out_.push("checked"),_$out_.push('" data-value="1" > <i class="icon-radio"></i> <span class="f-rc-label">免费试学该视频</span> </label> </div> </div> <div class="f-field f-field-range"> <div class="diy-select-area f-select-tiny-small"> <a class="diy-select" href="javascript:;" data-select="expr_range"> <i class="text" name="expr_range" data-value="5">5</i> <span class="diy-select-toggle"><b></b></span> </a> <ul class="diy-optgroud"> <li class="diy-option selected" data-value="5"><a href="javascript:;">5</a></li> <li class="diy-option" data-value="10"><a href="javascript:;">10</a></li> <li class="diy-option" data-value="15"><a href="javascript:;">15</a></li> <li class="diy-option" data-value="20"><a href="javascript:;">20</a></li> </ul> </div> </div> </div> <!-- 班级特色 --> <!-- <div class="f-item"> <div class="f-field"> <div class="f-checkbox-list list--block"> <label class="f-checkbox f-checkbox--float" name="special_flag" data-value="1"> <i class="icon-checkbox"></i> <span class="f-rc-label">是否班级特色</span> </label> <span class="f-question f-question--faq" >',$.render.faq(),'</span> </div> </div> </div> --> <!--新增保存 取消按钮--> <div class="f-item"> <div class="f-field"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> </div> </div> <!--旧按钮 不知道干什么用--> <div class="do-btn-list hide"> <span class="btn-default btn-save">保存</span> <span class="btn-weak btn-cancel">取消</span> <span class="btn-weak btn-del">删除</span> </div></div>'),_$out_.join("")}}});
/*!@tencent/im-tvp-bugfix/tvp-bugfix*/
;define("@tencent/im-tvp-bugfix/tvp-bugfix",function(e,t){!function(n){!function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(void 0===this||null===this)throw new TypeError;var n,i=Object(this),r=i.length>>>0,o=0;if("function"!=typeof t)throw new TypeError;if(0==r&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in i){n=i[o++];break}if(++o>=r)throw new TypeError}for(;r>o;)o in i&&(n=t.call(e,n,i[o],o,i)),o++;return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,i;if(null==this)throw new TypeError("this is null or not defined");var r=Object(this),o=r.length>>>0;if("[object Function]"!=={}.toString.call(e))throw new TypeError(e+" is not a function");for(t&&(n=t),i=0;o>i;){var a;Object.prototype.hasOwnProperty.call(r,i)&&(a=r[i],e.call(n,a,i,r)),i++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1})}();var i=function(){function e(e){return null==e?String(e):K[Y.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function i(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function r(t){return"object"==e(t)}function o(e){if(!e||"[object Object]"!==e.toString()||e.nodeType||e.setInterval)return!1;if(e.constructor&&!e.hasOwnProperty("constructor")&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1;var t;for(t in e);return t===b||e.hasOwnProperty(t)}function a(e){return e instanceof Array}function s(e){return"number"==typeof e.length}function c(e){return q.call(e,function(e){return null!=e})}function l(e){return e.length>0?C.fn.concat.apply([],e):e}function u(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function d(e){return e in V?V[e]:V[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function p(e,t){return"number"!=typeof t||M[u(e)]?t:t+"px"}function f(e){var t,n;return P[e]||(t=x.createElement(e),x.body.appendChild(t),n=L(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),P[e]=n),P[e]}function v(e){return"children"in e?D.call(e.children):C.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function h(e,t,n){for(E in t)n&&(o(t[E])||a(t[E]))?(o(t[E])&&!o(e[E])&&(e[E]={}),a(t[E])&&!a(e[E])&&(e[E]=[]),h(e[E],t[E],n)):t[E]!==b&&(e[E]=t[E])}function g(e,t){return t===b?C(e):C(e).filter(t)}function m(e,n,i,r){return t(n)?n.call(e,i,r):n}function y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function w(e,t){var n=e.className,i=n&&n.baseVal!==b;return t===b?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function _(e){var t;try{return e?"true"==e||("false"==e?!1:"null"==e?null:isNaN(t=Number(e))?/^[\[\{]/.test(e)?C.parseJSON(e):e:t):e}catch(n){return e}}function I(e,t){t(e);for(var n in e.childNodes)I(e.childNodes[n],t)}var b,E,C,S,T,O,A=[],D=A.slice,q=A.filter,x=window.document,P={},V={},L=x.defaultView?x.defaultView.getComputedStyle:x.documentElement.currentStyle,M={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},k=/^\s*<(\w+|!)[^>]*>/,N=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,U=/^(?:body|html)$/i,F=["val","css","html","text","data","width","height","offset"],R=["after","prepend","before","append"],j=x.createElement("table"),B=x.createElement("tr"),Q={tr:x.createElement("tbody"),tbody:j,thead:j,tfoot:j,td:B,th:B,"*":x.createElement("div")},H=/complete|loaded|interactive/,G=/^\.([\w-]+)$/,X=/^#([\w-]*)$/,W=/^[\w-]+$/,K={},Y=K.toString,z={},J=x.createElement("div");return z.matches=function(e,t){if(!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,o=!r;return o&&(r=J).appendChild(e),i=~z.qsa(r,t).indexOf(e),o&&J.removeChild(e),i},T=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},O=function(e){return q.call(e,function(t,n){return e.indexOf(t)==n})},z.fragment=function(e,t,n){e.replace&&(e=e.replace(N,"<$1></$2>")),t===b&&(t=k.test(e)&&RegExp.$1),t in Q||(t="*");var i,r,a=Q[t];return a.innerHTML=""+e,r=C.each($.merge([],a.childNodes),function(){a.removeChild(this)}),o(n)&&(i=C(r),C.each(n,function(e,t){F.indexOf(e)>-1?i[e](t):i.attr(e,t)})),r},z.Z=function(e,t){return e=e||[],e.__proto__=C.fn,e.selector=t||"",e},z.isZ=function(e){return e instanceof z.Z},z.init=function(e,n){if(e){if(t(e))return C(x).ready(e);if(z.isZ(e))return e;var i;if(a(e))i=c(e);else if(r(e))i=[o(e)?C.extend({},e):e],e=null;else if(k.test(e))i=z.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==b)return C(n).find(e);i=z.qsa(x,e)}return z.Z(i,e)}return z.Z()},C=function(e,t){return z.init(e,t)},C._tvp=!0,C.extend=function(e){var t,n=D.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){h(e,n,t)}),e},z.qsa=function(e,t){var n;return i(e)&&X.test(t)?(n=e.getElementById(RegExp.$1))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:D.call(G.test(t)?e.getElementsByClassName(RegExp.$1):W.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},C.contains=function(e,t){return e!==t&&e.contains(t)},C.type=e,C.isFunction=t,C.isWindow=n,C.isArray=a,C.isPlainObject=o,C.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},C.inArray=function(e,t,n){return A.indexOf.call(t,e,n)},C.camelCase=T,C.trim=function(e){return e.trim()},C.uuid=0,C.support={},C.expr={},C.map=function(e,t){var n,i,r,o=[];if(s(e))for(i=0;i<e.length;i++)n=t(e[i],i),null!=n&&o.push(n);else for(r in e)n=t(e[r],r),null!=n&&o.push(n);return l(o)},C.each=function(e,t){var n,i;if(s(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},C.grep=function(e,t){return q.call(e,t)},window.JSON&&(C.parseJSON=JSON.parse),C.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()}),C.fn={forEach:A.forEach,reduce:A.reduce,push:A.push,sort:A.sort,indexOf:A.indexOf,concat:A.concat,map:function(e){return C(C.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return C(D.apply(this,arguments))},ready:function(e){return H.test(x.readyState)?e(C):x.addEventListener("DOMContentLoaded",function(){e(C)},!1),this},get:function(e){return e===b?D.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return A.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):C(q.call(this,function(t){return z.matches(t,e)}))},add:function(e,t){return C(O(this.concat(C(e,t))))},is:function(e){return this.length>0&&z.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==b)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):s(e)&&t(e.item)?D.call(e):C(e);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return C(n)},has:function(e){return this.filter(function(){return r(e)?C.contains(this,e):C(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!r(e)?e:C(e)},last:function(){var e=this[this.length-1];return e&&!r(e)?e:C(e)},find:function(e){var t,n=this;return t="object"==typeof e?C(e).filter(function(){var e=this;return A.some.call(n,function(t){return C.contains(t,e)})}):1==this.length?C(z.qsa(this[0],e)):this.map(function(){return z.qsa(this,e)})},closest:function(e,t){var n=this[0],r=!1;for("object"==typeof e&&(r=C(e));n&&!(r?r.indexOf(n)>=0:z.matches(n,e));)n=n!==t&&!i(n)&&n.parentNode;return C(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=C.map(n,function(e){return(e=e.parentNode)&&!i(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return g(t,e)},parent:function(e){return g(O(this.pluck("parentNode")),e)},children:function(e){return g(this.map(function(){return v(this)}),e)},contents:function(){return this.map(function(){return D.call(this.childNodes)})},siblings:function(e){return g(this.map(function(e,t){return q.call(v(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return C.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==L(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var i=C(e).get(0),r=i.parentNode||this.length>1;return this.each(function(t){C(this).wrapAll(n?e.call(this,t):r?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){C(this[0]).before(e=C(e));for(var t;(t=e.children()).length;)e=t.first();C(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var i=C(this),r=i.contents(),o=n?e.call(this,t):e;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){C(this).replaceWith(C(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=C(this);(e===b?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return C(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return C(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return e===b?this.length>0?this[0].innerHTML:null:this.each(function(t){var n=this.innerHTML;C(this).empty().append(m(this,e,t,n))})},text:function(e){return e===b?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e})},attr:function(e,t){var n;return"string"==typeof e&&t===b?0==this.length||1!==this[0].nodeType?b:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:this.each(function(n){if(1===this.nodeType)if(r(e))for(E in e)y(this,E,e[E]);else y(this,e,m(this,t,n,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&y(this,e)})},prop:function(e,t){return t===b?this[0]&&this[0][e]:this.each(function(n){this[e]=m(this,t,n,this[e])})},data:function(e,t){var n=this.attr("data-"+u(e),t);return null!==n?_(n):b},val:function(e){return e===b?this[0]&&(this[0].multiple?C(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=m(this,e,t,this.value)})},offset:function(e){if(e)return this.each(function(t){var n=C(this),i=m(this,e,t,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(0==this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(arguments.length<2&&"string"==typeof t)return this[0]&&(this[0].style[T(t)]||L(this[0],"").getPropertyValue(t));var i="";if("string"==e(t))n||0===n?i=u(t)+":"+p(t,n):this.each(function(){this.style.removeProperty(u(t))});else for(E in t)t[E]||0===t[E]?i+=u(E)+":"+p(E,t[E])+";":this.each(function(){this.style.removeProperty(u(E))});return this.each(function(){this.style.cssText+=";"+i})},index:function(e){return e?this.indexOf(C(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return A.some.call(this,function(e){return this.test(w(e))},d(e))},addClass:function(e){return this.each(function(t){S=[];var n=w(this),i=m(this,e,t,n);i.split(/\s+/g).forEach(function(e){C(this).hasClass(e)||S.push(e)},this),S.length&&w(this,n+(n?" ":"")+S.join(" "))})},removeClass:function(e){return this.each(function(t){return e===b?w(this,""):(S=w(this),m(this,e,t,S).split(/\s+/g).forEach(function(e){S=S.replace(d(e)," ")}),void w(this,S.trim()))})},toggleClass:function(e,t){return this.each(function(n){var i=C(this),r=m(this,e,n,w(this));r.split(/\s+/g).forEach(function(e){(t===b?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=U.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(C(e).css("margin-top"))||0,n.left-=parseFloat(C(e).css("margin-left"))||0,i.top+=parseFloat(C(t[0]).css("border-top-width"))||0,i.left+=parseFloat(C(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||x.body;e&&!U.test(e.nodeName)&&"static"==C(e).css("position");)e=e.offsetParent;return e})}},C.fn.detach=C.fn.remove,["width","height"].forEach(function(e){C.fn[e]=function(t){var r,o=this[0],a=e.replace(/./,function(e){return e[0].toUpperCase()});return t===b?n(o)?o["inner"+a]:i(o)?o.documentElement["offset"+a]:(r=this.offset())&&r[e]:this.each(function(n){o=C(this),o.css(e,m(this,t,n,o[e]()))})}}),R.forEach(function(t,n){var i=n%2;C.fn[t]=function(){var t,r,o=C.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:z.fragment(n)}),a=this.length>1;return o.length<1?this:this.each(function(e,t){r=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null,o.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!r)return C(e).remove();I(r.insertBefore(e,t),function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},C.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return C(e)[t](this),this}}),z.Z.prototype=C.fn,z.uniq=O,z.deserializeValue=_,C.zepto=z,C}();if("undefined"==typeof n&&(window.Zepto=i),function(e){function t(e){var t=this.os={},n=this.browser={},i=e.match(/WebKit\/([\d.]+)/),r=e.match(/(Android)(\s+|\/)([\d.]+)/),o=e.match(/(iPad).*OS\s([\d_]+)/),a=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),s=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=s&&e.match(/TouchPad/),l=e.match(/Kindle\/([\d.]+)/),u=e.match(/Silk\/([\d._]+)/),d=e.match(/(BlackBerry).*Version\/([\d.]+)/),p=e.match(/(BB10).*Version\/([\d.]+)/),f=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=e.match(/PlayBook/),h=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),g=e.match(/Firefox\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),r&&(t.android=!0,t.version=r[3]),a&&(t.ios=t.iphone=!0,t.version=a[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),s&&(t.webos=!0,t.version=s[2]),c&&(t.touchpad=!0),d&&(t.blackberry=!0,t.version=d[2]),p&&(t.bb10=!0,t.version=p[2]),f&&(t.rimtabletos=!0,t.version=f[2]),v&&(n.playbook=!0),l&&(t.kindle=!0,t.version=l[1]),u&&(n.silk=!0,n.version=u[1]),!u&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),h&&(n.chrome=!0,n.version=h[1]),g&&(n.firefox=!0,n.version=g[1]),t.tablet=!!(o||v||r&&!e.match(/Mobile/)||g&&e.match(/Tablet/)),t.phone=!(t.tablet||!(r||a||s||d||p||h&&e.match(/Android/)||h&&e.match(/CriOS\/([\d.]+)/)||g&&e.match(/Mobile/)))}t.call(e,navigator.userAgent),e.__detect=t}(i),function(e){function t(e){return e._zid||(e._zid=f++)}function n(e,n,o,a){if(n=i(n),n.ns)var s=r(n.ns);return(p[t(e)]||[]).filter(function(e){return!(!e||n.e&&e.e!=n.e||n.ns&&!s.test(e.ns)||o&&t(e.fn)!==t(o)||a&&e.sel!=a)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function r(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function o(t,n,i){"string"!=e.type(t)?e.each(t,i):t.split(/\s/).forEach(function(e){i(e,n)})}function a(e,t){return e.del&&("focus"==e.e||"blur"==e.e)||!!t}function s(e){return h[e]||e}function c(n,r,c,l,u,d){var f=t(n),v=p[f]||(p[f]=[]);o(r,c,function(t,r){var o=i(t);o.fn=r,o.sel=l,o.e in h&&(r=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?o.fn.apply(this,arguments):void 0}),o.del=u&&u(r,t);var c=o.del||r;o.proxy=function(e){var t=c.apply(n,[e].concat(e.data));return t===!1&&(e.preventDefault(),e.stopPropagation()),t},o.i=v.length,v.push(o),n.addEventListener?n.addEventListener(s(o.e),o.proxy,a(o,d)):n.attachEvent("on"+s(o.e),o.proxy,a(o,d))})}function l(e,i,r,c,l){var u=t(e);o(i||"",r,function(t,i){n(e,t,i,c).forEach(function(t){delete p[u][t.i],e.removeEventListener?e.removeEventListener(s(t.e),t.proxy,a(t,l)):e.detachEvent("on"+s(t.e),t.proxy,a(t,l))})})}function u(t){var n,i={originalEvent:t};for(n in t)y.test(n)||void 0===t[n]||(i[n]=t[n]);return e.each(w,function(e,n){i[e]=function(){return this[n]=g,t[e].apply(t,arguments)},i[n]=m}),i}function d(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}var p=(e.zepto.qsa,{}),f=1,v={},h={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",e.event={add:c,remove:l},e.proxy=function(n,i){if(e.isFunction(n)){var r=function(){return n.apply(i,arguments)};return r._zid=t(n),r}if("string"==typeof i)return e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t){return this.each(function(){c(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){l(this,e,t)})},e.fn.one=function(e,t){return this.each(function(n,i){c(this,e,t,null,function(e,t){return function(){var n=e.apply(i,arguments);return l(i,t,e),n}})})};var g=function(){return!0},m=function(){return!1},y=/^([A-Z]|layer[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,i){return this.each(function(r,o){c(o,n,i,t,function(n){return function(i){var r,a=e(i.target).closest(t,o).get(0);return a?(r=e.extend(u(i),{currentTarget:a,liveFired:o}),n.apply(a,[r].concat([].slice.call(arguments,1)))):void 0}})})},e.fn.undelegate=function(e,t,n){return this.each(function(){l(this,t,n,e)})},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i){return!n||e.isFunction(n)?this.bind(t,n||i):this.delegate(n,t,i)},e.fn.off=function(t,n,i){return!n||e.isFunction(n)?this.unbind(t,n||i):this.undelegate(n,t,i)},e.fn.trigger=function(t,n){return("string"==typeof t||e.isPlainObject(t))&&(t=e.Event(t)),d(t),t.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})},e.fn.triggerHandler=function(t,i){var r,o;return this.each(function(a,s){r=u("string"==typeof t?e.Event(t):t),r.data=i,r.target=s,e.each(n(s,t.type||t),function(e,t){return o=t.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){"string"!=typeof e&&(t=e,e=t.type);var n=document.createEvent(v[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n.isDefaultPrevented=function(){return this.defaultPrevented},n}}(i),function(e){var t,n,i,r,o,a,s;n=function(e,t){t.parentNode.removeChild(t),window[e]=void 0;try{delete window[e]}catch(n){}},i=function(e,t){var n,i,r="";for(n in e)e.hasOwnProperty(n)&&(n=t?encodeURIComponent(n):n,i=t?encodeURIComponent(e[n]):e[n],r+=n+"="+i+"&");return r.replace(/&$/,"")},r=function(){return"cb_"+tvp.$.createGUID(16)},o=function(e,t){"undefined"!=typeof e&&e(t)},a=function(e,t){"undefined"!=typeof e&&e(t)},s=function(e){"undefined"!=typeof e&&e()},t={},t.init=function(e){var n;for(n in e)e.hasOwnProperty(n)&&(t.options[n]=e[n]);return!0},t.get=function(e){e=e||{};var t=e.url,c=e.callbackParameter||"callback",l=e.data||{},u=document.createElement("script"),d=e.jsonpCallback||r(),p="?";t&&(l[c]=d,t.indexOf("?")>=0&&(p="&"),t+=p+i(l,!0),t=t.replace(/=\?/,"="+d),window[d]=function(t){"undefined"==typeof t?o(e.error,"Invalid JSON data returned"):a(e.success,t),n(d,u),s(e.complete)},u.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(u),u.onerror=function(){n(d,u),s(e.complete),o(e.error,"Error while trying to access the URL")})},e.ajax=t.get}(i),function(e){if("__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}}),"function"==typeof window.getComputedStyle)try{getComputedStyle(void 0)}catch(t){var n=window.getComputedStyle;window.getComputedStyle=function(){try{return n.apply(window,arguments)}catch(e){return null}}}}(i),tvp={},tvp.lastModify="2015-08-27 16:21:59",tvp.ts=tvp.lastModify.replace(/\D/g,""),tvp.ver="$V2.0Build5316$",tvp.name="腾讯视频统一播放器","undefined"==typeof window.DEBUG&&(window.DEBUG=1),window.FILEPATH="//imgcache.qq.com/tencentvideo_v1/tvp/js/",top!=window)try{tvp.topurl=top.location.href}catch(r){}tvp.log=function(e){if(window.DEBUG&&null!=document.getElementById("tvp_debug_console")){var t=document.getElementById("tvp_debug_console");t.innerHTML+=e+" | "}else window.console&&window.console.log("["+tvp.log.debugid++ +"] "+e)},tvp.debug=function(e){window.DEBUG||-1!==tvp.log.isDebug||(tvp.log.isDebug="true"==tvp.$.getUrlParam("debug")?1:0),(window.DEBUG||tvp.log.isDebug)&&tvp.log(e)},tvp.log.isDebug=-1,tvp.log.debugid=1,tvp.DEVICE={aphone:1,iphone:2,ipad:3,other:0},tvp.PLATFORM={wechat:1,mqq:2,qqbrowser:3,other:0},tvp.APPID={wechatPublic:1e4,news:10001,qqmusic:10007},tvp.ACTION={onVodH5Init:"tvp:vodhtml5:beforeInit",onFlashPlayerInited:"tvp:flash:inited"},function(){function e(e){return e instanceof Array}if("object"!=typeof tvp||!tvp.$||!tvp.$.Deferred){var n,r,o,a,s,c,l,u,d,p,f,v,h,g=[].slice;s="1.3.2",r="pending",a="resolved",o="rejected",d=function(e,t){return null!=e?e.hasOwnProperty(t):void 0},f=function(e){return d(e,"length")&&d(e,"callee")},u=function(t){return f(t)?u(Array.prototype.slice.call(t)):e(t)?t.reduce(function(t,n){return e(n)?t.concat(u(n)):(t.push(n),t)},[]):[t]},c=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},v=function(e,t){return function(){var n;return n=[e].concat(Array.prototype.slice.call(arguments,0)),t.apply(this,n)}},l=function(e,t,n){var i,r,o,a,s;for(a=u(e),s=[],r=0,o=a.length;o>r;r++)i=a[r],s.push(i.call.apply(i,[n].concat(g.call(t))));return s},n=function(){var e,t,i,s,c,d;return d=r,s=[],c=[],e=[],i={},this.promise=function(t){var p,f;return t=t||{},t.state=function(){return d},f=function(e,n){return function(){return d===r&&n.push.apply(n,u(arguments)),e()&&l(arguments,i),t}},t.done=f(function(){return d===a},s),t.fail=f(function(){return d===o},c),t.always=f(function(){return d!==r},e),p=function(e,i){var r,o;return r=new n,o=function(e,t,n){return e(n?function(){return t(n.apply(null,u(arguments)))}:function(){return t.apply(null,u(arguments))})},o(t.done,r.resolve,e),o(t.fail,r.reject,i),r},t.pipe=p,t.then=p,t},this.promise(this),t=function(t,n,o){return function(){return d===r&&(d=t,i=arguments,l([n,e],i,o)),this}},this.resolve=t(a,s),this.reject=t(o,c),this.resolveWith=function(){var e,n;return n=arguments[0],e=2<=arguments.length?g.call(arguments,1):[],t(a,s,n).apply(null,e)},this.rejectWith=function(){var e,n;return n=arguments[0],e=2<=arguments.length?g.call(arguments,1):[],t(o,c,n).apply(null,e)},this},h=function(){var e,t,i,r,o,a,s,l;for(r=new n,t=u(arguments),i=c(t.length,r.resolve),o=0,s=t.length;s>o;o++)e=t[o],e.done(i);for(a=0,l=t.length;l>a;a++)e=t[a],e.fail(function(e,t){return r.reject(e,t)});return r.promise()},p=function(e){return e.Deferred=function(){return new n},e.ajax=v(e.ajax,function(e,t){var i,r;return null==t&&(t={}),r=new n,i=function(e,t){return v(e,function(){var e,n;return n=arguments[0],e=2<=arguments.length?g.call(arguments,1):[],n&&n.apply(null,e),t.apply(null,e)})},t.success=i(t.success,r.resolve),t.error=i(t.error,r.reject),e(t),r.promise()}),e.when=h},"undefined"!=typeof t&&(t.Deferred=function(){return new n},t.when=h,t.installInto=p),this.Deferred=function(){return new n},this.Deferred.when=h,this.Deferred.installInto=p,this.DeferedClass=n,tvp.Deferred&&tvp.Deferred.installInto("undefined"!=typeof i?i:jq)}}.call(tvp),function(e){e.param=function(t,n){var i=[];for(var r in t)if(!e.isFunction(t[r])){var o=n?n+"["+r+"]":r,a=t[r];i.push(e.isPlainObject(a)?e.param(a,o):o+"="+encodeURIComponent(a))}return i.join("&")}}(i);var o=!1;"undefined"!=typeof i&&i._tvp?(tvp.$=i,o=!0):(tvp.$={},o=!1),function(){return o?void 0:"function"==typeof window.Zepto?void(tvp.$=window.Zepto):"function"==typeof window.jQuery&&"function"==typeof window.jQuery.Deferred?(tvp.$=window.jQuery,void(!tvp.$.os&&"undefined"!=typeof i&&i.__detect&&i.__detect.call(tvp.$,navigator.userAgent))):void("function"==typeof window.jq&&(tvp.$=window.jq,!tvp.$.os&&"undefined"!=typeof i&&i.__detect&&i.__detect.call(tvp.$,navigator.userAgent)))}(),function(){"undefined"==typeof document.DOCUMENT_NODE&&(document.DOCUMENT_NODE=9)}(),function(e){function t(t){var n=t.match(/MQQBrowser\/(\d+\.\d+)/i),i=t.match(/QQ\/(\d+\.(\d+)\.(\d+)\.(\d+))/i)||t.match(/V1_AND_SQ_([\d\.]+)/),r=t.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/)||t.match(/MicroMessenger\/((\d+)\.(\d+))/),o=t.match(/Mac\sOS\sX\s(\d+\.\d+)/),a=t.match(/Windows(\s+\w+)?\s+?(\d+\.\d+)/),s=t.match(/MiuiBrowser\/(\d+\.\d+)/i),c=t.match(/MI-ONE/),l=t.match(/MI PAD/),u=t.match(/UCBrowser\/(\d+\.\d+(\.\d+\.\d+)?)/)||t.match(/\sUC\s/),d=t.match(/IEMobile(\/|\s+)(\d+\.\d+)/)||t.match(/WPDesktop/),p=t.match(/(ipod).*\s([\d_]+)/i),f=t.match(/(ipad).*\s([\d_]+)/i),v=t.match(/(iphone)\sos\s([\d_]+)/i),h=t.match(/Chrome\/(\d+\.\d+)/),g=t.match(/Mozilla.*Linux.*Android.*AppleWebKit.*Mobile Safari/),m=t.match(/(android)\s([\d\.]+)/i);if(e.browser=e.browser||{},e.os=e.os||{},window.ActiveXObject){var y=6;(window.XMLHttpRequest||t.indexOf("MSIE 7.0")>-1)&&(y=7),(window.XDomainRequest||t.indexOf("Trident/4.0")>-1)&&(y=8),t.indexOf("Trident/5.0")>-1&&(y=9),t.indexOf("Trident/6.0")>-1&&(y=10),e.browser.ie=!0,e.browser.version=y}else t.indexOf("Trident/7.0")>-1&&(e.browser.ie=!0,e.browser.version=11);m&&(this.os.android=!0,this.os.version=m[2]),p&&(this.os.ios=this.os.ipod=!0,this.os.version=p[2].replace(/_/g,".")),f&&(this.os.ios=this.os.ipad=!0,this.os.version=f[2].replace(/_/g,".")),v&&(this.os.iphone=this.os.ios=!0,this.os.version=v[2].replace(/_/g,".")),a&&(this.os.windows=!0,this.os.version=a[2]),o&&(this.os.Mac=!0,this.os.version=o[1]),t.indexOf("lepad_hls")>0&&(this.os.LePad=!0),l&&(this.os.MIPAD=!0),n&&(this.browser.MQQ=!0,this.browser.version=n[1]),i&&(this.browser.MQQClient=!0,this.browser.version=i[1]),r&&(this.browser.WeChat=!0,this.browser.version=r[1]),s&&(this.browser.MIUI=!0,this.browser.version=s[1]),u&&(this.browser.UC=!0,this.browser.version=u[1]||0/0),d&&(this.browser.IEMobile=!0,this.browser.version=d[2]),g&&(this.browser.AndriodBrowser=!0),c&&(this.browser.M1=!0),h&&(this.browser.Chrome=!0,this.browser.version=h[1]),this.os.windows&&(this.os.win64="undefined"!=typeof navigator.platform&&"win64"==navigator.platform.toLowerCase()?!0:!1);var w={iPad7:"iPad; CPU OS 7",LePad:"lepad_hls",XiaoMi:"MI-ONE",SonyDTV:"SonyDTV",SamSung:"SAMSUNG",HTC:"HTC",VIVO:"vivo"};for(var _ in w)this.os[_]=-1!==t.indexOf(w[_]);e.os.phone=e.os.phone||/windows phone/i.test(t),this.os.getNumVersion=function(){return parseFloat(e.os.version,"10")},this.os.hasTouch="ontouchstart"in window,this.os.hasTouch&&this.os.ios&&this.os.getNumVersion()<6&&(this.os.hasTouch=!1),e.browser.WeChat&&e.browser.version<5&&(this.os.hasTouch=!1),e.extend(e.browser,{getNumVersion:function(){return parseFloat(e.browser.version,"10")},isFFCanOcx:function(){return e.browser.firefox&&e.browser.getNumVersion()>=3?!0:!1},isCanOcx:function(){return!(!e.os.windows||!e.browser.ie&&!e.browser.isFFCanOcx()&&!e.browser.webkit)},isNotIESupport:function(){return!!e.os.windows&&(!!e.browser.webkit||e.browser.isFFCanOcx())}}),e.userAgent={},e.extend(e.userAgent,e.os),e.extend(e.userAgent,e.browser),e.userAgent.browserVersion=e.browser.version,e.userAgent.osVersion=e.os.version,delete e.userAgent.version}t.call(e,navigator.userAgent)}(tvp.$),function(e){var t={getByID:function(e){return document.getElementById(e)},noop:function(){},isString:function(t){return"string"===e.type(t)},isUndefined:function(t){return"undefined"===e.type(t)},now:function(){return(new Date).getTime()},getISOTimeFormat:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),r=e.getHours(),o=e.getMinutes(),a=e.getSeconds();return[[t,10>n?"0"+n:n,10>i?"0"+i:i].join("-"),[10>r?"0"+r:r,10>o?"0"+o:o,10>a?"0"+a:a].join(":")].join(" ")},formatSeconds:function(e){e=parseInt(e);var t=parseInt(e/60),n=t>=60?parseInt(t/60):0,i=e%60,r="";return t>=60&&(t%=60),n>0&&(r+=10>n?"0"+n:n,r+=":"),r+=10>t?"0"+t:t,r+=":",r+=10>i?"0"+i:i},formatSecondsWithText:function(e){var t=this.formatSeconds(e),n=t.split(":"),i="";switch(n.length){case 1:i=n[0]+"秒";break;case 2:i=n[0]+"分"+n[1]+"秒";break;case 3:i=n[0]+"小时"+n[1]+"分"+n[2]+"秒";break;default:i=t}return i},formatFileSize:function(e){return e=parseInt(e,10),e=e/1024/1024,e=e.toFixed(1),e+"M"},getHost:function(){var e=window.location.hostname||window.location.host,t=location.host.split(".");return t.length>1&&(e=t.slice(t.length-2).join(".")),e},getUrlParam:function(e,t){t=t||document.location.toString();var n=new RegExp("(^|&|\\\\?)"+e+"=([^&]*)(&|$|#)"),i=null;return i=t.match(n),i?i[2]:""},setUrlParam:function(e,t,n){n=n||location.href;var i,r,o=new RegExp("[\\?&#]"+e+"=([^&#]+)","gi"),a=n.match(o),s="{key"+(new Date).getTime()+"}";if(i=a&&a.length>0?a[a.length-1]:"",r=e+"="+t,i){var c=i.charAt(0);n=n.replace(i,s),n=n.replace(s,t?c+r:"")}else t&&(n+=n.indexOf("?")>-1?"&"+r:"?"+r);return n},filterXSS:function(t){return e.isString(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;"):t},createGUID:function(e){e=e||32;for(var t="",n=1;e>=n;n++){var i=Math.floor(16*Math.random()).toString(16);t+=i}return t},newGuid:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return[e(),e(),e(),e(),e(),e(),e(),e()].join("")},formatSize:function(e){var t=""+e;return t.indexOf("%")>0?t:t.indexOf("px")>0?t:/^\d+$/.test(t)?t+"px":t},compareVersion:function(e,t){e=String(e).split("."),t=String(t).split(".");try{for(var n=0,i=Math.max(e.length,t.length);i>n;n++){var r=isFinite(e[n])&&Number(e[n])||0,o=isFinite(t[n])&&Number(t[n])||0;if(o>r)return-1;if(r>o)return 1}}catch(a){return-1}return 0},isTrue:function(e){return!!tvp.$.filterXSS(e)},loadPluginCss:function(t){var n="",i=tvp.defaultConfig.pluginCssUrl;return t in i&&(n=tvp.defaultConfig.cssPath+i[t]),e.loadCss(n)},getData:function(e){return window.localStorage?window.localStorage[e]:void 0},setData:function(e,t){return window.localStorage?(window.localStorage[e]=t,!0):void 0},delData:function(e){return window.localStorage?(window.localStorage.removeItem(e),!0):void 0},formatTpl:function(t,n){if(t&&"object"===e.type(n)){for(var i in n)for(var r="${"+i+"}";t.indexOf(r)>-1;)t=t.replace(r,n[i]);return t}},loadCss:function(t){var n=e.Deferred(),i=!1;if(t){for(;t.indexOf("../")>=0;)t=t.replace("../","");t=e.filterXSS(t);var r=document,o=r.getElementsByTagName("head")[0]||r.documentElement,a=o.getElementsByTagName("base")[0],s=r.createElement("link");
s.rel="stylesheet",s.href=t,s.onload=s.onerror=function(){s.onload=s.onerror=null,i=!0,n.resolve()},setTimeout(function(){i||n.resolve()},2500),a?o.insertBefore(s,a):o.appendChild(s)}else n.reject();return n}};e.extend(e,t)}(tvp.$),function(e){e.cookie={set:function(e,t,n,i,r){if(r){var o=new Date,a=new Date;a.setTime(o.getTime()+36e5*r)}return document.cookie=e+"="+t+"; "+(r?"expires="+a.toGMTString()+"; ":"")+(i?"path="+i+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+window.location.host+";"),!0},get:function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),n=document.cookie.match(t);return n?n[1]:""},del:function(e,t,n){var i=new Date;i.setTime(i.getTime()-1),document.cookie=e+"=; expires="+i.toGMTString()+";"+(n?"path="+n+"; ":"path=/; ")+(t?"domain="+t+";":"domain="+window.location.host+";")}}}(tvp.$),tvp=tvp||{},tvp.common={isUseHtml5:function(){var e=navigator.userAgent,t=null;if(/ipad|ipod|iphone|lepad_hls|IEMobile|WPDesktop/gi.test(e))return!0;if(tvp.$.os.android){if(tvp.common.isSupportMP4())return!0;if(tvp.$.browser.MQQ&&tvp.$.browser.getNumVersion()>=4.2)return!0;if(-1!=e.indexOf("MI2"))return!0;if(tvp.$.os.version>="4"&&(t=e.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/))&&t[1]>=4.2)return!0;if(tvp.$.os.version>="4.1")return!0}return!1},isInUseH5:function(){var e=navigator.userAgent,t=null;if(tvp.$.os.android){if(tvp.$.browser.MQQ&&tvp.$.browser.getNumVersion()>=4.2)return!0;if(-1!=e.indexOf("MI2"))return!0;if(tvp.$.os.version>="4"&&(t=e.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/))&&t[1]>=4.2)return!0;if(tvp.$.os.version>="4.1")return!0}},isUseHLS:function(){return tvp.$.os.ios?!0:void 0},isMac:function(){var e=/MacIntel/gi.test(navigator.platform.toLowerCase());return e},isLiveUseHTML5:function(){return tvp.$.os.ios?!0:tvp.$.os.ipad?!0:tvp.$.os.android&&tvp.common.isSupportM3u8()?!0:!1},isSupportM3u8:function(){var e=document.createElement("video"),t=["application/x-mpegURL","audio/mpegurl","vnd.apple.mpegURL","application/vnd.apple.mpegURL"],n=!1;return"function"==typeof e.canPlayType&&tvp.$.each(t,function(t,i){return e.canPlayType(i)?void(n=!0):void 0}),e=null,tvp.$.os.android&&(tvp.$.os.version>="4"&&tvp.$.browser.Chrome&&(n=!0),tvp.$.browser.M1&&(n=!1),/V8 Build/.test(navigator.userAgent)&&(n=!1),tvp.$.browser.MQQ&&tvp.$.browser.getNumVersion()>=4.2&&(n=!0)),n},isSupportMP4:function(){var e=document.createElement("video");if("function"==typeof e.canPlayType){if("probably"==e.canPlayType('video/mp4; codecs="mp4v.20.8"'))return!0;if("probably"==e.canPlayType('video/mp4; codecs="avc1.42E01E"')||"probably"==e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'))return!0}return!1},isSupportSVG:function(){return document.implementation&&tvp.$.isFunction(document.implementation.hasFeature)?document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1},isEnforceMP4:function(){if(tvp.$.os.android){if(tvp.$.browser.firefox)return!0;if(tvp.$.browser.chrome)return!1;if(tvp.$.os.version>="4.0"&&tvp.$.browser.MQQ&&tvp.$.browser.version<"4.0")return!0}return!1},getUin:function(e){var t=tvp.$.cookie.get("p_lskey")||tvp.$.cookie.get("p_skey")||tvp.$.cookie.get("skey"),n=tvp.$.cookie.get("lskey"),i="",r=0,o=!1;return"undefined"==typeof isLeak&&"undefined"!=typeof e&&(isLeak=e),isLeak="undefined"==typeof isLeak?!1:!0,o=!!isLeak&&""!=n,o||""!=t?(i=tvp.$.cookie.get("p_uin")||tvp.$.cookie.get("uin"),""==i&&o&&(i=tvp.$.cookie.get("luin")),r=parseInt(i.replace(/^o0*/g,""),10),isNaN(r)||1e4>=r?0:r):0},getSKey:function(e){var t=tvp.$.cookie.get("p_lskey")||tvp.$.cookie.get("p_skey")||tvp.$.cookie.get("skey"),n=tvp.$.cookie.get("lskey"),i="";return"undefined"==typeof isLeak&&(isLeak="undefined"!=typeof e?e:!1),i=isLeak?""!=t&&""!=n?[t,n].join(";"):t||n:t},getToken:function(e){var t=this.getSKey(e),n=this.time33(t);return n},time33:function(e){for(var t=0,n=e.length,i=5381;n>t;++t)i+=(i<<5)+e.charAt(t).charCodeAt();return 2147483647&i},openLogin:function(){},getVideoSnap:function(e,t){var n,i,r=1e8;if(e.indexOf("_")>0){var o=e.split("_");e=o[0],t=parseInt(o[1])}for(var a=4294967296,s=0,c=0;c<e.length;c++){var l=e.charCodeAt(c);s=32*s+s+l,s>=a&&(s%=a)}return i=s%r,void 0==t&&(t=0),n=0==t?["https://vpic.video.qq.com/",i,"/",e,"_160_90_3.jpg"].join(""):["https://vpic.video.qq.com/",i,"/",e,"_","160_90_",t,"_1.jpg"].join("")},getVideoSnapMobile:function(e,t){t=t||0;var n=["496_280"],i="https://shp.qpic.cn/qqvideo_ori/0/{vid}_{index}/0";return i.replace("{vid}",e).replace("{index}",n[t])},picerr:function(){},getDeviceId:function(){var e=tvp.DEVICE.other;return tvp.$.os.iphone?e=tvp.DEVICE.iphone:tvp.$.os.ipad?e=tvp.DEVICE.ipad:tvp.$.os.android&&tvp.$.os.phone&&(e=tvp.DEVICE.aphone),e},getPlatformId:function(){var e=tvp.PLATFORM.other;return tvp.$.browser.WeChat?e=tvp.PLATFORM.wechat:tvp.$.browser.MQQClient?e=tvp.PLATFORM.mqq:tvp.$.browser.MQQ&&(e=tvp.PLATFORM.qqbrowser),e},getParams:function(e){for(var t,n,i=e.indexOf("?"),r=e.substring(i+1),o=/\w+=[^&]+/g,a={};null!==(t=o.exec(r));)n=t[0].split("="),n.length>=2&&(a[n.shift()]=n.join("="));return a},recomdTextById:function(e){if(e){if(this.recomdText||(this.recomdText={}),this.recomdText[e]&&"string"==typeof this.recomdText[e])return this.recomdText[e];var t,n=tvp.$.Deferred(),i=this,r=50;return r=0,r&&100*Math.random()>r?(n.resolve(),n):(t=tvp.common.get_request_url("like")+"?callback=?",tvp.$.ajax({url:t,data:{id:e,uin:0,playright:7,msgtype:103,otype:"json",tablist:9}}).done(function(t){t&&t.rmdword?(i.recomdText[e]=t,n.resolve()):n.resolve()}).fail(function(){n.resolve()}),setTimeout(function(){n.resolve()},5e3),n)}},get_hostname_fromUrl:function(e){if(e){var t=document.createElement("a");return t.href=e,t.hostname}},get_css_path:function(){return"//imgcache.qq.com/tencentvideo_v1/vstyle/mobile/v2/style/"},get_js_path:function(){return"//imgcache.qq.com/tencentvideo_v1/tvp/"},get_request_url:function(e){var t={getinfo:["http://h5vv.video.qq.com/getinfo","https://sec.video.qq.com/p/h5vv.video/getinfo"],getvinfo:["http://h5vv.video.qq.com/getvinfo","https://sec.video.qq.com/p/h5vv.video/getvinfo"],getkey:["http://h5vv.video.qq.com/getkey","https://sec.video.qq.com/p/h5vv.video/getkey"],limit_conf:["http://v.qq.com/iframe/limit_conf.js","https://v.qq.com/iframe/limit_conf.js"],zb:["http://info.zb.qq.com","https://sec.video.qq.com/p/info.zb/"],swf_root:["//imgcache.qq.com/tencentvideo_v1/player/","https://imgcache.qq.com/tencentvideo_v1/player/"],rmd_mobile:["http://like.video.qq.com/fcgi-bin/rmd_mobile","https://sec.video.qq.com/p/like.video/fcgi-bin/rmd_mobile"],like:["http://like.video.qq.com/fcgi-bin/like","https://sec.video.qq.com/p/like.video/fcgi-bin/like"],dataout_ex:["http://sns.video.qq.com/fcgi-bin/dlib/dataout_ex","https://sec.video.qq.com/p/sns.video/fcgi-bin/dlib/dataout_ex"],get_dtype:["http://h5vv.video.qq.com/getdtype","https://sec.video.qq.com/p/h5vv.video/getdtype"]};return"https:"===window.location.protocol?t[e][1]:t[e][0]},get_chid:function(){var e;return/(.*\.)3g\.qq\.com$/i.test(document.location.hostname)?e=13:"v.qq.com"===document.location.hostname?e=0:1===tvp.app.pageType?e=3:2===tvp.app.pageType&&(e=10),e},get_stdfrom:function(){var e="view.inews.qq.com"===location.host,t=tvp.$;return t.os.iphone||t.os.ipod?e?"v3110":"v3010":t.os.ipad?e?"v4110":"v4010":t.os.android?t.os.tablet?"v6010":e?"v5110":"v5010":t.browser.IEMobile?"v7010":"v1010"},get_platform:function(){var e=tvp.$;return e.os.iphone?1:e.os.ipad?2:e.os.android?3:4},is_mqq_buluo:function(){return 2!==tvp.app.pageType||"xiaoqu.qq.com"!==window.location.hostname&&"buluo.qq.com"!==window.location.hostname?!1:!0}},tvp.version=function(){function e(e){if(t(e))return e;if(/\d+/i.test(e)){var n=parseInt(e/1e4/100,10),i=parseInt(e/1e4,10)-100*n,r=parseInt(e,10)-(100*n*1e4+1e4*i),o=n+"."+i+"."+r;return o}return e}function t(e){return/^(\d+\.){2}\d+(\.\d+)?$/.test(e)}var n,i="0.0.0.0",r="0.0.0",o=new Image,a=!1,c=!1;return"film.qq.com"==document.location.host&&(c=!0),{getOcx:function(t){if(tvp.$.isUndefined(t)&&(t=!0),t&&"0.0.0.0"!=i)return i;var r;if(tvp.$.browser.ie)try{r="IE begin",n=new ActiveXObject(s.config.PROGID_QQLIVE_INSTALLER),"undefined"!=typeof n.getVersion?(i=n.GetVersionByClsid(s.config.OCX_CLSID),r="get actObj.GetVersionByClsid:"+i):r="no function:actObj.GetVersionByClsid"}catch(l){c&&!a&&(a=!0)&&(o.src="http://btrace.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz=IE&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=0&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+encodeURIComponent(l.message)+"&sStep="+encodeURIComponent(r)+"&_="+Math.random())}else if(tvp.$.browser.isNotIESupport()){r="no IE begin";var u,d=navigator.plugins;if(tvp.$.isUndefined(d.namedItem)||(r="plugs.namedItem",u=d.namedItem("腾讯视频")),!u){r="no plugs.namedItem:tencentvideo";for(var p=0,f=d.length;f>p;p++)if(d[p]&&"腾讯视频"==d[p].name||"npQQLive.dll"==d[p].filename){u=d[p];break}}if(u)if(tvp.$.isUndefined(u.version)){r="plug.description:"+u.description;var v,h=u.description;v=h.match(/version:((\d+\.){3}(\d+)?)/),v&&(i=v[1])}else r="plug.version:"+u.version,i=u.version;else r="no plugs[i].filename:npQQLive.dll"}return parseInt(i,10)||c&&!a&&(a=!0)&&(o.src="http://btrace.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz="+(tvp.$.browser.ie?"IE":"NOIE")+"&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=0&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+i+"&sStep="+encodeURIComponent(r)+"&_="+Math.random()),i=e(i)},getFlash:function(){if("0.0.0"!=r)return r;var e,t=null,n=null,i=[],s="Shockwave Flash",l=navigator,u="application/x-shockwave-flash";if(tvp.$.browser.ie)try{e="IE begin",t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),e="new ActiveXObject",t&&(n=t.GetVariable("$version"),e="swf.GetVariable",n&&(n=n.split(" ")[1].split(","),i=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]))}catch(d){c&&!a&&(a=!0)&&(o.src="http://btrace.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz=IE&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=1&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+encodeURIComponent(d.message)+"&sStep="+encodeURIComponent(e)+"&_="+Math.random())}else tvp.$.isUndefined(l.plugins)||"object"!=typeof l.plugins[s]||(e="no IE begin",n=l.plugins[s].description,e="plugins[S].description",n&&(tvp.$.isUndefined(l.mimeTypes)||!l.mimeTypes[u]||l.mimeTypes[u].enabledPlugin)?(e="parse description",n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),i[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),i[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),i[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0):e="no mimeTypes or disable");return r=i.join("."),parseInt(r,10)||c&&!a&&(a=!0)&&(o.src="http://btrace.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz="+(tvp.$.browser.ie?"IE":"NOIE")+"&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=1&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+r+"&sStep="+encodeURIComponent(e)+"&_="+Math.random()),r},getFlashMain:function(){return parseInt(tvp.version.getFlash().split(".")[0],10)}}}(),function(e,t){var n={qqlive:{text1:"腾讯视频客户端",text2:"可观看更多视频",md5Cgi:"http://mcgi.v.qq.com/commdatav2?cmd=39&otype=json&confid=${id}",payUrl:"http://film.qq.com/weixin/detail/${index}/${cid}.html",scheme:"tenvideo2://",logoClass:"",openUrl:"tenvideo2://?action=5&video_id=${vid}",liveOpenUrl:"tenvideo2://?action=8&channel_id=${lid}",ipadDownloadUrl:"https://itunes.apple.com/cn/app/teng-xun-shi-pinhd/id407925512?mt=8",iphoneDownloadUrl:"http://itunes.apple.com/cn/app/id458318329?mt=8",aphoneDownloadUrl:"http://mcgi.v.qq.com/commdatav2?cmd=4&confid=140&platform=aphone",VIA:"ANDROIDQQ.QQLIVE",appId:"100730521",downloadId:"TencentVideo",taskName:"TencentVideo",packageName:t.os.iphone?"com.tencent.live4iphone":"com.tencent.qqlive",packageUrl:"tenvideo2://can_open_me_if_install_and_regeister_this_scheme"},weishi:{text1:"微视客户端",text2:"发现更多精彩",logoClass:"tvp_download_app_solo_weishi",md5Cgi:"http://www.weishi.com/api/packdata.php?confid=${id}",scheme:t.os.iphone?" weishiiosscheme://":"weishiandroidscheme://",openUrl:t.os.iphone?" weishiiosscheme://detail?tweetid=${id}":"weishiandroidscheme://detail?tweetid=${id}",iphoneDownloadUrl:"http://www.weishi.com/download/index.php?pgv_ref=weishi.shipin.xinwenfenxiang",aphoneDownloadUrl:"http://www.weishi.com/download/index.php?pgv_ref=weishi.shipin.xinwenfenxiang",ipadDownloadUrl:"",VIA:"ANDROIDQQ.WEISHI",appId:"1101083114",downloadId:"TencentWeishi",taskName:"TencentWeishi",packageName:t.os.iphone?"com.tencent.microvision":"com.tencent.weishi",packageUrl:t.os.iphone?"weishiiosscheme://can_open_me_if_install_and_regeister_this_scheme":"weishiandroidscheme://can_open_me_if_install_and_regeister_this_scheme"},yyb:{packageName:"com.tencent.android.qqdownloader"}};e.app={config:{defaultName:"qqlive",QQApiUrl:"http://pub.idqqimg.com/qqmobile/qqapi.js",mqqApiUrl:"http://res.imtt.qq.com/browser_lightapp/QQBrowserApi/getCryptext/browser_interface_getCryptext.js"},loadQQClientDefer:!1,loadDownloaderDefer:!1,loadMqqDefer:!1,getDownloadUrl:function(i,r){return r=r||e.app.config.defaultName,i=t.os.iphone?n[r].iphoneDownloadUrl:i||n[r].aphoneDownloadUrl,i=t.os.ipad?n[r].ipadDownloadUrl:i},getPayUrl:function(e){var i=t.formatTpl(n.qqlive.payUrl,{index:e.slice(0,1),cid:e});return i},getOpenUrl:function(i){var r={},o=!1;if(!i)return o;if(i.appName&&i.appName!==e.app.config.defaultName)return o=i.openId?n[i.appName].openUrl.replace("${id}",i.openId):n[i.appName].scheme;switch(i.lid?r.channel_id=i.lid:i.cid?r.cover_id=i.cid:i.tid?r.topic_id=i.tid:i.vidArray||!i.vid?r.video_id="${vid}":i.vid&&(r.video_id=i.vid),i.vid2&&(r.video_id=i.vid2),i.openType){case 6:i.cid&&(r.action=1);break;case 2:r.action=i.lid?8:7;break;case 3:r.action=i.lid?8:i.tid?6:5;break;case 4:i.cid&&(r.action=1);break;default:r.action=i.lid?8:i.cid?1:5}if(i.promotionId&&(r.from=i.promotionId+"_"+(i.contentId?i.contentId:"")),r.action=r.action||5,o=n.qqlive.scheme+"?"+decodeURIComponent(t.param(r)),(i.cid||i.h5Url)&&parseInt(i.pay)){var a=i.cid?e.app.getPayUrl(i.cid):i.h5Url;t.os.iphone?(o=a,i.openUrl=o):i.version&&parseInt(i.version)<5852&&(o=a)}return o!==a&&i.openUrl&&(o=t.filterXSS(i.openUrl),o.indexOf("from")<0&&o.indexOf("?")>-1&&i.promotionId&&(o+="&from="+i.promotionId+"_"+(i.contentId?i.contentId:""))),o},getPackageInfo:function(){return n},pageType:function(){return t.browser.WeChat?1:t.browser.MQQClient?2:t.browser.MQQ?3:0}(),isSupportApp:function(){return t.os.iphone||t.os.ipod||t.os.ipad?!0:t.os.android?!0:!1}(),unbindTryOpenAppBanner:function(e){e?e.noTryOpen=!0:""},bindTryOpenAppBanner:function(n){if(n&&!([2,3].indexOf(e.app.pageType)>-1||1===e.app.pageType&&(window!==top&&top.location.href||window===top))){var i=e.$.os.hasTouch?"touchend":"click",r=n.$btn,o=r.attr("data-url"),a=!1,s=function(){var t=navigator.userAgent;return e.$.os.android||e.$.os.ios?-1!=t.indexOf("qqnews/")?!1:e.$.os.android&&a?!1:/^http|https/g.test(o)?!1:!0:!1};if(!s())return!1;r.bind("touchend click",function(e){n.noTryOpen||e.preventDefault()});var c=!1;r.bind("touchstart",function(){c=!1}).bind("touchmove",function(){c=!0}),r.bind(i,function(i){if(i.preventDefault(),!c){var r,o=i.target;r="a"===o.tagName.toLowerCase()?t(o):t(o).parents("a"),n.noTryOpen||e.app.tryOpenAppBanner(r)}})}},tryOpenAppBanner:function(e){if(e.length){var t=e.attr("href"),n=e.attr("data-url"),i=function(){location.href=t},r=function(){var e=document.createElement("iframe");e.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;opacity:0;",e.src=n,document.body.appendChild(e)};r();var o=(new Date).valueOf();setTimeout(function(){var e=(new Date).valueOf();1550>e-o&&i()},1500)}},loadMqqAPI:function(){if(e.app.loadMqqDefer)return e.app.loadMqqDefer;var n=t.Deferred();if(e.app.loadMqqDefer=n,window.x5)n.resolve();else{var i=this.config.mqqApiUrl;t.getScript(i,function(){window.x5?n.resolve():n.reject()})}return setTimeout(function(){n.reject()},3e3),n},invokeQQBrowserAPI:function(n){function i(){if(window.x5&&x5.ios&&x5.ios.getMobileAppSupport){var e={scheme:n.packageInfo.packageUrl};x5.ios.getMobileAppSupport(e,function(e){r.resolve(e&&1==e.isSupportApp?1:0)},function(){r.resolve(0)})}else r.resolve(0);setTimeout(function(){r.resolve(0)},300)}if(!t.os.iphone&&window.QQApi&&QQApi.checkAppInstalled)return this.invokeQQClientAPI(n);var r=t.Deferred();if(!t.os.iphone&&window.x5mtt&&window.x5mtt.isApkInstalled){var o=window.x5mtt.isApkInstalled('{"packagename": '+n.packageInfo.packageName+"}");r.resolve(-1!=o?1:0)}else t.os.iphone&&parseInt(t.os.version)>5?e.app.loadMqqAPI().done(function(){i()}).fail(function(){r.resolve(0)}):r.resolve(0);return setTimeout(function(){r.resolve(0)},3e3),r},getQQBrowserSignKey:function(n,i){var r=e.app,o=r.pageType,a=new t.Deferred,s=this.loadMqqAPI();return 3!=o?void a.resolve(0):(s.done(function(){if(!window.x5||!e.$.os.ios)return void a.resolve(0);if(!x5.ios||!x5.ios.getBrowserSignature)return void a.resolve(0);var t={vid:n};i&&(t.timestamp=parseInt((new Date).valueOf()/1e3)),x5.ios.getBrowserSignature(t,function(e){a.resolve(e&&e.key&&e.ver&&e.platform?{key:e.key,ver:e.ver,platform:e.platform}:0)},function(){a.resolve(0)})}),s.fail(function(){a.resolve(0)}),a)},mqqBuoLuoAuth:function(e){var n,i=t.Deferred();try{window.getBrowserSignature(e,function(e){if(e&&e.data)try{var t=JSON.parse(e.data);t&&t.result&&t.result.token&&(n=t.result.token)}catch(r){}i.resolve(n)}),setTimeout(function(){i.reject()},5e3)}catch(r){i.reject()}return i},kuaiBaoAppAuth:function(e,n){var i=t.Deferred(),r="undefined"!=typeof n?n+"":parseInt(+new Date/1e3)+"",o="TVP_KUAIBAO_CB_"+r.substr(-4,4);window[o]=function(e){var t;try{t=JSON.parse(e)}catch(n){}i.resolve(t)};var a=function(){var t={method:"getCKey",types:["string","string","string"],args:[e,r,o],instanceName:"TencentNewsScriptControllerJsInterface"},n="jsbridge://get_with_json_data?json="+encodeURIComponent(JSON.stringify(t))+"&_t="+r,i=new Image;i.src=n},s=function(){var t=function(){window.getBrowserSignature(e,r,o)};"function"==typeof window.getBrowserSignature?t():document.addEventListener("TencentNewsJSInjectionComplete",function(){t()})};return t.os.ios?s():t.os.android&&a(),setTimeout(function(){i.reject()},1e4),i},loadQQClientAPI:function(){if(e.app.loadQQClientDefer)return e.app.loadQQClientDefer;var n=t.Deferred();if(e.app.loadQQClientDefer=n,window.mqq||window.QQApi)n.resolve();else{var i=this.config.QQApiUrl;t.getScript(i,function(){n.resolve()})}return setTimeout(function(){n.reject()},3e3),n},invokeQQClientAPI:function(e){function n(){!r&&window.QQApi&&QQApi.checkAppInstalled?QQApi.checkAppInstalled(o,function(e){e&&0!=e?(e=e.split("."),e=e[e.length-1],i.resolve(1,e)):i.resolve(0)}):window.mqq&&mqq.app&&mqq.app.isAppInstalled?mqq.app.isAppInstalled(o,function(e){i.resolve(e?1:0)}):i.resolve(0)}var i=t.Deferred(),r=t.os.iphone,o=r?e.packageInfo.packageUrl:e.packageInfo.packageName;return this.loadQQClientAPI().done(function(){n()}).fail(function(){i.resolve(0)}),setTimeout(function(){i.resolve(0)},5e3),i},getAppMd5:function(i,r){i=i||140,r=r||e.app.config.defaultName;var o=t.Deferred(),a=n[r].md5Cgi.replace("${id}",i);return t.ajax({url:a,dataType:"jsonp"}).then(function(e){o.resolve(e&&e.data?e.data:e)}),o},report:function(n,i){var r={};i=i&&i.curVideo?i:!1,i&&(r={vid:i.curVideo.getVid()||i.curVideo.getChannelId(),appId:i.config.appid||i.config.appId,contentId:i.config.contentId}),n&&(n=t.extend(n,r),e.report(n))},invokeWeChatAPI:function(e){var n=t.Deferred(),i=this;return window!=top&&(WeixinJSBridge=top.WeixinJSBridge),WeixinJSBridge.invoke||n.resolve(0),i.getNetworkTypeInWechat().done(function(t){e&&e.t&&e.t.config&&(e.t.config.nettype=t)}),t.os.iphone?WeixinJSBridge.invoke("getInstallState",e.packageInfo,function(e){var t=e.err_msg;n.resolve(t.indexOf("get_install_state:yes")>-1?1:0)}):WeixinJSBridge.invoke("getInstallState",e.packageInfo,function(e){var t=e.err_msg;if(t.indexOf("get_install_state:yes")>-1){var i=t.split("yes_"),r=0;i.length>=2&&(r=parseInt(i[1],10)),r=isNaN(r)?0:r,n.resolve(1,r)}else n.resolve(0)}),setTimeout(function(){n.resolve(0)},6e3),n},getNetworkTypeInWechat:function(){var e=t.Deferred();return WeixinJSBridge.invoke("getNetworkType",{},function(t){var n=-1;t&&t.err_msg&&("network_type:fail"===t.err_msg&&(n=0),"network_type:wifi"===t.err_msg&&(n=1),"network_type:edge"===t.err_msg&&(n=2),"network_type:wwan"===t.err_msg&&(n=3)),e.resolve(n)}),e},check:function(i){var r=e.app,o=r.pageType,a=t.Deferred();if(i=i||{},i.appName=i.appName||e.app.config.defaultName,i.packageInfo=n[i.appName],1==o){var s=window==top?document:top.document;if(top.WeixinJSBridge)r.invokeWeChatAPI(i).then(function(e,t){a.resolve(r.buildResult(e,i,t))});else try{s.addEventListener("WeixinJSBridgeReady",function(){r.invokeWeChatAPI(i).then(function(e,t){a.resolve(r.buildResult(e,i,t))})})}catch(c){a.resolve(r.buildResult(0,i))}}else if(3==o)try{r.invokeQQBrowserAPI(i).then(function(e,t){a.resolve(r.buildResult(e,i,t))})}catch(c){a.resolve(r.buildResult(0,i))}else if(2==o)try{r.invokeQQClientAPI(i).then(function(e,t){a.resolve(r.buildResult(e,i,t))})}catch(c){a.resolve(r.buildResult(0,i))}else a.resolve(r.buildResult(0,i));return a},loadDownloaderAPI:function(){if(e.app.loadDownloaderDefer)return e.app.loadDownloaderDefer;var n=t.Deferred();e.app.loadDownloaderDefer=n;var i="";return 1==this.pageType&&(i=e.defaultConfig.libpath+e.defaultConfig.pluginUrl.AppDownloadClickWechat),2==this.pageType&&(i=e.defaultConfig.libpath+e.defaultConfig.pluginUrl.AppDownloadClickMqq),i||n.reject(),t.downloadClick_wechat||t.downloadClick_mqq?n.resolve():(t.getScript(i,function(){n.resolve()}),setTimeout(function(){n.reject()},3e3)),n},checkCanDownloader:function(e,n,i){function r(){t.downloadClick_wechat&&i&&t.downloadClick_wechat(i),t.downloadClick_mqq&&i&&t.downloadClick_mqq(i),o.resolve(1)}var o=t.Deferred();if(t.os.iphone||t.os.ipad||!n||1==e)return o.resolve(0),o;var a=!1,s=!1,c=/android/i.test(navigator.userAgent.toLowerCase());return!c||1==e||!n.downloader||n.downloadUrl&&!n.md5||!n.downloadUrl&&n.md5?(o.resolve(0),o):(t.isArray(n.range)&&t.each(n.range,function(e,t){1==t&&(a=!0),2==t&&(s=!0)}),n.downloaderCallback||(a=!0,s=!0),t.browser.WeChat&&a||t.browser.MQQClient&&s?this.loadDownloaderAPI().done(function(){r()}).fail(function(){o.resolve(0)}):o.resolve(0),o)},buildResult:function(n,i,r){var o="",a=this.pageType,s=t.os.iphone;i.version=r;var c=e.app.getOpenUrl(i),l=this;return s&&!i.openUrl&&(1==a&&(c+="&callback=weixin%3A%2F%2F&sender=%e5%be%ae%e4%bf%a1"),2==a&&(c+="&callback=mqqapi%3A%2F%2F&sender=%E6%89%8B%E6%9C%BAQQ"),3==a&&(c+="&callback=mqqbrowser%3A%2F%2F&sender=QQ%E6%B5%8F%E8%A7%88%E5%99%A8")),o=1==n?c:t.os.iphone&&i.pay&&i.cid?e.app.getPayUrl(i.cid):l.getDownloadUrl(i.downloadUrl,i.appName),{hasApp:n,pageType:a,os:s,version:r,openUrl:c,liveOpenUrl:c,url:o}}}}(tvp,tvp.$),tvp.PLAYER_DEFINE={LIVE:1,VOD:2},tvp.defaultConfig={video:null,width:600,height:450,autoplay:!1,mute:!1,volume:50,modId:"mod_player",playerid:"",coverId:"",typeId:0,pic:"",type:tvp.PLAYER_DEFINE.VOD,playerType:"auto",loadingswf:"",oid:"",share:!0,isHtml5UseHLS:"auto",isShowDurationLimit:!0,isHtml5AutoBuffer:!1,isHtml5UseAirPlay:!0,isHtml5ControlAlwaysShow:!1,html5Preload:"null",html5VodUIFeature:["controlbar","tips","title","meta","playpause","progress","timepanel","fullscreen","overlay","bigben","posterlayer","shadow","promotion","loadingAd","adonend","bullet"],html5LiveUIFeature:["controlbar","tips","playpause","fullscreen","overlay","posterlayer","shadow","bullet"],html5LiveFrontShow:["liveDownloader"],html5FeatureExtJS:{adonend:"//imgcache.qq.com/tencentvideo_v1/tvp/js/plugins/adonend.js?max_age=86400"},html5ForbiddenUIFeature:[],isHtml5UseUI:!0,HTML5CSSName:"",isHtml5ShowPosterOnStart:!0,isHtml5ShowPosterOnEnd:!1,isHtml5ShowPosterOnChange:!0,isiPhoneShowPosterOnPause:!0,isiPhoneShowPlaysinline:!0,isHtml5ShowPlayBtnOnPause:!0,isHtml5UseFakeFullScreen:!tvp.$.os.ios,isIOSVideoOffset:!0,isHtml5ShowLoadingAdOnStart:!tvp.$.os.phone,isHtml5ShowLoadingAdOnChange:!tvp.$.os.phone,isHtml5ShowLoadingAdOnReplay:!0,specialVideoFileDomain:"",flashWmode:"direct",vodFlashUrl:"",vodFlashType:"TPout",vodFlashExtVars:{},vodFlashListType:2,vodFlashSkin:"",isVodFlashShowCfg:!0,isVodFlashShowEnd:!0,isVodFlashShowSearchBar:!0,isVodFlashShowNextBtn:!0,liveFlashUrl:"",liveFlashSwfType:"TencentPlayerLive",isLiveFlashShowConfigBtn:!0,isLiveflashShowFullBtn:!0,isLiveFlashShowCfg:!0,liveFlashWatermark:"",liveFlashAppType:"",liveFlashExtVars:{},flashVersionTag:"20140714",ocxControlBar:"",ocxControlHeight:60,ocxSkin:"",isOcxShowPauseBtn:!1,isOcxHideControl:!1,plugins:{AppBanner:!1,AppRecommend:!1,AppDownloadOnPause:!1,AppBannerOnPause:!1,AppFollow:!1},pluginUrl:{AppBanner:"js/plugins/appbanner.js?v="+tvp.ts,AppFollow:"js/plugins/appfollow.js?v="+tvp.ts,AppRecommend:"js/plugins/apprecommend.js?v="+tvp.ts,AppRecommendBanner:"js/plugins/apprecommendbanner.js?v="+tvp.ts,AppDownloadOnPause:"js/plugins/appdownloadonpause.js?v="+tvp.ts,AppBannerOnPause:"js/plugins/appbanneronpause.js?v="+tvp.ts,AppDownloadClickWechat:"js/plugins/appdownloadclickwechat.js?v="+tvp.ts,AppDownloadClickMqq:"js/plugins/appdownloadclickmqq.js?v="+tvp.ts},cssPath:tvp.common.get_css_path(),pluginCssUrl:{},libpath:tvp.common.get_js_path(),noLimitBtn:!1,isContinuePlay:!0,h5VodBullet:!1,h5LiveBullet:!1,caseSetting:{},limitSetting:{downloader:!0},useLimitCase1UI:!0},function(e){tvp=tvp||{},tvp.fastclick=function(t){var n=e(t),i={},r=e.os.hasTouch;r&&(n.attr("data-fastclick",1),n.on("touchstart",function(e){e=r?e.touches[0]:e,i.start=+new Date,i.tar=e.target,i.x1=e.pageX,i.y1=e.pageY}).on("touchend",function(t){if(t.preventDefault(),t&&t.changedTouches&&t.changedTouches.length){t=t.changedTouches[0];var n,r,o;return i.end=+new Date,i.x2=t.pageX,i.y2=t.pageY,n=Math.abs(i.x2-i.x1),r=Math.abs(i.y2-i.y1),o=i.end-i.start,30>n&&30>r&&300>o?(e(i.tar).trigger("fastclick"),!1):void 0}}))}}(tvp.$),function(e){var t=function(e,n){return function(i,r){var o=/\s/.test(i)?function(e){var t,i=[n],r=[[]];for(t in e)i.push(t),r.push(e[t]);return new Function(i,o.$).apply(e,r).join("")}:e[i]=e[i]||t(document.getElementById(i).innerHTML);return o.$=o.$||n+".push('"+i.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join(n+".push('").split("\r").join("\\'")+"');return "+n,r?o(r):o}}({},"$"+ +new Date);e.tmpl=t}(tvp.$),function(e){"undefined"==typeof e.getScript&&(e.getScript=function(e,t){var n=document.createElement("script"),i=document.getElementsByTagName("head")[0],r=/^(?:loaded|complete|undefined)$/;n.async="async",n.src=e,n.charset="utf-8",t&&(n.onload=n.onerror=n.onreadystatechange=function(){r.test(n.readyState)&&(n.onload=n.onerror=n.onreadystatechange=null,window.DEBUG||i.removeChild(n),n=null,t())}),i.appendChild(n)})}(tvp.$),tvp.report=function(){function e(){return 0==a.length?(r=!0,void(o=null)):(clearTimeout(i),t(a.splice(0,1)),void(r=!1))}function t(t){clearTimeout(i),o=document.createElement("img"),o.onerror=e,o.src=t,setTimeout(e,1e3)}function n(e){return e&&/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i.test(e)?null==o?(t(e),void(r=!1)):r?(t(e),void(r=!1)):void a.push(e):void 0}var i,r=!0,o=null,a=[];return function(e){if(tvp.$.isString(e))return void n(e);if("object"==tvp.$.type(e)){var t,i={deviceId:"int1",platformId:"int2",appId:"int3",speed:"int4",contentId:"str1",fileName:"str2"},r={cmd:-1,url:window!=top?document.referrer:document.location.href,ver:tvp.ver.replace(/\$/g,""),ua:navigator.userAgent,int1:tvp.common.getDeviceId(),int2:tvp.common.getPlatformId(),int3:0,int4:0,str1:"",str2:tvp.filename},o="http://rcgi.video.qq.com/web_report?";for(t in i)t in e&&(e[i[t]]=e[t],delete e[t]);e=tvp.$.extend(r,e),o+=tvp.$.param(e),n(o)}}}(),tvp.ajax=function(t){function n(e,t){e=e||{},t=String(t);var n,i=/([\d\w_]+)/g;for(i.lastIndex=0;null!==(n=i.exec(t))&&(e=e[n[0]],void 0!==e&&null!==e););return e}function i(e){return e=e.slice(0,e.indexOf("?")),e=e.split("/"),{host:e[2],path:"/"+e.slice(3).join("/")}}function r(t,n,r,o){var a=e("@tencent/im-edu-wrap-https-proxy/index"),s=a("http://c.isdspeed.qq.com/code.cgi","https://huatuocode.huatuo.qq.com/code.cgi"),c=s,l=i(t);tvp.report(c,{domain:l.host,cgi:l.path,type:n,code:r,time:o})}function o(e,i){if("object"==t.type(e)&&e.url&&"string"==typeof e.url){"object"==typeof i&&(i=t.extend({key:"suc",value:0},i));var o=t.Deferred(),a=t.now(),s=0,c=t.extend({dataType:"jsonp"},e);return t.ajax(c).done(function(c){var l=c&&"object"==typeof i?n(c,i.key):0;s=t.now()-a,c&&"undefined"!=typeof l&&l==i.value?(r(e.url,1,l,s),o.resolve(c,s)):(r(e.url,3,l,s),o.resolve(c,s))}).fail(function(n){s=t.now()-a,r(e.url,2,900,s),o.reject(n,s)}),o}}return o}(tvp.$),tvp.reportErr=function(e,t){t=t||"tvperror";var n="http://rcgi.video.qq.com/report/jsbossrep?block="+t+"&ret=-1&level=4&msg=";e=[location.href,navigator.userAgent,tvp.filename,tvp.ver,e].join("|"),e=encodeURIComponent(e),n+=e,tvp.report(n)},tvp.bossReport={rcmdTextReport:function(e,t,n,i){var r,o,a,s,c,l;i=i||0,a=window.navigator.userAgent.toLowerCase(),o=a.indexOf("qzone")>-1,c=tvp.app.pageType,l=tvp.common.getUin(),s=1===c?2:2===c?4:o?6:-1,r={oper:e,iplat:s,tab:t,rlist:n,host:location.hostname,url:top.location.href||window.location.href,rtype:0,ptype:21,uin:l,int1:i,int2:tvp.common.getDeviceId()};var u=new Image,d="http://btrace.qq.com/kvcollect?BossId=2745&Pwd=0&_dc="+Math.random();d+="&"+tvp.$.param(r),u.src=d},window_error:function(e){var t={};if(t.filename=e.filename,t.lineno=e.lineno,t.colno=e.colno,t.msg=e.message,t.ua=navigator.userAgent,t.url=top.location.href,t.url=t.url?t.url:window.location.href,t.filename){var n=new Image,i="http://btrace.qq.com/kvcollect?BossId=2869&Pwd=637403767&_dc="+Math.random();i+="&"+tvp.$.param(t),n.src=i}},play_report:function(e){if(e&&!tvp.$.isEmptyObject(e)){var t="http://btrace.qq.com/kvcollect?BossId=2865&Pwd=1698957057&_dc="+Math.random();t+="&"+e.join("&"),tvp.report(t)}},user_action_report:function(e){var t={sop:e.actions,url:e.url||top.location.href,platform:tvp.common.getDeviceId(),vid:e.vid},n=new Image,i="http://btrace.qq.com/kvcollect?BossId=2797&Pwd=219856622&_dc="+Math.random();i+="&"+tvp.$.param(t),n.src=i},apprecommend_report:function(e){var t,n=tvp.app.pageType,i=window.navigator.userAgent.toLowerCase(),r=i.indexOf("qzone")>-1;t=1===n?2:2===n?4:r?6:-1;var o={oper:e.oper,tab:e.tab_id,vid:e.vid,rlist:e.rlist,page:e.page,url:top.location.href||window.location.href,iplat:t,ptype:21,rtype:1},a=new Image,s="http://btrace.qq.com/kvcollect?BossId=2745&Pwd=0&_dc="+Math.random();s+="&"+tvp.$.param(o),a.src=s},report_bullet_switch:function(e){e=e||{};var t=tvp.$;if(e.platform=t.os.android?1:t.os.iphone?2:t.os.ipad?3:4,e.url=window.location.href,"undefined"!==t.type(e.user_action)){var n="http://btrace.qq.com/kvcollect?BossId=3084&Pwd=1539562724&_dc="+Math.random();n+="&"+t.param(e),tvp.report(n)}},h5_live_quality:function(e){var t={step:e.step,sid:e.sid,vurl:e.vurl||"",guid:e.guid,playno:e.playno,vdef:e.vdef,tpay:e.tpay,cpay:e.cpay,fplayerver:tvp.ver,ftime:+new Date,ctime:+new Date,rtime:+new Date,sdtfrom:tvp.common.get_stdfrom(),platform:tvp.common.get_platform(),surl:location.href,sref:document.referrer,vip_type:"",adid:"",ptag:tvp.$.getUrlParam("ptag",location.href)},n="http://btrace.qq.com/kvcollect?BossId=3101&Pwd=1037836152&_dc="+Math.random();n+="&"+tvp.$.param(t),tvp.report(n)}},function(){"v.qq.com"==window.location.hostname&&(window.addEventListener?window.addEventListener("error",tvp.bossReport.window_error):window.attachEvent("onerror",tvp.bossReport.window_error))}(),tvp.retCode={snid:0,TYPE:{SUC:1,ERR:2},config:{cgi:"http://isdspeed.qq.com/cgi-bin/v.cgi",sampling:1},commCode:{error:11,MQzone_Err:12},report:function(e,t,n,i){if(e&&!(isNaN(t)||1>t)&&"undefined"!=typeof n){var r=this.config.cgi;
r+="?flag1="+e.toString()+"&flag2="+t.toString()+"&1="+tvp.retCode.config.sampling+"&2="+n,i&&(r+="&flag3="+i.toString()),tvp.report(r)}}},tvp.RetCode=function(e){this.appid=e,this.timer={begin:0,end:0},this.SNID=tvp.retCode.snid,this.isReported=!1,tvp.retCode.snid++},tvp.RetCode.prototype={begin:function(){this.timer.begin=(new Date).valueOf()},end:function(){this.timer.end=this.timer.end||(new Date).valueOf()},report:function(e,t){if(!this.isReported){this.end();var n=this.timer.end-this.timer.begin;tvp.retCode.report(this.appid,e,n,t),this.isReported=!0}},reportSuc:function(){this.report(tvp.retCode.TYPE.SUC)},reportErr:function(e){e=e||tvp.retCode.commCode.error,this.report(tvp.retCode.TYPE.ERR,e)}},function(e,t){var n={poster:"",prefix:0,tail:0,tagStart:0,tagEnd:0,duration:"",historyStart:0,pay:0,eduext:0,classType:0,yyactid:0,coverId:"",title:"",isLookBack:0,tstart:0,CDNType:0,vFormat:"",LiveReTime:"",typeId:0,format:t.os.ipad||t.os.MIPAD?"mp4":"auto",channelExtParam:{},pid:"",rid:"",bulletId:"",bullet:!1,h5BulletId:"",freeFlowHelper:!1};e.VideoInfo=function(){function i(e){return e.indexOf("_")<0?e:e.split("_")[0]}function r(e){return e.indexOf("_")<0?0:parseInt(e.split("_")[1])}function o(e){for(var t=[],n=e.split("|"),r=0;r<n.length;r++)t.push(i(n[r]));return t.join("|")}function a(){h&&h instanceof e.Player&&h.on(e.ACTION.onVodH5Init,function(){var t;"auto"===h.config.isHtml5UseHLS&&e.common.isUseHLS()||h.config.isHtml5UseHLS||(t=f.getMP4Url(),f.callGetMp4UrlDefer.resolve(t))})}var s="",c="",l=0,u=0,d="",p="",f=this,v={},h=null,g={},m=null;t.extend(v,n),this.data={},this.url="",this.lastQueryVid="",this.callGetMp4UrlDefer=t.Deferred(),t.each(v,function(e){var t=e.charAt(0).toUpperCase()+e.substr(1);f["set"+t]=function(t){return v[e]=t,this},f["get"+t]=function(){return v[e]}}),this.setCurPlayer=function(e){h=e,a()},this.setVid=function(n){if(e.$.isString(n)){if(this.clear(),d=n,n.indexOf("|")<0){var a=i(n);s=a,u=r(n),c=a}else{var l=n.split("|");s=i(l[0]),u=r(l[0]),c=o(n)}return s=t.filterXSS(s),c=t.filterXSS(c),this}},this.getVid=function(){return s},this.getVidList=function(){return c},this.getVidArray=function(){return c.split("|")},this.getIdx=function(){return u},this.getDuration=function(){if(!v.duration)return this.data&&this.data.vl&&t.isArray(this.data.vl.vi)&&this.data.vl.vi.length>0&&0!=this.data.vl.vi[0].td?this.data.vl.vi[0].td:0;for(var e=v.duration.split("|"),n=0,i=0,r=e.length;r>i;i++)n+=parseInt(e[i]);return n},this.getFileSize=function(){return this.data&&this.data.vl&&this.data.vl.vi&&this.data.vl.vi[0]&&this.data.vl.vi[0].fs?parseInt(this.data.vl.vi[0].fs,10):0},this.getTimelong=function(){return this.getDuration()},this.getEndOffset=function(){return this.getDuration()-this.getTail()},this.setChannelId=function(t){return e.$.isString(t)?(p=t,this):void 0},this.getChannelId=function(){return p},this.getFullVid=function(){return 0==this.getIdx()?i(this.getVid()):i(this.getVid())+"_"+this.getIdx()},this.getTitle=function(){return""===v.title&&this.data&&("mp4"==this.data.playtype&&this.data.vl&&t.isArray(this.data.vl.vi)&&this.data.vl.vi.length>0?v.title=this.data.vl.vi[0].ti||"":"hls"==this.data.playtype&&t.isArray(this.data.vi)&&this.data.vi.length>0&&(v.title=this.data.vi[0].title||"")),v.title},this.clear=function(){s="",c="",l=0,u=0,p="",m=null,g={},t.extend(v,n),this.data={},this.url=""},this.clone=function(e){e.setVid(d),e.setChannelId(p);for(var n in v){var i=n.charAt(0).toUpperCase()+n.substr(1);e["set"+i](this["get"+i]())}t.extend(e.data,this.data)},this.getVideoSnap=function(){var t=[];return t[0]=e.common.getVideoSnap(s,u),t[1]=t[0].replace("_160_90_3","_1"),t[2]=t[1].replace("_1.jpg",".png"),t},this.getMP4Url=function(n){var i="",r=this.getVidArray(),o="";if(t.isString(n)){if(i=n,t.inArray(n,r)<0){var a=t.Deferred();return a.reject(),a}}else isNaN(n)?(i=this.getVid(),o=this.getFullVid()):o=i=this.getVidArray()[n>=r.length?0:n];this.lastQueryVid=o||i,this.setRid(t.createGUID());var s=i+"_mp4_"+this.getFormat();if("object"==t.type(g[s])&&t.isFunction(g[s].done)&&"resolved"==g[s].state())return g[s];g[s]=t.Deferred();var c=this;return e.h5Helper.loadVideoUrlByVid({vid:i,isPay:this.getPay(),eduext:v.eduext?v.eduext:0,yyactid:v.yyactid?v.yyactid:0,classType:v.classType,fmt:this.getFormat(),appId:h instanceof e.Player?h.config.appid:0,contentId:h instanceof e.Player?h.config.contentId:""}).done(function(e,n){var i=c.getFreeFlowHelper(),r=!1,o=function(e){c.url=e,c.data=n,c.data.playtype="mp4",g[s]&&g[s].resolve(e)};"function"===t.type(i)?(i(e,function(e){r=!0,o(e)}),setTimeout(function(){r||o(e)},5e3)):o(e)}).fail(function(e,n){g[s]&&g[s].reject(e,t.isUndefined(n)?0:n)}),g[s]},this.getHLS=function(n){var i="",r=this.getVidArray(),o="";if(t.isString(n)){if(i=n,t.inArray(n,r)<0){var a=t.Deferred();return a.reject(),a}}else isNaN(n)?(i=this.getVid(),o=this.getFullVid()):o=i=this.getVidArray()[n>=r.length?0:n];this.lastQueryVid=o||i,this.setRid(t.createGUID());var s=i+"_hls_"+this.getFormat();if("object"==t.type(g[s])&&t.isFunction(g[s].done)&&"resolved"==g[s].state())return g[s];g[s]=t.Deferred();var c=this;return e.h5Helper.loadHLSUrlByVid({vid:i,isPay:this.getPay(),fmt:this.getFormat(),appId:h instanceof e.Player?h.config.appid:0,contentId:h instanceof e.Player?h.config.contentId:""}).done(function(e,t){c.url=e,c.data=t,c.data.playtype="hls",g[s]&&g[s].resolve(e)}).fail(function(e,n){g[s]&&g[s].reject(e,t.isUndefined(n)?0:n)}),g[s]},this.getPlayFormat=function(){if(!t.isPlainObject(this.data))return this.getFormat();if("object"==t.type(this.data.fl)&&t.isArray(this.data.fl.fi))for(var e=this.data.fl.fi,n=0;n<e.length;n++)if(1==e[n].sl)return e[n].name;return this.getFormat()},this.getSrtLangList=function(){return"object"==t.type(this.data.sfl)&&t.isArray(this.data.sfl.fi)?(t.each(this.data.sfl.fi,function(t,n){n.desc=e.html5lang.getSrtName(n.id)}),this.data.sfl.fi):[]},this.getSrtUrlList=function(n){if(t.isUndefined(n)){var i=this.getSrtLangList();if(!(i.length>0))return t.Deferred().reject(-1);n=i[0]}if("object"!=t.type(n)&&!isNaN(n)){for(var r=0,o=this.data.sfl.fi.length;o>r;r++)if(this.data.sfl.fi[r].id==n){n=this.data.sfl.fi[r];break}if("object"!=t.type(n))return t.Deferred().reject(-2)}var a=this.getVid(),s=a+"_srt_"+n.id;if("object"==t.type(g[s])&&t.isFunction(g[s].done)&&"resolved"==g[s].state())return g[s];g[s]=t.Deferred();var c=this;return e.h5Helper.loadSRT({vid:a,sflid:n.id,pid:c.getPid()}).done(function(e){var i=[];"object"==t.type(e.ul)&&t.isArray(e.ul.ui)&&t.each(e.ul.ui,function(e,t){i.push([t.url,"lang="+n.name].join("?"))}),g[s].resolve(i)}).fail(function(e){g[s].reject(e)}),g[s]},this.getFormatList=function(){if("object"==t.type(m)&&t.isFunction(m.done))return m;m=t.Deferred();var e=this,n=["mp4","msd"],i=function(){var i=[];return t.isPlainObject(e.data.fl)&&t.isArray(e.data.fl.fi)?(t.each(e.data.fl.fi,function(e,r){-1!=t.inArray(r.name,n)&&i.push(r.name)}),i):[]};return this.getMP4Url().done(function(){m.resolve({list:i()})}).fail(function(){m.reject({list:[]})}),m},this.hasHardSubtitle=function(){for(var e=this.getFormat(),t=0,n=this.data.fl.fi.length;n>t;t++){var i=this.data.fl.fi[t];if(i.name==e)return!!i.sb}return!1},this.hasSoftSubtitle=function(){return"object"==t.type(this.data.sfl)&&t.isArray(this.data.sfl.fi)&&this.data.sfl.fi.length>0}},e.PLAYTYPE={LIVE:"1",VOD:"2"}}(tvp,tvp.$),function(e){tvp.speedlimit={buildResult:function(t){var n=!1,i=!1,r=e.Deferred();return e.browser.MQQ&&e.browser.version>5.1&&(i=!0),i&&this.mqqGetResult(t).then(function(e){e?r.resolve(e):r.resolve()}),i&&(n=!0),n||r.resolve(),setTimeout(function(){r.resolve()},3e3),r},mqqGetResult:function(t){function n(){if(window.x5&&window.x5.getBrowserSignature)try{var n=parseInt(tvp.$.now()/1e3,10);x5.getBrowserSignature("vid:"+t+"["+n+"]",function(t){t?i.resolve({bver:e.browser.version,pkckey:t}):i.resolve()},function(){i.resolve()})}catch(r){i.resolve()}else i.resolve();setTimeout(function(){i.resolve()},300)}var i=e.Deferred();return window.x5&&window.x5.getBrowserSignature?n():tvp.app?(tvp.app.loadMqqDefer||(tvp.app.loadMqqDefer=tvp.app.loadMqqAPI()),tvp.app.loadMqqDefer.done(function(){n()}),tvp.app.loadMqqDefer.fail(function(){i.resolve()})):i.resolve(),i}}}(tvp.$);var a={};a.ha=function(e){function t(e,t){return((e>>1)+(t>>1)<<1)+(1&e)+(1&t)}for(var n=[],i=0;64>i;)n[i]=0|4294967296*Math.abs(Math.sin(++i));var r=function(i){for(var r,o,a,s,c=[],l=unescape(encodeURI(i)),u=l.length,d=[r=1732584193,o=-271733879,~r,~o],p=0;u>=p;)c[p>>2]|=(l.charCodeAt(p)||128)<<8*(p++%4);for(c[i=(u+8>>6)*e+14]=8*u,p=0;i>p;p+=e){for(u=d,s=0;64>s;)u=[a=u[3],t(r=u[1],(a=t(t(u[0],[r&(o=u[2])|~r&a,a&r|~a&o,r^o^a,o^(r|~a)][u=s>>4]),t(n[s],c[[s,5*s+1,3*s+5,7*s][u]%e+p])))<<(u=[7,12,17,22,5,9,14,20,4,11,e,23,6,10,15,21][4*u+s++%4])|a>>>32-u),r,o];for(s=4;s;)d[--s]=t(d[s],u[s])}for(i="";32>s;)i+=(d[s>>3]>>4*(1^7&s++)&15).toString(e);return i};return r}(16),a.stringToHex=function(e){for(var t="",n=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),i=0;i<e.length;i++)t+=n[e.charCodeAt(i)>>4]+n[15&e.charCodeAt(i)];return t},a.hexToString=function(e){for(var t="",n="0x"==e.substr(0,2)?2:0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},a._Seed="#$#@#*ad",a.tempcalc=function(e,t){for(var n="",i=0;i<e.length;i++)n+=String.fromCharCode(e.charCodeAt(i)^t.charCodeAt(i%4));return n},a.u1=function(e,t){for(var n="",i=t;i<e.length;i+=2)n+=e.charAt(i);return n},a._urlStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a.urlenc=function(e,t,n){for(var i,r,o,s,c,l,u,d="",p=0;p<e.length;)i=e.charCodeAt(p++),r=e.charCodeAt(p++),o=e.charCodeAt(p++),15==p&&(d+="A",d+=t,d+=n),s=i>>2,c=(3&i)<<4|r>>4,l=(15&r)<<2|o>>6,u=63&o,isNaN(r)?l=u=64:isNaN(o)&&(u=64),d=d+a._urlStr.charAt(s)+a._urlStr.charAt(c)+a._urlStr.charAt(l)+a._urlStr.charAt(u);return d},a.$xx=function(e,t,n,i){var r=""+Math.floor((new Date).valueOf()/1e3),i=(""+i).charAt(0),o="",s="",c={plt:e||"",vid:t||"",std:n||"",sts:i||"",ts:r,rf:o,ua:s};c=window.JSON?JSON.stringify(c):function(){var e=[];for(var t in c)e.push('"'+t+'":"'+c[t]+'"');return"{"+e.join(",")+"}"}(c);var l=a.hexToString(a.ha(e+t+r+a._Seed+o+s+i.charAt(0)+n)),u=a.urlenc(a.tempcalc(l,a._Seed),i.charAt(0),r),d=a.urlenc(a.tempcalc(l,"86FG@hdf"),i.charAt(0),r),p=a.u1(u,0),f=a.u1(u,1);return{p:c,u:u,c:d,u1:p,u2:f,t:r}},function(e,t){function n(){return this.init()}var i=[{reg:function(){return this.cfg.noAuth?!0:!1},request:function(e){var t=this;e.resolve({param:{vids:t.cfg.vid,defaultfmt:t.cfg.fmt}})}},{reg:function(){return this.cfg.eduext?!0:!1},request:function(e){var t=this;e.resolve({cgi:t.cfg2.cgi.edugetvinfo,param:{eduext:t.cfg.eduext,platform:261001,vid:t.cfg.vid,defn:t.cfg.fmt}})}},{reg:function(){return 1===this.cfg.classType?!0:!1},request:function(e){var t=this;e.resolve({cgi:t.cfg2.cgi.edugetvinfo,param:{platform:221001,vid:t.cfg.vid,defn:t.cfg.fmt}})}},{reg:function(){return this.cfg.yyactid?!0:!1},request:function(e){var t=this;e.resolve({cgi:t.cfg2.cgi.yygetinfo,cgi2:t.cfg2.cgi.yygetkey,param:{actid:t.cfg.yyactid,platform:181001,vids:t.cfg.vid,defaultfmt:t.cfg.fmt}})}},{reg:function(){if(window!==top&&"v.qq.com"===location.hostname&&"/iframe/player.html"===location.pathname){var t=e.common.getParams(location.href);if(t&&t.cKey&&t.encryptVer&&t.platform)return this.params=t,!0}return!1},request:function(e){var t,n=this,i={cgi:n.cfg2.cgi.getinfo,param:{encryptVer:n.params.encryptVer,platform:n.params.platform,cKey:n.params.cKey,vids:n.cfg.vid,defaultfmt:n.cfg.fmt}};try{t=window.parent.location.href}catch(r){}t&&(i.param.wxrefer=t),e.resolve(i)}},{reg:function(){return e.common.is_mqq_buluo()?!0:!1},request:function(t){if(!window.getBrowserSignature)return void t.reject();var n=this;window.getBrowserSignature(n.cfg.vid,function(i){var r;if(i&&i.data)try{var o=JSON.parse(i.data);o&&o.result&&o.result.token&&(r=o.result.token)}catch(a){}r?t.resolve({param:{cKey:r,encryptVer:"6.4",platform:e.$.os.ios?"170408":"170308",vids:n.cfg.vid,defaultfmt:n.cfg.fmt}}):t.reject()})}},{reg:function(){return 3===e.app.pageType&&window===top?!0:!1},request:function(n){var i,r,o=this,a=function(){var e,i,r={vid:o.cfg.vid};r.timestamp=parseInt(+new Date/1e3),t.os.ios?(e=x5.ios.getBrowserSignature,i=t.os.ipad?r:"vid:"+r.vid+"["+r.timestamp+"]"):(e=x5.android.getBrowserSignature,i="vid:"+r.vid+"["+r.timestamp+"]"),e(i,function(e){if("object"==typeof e&&e.key&&e.ver&&e.platform){var t={cgi:o.cfg.cgi.getvinfo,param:{cKey:e.key,encryptVer:e.ver,platform:e.platform,vid:o.cfg.vid,defn:o.cfg.fmt}};n.resolve(t)}else if("object"==typeof e&&e.data){var t={cgi:o.cfg.cgi.getvinfo,param:{cKey:e.data,encryptVer:"4.0",platform:"161001",vid:o.cfg.vid,defn:o.cfg.fmt}};n.resolve(t)}else if("string"==typeof e){var t={cgi:o.cfg.cgi.getvinfo,param:{cKey:e,encryptVer:"4.0",platform:"161001",vid:o.cfg.vid,defn:o.cfg.fmt}};n.resolve(t)}else n.reject()},function(){n.reject()})};i=window.x5&&x5.ios&&"function"===t.type(x5.ios.getBrowserSignature),r=window.x5&&"function"===t.type(window.x5.getBrowserSignature),i||r?a():e.app.loadMqqAPI().done(function(){i||r?a():n.reject()}).fail(function(){n.reject()})}},{reg:function(){var e=navigator.userAgent.toLowerCase().indexOf("qqnews")>-1,t=navigator.userAgent.toLowerCase().indexOf("qnreading")>-1;return e||t?!0:!1},request:function(e){var n=this,i=n.cfg.vid,r="undefined"!=typeof n.cfg.svr_time?n.cfg.svr_time+"":parseInt(+new Date/1e3)+"",o="TVP_KUAIBAO_CB_"+r.substr(-4,4);window[o]=function(t){var i;try{i=JSON.parse(t)}catch(r){}if(i&&i.key&&i.ver&&i.platform&&i.sdtfrom){var o={param:{cKey:i.key,encryptVer:i.ver,platform:i.platform,sdtfrom:i.sdtfrom,vid:n.cfg.vid,defaultfmt:"mp4"}};e.resolve(o)}else e.reject()};var a=function(){var e={method:"getCKey",types:["string","string","string"],args:[i,r,o],instanceName:"TencentNewsScriptControllerJsInterface"},t="jsbridge://get_with_json_data?json="+encodeURIComponent(JSON.stringify(e))+"&_t="+r,n=new Image;n.src=t},s=function(){var e=function(){window.getBrowserSignature(i,r,o)};"function"==typeof window.getBrowserSignature?e():document.addEventListener("TencentNewsJSInjectionComplete",function(){e()})};t.os.ios?s():t.os.android?a():e.reject()}},{reg:function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("liebao")>-1,n=e.indexOf("com.douban")>-1;return n||t?!0:!1},request:function(e){var t,n=this,i="undefined"!=typeof n.cfg.svr_time?n.cfg.svr_time+"":parseInt(+new Date/1e3)+"",r=function(){if(!window.getBrowserSignature)return void e.reject();try{t=window.getBrowserSignature(n.cfg.vid,i)}catch(r){}if(t&&t.key&&t.ver&&t.platform){var o={param:{cKey:t.key,encryptVer:t.ver,platform:t.platform,vid:n.cfg.vid,defaultfmt:n.cfg.fmt}};e.resolve(o)}else e.reject()};r()}}];n.prototype={init:function(){return this.reg_request},reg_request:function(n,r){var o=this;o.cfg=n,o.cfg2=r;var a=t.Deferred(),s=!1;return e.config&&e.config.authRules&&e.config.authRules.length&&(i=i.concat(e.config.authRules)),t(i).each(function(e,n){return"function"!==t.type(n.reg)?!0:"function"!==t.type(n.request)?!0:n.reg.call(o)?(s=!0,n.request.call(o,a),!1):!0}),s||a.reject(),setTimeout(function(){a.reject()},6e3),a}},e.auth=new n}(tvp,tvp.$),function(e,t){function n(){var e="view.inews.qq.com"===l.host;return t.os.iphone||t.os.ipod?e?"v3110":"v3010":t.os.ipad?e?"v4110":"v4010":t.os.android?t.os.tablet?"v6010":e?"v5110":"v5010":t.browser.IEMobile?"v7010":"v1010"}function i(e,t){for(var n=0,i=t.length;i>n;n++)if(1==t[n].sl)return t[n].id;return-1}function r(n){var i={cmd:3532,speed:0,appId:0,contentId:"",vid:"",itype:1,val:0,val2:0,str3:""};n=t.extend(i,n),e.report(n)}function o(e){e=e||{};var i,r=!1;return e.alias&&"string"==typeof e.fn&&e.vid&&(e.fn=e.fn.replace(e.vid,e.alias),r=!0),u&&"string"==typeof e.path&&(e.path=e.path.replace(/\/\/(.+?)(\/|#|$|\?)/,function(){return arguments.length>1?arguments[0].replace(arguments[1],u):arguments[0]})),i=e.path.indexOf("?")>-1?e.path+"&"+e.fn+"&vkey="+e.vkey+"&br="+e.br+"&platform=2&fmt="+e.fmt+"&level="+e.level+"&sdtfrom="+n():e.path+e.fn+"?vkey="+e.vkey+"&br="+e.br+"&platform=2&fmt="+e.fmt+"&level="+e.level+"&sdtfrom="+n(),t.isString(e.sha)&&e.sha.length>0&&(i+="&sha="+e.sha),r&&(i+="&vidalias=1"),i}function s(e){return function(n){r(t.extend(e,n))}}function c(i){var r,o,s,c="",l=1,u={};if("object"==typeof a&&"function"==typeof a.$xx&&"string"==typeof i){r=t.getUrlParam("platform",i),o=t.getUrlParam("vids",i),s=n(),i.indexOf("mvgetinfo?")>-1&&(t.os.iphone?s="V3013":t.os.ipad?s="V4013":t.os.android&&(s="V5013"));try{u=a.$xx(r,o,s,l)}catch(d){"function"==typeof e.reportErr&&d&&d.message&&e.reportErr(d.message)}u&&(c=c+"&_qv_rmt="+u.u1,c=c+"&_qv_rmt2="+u.u2,t.getUrlParam("sdtfrom",i)||(c=c+"&sdtfrom="+s),i=i+(-1==i.indexOf("?")?"?":"&")+c,t.cookie.set("qv_als",u.c))}return i}var l={isHLS:!1,isPay:!1,vid:"",fmt:"auto",platform:11001,host:window!=top?document.referrer:document.location.host},u="";l.cgi=function(){if("view.inews.qq.com"===l.host){var n="";return t.browser.WeChat&&(n="nocache=1&"),{getinfo:"http://h5wx.video.qq.com/getinfo?callback=?&",getkey:"http://h5wx.video.qq.com/getkey?callback=?&"+n}}return{getinfo:e.common.get_request_url("getinfo")+"?callback=?&",getvinfo:e.common.get_request_url("getvinfo")+"?callback=?&",edugetvinfo:"http://sv.video.qq.com/edugetvinfo?",yygetinfo:"http://sv.video.qq.com/mvgetinfo?",yygetkey:"http://sv.video.qq.com/mvgetkey?",getkey:e.common.get_request_url("getkey")+"?callback=?&"}}(),l.retryCgi=function(){return t.browser.WeChat||t.browser.MQQClient?{getinfo:l.cgi.getinfo.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3"),getkey:l.cgi.getkey.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3")}:{getinfo:l.cgi.getinfo.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3"),getkey:l.cgi.getkey.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3")}}(),e.h5Helper={loadVideoUrlByVid:function(n){var i="";return e.speedlimit?(i=t.Deferred(),e.speedlimit.buildResult().done(function(t){var r=e.h5Helper.loadVideoUrlByVid_base(n,t);r.done(function(e,t){i.resolve(e,t)}),r.fail(function(e,t){i.reject(e,t)})})):i=e.h5Helper.loadVideoUrlByVid_base(n),i},loadVideoUrlByVid_base:function(r,a){var u,d,p={},f={},v=0,h=t.Deferred();t.extend(t.extend(p,l),r);var g,m=new e.RetCode(100126),y=!1,w=l.cgi.getinfo,_=t.now(),I=0,b="",E=t.noop,C=l.cgi.getkey;g={platform:p.platform,charge:p.isPay?1:0,otype:"json",sb:1,nocache:t.browser.MQQClient||t.browser.WeChat?1:0,_rnd:(new Date).valueOf()},r.retryDefer&&t.isFunction(r.retryDefer.reject)&&(y=!0,h=r.retryDefer,w=l.retryCgi.getinfo,C=l.retryCgi.getkey),r.loadingAdCgi&&(w=r.loadingAdCgi,r.noAuth=!0),r.defer&&(h=r.defer),E=s({itype:1,val2:y?1:0,str3:b,vid:p.vid,appId:p.appId,contentId:p.contentId}),m.begin(),E();var S=function(i){return I=t.now()-_,i&&i.s?"o"!=i.s?(v=i.em||50,d=i.exem):i.vl&&i.vl.vi&&t.isArray(i.vl.vi)&&0!=i.vl.cnt?u=i.vl.vi[0]:v=68:v=50,0!=v||5==u.fst&&t.isPlainObject(u.ul)&&t.isArray(u.ul.ui)&&0!=u.ul.ui.length?0==v&&2!=u.st&&(8!=u.st?v=62:(v=83,d=u.ch)):v=62,r.yyactid&&83===v&&(d=-3),e.common.is_mqq_buluo()&&(d=0),0!=v?(E({val:v,speed:I}),m.reportErr(v),void h.reject(v,d)):(m.reportSuc(),E({val:0,speed:I}),r.loadingAdCgi?void h.resolve(u.ul.ui[0].url,{vl:i.vl,fl:i.fl,sfl:i.sfl,exem:i.exem,preview:i.preview}):u.fvkey?(d=o({path:u.ul.ui[0].url,fn:u.fn,vkey:u.fvkey,br:u.br,platform:2,fmt:p.fmt,level:u.level,sdtfrom:n(),sha:u.fsha,vid:p.vid,alias:u.alias}),void h.resolve(d,{vl:i.vl,fl:i.fl,sfl:i.sfl,exem:i.exem,preview:i.preview})):void T(i))},T=function(a){var l,d=u.ul.ui[0];f.br=u.br,f.path=d.url,f.fn=u.fn,f.fiid=i(p,a.fl.fi),f.vt=d.vt,l=new e.RetCode(100127),l.begin(),_=t.now(),b=C+t.param({otype:"json",vid:p.vid,format:f.fiid,filename:f.fn,platform:p.platform,vt:f.vt,charge:p.isPay?1:0,_rnd:(new Date).valueOf()}),b=c(b),E=s({itype:2,val2:y?1:0,str3:b,vid:p.vid,appId:p.appId,contentId:p.contentId}),E(),t.ajax({url:b,dataType:"jsonp"}).done(function(e){var i="";return v=0,I=t.now()-_,e&&e.s?"o"!=e.s&&(v=e.em||50):v=50,0!=v?(l.reportErr(v),E({val:v,speed:I}),void h.reject(v)):(i=o({path:f.path,fn:f.fn,vkey:e.key,br:f.br,platform:2,fmt:p.fmt,level:e.level,sdtfrom:n(),sha:e.sha,vid:p.vid,alias:u.alias}),l.reportSuc(),E({val:0,speed:I}),void h.resolve(i,{vl:a.vl,fl:a.fl,sfl:a.sfl,exem:a.exem,preview:a.preview}))}).fail(function(){l.reportErr(),E({val:500,speed:t.now()-_}),y?h.reject(500,2):(r.retryDefer=h,e.h5Helper.loadVideoUrlByVid(r))})},O=function(){b=w+t.param(g),a&&"object"===t.type(a)&&(b+="&"+t.param(a)),b=c(b),t.ajax({url:b,dataType:"jsonp"}).done(function(t){return!r.noAuth&&t&&0!=t.em&&"o"!=t.s?85===t.em&&-3===t.type&&1===r.cgi_auth_index?(r.cgi_auth_index+=1,r.defer=h,r.needTime=!0,r.svr_time=t.curTime,void e.h5Helper.loadVideoUrlByVid(r)):(r.noAuth=!0,r.defer=h,void e.h5Helper.loadVideoUrlByVid(r)):void S(t)}).fail(function(){m.reportErr(),E({val:500,speed:t.now()-_}),y?h.reject(500,1):(r.noAuth=!0,r.retryDefer=h,e.h5Helper.loadVideoUrlByVid(r))})};return r.cgi_auth_index||(r.cgi_auth_index=1),e.auth(p,l).done(function(e){e=e||{},"undefined"!==t.type(e.cgi)&&e.cgi&&(w=e.cgi),"undefined"!==t.type(e.cgi2)&&e.cgi2&&(C=e.cgi2),e.param&&t.extend(g,e.param),O()}).fail(function(){t.extend(g,{vids:p.vid,defaultfmt:p.fmt}),O()}),h},loadHDVideoUrlByVid:function(t){t.fmt="mp4",e.h5Helper.loadVideoUrlByVid(t)},loadHLSUrlByVid:function(n){var i={},r=t.Deferred();t.extend(t.extend(i,l),n);var o=new e.RetCode(100128),a="http://h5vv.video.qq.com/gethls?callback=?&"+t.param({vid:i.vid,charge:i.isPay?1:0,otype:"json",platform:i.platform,_rnd:(new Date).valueOf()}),u=s({itype:3,str3:a,vid:i.vid,appId:i.appId,contentId:i.contentId}),d=t.now();return a=c(a),u(),o.begin(),t.ajax({url:a,dataType:"jsonp"}).done(function(n){if(!n||!n.s)return o.reportErr(50),u({speed:t.now()-d,val:50}),void r.reject(50);if("o"!=n.s)return o.reportErr(n.em||50),u({speed:t.now()-d,val:n.em||50}),void r.reject(n.em||50);if(!n.vd||!n.vd.vi||!e.$.isArray(n.vd.vi))return o.reportErr(68),u({speed:t.now()-d,val:68}),void r.reject(68);for(var i=[],a=-2,s=0;s<n.vd.vi.length;s++)if(a=n.vd.vi[s].ch,2==n.vd.vi[s].st){var c=n.vd.vi[s].url.toLowerCase();if(!(c.indexOf(".mp4")<0&&c.indexOf(".m3u8")<0)&&n.vd.vi[s].url){var l=n.vd.vi[s];i.push(l.url);break}}return 0==i.length?(o.reportErr(68),u({speed:t.now()-d,val:68}),void r.reject(68,a)):(u({speed:t.now()-d,val:0}),o.reportSuc(),void r.resolve(i[0],n.vd))}).fail(function(){o.reportErr(),u({speed:t.now()-d,val:500}),r.reject(500,3)}),r},load3GVideoUrl:function(t){t.fmt="msd",e.h5Helper.loadVideoUrlByVid(t)},loadIsUseHLS:function(n){var i={},r=t.Deferred();t.extend(t.extend(i,l),n);var o=new e.RetCode(100125);return o.begin(),t.ajax({url:e.common.get_request_url("get_dtype")+"?callback=?&"+t.param({vids:i.vid,platform:i.platform,otype:"json",_rnd:(new Date).valueOf()}),dataType:"jsonp"}).done(function(e){var i=1;if("object"!=t.type(e))return o.reportErr(),void r.reject(500,4);if("o"!=e.s||!t.isArray(e.dl)||0==e.dl.length)return o.reportErr(e.em),void r.reject(e.em||50);for(var a=0,s=e.dl.length;s>a;a++)e.dl[a].vid===n.vid&&(i=e.dl[a].dltype);o.reportSuc(),r.resolve(i,e)}).fail(function(){o.reportErr(),r.reject(500,4)}),r},loadSRT:function(e){var n={},i=t.Deferred();return t.extend(t.extend(n,l),e),t.ajax({url:"http://h5vv.video.qq.com/getsurl?"+t.param({vid:n.vid,format:n.sflid,platform:n.platform,pid:n.pid,otype:"json",_rnd:(new Date).valueOf()}),dataType:"jsonp"}).done(function(e){return"object"!=t.type(e)?void i.reject(500):"o"!=e.s?void i.reject(isNaN(e.em)?500:e.em,e.msg||""):void i.resolve(e)}).fail(function(){i.reject(500)}),i},setSpecialVideoFileDomain:function(e){"string"==typeof e&&/^(\S+[\.])?qq\.com/.test(location.host)&&(u=e)}}}(tvp,tvp.$),function(e,t){e.BasePlayer=function(){var n={};this.modId="",this.sessionId="",this.$mod=null,this.videomod=null,this.playerid="",this.curVideo=null,this.instance=null,this.dataset={},this.eventList=["inited","play","playing","ended","allended","pause","resume","timeupdate","getnext","error","stop","fullscreen","change","write","flashpopup","getnextenable","msg","h5loadingadstart","h5loadingadend"],this.config={},this.hijackFun=["getPlayer","getCurVideo","showPlayer","hidePlayer","play","pause","getPlaytime","setPlaytime","getPlayerType","resize"],this.prototype={},function(t){var n=["init","addParam","write","setPlayerReady"];n=n.concat(t.hijackFun);for(var i=0,r=n.length;r>i;i++)t.prototype[n[i]]=e.$.noop}(this),this.addParam=function(e,t){this.config[e]=t},this.on=function(e,i){e&&t.isFunction(i)&&(n[e]=t.isArray(n[e])?n[e]:[],n[e].push(i))},this.trigger=function(e){var i,r,o;if(e&&t.isArray(n[e]))for(r=0,o=n[e].length;o>r;r++)t.isFunction(n[e][r])&&(i=Array.prototype.slice.call(arguments,1),n[e][r].apply(null,i))},this.off=function(e,i){var r;e&&t.isArray(n[e])&&(i?(r=t.inArray(i,n[e]),r>=0&&(n[e][r]=void 0)):n[e]=void 0)}},e.BasePlayer.prototype={setCurVideo:function(e){this.curVideo=e},getPlayer:function(){return null},getCurVideo:function(){return this.curVideo},getCurVid:function(){return this.curVideo instanceof e.VideoInfo?this.curVideo.getVid():""},getCurVidList:function(){return this.curVideo instanceof e.VideoInfo?this.curVideo.getVidList():""},init:function(n){t.extend(this.config,n);for(var i=0,r=this.eventList.length;r>i;i++){var o="on"+this.eventList[i];this[o]=t.isFunction(this.config[o])?this.config[o]:e.$.noop}this.setCurVideo(this.config.video),this.write(this.config.modId)},write:function(e){t("#"+e).html("here is player of base")},log:function(e){window.console&&window.console.log(e)},getCBEvent:function(n){var i;return this.instance&&t.isFunction(this.instance[n])&&this.instance[n]!=e.$.noop?i=this.instance[n]:t.isFunction(this[n])&&this[n]!=e.$.noop&&(i=this[n]),i},callCBEvent:function(e){var n=this.getCBEvent(e);if(t.isFunction(n)){var i=Array.prototype.slice.call(arguments,1);return n.apply(this,i)}return void 0},resize:function(e,n){var i=this.getPlayer();i&&(i.style.width=t.formatSize(e),i.style.height=t.formatSize(n))},showPlayer:function(){},hidePlayer:function(){},execFlashMethod:function(e){var t,n=this.getPlayer(),i=[];if(n&&n[e]){i=[].slice.call(arguments,1);try{return t=n[e].apply(n,i)}catch(r){}}}}}(tvp,tvp.$),tvp=tvp||{};var s=s||{ver:"$Rev: 90013 $",curSSO:"",lastmodify:"$Date: 2015-08-27 16:28:49 +0800 (鍥�, 2015-08-27) $"};s.log=tvp.log,s.debug=function(e){var t="";if(e.indexOf("[")<0&&arguments&&arguments.callee&&arguments.callee.caller){var n=arguments.callee.caller;t=s.debug.getFunName(n)}e=t?"["+t+"]:"+e:e,-1===tvp.log.isDebug&&(tvp.log.isDebug="true"==tvp.$.getUrlParam("debug")?1:0),tvp.log.isDebug&&("undefined"!=typeof __TenVideo_OCX_CTRL_PAGE__?s.driverPage.sendMsg(s.DEFINE.MSG.DRVPG_EVT_DEBUGLOG,encodeURIComponent(e)):tvp.log(e))},s.debug.getFunName=function(e){if("function"==typeof e||"object"==typeof e)var t=(""+e).match(/function\s*([\w\$]*)\s*\(/);return t&&t[1]},s.config={OLD_MIN_VER:"8.22.5275.0",IE_MIN_VER:"8.45.6526.0",FF_MIN_VER:"8.45.6526.0",CHROME_MIN_VER:"8.45.6526.0",STARTUP_MIN_VER:"8.14.4895.0",IE_FLASH_MIN_VER:"9.0.124.0",FF_FLASH_MIN_VER:"10.0",FLASH_CAB:"http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,124,0",MEDIAPLAYER_DOWNLOAD_URL:"http://dl_dir.qq.com/qqtv/QQLive8.46.6680.0.exe",PROGID_QQLIVE_INSTALLER:"QQLiveInstaller.InstallHelper.1",PROGID_QQLIVE_LIVEAPI:"QQLive.Application",MMINSTALL_CLSID:"1DABF8D5-8430-4985-9B7F-A30E53D709B3",MMINSTALL_VER:"8,14,4895,0",OLD_IE_CLSID:"11F2A418-94B2-4E16-9B0C-B00C0435F903",OLD_FF_CLSID:"D9EBCF5D-3F8F-4B6A-89BA-70577BE73C62",SEHLL_CLSID:"f7e55bdf-9528-46ba-b550-777859627591",OCX_CLSID:"5EF7B131-C278-4034-BC88-2CE28B128681",LIVEAPI_CLSID:"4A8FD414-1EBF-4EBD-A158-0D09B005A17F",OCX_URL:"//imgcache.qq.com/tencentvideo_v1/js/tvp/ocx_ctrl_page.html?max_age=0",CTRLSWF_URL:"//imgcache.qq.com/liveportal_v1/swf/player/vodCtrl.swf",CTRLSWF_VOD_URL:"//imgcache.qq.com/liveportal_v1/swf/player/vodCtrl_drm.swf",CTRLSWF_W_URL:"//imgcache.qq.com/liveportal_v1/swf/player/vodCtrl_w.swf",PREVIEW_URL:"//imgcache.qq.com/liveportal_v1/swf/player/qqlive_logo.swf",LOADING_URL:"//imgcache.qq.com/liveportal_v1/swf/player/loadstart.swf",AD_SWF_URL:"//imgcache.qq.com/liveportal_v1/swf/player/moneyplayer.swf",OCX_DISABLED_MANUAL:"http://v.qq.com/help/film_1.html#15"},s.param={playpage:{mousewheel:"mousewheel",oldmode:"OldMode"},shell:{ocxurl:"OcxUrl",hidescripterr:"HideScriptErr"},ocx:{mute:"Mute",volume:"Volume",fullscreen:"FullScreen",appendpausebtn:"AppendPauseBtn",programpageurl:"ProgramPageUrl"},driver:{autoplay:"autoPlay",iscontinued:"isContinued",url:"url",type:"type",adv:"adv",oid:"oid"},driverurl:{ctrlbar:"ctrlbar",ctrlheight:"ctrlh",previewurl:"previewUrl",loadingurl:"loadingUrl",previewpic:"previewPic",hidectrl:"hideCtrl",debug:"debug"},getParamBool:function(e){return void 0===e?!1:"string"==typeof e?(e=e.toLowerCase(),"true"==e||"1"==e):!!e},getElementObjectById:function(e){return window.ActiveXObject?document.getElementById(e):document.embeds[e]}},s.version=function(){function e(e){if(s.version.checkVerFormatValid(e))return e;if(/\d+/i.test(e)){var t=parseInt(e/1e4/100,10),n=parseInt(e/1e4,10)-100*t,i=parseInt(e,10)-(100*t*1e4+1e4*n);return strVer=t+"."+n+"."+i}return e}var t=-1,n=-1,i=-1;return _version={},{compare:function(t,n){t=e(t),n=e(n),t=t.replace(/,/g,"."),n=n.replace(/,/g,".");for(var i=t.split("."),r=n.split("."),o=0;4>o;o++){var a=Number(i[o]),s=Number(r[o]);if(a>s)return 1;if(s>a)return-1}return 0},get:function(){return tvp.version.getOcx()},check:function(t){if(t=t||s.version.getSupportMinVersion(),!s.version.checkVerFormatValid(t))return!1;var n,i=s.version.get();return n=/^\d+$/.test(i)?e(i):i+"",s.version.compare(n,t)<0?!1:!0},isZero:function(e){return e=e||s.version.get(),/^\d+$/.test(e)&&0==e?!0:0==s.version.compare(e,"0.0.0.0")},checkVerFormatValid:function(e){return/^(\d+\.){2}\d+(\.\d+)?$/.test(e)},hasQQLiveOcx:function(){if(-1!=i)return 1==i;var e=s.version.check();return i=e?1:0},hasOldVersion:function(){if(-1!=n)return 1==n;var e=s.version.get(s.config.OLD_IE_CLSID,!0);return e?(n=s.version.compare(e,s.config.OLD_MIN_VER)>0?1:0,!!n):!1},hasQQLivePlayer:function(){if(-1!=t)return 1==t;var e=s.version.get(s.config.LIVEAPI_CLSID);return e?(t=s.version.compare(e,"0.0.0.0")>0?1:0,!!t):!1},getSupportMinVersion:function(){return tvp.$.browser.ie?s.config.IE_MIN_VER:tvp.$.browser.firefox?s.config.FF_MIN_VER:tvp.$.browser.webkit?s.config.CHROME_MIN_VER:"0.0.0.0"}}}(),s.userAgent=s.browser,s.installer={timer:null,installerObj:null,getInstallerHtml:function(){var e="";return e+='<div id="qqlive_mminstaller_div"><OBJECT classid="clsid:'+s.config.MMINSTALL_CLSID+'" codebase="http://dl_dir.qq.com/qqtv/MMInstaller.cab#version='+s.config.MMINSTALL_VER+'" ID="QQLiveInstaller" width="0px" height="0px">',e+='	<embed name="FF_MM_Install" id="FF_MM_Install" type="application/tecent-qqlive-plugin" width="0px" height="0px"></embed>',e+="</OBJECT></div>"},showInstallerObject:function(e){tvp.$.getByID(e).innerHTML=s.installer.getInstallerHtml()},isMMInstalled:function(){if(tvp.$.browser.ie)try{var e=new ActiveXObject(s.config.PROGID_QQLIVE_INSTALLER);if("undefined"!=typeof e.GetVersionByClsid)return!0;try{e.Destroy(),e=null,delete e}catch(t){}return!1}catch(t){return!1}else if(tvp.$.browser.isNotIESupport()){var n=document.embeds.FF_MM_Install;try{if(n.CreateAX("MMInstall.dll"),"undefined"!=typeof n.GetVersionByClsid)return!0;try{n.Destroy(),n=null,delete n}catch(t){}return!0}catch(t){return!1}}return!1},checkFFHasMMEmbed:function(){return!!tvp.$.getByID("FF_MM_Install")},getActiveXObj:function(e,t){var n=null;if(t&&tvp.$.browser.isNotIESupport()){if(n=document.embeds.FF_MM_Install,!n){var i=document.createElement("div");i.innerHTML=s.installer.getInstallerHtml(),document.getElementsByTagName("body")[0].appendChild(i),n=document.embeds.FF_MM_Install}try{n.CreateAX(t)}catch(r){}}else if(e&&tvp.$.browser.ie)try{n=new ActiveXObject(e)}catch(r){}return n},hide:function(){var e=tvp.$.getByID("QQLiveInstaller");
e&&(e.style.display="none")}},s.flash={getFullVersion:function(){return tvp.version.getFlash()},getMainVer:function(){return tvp.version.getFlashMain()},isFlashVerVaild:function(){var e=!1;return e=tvp.$.browser.ie?-1==s.version.compare(s.flash.getFullVersion(),s.config.IE_FLASH_MIN_VER)?!1:!0:-1==s.version.compare(s.flash.getFullVersion(),s.config.FF_FLASH_MIN_VER)?!1:!0}},s.player={startup:function(){0!=tvp.$.browser.isCanOcx()&&0!=s.flash.isFlashVerVaild()&&0!=s.version.check(s.config.STARTUP_MIN_VER)&&(window.location.href="qqlive://system_startup/")},openClient:function(e,t){if(e&&s.version.hasQQLivePlayer()){var n="qqlive://sso/";if(!t){var i=e;if(/^\d+$/i.test(i))n+="projectid="+i;else if(i.toLowerCase().indexOf("qqlive://sso/")>=0)n=i;else{if(!/^[a-z0-9]{15}$/i.test(i))return;n+="vbarid="+i}}e&&t&&(n+="vbarid="+e+"&videoid="+t);var r=s.installer.getActiveXObj(s.config.PROGID_QQLIVE_LIVEAPI,"");if(r)try{return void r.OpenQQLive(n)}catch(o){}window.location.href=n}}},s.driverPage={sendMsg:function(e,t){t=t||"",window.navigate("app:OnMsg&nID="+e+"&vContent="+t)},ready:function(){window.navigate("app:PageLoaded")}},s.event={rptImg:null,bind:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){var i=e||this,r=n.concat(Array.prototype.slice.call(arguments,0));return"string"!=typeof t?t.apply(i,r):i[t]?i[t].apply(i,r):void 0}},closeMousewheel:function(){document.onmousewheel=function(e){return e=e||event,e.ctrlKey?!1:void 0}},reportTCSSHot:function(e,t){var n=!1;if("undefined"==typeof t)n=!0;else{var i=tvp.$.cookie.get("lv_ocx_rpt");i=i?parseInt(i):0,n=!(i&t)}n&&("function"==typeof pgvSendClick?pgvSendClick({hottag:"OCX.SETUP."+e,virtualURL:"/virtual/ocx.html",virtualDomain:"v.qq.com"}):(s.event.rptImg=new Image,s.event.rptImg.src="http://pinghot.qq.com/pingd?dm=v.qq.com.hot&url=/virtual/ocx.html&tt="+escape(document.title)+"&hottag=OCX.SETUP."+e+"&hotx=9999&hoty=9999&rand="+Math.round(1e5*Math.random())),tvp.$.cookie.set("lv_ocx_rpt",i|t,document.location.hostname||document.location.hostname))}};var s=s||{};s.DEFINE={STATUS:{NOT_INITED:-1,INIT:0,READY:4,PLAYING:7,STOP:1,LOADING:2,PAUSE:6,Buffering:8,Paused_Buffering:9,END:91},EVENT:{LOADSTART:"loadstart",LOADING:"loading",PLAY:"playing",STOP:"stop",PAUSE:"pause",RESUME:"resume",PLAYNEXT:"playnext",PLAYPREV:"playprev",MUTE:"mute",FULLSCREEN:"fullscreen",VIDEOREADY:"videoready",PROGESS:"progress",END:"ended",GET_VIDEO_FORMAT_CNT:"getVideoFormatCnt",GET_VIDEO_CUR_FORAMT:"getVideoCurFormat",VIDEO_FORMAT_SWITCHED:"videoFormatSwitched",VIDEOCHANGE:"videochange",VOLUMECHANGE:"volumechange",MOUSEMOVE:"mousemove",DBCLICK:"dbclick",TYPECHANGE:"typechange",GET_DRM_PREVDURATION:"getDrmDuration",GET_DRM_PREV_REASON:"getDrmPrevReason",CHECK_MMINSTALLER:"CheckMMInstall",CHECK_FLASH:"CheckFlash",CHECK_VERSION:"CheckVersion",SHOW_PLAYER:"ShowPlayer",DIRVER_PAGE_INITED:"DirverPageInited",OCX_READY:"inited",GUIDE_FLASH_INITED:"GuideFlashInited",UPDATE_SSO:"UpdateSSO",PAUSE_BTN_CLICK:"PauseBtnClick",FULLSCREEN_BTN_CLICK:"FullScreenBtnClick",CAN_PREV:"CanPrev",CAN_NEXT:"CanNext",OCX_INIT_FAILED:"OcxInitFailed",SCRIPT_ERROR:"ScriptError",OTHER_MSG:"msg",OCX_DISABLED:"ocxdisabeld",DRM_ERROR:"drmerror"},MSG:{OCX_EVT_ONMSG_PLAYING:1,OCX_EVT_ONMSG_PAUSED:2,OCX_EVT_ONMSG_STOPED:3,OCX_EVT_PREPLAY_LOADING:4,OCX_EVT_ONMSG_LOADSTART:7,OCX_EVT_ONMSG_MOUSEMOVE:9,OCX_EVT_ONMSG_LBUTTONDOWN:12,OCX_EVT_ONMSG_LBUTTONDBLCLK:14,OCX_EVT_ONMSG_START:15,OCX_EVT_ONMSG_VOLUME_UP:23,OCX_EVT_ONMSG_VOLUME_DOWN:24,OCX_EVT_ONMSG_MUTE:25,OCX_EVT_ONMSG_CANPRE:26,OCX_EVT_ONMSG_CANNEXT:27,OCX_EVT_ONMSG_BUF_RESUME_PLAY:30,OCX_EVT_ONMSG_PAUSE_RESUME_PLAY:31,OCX_EVT_ONMSG_PLAY_PAUSE_CLICK:32,OCX_EVT_ONMSG_VIDEO_FORMAT_COUNT:49,OCX_EVT_ONMSG_CUR_VIDEO_FORMAT_IDX:50,OCX_EVT_ONMSG_VIDEO_FORMAT_SWITCHED:51,OCX_EVT_ONMSG_COMMAND:100,DRVPG_EVT_FLASH_INITED:501,DRVPG_EVT_ALL_INITED:502,LIVE_PAGE_EVENT_GUIDEFLSAH_INITED:503,DRVPG_EVT_UPDATESSO:504,CTRLBAR_EVT_PAUSECLICK:505,CTRLBAR_EVT_FULLSCREENCLICK:506,OCX_EVT_FULLSCREEN_SWITCH:507,DRVPG_EVT_OCX_INIT_FAILED:508,DRVPG_EVT_JS_ERROR:509,DRVPG_EVT_DEBUGLOG:510,CTRLBAR_EVT_STOPCLICK:511,OCX_DISABLED:512,OCX_DRM_PREV_END:513,OCX_DRM_GET_TIMEOUT:515,NEW_OCX:516,USE_OCX:517,SHOW_INSTALLER_TIPS:518,GET_VIDEO_CUR_TIME:519,NO_FLASH_PLAYER:520,CTRLBAR_EVT_RESUMECLICK:521,OCX_EVT_ERROR:1002,OCX_EVT_ONMSG_FLV_PROGRAM_END:1003,OCX_EVT_ONMSG_FLV_TOTAL_TIME:1005,OCX_EVT_GET_QQ:1104,OCX_EVT_PREVIEW_REASON:1102,OCX_EVT_PREVIEW_DURATION:1103,OCX_EVT_DRM_AUTHORIZE_RESULT:1106,OCX_EVT_DRM_BEGIN:1107},COMMANDID:{IDM_RBUTTON_PLAY_PAUSE:11251,IDM_RBUTTON_PRE:11253,IDM_RBUTTON_NEXT:11254,HOT_KEY_FULLSCREEN:11302},PROGRESS_EVENT:{FLV_LOADING:2,FLV_HEAD_TOTAL_TIME:3},KEYCODE:{HOTKEYF_SHIFT:1,HOTKEYF_CONTROL:2,HOTKEYF_ALT:4,HOTKEYF_EXT:8,VK_RETURN:13,VK_ESCAPE:27,VK_SPACE:32,VK_LEFT:37,VK_UP:38,VK_RIGHT:39,VK_DOWN:40},VIDEOTYPE:{UNKNOWN:0,LIVE:1,VOD:8},AD_EVENT:{ERROR:"Error",DATALOADED:"DataLoaded",DOWNLOADED:"Downloaded",PLAYEND:"PlayEnd"}},function(e,t){e.livehub={g_flashp2p:!1,iretcode:0,g_curCnlInfo:{},stepReport:function(n,i){var r={cmd:3545,val:n};"object"==t.type(i)&&(r=t.extend(r,{speed:i.delay,int5:i.code,vid:i.lid}),i.config&&(r=t.extend(r,{contentId:i.config.contentId,appId:i.config.appid}))),e.report(r)},FlashChecker:function(n){var i=this;this.cnlId="",this.extParam={},this.onError=t.noop,this.onCanFlash=t.noop,this.onCanHTML5=t.noop,this.onCanOCX=t.noop,this.onComplete=t.noop,this.onGetCnlId=t.noop;var r=function(t,i){i=i||{},i.config=n,e.livehub.stepReport(t,i)};this.onSuccess=function(n){n&&0==n.iretcode?(e.livehub.iretcode=n.iretcode,e.livehub.g_flashp2p=n.flashp2p?!0:!1,e.debug("get channel info:flashid="+n.flashid+",p2pid="+n.p2pid+",flashp2p="+n.flashp2p),i.cnlId=""+n.flashid||n.p2pid||"",i.onGetCnlId(""+i.cnlId,!1),e.livehub.getCurChannelInfo(i.cnlId,i.extParam),n.flashid?(r(5),i.onCanFlash(i.cnlId)):t.os.windows&&n.p2pid?(r(6),i.onCanOCX(i.cnlId)):(r(7,{code:n.iretcode}),i.onError(n.iretcode))):(r(8,{code:n.iretcode}),i.onError(500))},this.send=function(){if(r(1),e.common.isUseHtml5())return r(2),i.onCanHTML5(i.cnlId),void i.onComplete();var n=t.now();t.ajax({url:"http://info.zb.qq.com",data:{cmd:1,cnlid:i.cnlId||""},dataType:"jsonp"}).done(function(e,o){o=t.now()-n,r(3,{delay:o}),i.onSuccess(e),i.onComplete()}).fail(function(e,o){o=t.now()-n,r(4,{delay:o}),i.onError(),i.onComplete()})}},getCurChannelInfo:function(n,i){var r=e.livehub.g_curCnlInfo;i&&"object"==t.type(i)?(r.cnlId=i.cnlId,i.channelname&&(r.cnlName=i.channelname),i.currentname&&i.currenttime&&(r.prmInfo=i.currenttime+"|"+i.currentname)):r={}}}}(tvp,tvp.$),function(e,t){function n(n,i,r){var o=t.now(),s=o-a,c={cmd:3529,val:n,str4:i,speed:0>s?t.now()-o:s};a=o,"object"==t.type(r)&&t.extend(c,r),e.report(c)}function i(n,i){var r=n+"Defer";if(e[r])return e[r];var o=t.Deferred();e[r]=o;var a="//imgcache.qq.com/tencentvideo_v1/tvp/js/",c=n.toLowerCase();"OcxPlayer"==n&&"undefined"!=typeof s&&"undefined"!=typeof s.DEFINE&&(c="ocxplayerlite");var l=a+"module/"+c+".js?max_age=86400&v="+e.ts;if("function"==typeof e[n])o.resolve();else{var u=new e.RetCode(100123),d=t.now();u.begin(),i(1),t.getScript(l,function(){var r=t.now()-d;if("function"!=typeof e[n])throw u.reportErr(11),i(2,11,r),new Error(window.errMsg?errMsg[1]:"");i(2,0,r),u.reportSuc(),o.resolve()})}return o}function r(e){return"string"==t.type(e)&&/html5|mp4/i.test(e)}var a=t.now(),c=function(n,o){function a(){var e=t.Deferred();switch(m.playerType){case"flash":w="FlashPlayer";break;case"html5":p();break;case"ocx":w="OcxPlayer";break;case"mp4":w="MP4Link";break;default:s()}return e.resolve(),e}function s(){var t=navigator.platform.toLowerCase(),n=navigator.userAgent.toLowerCase(),i=e.version.getFlashMain(),r=/ipad|ipod|iphone|lepad_hls|IEMobile|WPDesktop/gi.test(n),o=/MacIntel/gi.test(t),a=/ipad|ipod|iphone|playstation/gi.test(t);return e.common.isEnforceMP4()?void(w="MP4Link"):r||a||e.$.os.android?void(e.common.isSupportMP4()||e.common.isInUseH5()?p():w="MP4Link"):(isNaN(i)||10>i)&&o&&e.common.isSupportMP4()?void p():void(w="FlashPlayer")}function l(n){if(n.getChannelId()){var i=n.getChannelId();if("object"==t.type(y[i])&&t.isFunction(y[i].done))return y[i];y[i]=t.Deferred();var r=new e.livehub.FlashChecker(m),o=!0;return r.cnlId=n.getChannelId(),r.extParam=n.getChannelExtParam(),r.onGetCnlId=function(e,t){n.setChannelId(e),n.setIsLookBack(!!t)},r.onCanFlash=function(){w="FlashLivePlayer"},r.onCanHTML5=function(){f()},r.onCanOCX=function(){w="OcxPlayer"},r.onError=function(){u(),o=!1},r.onComplete=function(){d(),o?y[i].resolve():y[i].reject()},r.send(),y[i]}}function u(){e.common.isLiveUseHTML5()?f():w=t.os.android?"FlashLivePlayer":"OcxPlayer"}function d(){switch(m.playerType){case"flash":w="FlashLive";break;case"html5":f();break;case"flashLive":w="FlashLivePlayer";break;case"ocx":w="OcxPlayer"}}function p(){E=!0,w=m.isHtml5UseUI?"Html5Player":"Html5Tiny"}function f(){w=m.isHtml5UseUI?"Html5Live":"Html5LiveTiny"}function v(e){for(var t=!1,n=document.getElementsByTagName("link")||[],i=0,r=n.length;r>i&&!(t=n[i]&&n[i].href&&(n[i].href.indexOf(e)>0||-1!=n[i].href.indexOf("player_inews.css")));)i++;return t}function h(){function i(){if(!a){a=!0;var t=new e[w];t.init(n),g.resolve(t,w)}}var o=null,a=!1,s=t.inArray(w,b),c=m.cssPath+(n.HTML5CSSName||"player.css");(s>-1&&t.isString(n.HTML5CSSName)&&n.HTML5CSSName.length>0||r(w))&&!v(c)?(o=setTimeout(function(){n.isHtml5UseUI=!1,w=C[s],i()},5e3),c+=-1===c.indexOf("?")?"?t="+e.ts:"&t="+e.ts,t.loadCss(c).done(function(){clearTimeout(o),o=null,i()})):i()}var g=t.Deferred(),m={},y={},w="FlashPlayer",_=["未指明播放器内核","您当前使用的统一播放器JS文件不包含指定的播放器内核","video未初始化"],I=["FlashPlayer","FlashLivePlayer","MP4Link","OcxPlayer"],b=["Html5Player","Html5Live"],E=!1,C=["Html5Tiny","Html5LiveTiny"];if(I=I.concat(b),I=I.concat(C),t.extend(m,n),t.isUndefined(n.isHTML5UseUI)||(m.isHtml5UseUI=n.isHTML5UseUI),!n.video instanceof e.VideoInfo)throw new Error(_[2]);return n.video.setCurPlayer(o),c.checkLivePlayer=l,t.when(n.type==e.PLAYER_DEFINE.VOD?a():l(n.video)).then(function(){var r="",a=function(t,i,o){e.report({cmd:3531,val:t,val2:i||0,str3:r,speed:o||0,contentId:n.contentId||"",appId:n.appid||0})};if(!w)throw new Error(_[0]);if(t.inArray(w,I)<0)throw new Error(_[1]);n.type==e.PLAYER_DEFINE.VOD&&E&&o&&o.trigger&&o.trigger(e.ACTION.onVodH5Init),"function"!=typeof e[w]?i(w,a).done(function(){h.call(o)}):h.call(o)}),g},l={player:"playerType",showcfg:["isVodFlashShowCfg","isLiveFlashShowCfg"],searchbar:["isVodFlashShowSearchBar"],showend:["isVodFlashShowEnd"],tpid:["typeId"],cid:["coverId"],flashshownext:["isVodFlashShowNextBtn"],loadingswf:"loadingswf",wmode:"flashWmode",flashskin:["vodFlashSkin"],extvars:["vodFlashExtVars"],swftype:["vodFlashType"],swfurl:["vodFlashUrl","liveFlashUrl"]};e.Player=function(i,r){this.sessionId=t.createGUID(),n(1,this.sessionId),this.instance=null,this.config={},this._oldcfg={},t.extend(this.config,e.defaultConfig),this.setting("width",i),this.setting("height",r)},e.Player.fn=e.Player.prototype=new e.BasePlayer,t.extend(e.Player.fn,{setting:function(e,t){this.config[e]=t},output:function(e){this.setting("modId",e),this.create(this.config)},create:function(i){var r=this;t.extend(r.config,i),n(2,this.sessionId,{contentId:r.config.contentId||"",appId:r.config.appid||0});var a=function(){c(r.config,r).done(function(o,a){try{n(3,r.sessionId,{vid:o.curVideo.getFullVid()||o.curVideo.getChannelId(),str3:o.getPlayerType(),contentId:r.config.contentId||"",appId:r.config.appid||0})}catch(s){}r.instance=o,r.instance.instance=r;for(var l in r.instance)"instance"!=l&&("on"==l.substr(0,2)&&t.isFunction(r[l])&&r[l]!=e.$.noop||(r[l]=r.instance[l]));o.callCBEvent("onwrite"),r.config.type==e.PLAYER_DEFINE.LIVE&&(r.play=function(n){t.isString(n)?(r.config.video.setChannelId(n),n=r.config.video):n instanceof e.VideoInfo&&t.when(c.checkLivePlayer(n)).then(function(){r.instance instanceof e[a]?r.instance.play(n):(i.video=n,c(i))})}),e.Player.instance[r.playerid]=r}).always(function(){function e(e,n){try{var i="build"+e;return t.isFunction(r[i])?(r[i].call(r,n),!0):!1}catch(o){}}if(t.each(r.config.plugins,function(n,i){if(i&&n in r.config.pluginUrl){var o,a=t.isPlainObject(i)?i:{};if("AppRecommend"===n&&r.config.plugins.adonend)return;if(!e(n,a)){o=n;var s=r.config.libpath+r.config.pluginUrl[o];t.isString(s)&&""!=t.trim(s)&&t.getScript(s,function(){e(n,a)})}}}),window.console&&o){var n={jQuery:"jq",Zepto:"zepto",jq:"jqmobi"};for(var i in n)if("function"==typeof window[i]&&"jQuery"===i&&"function"!=typeof jQuery.Deferred)break}})},s=function(){var n,i=t.Deferred(),r="//v.qq.com/iframe/tvp.config.js";if(e.config)return i.resolve(),i;var o=parseInt(100*Math.random(),10)+1,a=20;return 100-a>o?(i.reject(),i):(n=t.getScript(r,function(){return e.config?void i.resolve():void i.reject()}),n&&"function"===t.type(n.fail)&&n.fail(function(){i.reject()}),setTimeout(function(){i.reject()},4e3),i)};s().done(function(){try{e.config&&e.config.defaultConfig&&t.extend(r.config,e.config.defaultConfig)}catch(n){}a()}).fail(function(){a()})},addParam:function(n,i){e.report({cmd:3546,val:1}),"config"==n&&"object"==t.type(i)?t.extend(this.config,i):this._oldcfg[n]=i},setCurVideo:function(t){e.report({cmd:3546,val:2}),this.config.video=t,t&&t instanceof e.VideoInfo&&t.setCurPlayer(this)},write:function(n){e.report({cmd:3546,val:3}),this.config.modId=n;var i=1==this._oldcfg.type?1:2,r=this;t.each(this._oldcfg,function(n,o){n in l?t.isArray(l[n])?2==i?r.config[l[n][0]]=o:1==i&&l[n].length>=2&&(r.config[l[n][1]]=o):t.isString(l[n])&&(r.config[l[n]]=o):n in e.defaultConfig&&(r.config[n]=o)}),delete this._oldcfg,this.create(this.config)}}),e.create=c}(tvp,tvp.$),tvp.Player.instance={},function(e){tvp.modeHide=function(t,n){function i(){v.off("click.tvp_mode_hide").on("click.tvp_mode_hide",function(){var t;if(c=f.getPlayer(),t=c?e(c).attr("src"):f.$mod.find("a").attr("href")){if(!tvp.common.isSupportMP4()&&!tvp.common.isUseHtml5())return void(window.location.href=t);d.show(),setTimeout(function(){p.isend?(p.isend=!1,f.play()):c.play(),o(),setTimeout(function(){c.play()},100),r()},5)}})}function r(){p.isInit||(p.isInit=!0,e(c).on("ended",function(){f.cancelFullScreen()}).on("playing",function(){document.webkitIsFullScreen||c.webkitDisplayingFullscreen||u}).on("webkitendfullscreen",function(){a()}),e(document).on("webkitfullscreenchange fullscreenchange",function(){a()}))}function o(){s()?f.enterFullScreen():c.webkitEnterFullscreen()}function a(){c&&(document.webkitIsFullScreen||c.webkitDisplayingFullscreen||u||f.isFakeFullscreen()||(c.pause(),d.hide()))}function s(){return tvp.$.os.android?tvp.$.browser.MQQ?!1:tvp.$.compareVersion(tvp.$.os.version,"4.4")>-1?!1:!0:!1}var c,l,u,d=e("#"+n.modId),p=new tvp.VideoInfo,f=new tvp.Player,v=e(t.btn);l={width:"100%",height:window.innerHeight,video:p,modId:n.modId,isHtml5UseUI:!0,isHtml5UseFakeFullScreen:s(),isiPhoneShowPlaysinline:!1,onwrite:function(){i()},onfullscreen:function(e){e=u,u||a()}},e.extend(l,n),p.setVid(n.vid),f.create(l)}}(tvp.$),tvp.filename="tvp.player_v2.js","function"==typeof define&&define("tvp_bugfix",[],function(){return tvp}),n.tvp=tvp,"undefined"!=typeof s&&(n.QQLive=s)}(this)});
/*!edu_modules/player.config/player.config*/
;define("edu_modules/player.config/player.config",function(){return{width:727,height:527,vodFlashUrl:"//imgcache.qq.com/tencentvideo_v1/player/TPout.swf?playertype=11",autoplay:!0,loadingswf:"//imgcache.qq.com/minivideo_v1/vd/res/skins/ke_loading.swf",flashWmode:"opaque",vodFlashExtVars:{showend:0,searchbar:0,searchpanel:0}}});
/*!edu_modules/video.play/video.play*/
;define("edu_modules/video.play/video.play",function(e){e("@tencent/im-tvp-bugfix/tvp-bugfix");var d=e("jquery"),i=(e("edu_modules/edu-dialog/edu-dialog"),d.extend({},e("edu_modules/player.config/player.config")||{},{width:490,height:400})),a=function(e,a,o){var t=d.extend(!0,{},i,o||{});t.vodFlashExtVars=t.vodFlashExtVars||{},t.vodFlashExtVars.eduext="0_0_"+a+"_3";var n=t.modId="video-preview-container-"+(Math.random()+ +new Date).toString().replace(/\D+/g,"");d.Dialog.confirm('<div id="'+n+'"></div>',{title:"视频预览",globalClass:"video-preview-dialog"});var r=t.video=new tvp.VideoInfo;r.setVid(e),(new tvp.Player).create(t)};return a});
/*!core-js/library/modules/es6.object.get-prototype-of*/
;define("core-js/library/modules/es6.object.get-prototype-of",function(o){var e=o("core-js/library/modules/_to-object"),r=o("core-js/library/modules/_object-gpo");o("core-js/library/modules/_object-sap")("getPrototypeOf",function(){return function(o){return r(e(o))}})});
/*!core-js/library/fn/object/get-prototype-of*/
;define("core-js/library/fn/object/get-prototype-of",function(e,o,r){e("core-js/library/modules/es6.object.get-prototype-of"),r.exports=e("core-js/library/modules/_core").Object.getPrototypeOf});
/*!babel-runtime/core-js/object/get-prototype-of*/
;define("babel-runtime/core-js/object/get-prototype-of",function(e,o,t){t.exports={"default":e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}});
/*!babel-runtime/helpers/classCallCheck*/
;define("babel-runtime/helpers/classCallCheck",function(e,n){"use strict";n.__esModule=!0,n.default=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}});
/*!core-js/library/modules/es6.object.define-property*/
;define("core-js/library/modules/es6.object.define-property",function(e){var r=e("core-js/library/modules/_export");r(r.S+r.F*!e("core-js/library/modules/_descriptors"),"Object",{defineProperty:e("core-js/library/modules/_object-dp").f})});
/*!core-js/library/fn/object/define-property*/
;define("core-js/library/fn/object/define-property",function(e,r,o){e("core-js/library/modules/es6.object.define-property");var n=e("core-js/library/modules/_core").Object;o.exports=function(e,r,o){return n.defineProperty(e,r,o)}});
/*!babel-runtime/core-js/object/define-property*/
;define("babel-runtime/core-js/object/define-property",function(e,r,o){o.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}});
/*!babel-runtime/helpers/createClass*/
;define("babel-runtime/helpers/createClass",function(e,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var t=e("babel-runtime/core-js/object/define-property"),u=n(t);r.default=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),u.default(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}()});
/*!babel-runtime/helpers/possibleConstructorReturn*/
;define("babel-runtime/helpers/possibleConstructorReturn",function(e,n){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var r=e("babel-runtime/helpers/typeof"),u=t(r);n.default=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==("undefined"==typeof n?"undefined":u.default(n))&&"function"!=typeof n?e:n}});
/*!core-js/library/modules/_set-proto*/
;define("core-js/library/modules/_set-proto",function(o,r,t){var e=o("core-js/library/modules/_is-object"),c=o("core-js/library/modules/_an-object"),n=function(o,r){if(c(o),!e(r)&&null!==r)throw TypeError(r+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(r,t,e){try{e=o("core-js/library/modules/_ctx")(Function.call,o("core-js/library/modules/_object-gopd").f(Object.prototype,"__proto__").set,2),e(r,[]),t=!(r instanceof Array)}catch(c){t=!0}return function(o,r){return n(o,r),t?o.__proto__=r:e(o,r),o}}({},!1):void 0),check:n}});
/*!core-js/library/modules/es6.object.set-prototype-of*/
;define("core-js/library/modules/es6.object.set-prototype-of",function(e){var o=e("core-js/library/modules/_export");o(o.S,"Object",{setPrototypeOf:e("core-js/library/modules/_set-proto").set})});
/*!core-js/library/fn/object/set-prototype-of*/
;define("core-js/library/fn/object/set-prototype-of",function(e,o,r){e("core-js/library/modules/es6.object.set-prototype-of"),r.exports=e("core-js/library/modules/_core").Object.setPrototypeOf});
/*!babel-runtime/core-js/object/set-prototype-of*/
;define("babel-runtime/core-js/object/set-prototype-of",function(e,o,t){t.exports={"default":e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}});
/*!core-js/library/modules/es6.object.create*/
;define("core-js/library/modules/es6.object.create",function(e){var r=e("core-js/library/modules/_export");r(r.S,"Object",{create:e("core-js/library/modules/_object-create")})});
/*!core-js/library/fn/object/create*/
;define("core-js/library/fn/object/create",function(e,r,c){e("core-js/library/modules/es6.object.create");var o=e("core-js/library/modules/_core").Object;c.exports=function(e,r){return o.create(e,r)}});
/*!babel-runtime/core-js/object/create*/
;define("babel-runtime/core-js/object/create",function(e,r,t){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}});
/*!babel-runtime/helpers/inherits*/
;define("babel-runtime/helpers/inherits",function(e,t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=e("babel-runtime/core-js/object/set-prototype-of"),n=o(r),u=e("babel-runtime/core-js/object/create"),l=o(u),f=e("babel-runtime/helpers/typeof"),i=o(f);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":i.default(t)));e.prototype=l.default(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?n.default(e,t):e.__proto__=t)}});
/*!@tencent/edu-report/index*/
;define("@tencent/edu-report/index",function(r,e,t){function n(r,e){if(A.table)try{if(window.localStorage&&1==window.localStorage.tdwFlag)for(var t=0,n=e.length;n>t;t++){for(var o={},i=0,a=r.length;a>i;i++)""!=e[t][i]&&(o[r[i]]=e[t][i]);A.table([o])}}catch(f){}}function o(){if(l)return l;var r=[],e=10,t=0;return l=function(){var n=t++%e;return r[n]||(r[n]=new Image)}}function i(r,e){if(r){var t=[];if(e)for(var n in e)e[n]&&t.push(n+"="+e[n]);var r=r+t.join("&");return o()().src=r}}var a=window.report||{},f={TABLE:"dc00149",TIMER:300,DELAY_REPORT:!1,DATA:{}},v=[],c=[];"object"!=typeof JSON&&(JSON={}),"function"!=typeof JSON.stringify&&(JSON.stringify=function(){});var u={TDW:"//ke.qq.com/cgi-bin/activity_platform/tdw/report?"},l=null,A=console||{},s=function(r,e,t,n,o){if(r&&e&&t){var a={table:r||f.TABLE,fields:encodeURIComponent(JSON.stringify(e)),datas:encodeURIComponent(JSON.stringify(t)),pr_ip:n||"obj3",pr_t:o||"ts",t:+new Date};i(u.TDW,a)}},g=Object.prototype.toString,p={},E=[],h=[],T=f.TABLE,d=null,w=function(r,e,t){if(!r)throw"params can not be null";e=e||f.DELAY_REPORT,T=t||T;var n;switch(g.call(r)){case"[object Array]":n=r;break;case"[object Object]":if(e){var o=[],i=[];for(var a in r)"obj3"!==a&&"ts"!==a&&(o.push(a),i.push(r[a]));return o=_(o,v),i=B([i],c,o,v),s(T,o,i,r.obj3,r.ts)}n=[r]}for(var a=0,u=n.length;u>a;a++){var l=n[a],A=[];h.push(A);for(var w in l){var S;w in p?(S=p[w],E[S]=w):(E.push(w),p[w]=S=E.length-1),A[S]=l[w]||""}}if(e)this.toreport();else{var b=this;!d&&f.TIMER&&(d=window.setTimeout(function(){b.toreport()},f.TIMER))}},S=function(){v=[],c=[];for(var r in f.DATA){v.push(r);var e=f.DATA[r];c.push(e||0===e?e:"")}};S();var _=function(r,e){for(var t=[],n=0;n<e.length;n++){for(var o=!1,i=0;i<r.length;i++)r[i]===e[n]&&(o=!0);o||t.push(e[n])}return r.concat(t)},B=function(r,e,t,n){for(var o={},i=0;i<n.length;i++)o[n[i]]=e[i];for(var a=0;a<r.length;a++)for(var f=r[a],v=0;v<t.length;v++)f[v]||0===f[v]||(f[v]=o[t[v]]||"");return r},b=0,R=33;a.toreport=function(){var r=h.length;if(r){var e=_(E,v),t=B(h,c,e,v),o=e.indexOf("module"),i=!0;if(o||0===o)for(var a=0;a<t.length;a++){var u=t[a][o];if(!u){i=!1;break}}else i=!1;if(i===!1&&d&&f.TIMER&&R>b){var l=this;return b++,window.clearTimeout(d),void(d=window.setTimeout(function(){l.toreport()},f.TIMER))}b=0,n(e,t),s(T,e,t),p={},E.length=h.length=0,T=f.TABLE,window.clearTimeout(d),d=null}},a.config=function(r,e,t){var n=(a.cookie&&a.cookie.getConfig?a.cookie.getConfig:{}).DATA||{},o=n.from||{};n._BASE&&n._BASE.ver7&&(r.ver7=n._BASE.ver7),n._BASE&&n._BASE.ver8&&(r.ver8=n._BASE.ver8),n._BASE&&n._BASE.ver5&&(r.ver5=n._BASE.ver5),n._BASE&&n._BASE.refer&&(r.refer=n._BASE.refer);var i={};for(var v in o){i=o[v];break}if(r.ver4=i.ver4||r.ver4,r.ver6=i.ver6||r.ver4,r)for(var c in r)f.DATA[c]=r[c];f.DELAY_REPORT=!!e,t&&(f.TABLE=t),S()},a.getReportData=function(r){return f.DATA[r]},a.tdw=w,t.exports=a});
/*!@tencent/im-monitor/index*/
;define("@tencent/im-monitor/index",function(t,n,e){var o={url:"//ke.qq.com/cgi-bin/activity_platform/report/report_vm",delay:100},r=[],i=function(t){return t&&"[object Array]"===Object.prototype.toString.call(t)},c=function(){r.length&&((new Image).src=o.url+"?monitors=["+r.join(",")+"]&_t="+(new Date).getTime(),r=[])},f=function(t){for(var n in t)t.hasOwnProperty(n)&&(o[n]=t[n])},u=null,a=function(t,n){if(t){if(i(t))for(var e in t)t[e]&&r.push(t[e]);else r.push(t);n?c():u=setTimeout(function(){c()},o.delay)}};e.exports={config:f,report:a}});
/*!@tencent/imweb-tcplayer/lib/config*/
;define("@tencent/imweb-tcplayer/lib/config",function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={badjsId:"1402",tdwBase:{opername:"Edu",module:"tcplayer"},monitor:{total:3182197,first:3182197,error:3182197,overtime:3182197,loadError:3182197,decodeError:3182197,envError:3182197,flashVideoSourceError:3182197,argumentError:3182197,otherError:3182197,buffered:3182197,stuck:3182197},timeout:10};e.default=o});
/*!@tencent/imweb-tcplayer/lib/index*/
;define("@tencent/imweb-tcplayer/lib/index",function(t,e){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){for(;t.firstChild;)t.removeChild(t.firstChild)}Object.defineProperty(e,"__esModule",{value:!0});var a=t("babel-runtime/core-js/object/assign"),s=i(a),o=t("babel-runtime/helpers/classCallCheck"),n=i(o),h=t("babel-runtime/helpers/createClass"),l=i(h),c=t("@tencent/edu-report/index"),u=i(c),d=t("@tencent/im-monitor/index"),m=i(d),p=t("@tencent/imweb-tcplayer/lib/config"),f=i(p),y=window.BJ_REPORT||{init:function(){},info:function(){}},v=1e3,T=3,k=600,b=function(){},S="UNKNOWN";window.navigator&&(S=navigator.userAgent);var w=S.match(/iPhone|iPod|Android|iPad/i),E={FIRST_DATA:{type:"firstData"},PLAY_STUCK:{type:"playStuck"},NO_TCPLAYER:{type:"initError",reason:"can not find TcPlayer!"},OVER_TIME:{type:"overtime",reason:"the video loading timeout"},NO_STREAM:{type:"noStream",reason:"can not get no stream"}},g=function(){function t(e){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.default(this,t),this.id=e,this.roomid=r.roomid,this.containElement=document.getElementById(e),this.live=r.live,this.type=this.live?"live":"record",this.report=s.default({},f.default,r.report),this.rawListener=r.listener||b,this.firstDataTime=0,this.firstError=!1,this.opts=s.default(r,{listener:function(t){return i.emit(t)}}),this.initReport(),window.TcPlayer?(this.tcplayer=new window.TcPlayer(this.id,this.opts),this.getTcplayerInfo()):this.emit(E.NO_TCPLAYER)}return l.default(t,[{key:"initReport",value:function(){var t=this.report,e=t.monitor,i=t.tdwBase,r=t.badjsId;this.timeoutTimer=null,this.checkStreamTimer=null,this.startLoadTime=0,this.lastTimeupdate=0,this.playingDuration=0,this.monitorMap=e||{},this.tdwBase=s.default({ver1:this.type,ver2:S.toLowerCase(),ver3:w?"H5":"PC",ver4:this.roomid},i),this.badjsId=r,y.init({id:this.badjsId})}},{key:"tdw",value:function(t){var e=s.default({},this.tdwBase,t);u.default.tdw(e)}},{key:"getTcplayerInfo",value:function(){if(this.tcplayer){var t=this.tcplayer,e=t.options,i=t.video;this.playUrl=e.src,this.isFlash=e.flash,this.videoElement=i&&i.el,this.tdwBase=s.default(this.tdwBase,{obj3:this.playUrl,obj4:this.isFlash})}}},{key:"reportStartLoad",value:function(){this.reportStartFlag||(this.reportStartFlag=!0,this.tdw({action:"startLoad"}),m.default.report(this.monitorMap.total))}},{key:"reportOverTime",value:function(){y.info("play ["+this.playUrl+"]["+this.type+"] is overtime"),this.tdw({action:"overtime"}),m.default.report(this.monitorMap.overtime)}},{key:"reportFirstData",value:function(){m.default.report(this.monitorMap.first),this.tdw({action:"firstload",obj1:this.firstDataTime})}},{key:"reportStuck",value:function(t){this.tdw({action:"playStuck",obj1:t,obj2:this.playingDuration}),m.default.report(this.monitorMap.stuck)}},{key:"reportError",value:function(t,e){var i=e.code,r=e.reason;this.tdw({action:t,obj1:i,obj2:r}),m.default.report(this.monitorMap[t])}},{key:"checkStream",value:function(){var t=this;this.checkStreamTimer&&clearInterval(this.checkStreamTimer),this.checkStreamCount=0,this.checkStreamTimer=setInterval(function(){t.checkStreamCount+=1,t.checkStreamCount>=T&&(t.emit(E.NO_STREAM),t.clearCheckStreamTimer())},v)}},{key:"clearCheckStreamTimer",value:function(){this.checkStreamTimer&&(clearInterval(this.checkStreamTimer),this.checkStreamTimer=null)}},{key:"onError",value:function(t){var e=t.detail||{},i=e.code,r=e.reason,a=void 0;switch(i){case 1:case 2:case 1001:a="loadError";break;case 3:a="decodeError";break;case 4:case 5:a="envError";break;case 11:a="argumentError";break;case 1002:case 2032:a="flashVideoSourceError";break;default:a="otherError"}this.firstError||(this.firstError=!0,this.reportError(a,e),this.reportError("error",e),y.info("play Error["+i+"]:"+r))}},{key:"emit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.type,r=e.ts;switch(i){case"error":this.onError(e);break;case"load":this.reportStartLoad(),this.startLoadTime=r,this.clearTimer(),this.timeoutTimer=setTimeout(function(){t.reportOverTime(),t.emit(E.OVER_TIME)},1e3*this.report.timeout);break;case"loadedmetadata":case"loadeddata":this.clearTimer(),this.loadeddataReported||(this.loadeddataReported=!0,this.tdw({action:"loadedmetadata",obj1:r-this.startLoadTime}));break;case"playing":this.live&&this.checkStream();break;case"timeupdate":if(this.live&&this.checkStream(),this.lastTimeupdate){var a=r-this.lastTimeupdate;this.live&&a>k&&(this.reportStuck(a),this.emit(E.PLAY_STUCK)),this.playingDuration+=a,this.lastTimeupdate=r}this.firstDataTime||(this.firstDataTime=r-this.startLoadTime,this.reportFirstData(),this.emit(E.FIRST_DATA));break;case"paused":this.live&&this.clearCheckStreamTimer();case"seeking":this.resetTime()}this.rawListener(e)}},{key:"changeVideo",value:function(t){this.initReport(),this.tcplayer.load(t),this.tcplayer.play()}},{key:"play",value:function(){this.tcplayer&&this.tcplayer.play()}},{key:"pause",value:function(){this.tcplayer&&this.tcplayer.pause()}},{key:"resetTime",value:function(){this.lastTimeupdate=Date.now(),this.playingDuration=0}},{key:"clearTimer",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null,this.clearCheckStreamTimer()}},{key:"destroy",value:function(){this.tcplayer&&(this.clearTimer(),this.tcplayer.destroy(),r(this.containElement))}}]),t}();window.IMWebTcplayer=g,e.default=g});
/*!@tencent/imweb-tcplayer/index*/
;define("@tencent/imweb-tcplayer/index",function(e,n,t){t.exports=e("@tencent/imweb-tcplayer/lib/index")});
/*!events/events*/
;define("events/events",function(e,t,n){"use strict";function r(e){console&&console.warn}function i(){i.init.call(this)}function o(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function s(e,t,n,i){var s,u,f;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(u=e._events,void 0===u?(u=e._events=Object.create(null),e._eventsCount=0):(void 0!==u.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),u=e._events),f=u[t]),void 0===f)f=u[t]=n,++e._eventsCount;else if("function"==typeof f?f=u[t]=i?[n,f]:[f,n]:i?f.unshift(n):f.push(n),s=o(e),s>0&&f.length>s&&!f.warned){f.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=t,p.count=f.length,r(p)}return e}function u(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,m(this.listener,this.target,e))}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?c(i):a(i,i.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function a(e,t){for(var n=new Array(t),r=0;t>r;++r)n[r]=e[r];return n}function h(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function c(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var l,y="object"==typeof Reflect?Reflect:null,m=y&&"function"==typeof y.apply?y.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};l=y&&"function"==typeof y.ownKeys?y.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var d=Number.isNaN||function(e){return e!==e};n.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var g=10;Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(e){if("number"!=typeof e||0>e||d(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");g=e}}),i.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||d(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return o(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)m(u,this,t);else for(var f=u.length,p=a(u,f),n=0;f>n;++n)m(p[n],this,t);return!0},i.prototype.addListener=function(e,t){return s(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return s(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,f(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,f(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(0>i)return this;0===i?n.shift():h(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"==typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return p(this,e,!0)},i.prototype.rawListeners=function(e){return p(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},i.prototype.listenerCount=v,i.prototype.eventNames=function(){return this._eventsCount>0?l(this._events):[]}});
/*!regenerator-runtime/runtime*/
;define("regenerator-runtime/runtime",function(t,r,e){!function(t){"use strict";function r(t,r,e,n){var i=r&&r.prototype instanceof o?r:o,a=Object.create(i.prototype),c=new p(n||[]);return a._invoke=h(t,e,c),a}function n(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(n){return{type:"throw",arg:n}}}function o(){}function i(){}function a(){}function c(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function u(t){function r(e,o,i,a){var c=n(t[e],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&m.call(h,"__await")?Promise.resolve(h.__await).then(function(t){r("next",t,i,a)},function(t){r("throw",t,i,a)}):Promise.resolve(h).then(function(t){u.value=t,i(u)},a)}a(c.arg)}function e(t,e){function n(){return new Promise(function(n,o){r(t,e,n,o)})}return o=o?o.then(n,n):n()}var o;this._invoke=e}function h(t,r,e){var o=j;return function(i,a){if(o===k)throw new Error("Generator is already running");if(o===G){if("throw"===i)throw a;return v()}for(e.method=i,e.arg=a;;){var c=e.delegate;if(c){var u=f(c,e);if(u){if(u===N)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(o===j)throw o=G,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);o=k;var h=n(t,r,e);if("normal"===h.type){if(o=e.done?G:O,h.arg===N)continue;return{value:h.arg,done:e.done}}"throw"===h.type&&(o=G,e.method="throw",e.arg=h.arg)}}}function f(t,r){var e=t.iterator[r.method];if(e===d){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=d,f(t,r),"throw"===r.method))return N;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return N}var o=n(e,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,N;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=d),r.delegate=null,N):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,N)}function s(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function l(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(s,this),this.reset(!0)}function y(t){if(t){var r=t[L];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function o(){for(;++e<t.length;)if(m.call(t,e))return o.value=t[e],o.done=!1,o;return o.value=d,o.done=!0,o};return n.next=n}}return{next:v}}function v(){return{value:d,done:!0}}var d,g=Object.prototype,m=g.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},L=w.iterator||"@@iterator",x=w.asyncIterator||"@@asyncIterator",E=w.toStringTag||"@@toStringTag",b="object"==typeof e,_=t.regeneratorRuntime;if(_)return void(b&&(e.exports=_));_=t.regeneratorRuntime=b?e.exports:{},_.wrap=r;var j="suspendedStart",O="suspendedYield",k="executing",G="completed",N={},P={};P[L]=function(){return this};var F=Object.getPrototypeOf,S=F&&F(F(y([])));S&&S!==g&&m.call(S,L)&&(P=S);var T=a.prototype=o.prototype=Object.create(P);i.prototype=T.constructor=a,a.constructor=i,a[E]=i.displayName="GeneratorFunction",_.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return r?r===i||"GeneratorFunction"===(r.displayName||r.name):!1},_.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,E in t||(t[E]="GeneratorFunction")),t.prototype=Object.create(T),t},_.awrap=function(t){return{__await:t}},c(u.prototype),u.prototype[x]=function(){return this},_.AsyncIterator=u,_.async=function(t,e,n,o){var i=new u(r(t,e,n,o));return _.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},c(T),T[E]="Generator",T[L]=function(){return this},T.toString=function(){return"[object Generator]"},_.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function n(){for(;r.length;){var e=r.pop();if(e in t)return n.value=e,n.done=!1,n}return n.done=!0,n}},_.values=y,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(l),!t)for(var r in this)"t"===r.charAt(0)&&m.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=d)},stop:function(){this.done=!0;var t=this.tryEntries[0],r=t.completion;if("throw"===r.type)throw r.arg;return this.rval},dispatchException:function(t){function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=d),!!n}if(this.done)throw t;for(var e=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),c=m.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&m.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o.finallyLoc,N):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),N},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),l(e),N}},"catch":function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;l(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:y(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=d),N}}}(function(){return this}()||Function("return this")())});
/*!regenerator-runtime/runtime-module*/
;define("regenerator-runtime/runtime-module",function(e,r,t){var n=function(){return this}()||Function("return this")(),i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=e("regenerator-runtime/runtime"),i)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(u){n.regeneratorRuntime=void 0}});
/*!babel-runtime/regenerator/index*/
;define("babel-runtime/regenerator/index",function(e,r,n){n.exports=e("regenerator-runtime/runtime-module")});
/*!core-js/library/modules/_classof*/
;define("core-js/library/modules/_classof",function(r,e,n){var t=r("core-js/library/modules/_cof"),o=r("core-js/library/modules/_wks")("toStringTag"),u="Arguments"==t(function(){return arguments}()),c=function(r,e){try{return r[e]}catch(n){}};n.exports=function(r){var e,n,s;return void 0===r?"Undefined":null===r?"Null":"string"==typeof(n=c(e=Object(r),o))?n:u?t(e):"Object"==(s=t(e))&&"function"==typeof e.callee?"Arguments":s}});
/*!core-js/library/modules/_an-instance*/
;define("core-js/library/modules/_an-instance",function(n,i,o){o.exports=function(n,i,o,r){if(!(n instanceof i)||void 0!==r&&r in n)throw TypeError(o+": incorrect invocation!");return n}});
/*!core-js/library/modules/_iter-call*/
;define("core-js/library/modules/_iter-call",function(r,e,o){var t=r("core-js/library/modules/_an-object");o.exports=function(r,e,o,c){try{return c?e(t(o)[0],o[1]):e(o)}catch(a){var l=r["return"];throw void 0!==l&&t(l.call(r)),a}}});
/*!core-js/library/modules/_is-array-iter*/
;define("core-js/library/modules/_is-array-iter",function(r,e,o){var i=r("core-js/library/modules/_iterators"),t=r("core-js/library/modules/_wks")("iterator"),a=Array.prototype;o.exports=function(r){return void 0!==r&&(i.Array===r||a[t]===r)}});
/*!core-js/library/modules/core.get-iterator-method*/
;define("core-js/library/modules/core.get-iterator-method",function(r,e,o){var t=r("core-js/library/modules/_classof"),s=r("core-js/library/modules/_wks")("iterator"),i=r("core-js/library/modules/_iterators");o.exports=r("core-js/library/modules/_core").getIteratorMethod=function(r){return void 0!=r?r[s]||r["@@iterator"]||i[t(r)]:void 0}});
/*!core-js/library/modules/_for-of*/
;define("core-js/library/modules/_for-of",function(r,e,o){var t=r("core-js/library/modules/_ctx"),l=r("core-js/library/modules/_iter-call"),i=r("core-js/library/modules/_is-array-iter"),n=r("core-js/library/modules/_an-object"),s=r("core-js/library/modules/_to-length"),a=r("core-js/library/modules/core.get-iterator-method"),c={},u={},e=o.exports=function(r,e,o,f,d){var y,b,j,m,_=d?function(){return r}:a(r),h=t(o,f,e?2:1),g=0;if("function"!=typeof _)throw TypeError(r+" is not iterable!");if(i(_)){for(y=s(r.length);y>g;g++)if(m=e?h(n(b=r[g])[0],b[1]):h(r[g]),m===c||m===u)return m}else for(j=_.call(r);!(b=j.next()).done;)if(m=l(j,h,b.value,e),m===c||m===u)return m};e.BREAK=c,e.RETURN=u});
/*!core-js/library/modules/_species-constructor*/
;define("core-js/library/modules/_species-constructor",function(r,o,e){var s=r("core-js/library/modules/_an-object"),c=r("core-js/library/modules/_a-function"),i=r("core-js/library/modules/_wks")("species");e.exports=function(r,o){var e,n=s(r).constructor;return void 0===n||void 0==(e=s(n)[i])?o:c(e)}});
/*!core-js/library/modules/_invoke*/
;define("core-js/library/modules/_invoke",function(e,r,c){c.exports=function(e,r,c){var l=void 0===c;switch(r.length){case 0:return l?e():e.call(c);case 1:return l?e(r[0]):e.call(c,r[0]);case 2:return l?e(r[0],r[1]):e.call(c,r[0],r[1]);case 3:return l?e(r[0],r[1],r[2]):e.call(c,r[0],r[1],r[2]);case 4:return l?e(r[0],r[1],r[2],r[3]):e.call(c,r[0],r[1],r[2],r[3])}return e.apply(c,r)}});
/*!core-js/library/modules/_task*/
;define("core-js/library/modules/_task",function(e,t,n){var o,s,r,i=e("core-js/library/modules/_ctx"),a=e("core-js/library/modules/_invoke"),c=e("core-js/library/modules/_html"),l=e("core-js/library/modules/_dom-create"),u=e("core-js/library/modules/_global"),d=u.process,f=u.setImmediate,m=u.clearImmediate,p=u.MessageChannel,g=u.Dispatch,h=0,y={},b="onreadystatechange",v=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},j=function(e){v.call(e.data)};f&&m||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++h]=function(){a("function"==typeof e?e:Function(e),t)},o(h),h},m=function(e){delete y[e]},"process"==e("core-js/library/modules/_cof")(d)?o=function(e){d.nextTick(i(v,e,1))}:g&&g.now?o=function(e){g.now(i(v,e,1))}:p?(s=new p,r=s.port2,s.port1.onmessage=j,o=i(r.postMessage,r,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(o=function(e){u.postMessage(e+"","*")},u.addEventListener("message",j,!1)):o=b in l("script")?function(e){c.appendChild(l("script"))[b]=function(){c.removeChild(this),v.call(e)}}:function(e){setTimeout(i(v,e,1),0)}),n.exports={set:f,clear:m}});
/*!core-js/library/modules/_microtask*/
;define("core-js/library/modules/_microtask",function(e,r,o){var t=e("core-js/library/modules/_global"),n=e("core-js/library/modules/_task").set,a=t.MutationObserver||t.WebKitMutationObserver,i=t.process,s=t.Promise,c="process"==e("core-js/library/modules/_cof")(i);o.exports=function(){var e,r,o,l=function(){var t,n;for(c&&(t=i.domain)&&t.exit();e;){n=e.fn,e=e.next;try{n()}catch(a){throw e?o():r=void 0,a}}r=void 0,t&&t.enter()};if(c)o=function(){i.nextTick(l)};else if(!a||t.navigator&&t.navigator.standalone)if(s&&s.resolve){var v=s.resolve(void 0);o=function(){v.then(l)}}else o=function(){n.call(t,l)};else{var f=!0,u=document.createTextNode("");new a(l).observe(u,{characterData:!0}),o=function(){u.data=f=!f}}return function(t){var n={fn:t,next:void 0};r&&(r.next=n),e||(e=n,o()),r=n}}});
/*!core-js/library/modules/_new-promise-capability*/
;define("core-js/library/modules/_new-promise-capability",function(r,e,i){"use strict";function o(r){var e,i;this.promise=new r(function(r,o){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=r,i=o}),this.resolve=t(e),this.reject=t(i)}var t=r("core-js/library/modules/_a-function");i.exports.f=function(r){return new o(r)}});
/*!core-js/library/modules/_perform*/
;define("core-js/library/modules/_perform",function(r,e,n){n.exports=function(r){try{return{e:!1,v:r()}}catch(e){return{e:!0,v:e}}}});
/*!core-js/library/modules/_user-agent*/
;define("core-js/library/modules/_user-agent",function(e,r,o){var a=e("core-js/library/modules/_global"),s=a.navigator;o.exports=s&&s.userAgent||""});
/*!core-js/library/modules/_promise-resolve*/
;define("core-js/library/modules/_promise-resolve",function(r,e,o){var s=r("core-js/library/modules/_an-object"),i=r("core-js/library/modules/_is-object"),c=r("core-js/library/modules/_new-promise-capability");o.exports=function(r,e){if(s(r),i(e)&&e.constructor===r)return e;var o=c.f(r),l=o.resolve;return l(e),o.promise}});
/*!core-js/library/modules/_redefine-all*/
;define("core-js/library/modules/_redefine-all",function(r,e,i){var n=r("core-js/library/modules/_hide");i.exports=function(r,e,i){for(var o in e)i&&r[o]?r[o]=e[o]:n(r,o,e[o]);return r}});
/*!core-js/library/modules/_set-species*/
;define("core-js/library/modules/_set-species",function(e,r,s){"use strict";var o=e("core-js/library/modules/_global"),c=e("core-js/library/modules/_core"),i=e("core-js/library/modules/_object-dp"),l=e("core-js/library/modules/_descriptors"),t=e("core-js/library/modules/_wks")("species");s.exports=function(e){var r="function"==typeof c[e]?c[e]:o[e];l&&r&&!r[t]&&i.f(r,t,{configurable:!0,get:function(){return this}})}});
/*!core-js/library/modules/_iter-detect*/
;define("core-js/library/modules/_iter-detect",function(r,t,n){var e=r("core-js/library/modules/_wks")("iterator"),o=!1;try{var c=[7][e]();c["return"]=function(){o=!0},Array.from(c,function(){throw 2})}catch(u){}n.exports=function(r,t){if(!t&&!o)return!1;var n=!1;try{var c=[7],u=c[e]();u.next=function(){return{done:n=!0}},c[e]=function(){return u},r(c)}catch(i){}return n}});
/*!core-js/library/modules/es6.promise*/
;define("core-js/library/modules/es6.promise",function(e){"use strict";var r,o,i,t,s=e("core-js/library/modules/_library"),n=e("core-js/library/modules/_global"),c=e("core-js/library/modules/_ctx"),l=e("core-js/library/modules/_classof"),a=e("core-js/library/modules/_export"),u=e("core-js/library/modules/_is-object"),_=e("core-js/library/modules/_a-function"),h=e("core-js/library/modules/_an-instance"),f=e("core-js/library/modules/_for-of"),d=e("core-js/library/modules/_species-constructor"),m=e("core-js/library/modules/_task").set,v=e("core-js/library/modules/_microtask")(),y=e("core-js/library/modules/_new-promise-capability"),j=e("core-js/library/modules/_perform"),p=e("core-js/library/modules/_user-agent"),b=e("core-js/library/modules/_promise-resolve"),w="Promise",g=n.TypeError,x=n.process,k=x&&x.versions,P=k&&k.v8||"",F=n[w],S="process"==l(x),E=function(){},O=o=y.f,R=!!function(){try{var r=F.resolve(1),o=(r.constructor={})[e("core-js/library/modules/_wks")("species")]=function(e){e(E,E)};return(S||"function"==typeof PromiseRejectionEvent)&&r.then(E)instanceof o&&0!==P.indexOf("6.6")&&-1===p.indexOf("Chrome/66")}catch(i){}}(),C=function(e){var r;return u(e)&&"function"==typeof(r=e.then)?r:!1},G=function(e,r){if(!e._n){e._n=!0;var o=e._c;v(function(){for(var i=e._v,t=1==e._s,s=0,n=function(r){var o,s,n,c=t?r.ok:r.fail,l=r.resolve,a=r.reject,u=r.domain;try{c?(t||(2==e._h&&U(e),e._h=1),c===!0?o=i:(u&&u.enter(),o=c(i),u&&(u.exit(),n=!0)),o===r.promise?a(g("Promise-chain cycle")):(s=C(o))?s.call(o,l,a):l(o)):a(i)}catch(_){u&&!n&&u.exit(),a(_)}};o.length>s;)n(o[s++]);e._c=[],e._n=!1,r&&!e._h&&H(e)})}},H=function(e){m.call(n,function(){var r,o,i,t=e._v,s=T(e);if(s&&(r=j(function(){S?x.emit("unhandledRejection",t,e):(o=n.onunhandledrejection)?o({promise:e,reason:t}):(i=n.console)&&i.error&&i.error("Unhandled promise rejection",t)}),e._h=S||T(e)?2:1),e._a=void 0,s&&r.e)throw r.v})},T=function(e){return 1!==e._h&&0===(e._a||e._c).length},U=function(e){m.call(n,function(){var r;S?x.emit("rejectionHandled",e):(r=n.onrejectionhandled)&&r({promise:e,reason:e._v})})},W=function(e){var r=this;r._d||(r._d=!0,r=r._w||r,r._v=e,r._s=2,r._a||(r._a=r._c.slice()),G(r,!0))},q=function(e){var r,o=this;if(!o._d){o._d=!0,o=o._w||o;try{if(o===e)throw g("Promise can't be resolved itself");(r=C(e))?v(function(){var i={_w:o,_d:!1};try{r.call(e,c(q,i,1),c(W,i,1))}catch(t){W.call(i,t)}}):(o._v=e,o._s=1,G(o,!1))}catch(i){W.call({_w:o,_d:!1},i)}}};R||(F=function(e){h(this,F,w,"_h"),_(e),r.call(this);try{e(c(q,this,1),c(W,this,1))}catch(o){W.call(this,o)}},r=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=e("core-js/library/modules/_redefine-all")(F.prototype,{then:function(e,r){var o=O(d(this,F));return o.ok="function"==typeof e?e:!0,o.fail="function"==typeof r&&r,o.domain=S?x.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&G(this,!1),o.promise},"catch":function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=c(q,e,1),this.reject=c(W,e,1)},y.f=O=function(e){return e===F||e===t?new i(e):o(e)}),a(a.G+a.W+a.F*!R,{Promise:F}),e("core-js/library/modules/_set-to-string-tag")(F,w),e("core-js/library/modules/_set-species")(w),t=e("core-js/library/modules/_core")[w],a(a.S+a.F*!R,w,{reject:function(e){var r=O(this),o=r.reject;return o(e),r.promise}}),a(a.S+a.F*(s||!R),w,{resolve:function(e){return b(s&&this===t?F:this,e)}}),a(a.S+a.F*!(R&&e("core-js/library/modules/_iter-detect")(function(e){F.all(e)["catch"](E)})),w,{all:function(e){var r=this,o=O(r),i=o.resolve,t=o.reject,s=j(function(){var o=[],s=0,n=1;f(e,!1,function(e){var c=s++,l=!1;o.push(void 0),n++,r.resolve(e).then(function(e){l||(l=!0,o[c]=e,--n||i(o))},t)}),--n||i(o)});return s.e&&t(s.v),o.promise},race:function(e){var r=this,o=O(r),i=o.reject,t=j(function(){f(e,!1,function(e){r.resolve(e).then(o.resolve,i)})});return t.e&&i(t.v),o.promise}})});
/*!core-js/library/modules/es7.promise.finally*/
;define("core-js/library/modules/es7.promise.finally",function(r){"use strict";var e=r("core-js/library/modules/_export"),o=r("core-js/library/modules/_core"),s=r("core-js/library/modules/_global"),i=r("core-js/library/modules/_species-constructor"),n=r("core-js/library/modules/_promise-resolve");e(e.P+e.R,"Promise",{"finally":function(r){var e=i(this,o.Promise||s.Promise),t="function"==typeof r;return this.then(t?function(o){return n(e,r()).then(function(){return o})}:r,t?function(o){return n(e,r()).then(function(){throw o})}:r)}})});
/*!core-js/library/modules/es7.promise.try*/
;define("core-js/library/modules/es7.promise.try",function(r){"use strict";var e=r("core-js/library/modules/_export"),o=r("core-js/library/modules/_new-promise-capability"),s=r("core-js/library/modules/_perform");e(e.S,"Promise",{"try":function(r){var e=o.f(this),i=s(r);return(i.e?e.reject:e.resolve)(i.v),e.promise}})});
/*!core-js/library/fn/promise*/
;define("core-js/library/fn/promise",function(r,e,s){r("core-js/library/modules/es6.object.to-string"),r("core-js/library/modules/es6.string.iterator"),r("core-js/library/modules/web.dom.iterable"),r("core-js/library/modules/es6.promise"),r("core-js/library/modules/es7.promise.finally"),r("core-js/library/modules/es7.promise.try"),s.exports=r("core-js/library/modules/_core").Promise});
/*!babel-runtime/core-js/promise*/
;define("babel-runtime/core-js/promise",function(e,r,o){o.exports={"default":e("core-js/library/fn/promise"),__esModule:!0}});
/*!babel-runtime/helpers/asyncToGenerator*/
;define("babel-runtime/helpers/asyncToGenerator",function(e,n){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var r=e("babel-runtime/core-js/promise"),u=t(r);n.default=function(e){return function(){var n=e.apply(this,arguments);return new u.default(function(e,t){function r(o,i){try{var a=n[o](i),c=a.value}catch(f){return void t(f)}return a.done?void e(c):u.default.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}});
/*!@tencent/im-bkn/index*/
;define("@tencent/im-bkn/index",function(n,e,t){function o(n){if(!n)return"";for(var e=5381,t=0,o=n.length;o>t;++t)e+=(e<<5)+n.charAt(t).charCodeAt();return 2147483647&e}function r(){return u("p_lskey")||u("p_skey")||u("skey")}function u(n){if(f)return"";var e=document.cookie.match(new RegExp("(^| )"+n+"=([^;]*)(;|$)"));return e?decodeURIComponent(e[2]):""}function i(){var n=0==u("uid_type"),e=1005==u("uid_type");return e?u("token"):n?r():u("uid_a2")||r()}function c(){return o(i())}var d="object"==typeof window&&window&&"undefined"!=typeof document,f=!d;t.exports=c});
/*!@tencent/im-cookie/src/index*/
;define("@tencent/im-cookie/src/index",function(e,t,n){var t={get:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return t?decodeURIComponent(t[2]):""},set:function(e,t,n,i,o){var u=new Date;u.setTime(u.getTime()+(o?36e5*o:2592e6)),document.cookie=e+"="+t+"; expires="+u.toGMTString()+"; path="+(i?i:"/")+"; "+(n?"domain="+n+";":"")},setSession:function(e,t,n,i){document.cookie=e+"="+t+"; path="+(i?i:"/")+"; "+(n?"domain="+n+";":"")},del:function(e,t,n){document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; path="+(n?n:"/")+"; "+(t?"domain="+t+";":"")},clear:function(){var e=document.cookie.match(new RegExp("([^ ;][^;]*)(?=(=[^;]*)(;|$))","gi"));for(var t in e)document.cookie=e[t]+"=;expires=Mon, 26 Jul 1997 05:00:00 GMT; path=/; "},uin:function(){var e;return 2==this.get("uid_type")?this.get("uid_uin")||null:(e=this.get("p_luin")||this.get("p_uin")||this.get("uin")||this.get("pt2gguin")||this.get("adid"),e=e?parseInt(e.replace(/[^\d]/g,""),10):null,e=e||parseInt(this.get("uin_cookie"),10)||null)},realUin:function(){var e;return 2==this.get("uid_type")?this.get("uid_uin")||null:(e=this.get("p_luin")||this.get("p_uin")||this.get("uin"),e=e?parseInt(e.replace(/[^\d]/g,""),10):null,e=e||parseInt(this.get("uin_cookie"),10)||null)}};n.exports=t});
/*!@tencent/im-cookie/index*/
;define("@tencent/im-cookie/index",function(e,n,i){i.exports=e("@tencent/im-cookie/src/index")});
/*!@tencent/ke_fetch/mm-report*/
;define("@tencent/ke_fetch/mm-report",function(n,e,t){function o(){return/\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(l)?"ios":l.indexOf("android")>-1||l.indexOf("adr")>-1?"android":"pc"}function r(n){n=n||v;var e=n.length;e>10&&(e=10);var t=n.splice(0,e);if(0!=t.length){var o=g+"&uin="+t[0].uin+"&apn="+(t[0].apn||f.apn);o+="&key=cgi,type,code,time";for(var r=["cgi","type","code","time"],a=0;a<r.length;a++)for(var i=0;i<t.length;i++){var c=t[i];o+="&"+(i+1)+"_"+(a+1)+"="+c[r[a]]}o+="&ignoreRandom="+Math.random();var p=new Image;p.src=o}}function a(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var o in t)n[o]=t[o]}return n}function i(){for(var n=[],e=["domain","appid","platform"],t=0;t<e.length;t++){var o=e[t];n.push(o+"="+f[o])}g=m+"?"+n.join("&")}function c(n){f.platform=o(),f=a({},f,n),i()}function p(n){var e=n.delay;return 0===e||n.apn!==f.apn?(r([n]),!0):!1}function u(n,e,t,o,i){h&&clearTimeout(h);var c=a({},f,i);c.cgi=encodeURIComponent(n),c.code=e,c.time=t,c.uin=o,c.type=0===e?1:/^[4|5][0-9]{2}$/.test(e)?2:3,p(c)||(v.push(c),h=setTimeout(r,s))}var f={appid:10028,platform:"pc",domain:"ke.qq.com",rate:1,apn:""},d=location.protocol,m=d+"//report.huatuo.qq.com/code.cgi",g=m,l=navigator.userAgent.toLowerCase(),v=[],s=2e3,h=null;c(),t.exports={config:c,report:u}});
/*!@tencent/ke_fetch/index*/
;define("@tencent/ke_fetch/index",function(e,r,t){"use strict";function a(e){var r=[];for(var t in e)e.hasOwnProperty(t)&&r.push(t+"="+encodeURIComponent(e[t]));return r.join("&")}function n(e){var r={};for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];null!=a&&""!==a&&(r[t]=a)}return r}function c(e,r){var r=r||0,e=e||"";(new Image).src="//badjs.qq.com/badjs?id=1162&uin="+i.uin()+"&from="+encodeURIComponent(location.href)+"&msg[0]="+encodeURIComponent(p+e)+"&ext[0]=%7B%22msid%22%3A"+r+"%7D&level[0]=1&count=1&_t="+(new Date-0)}function o(e,r){var t=e,i={method:"GET",credentials:"same-origin",timeout:1e4,tAlias:"t"};Object.assign(i,r),null!=i.body&&i.body instanceof Object&&(i.body=n(i.body));var p=s(),m=Math.random().toFixed(4);t.indexOf("?")<0&&(t+="?");var h=i.method;"GET"!==h&&"HEAD"!==h?(null==i.headers&&(i.headers={}),null==i.headers["Content-Type"]&&(i.headers["Content-Type"]=d,null!=i.body&&i.body.constructor===Object&&(i.body=a(i.body)))):null!=i.data&&i.data.constructor===Object&&(t+=a(i.data));var b="bkn="+p+"&"+i.tAlias+"="+m;"?"!==t.slice(-1)&&(t+="&"),t+=b;var y=e.split("?")[0],v=e.split("?")[1];return new Promise(function(a,n){var s,d=new Date;fetch(t,i).then(function(e){s=new Date;var r=e.status;return e.ok?e.json():(r>=400&&500>r?c("status: "+r+", "+e.statusText,2579548):r>=500&&600>r?c("status: "+r+", "+e.statusText,2579549):c("非4xx, 5xx状态码, status: "+r+", "+e.statusText,""),Promise.reject(e))}).then(function(t){var i,p,m=t.retcode;if("number"==typeof m&&0!==m){switch(m){case 111:case-1001:case 1e5:case 100021:var h=top.window.LoginProxy;"object"==typeof h?h.show({succ:function(){o(e,r).then(function(e){a(e)}).catch(function(e){n({type:f,err:e})})},err:function(e){n({type:l,err:e})},close:function(){n({type:l})}}):n({type:f,err:{url:e,options:r,data:t,retcode:t.retcode,msg:t.msg}}),i="CGI Error , Need Login,  req:"+y+", ec:"+m,p=403855;break;case 100001:i="CGI Error , Param Error:"+v+",  req:"+y+", ec:"+m,p=403858;break;case 100003:i="CGI Error , Internal Error ,  req:"+y+", ec:"+m,p=403857;break;case 99999:i="CGI Error , Need Show VerifyCode Error ,  req:"+y+", ec:"+m,p=0;break;case 110405:case 101402:case 101403:case 101404:case 101405:case 101406:case 102404:case 103404:case 106401:case 106402:case 106403:case 106404:case 106405:case 106406:case 106407:case 106409:case 106410:case 106411:case 106412:case 106413:case 106415:case 106416:case 106425:case 106427:case 106435:case 106457:case 110403:case 109113:case 109122:case 106507:i="CGI Error , Bussines Error , req:"+y+", ec:"+m,p=408941;break;default:i="CGI Error , Other Error , req:"+y+", ec:"+m,p=403859}n({type:f,err:{url:e,options:r,data:t,retcode:t.retcode,msg:t.msg}}),c(i,p)}else"number"==typeof m&&a(t);var b=m,w=s-d;u.report(y,b,w,"")}).catch(function(t){s||(s=new Date,c("fetch_error:"+t.message,"")),n({type:f,err:{url:e,options:r,msg:t}});var a=t.status||-1e3,o=s-d;u.report(y,a,o,"")})})}var s=e("@tencent/im-bkn/index"),i=e("@tencent/im-cookie/index"),u=e("@tencent/ke_fetch/mm-report"),d="application/x-www-form-urlencoded; charset=UTF-8",f="ke_fetch",l="ptlogin",p="ke_fetch: ";t.exports=o});
/*!load-script/index*/
;define("load-script/index",function(t,n,e){function o(t,n){for(var e in n)t.setAttribute(e,n[e])}function a(t,n){t.onload=function(){this.onerror=this.onload=null,n(null,t)},t.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+this.src),t)}}function r(t,n){t.onreadystatechange=function(){("complete"==this.readyState||"loaded"==this.readyState)&&(this.onreadystatechange=null,n(null,t))}}e.exports=function(t,n,e){var i=document.head||document.getElementsByTagName("head")[0],c=document.createElement("script");"function"==typeof n&&(e=n,n={}),n=n||{},e=e||function(){},c.type=n.type||"text/javascript",c.charset=n.charset||"utf8",c.async="async"in n?!!n.async:!0,c.src=t,n.attrs&&o(c,n.attrs),n.text&&(c.text=""+n.text);var s="onload"in c?a:r;s(c,e),c.onload||a(c,e),i.appendChild(c)}});
/*!tcplayer_lite/util*/
;define("tcplayer_lite/util",function(e,n){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function r(){var e="undefined"!=typeof document?window.navigator.userAgent:window.request.headers["user-agent"];return e=e.toLowerCase()}function u(){return-1!==r().indexOf("educationapp")||-1!==r().indexOf("eduapp")}function i(){return-1!==r().indexOf("micromessenger")}function o(e){if("undefined"==typeof document)return window.request.cookies[e];var n=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),t=document.cookie.match(n);return t?decodeURIComponent(t[2]):""}function a(){var e=o("p_uin")||o("uin");return e?parseInt(e.substring(1),10):null}function c(){return o("uid_uin")}function f(){var e=u(),n=i(),t=+o("uid_type");return n||e&&(2===t||1001===t)}function d(){return f()?c()||a():a()||c()}function s(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,n){var t=parseInt(n,16);return String.fromCharCode(t)}))}function g(){var e=navigator.userAgent.match(/Version\/([\d.]+).*Safari/);return e?parseInt(e[1],10):!1}function p(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",t="";return m.default(e).forEach(function(r){if("undefined"!=typeof e[r]){var u=e[r];t+=""+n+r+"="+u}}),t?t.slice(1):""}Object.defineProperty(n,"__esModule",{value:!0});var l=e("babel-runtime/core-js/object/keys"),m=t(l);n.getCookie=o,n.getQQUin=a,n.getWeixinUin=c,n.isWeixinAccount=f,n.getUin=d,n.base64Encode=s,n.getSafariVer=g,n.objectToStr=p});
/*!tcplayer_lite/const*/
;define("tcplayer_lite/const",function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});{var R=(e.ERROR_TYPE_NETWORK=1,e.ERROR_TYPE_OTHER_ERROR=2,e.ERROR_TYPE_NOT_SUPPORT=3,e.ERROR_GET_TOKEN_ERROR=4,"test"===window.ENV_NAME);e.APPID=R?"1251502357":"1258712167",e.REPORT_CONFIG={badjsId:"1440",tdwBase:{opername:"Edu",module:"tcplayer_h5_record"},monitor:{total:33693626,first:33693627,error:33693628,overtime:33693629,loadError:33693630,decodeError:33693631,envError:33693632,argumentError:33693633,otherError:33693634,buffered:33693635},timeout:10}}});
/*!tcplayer_lite/helper*/
;define("tcplayer_lite/helper",function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=/(\/drm\/)/g,r=e.replace(/http:/,"https:");return r=r.replace(n,"$1voddrm.token."+t+".")}function o(e,t){var n=t.termId,o=t.cid,u=t.vodType,i=T.getUin(),a=T.getCookie("p_skey"),c=T.getCookie("p_lskey"),d=T.getCookie("uid_a2"),l=T.getCookie("uid_type"),f=!("2"!==l||!d.length),s={uin:i,vod_type:u,cid:o,term_id:n};f?h.default(s,{ext:d}):h.default(s,{plskey:c,pskey:a});var p=T.objectToStr(s,";"),g=T.base64Encode(p),m=e.transcodeList,v=void 0===m?[]:m,y=r(v[0]&&v[0].url,g),_=r(v[1]&&v[1].url,g),b=r(v[2]&&v[2].url,g),k=r(v[3]&&v[3].url,g);return{m3u8:k||b||_||y}}function u(e){var t=e.termId,n=e.cid,r=e.fileId,o=e.vodType;return new g.default(function(e,u){var i={vod_type:o,cid:n,term_id:t,fileId:r};l.default(i).forEach(function(e){"undefined"==typeof i[e]&&delete i[e]}),b.default("/cgi-bin/qcloud/get_token",{method:"GET",data:i}).then(function(t){var n=t.result;return n&&n.sign?e(n):u("getUrlToken error: "+n.err_code+" "+n.err_msg)}).catch(function(){u()})})}function i(){return new g.default(function(e,t){j.default("//imgcache.qq.com/open/qcloud/video/tcplayer/libs/hls.min.0.12.4.js",function(n){n&&t(n),e()})})}function a(e,t){j.default("//imgcache.qq.com/open/qcloud/video/vcplayer/TcPlayer-2.3.1.js",function(n){n&&t(n),e()})}function c(){return"undefined"!=typeof document?new g.default(function(e,t){return T.getSafariVer()?void a(e,t):void i().then(function(){a(e,t)})}):g.default.reject()}Object.defineProperty(t,"__esModule",{value:!0}),t.getPlayInfo=void 0;{var d=e("babel-runtime/core-js/object/keys"),l=n(d),f=e("babel-runtime/regenerator/index"),s=n(f),p=e("babel-runtime/core-js/promise"),g=n(p),m=e("babel-runtime/helpers/asyncToGenerator"),v=n(m),y=e("babel-runtime/core-js/object/assign"),h=n(y);t.getPlayInfo=function(){var e=v.default(s.default.mark(function t(e,n){var r,o,u,i;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.t,o=n.us,u=n.sign,i=n.exper,t.abrupt("return",new g.default(function(t,n){window.fetch("//playvideo.qcloud.com/getplayinfo/v2/"+q.APPID+"/"+e+"?t="+r+"&us="+o+"&sign="+u+"&exper="+i).then(function(e){return e&&200===e.status?e.json():{code:e.status,message:e.statusText}}).then(function(e){var r=e.code,o=e.videoInfo,u=e.message;return 0!==r?n("getplayinfo error: "+r+" "+u):t(o)}).catch(function(e){})}));case 2:case"end":return t.stop()}},t,this)}));return function(){return e.apply(this,arguments)}}()}t.fomatUrlWithToken=r,t.getPlayListWithToken=o,t.getUrlToken=u,t.loadDependices=c;var _=e("@tencent/ke_fetch/index"),b=n(_),k=e("load-script/index"),j=n(k),T=e("tcplayer_lite/util"),q=e("tcplayer_lite/const")});
/*!tcplayer_lite/index*/
;define("tcplayer_lite/index",function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("babel-runtime/core-js/object/assign"),i=n(a),r=e("babel-runtime/core-js/object/get-prototype-of"),l=n(r),s=e("babel-runtime/helpers/classCallCheck"),u=n(s),o=e("babel-runtime/helpers/createClass"),c=n(o),y=e("babel-runtime/helpers/possibleConstructorReturn"),d=n(y),f=e("babel-runtime/helpers/inherits"),p=n(f),h=e("@tencent/imweb-tcplayer/index"),b=n(h),v=e("events/events"),k=n(v),g=e("tcplayer_lite/helper"),m=function(e){function t(e){u.default(this,t);var n=d.default(this,(t.__proto__||l.default(t)).call(this));return n.opts=e,g.loadDependices().then(function(){n.initPlay(n.opts)}),n}return p.default(t,e),c.default(t,[{key:"pause",value:function(){this.player&&this.player.pause&&this.player.pause()}},{key:"destroy",value:function(){this.player&&this.player.destroy&&this.player.destroy()}},{key:"onListen",value:function(e){var t=this.opts,n=t.onReady,a=void 0===n?function(){}:n,i=t.onError,r=void 0===i?function(){}:i,l=t.onPause,s=void 0===l?function(){}:l,u=t.onPlaying,o=void 0===u?function(){}:u,c=t.onFullscreenChange,y=void 0===c?function(){}:c;switch(e.type){case"overtime":case"error":r("timeout");break;case"load":a();break;case"playing":o();break;case"pause":s();break;case"fullscreen":y(e&&e.detail&&e.detail.isFullscreen);break;case"ended":this.onPlayEnd&&this.onPlayEnd()}}},{key:"getM3U8List",value:function(e){var t=e.fileId;try{return g.getUrlToken(e).then(function(e){return g.getPlayInfo(t,e)}).then(function(t){return g.getPlayListWithToken(t,e)}).catch(function(e){})}catch(n){return null}}},{key:"getPlayer",value:function(){return this.player}},{key:"initPlay",value:function(e){var t=this;return e.fileId?this.getM3U8List(e).then(function(n){var a=i.default(n,{width:"100%",height:"100%",autoplay:t.opts.autoplay||!1,coverpic:{style:"stretch"},wording:{2:"网络错误，请检查网络配置或者刷新重试"},systemFullscreen:!0,listener:function(e){t.onListen(e)}});t.imwebTcplayer=new b.default(e.containerId,a),t.player=t.imwebTcplayer.tcplayer}):null}}]),t}(k.default);t.default=m});
/*!agency/publish/step4/mod.tcplayer.lite*/
;define("agency/publish/step4/mod.tcplayer.lite",function(e,i,t){"use strict";function d(e){return e&&e.__esModule?e:{"default":e}}function o(e){var i="video-preview-container-"+(Math.random()+ +new Date).toString().replace(/\D+/g,"");return l.default.Dialog.confirm('<div id="'+i+'" class="tcplayer"></div>',{title:"视频预览",globalClass:"video-preview-dialog video-preview-dialog--tcplayer",onAccept:function(){c.destroy(),c=void 0}}),c&&c.destroy(),c=new n.default({containerId:i,fileId:e,vodType:1,autoplay:!0})}var a=e("jquery"),l=d(a),r=e("tcplayer_lite/index"),n=d(r),u=e("edu_modules/edu-dialog/edu-dialog"),c=(d(u),void 0);t.exports=o});
/*!agency/publish/step4/term.task.video*/
;define("agency/publish/step4/term.task.video",function(e){function i(e,i,d){a=e,_=_||{},l=i||{},r=a.form(),d&&t()}function d(e){var i=_.video_map||{},d=i[e];return d&&d._}function o(e){function i(e){return("0"+e).slice(-2,3)}return[i(Math.floor(e/3600)),i(Math.floor(e%3600/60)),i(e%60)].join(":")}function n(e){r.f_video.$.toggleClass("f-upload--success",!!e);var i=r.f_video.$.closest(".f-item.f-video");e?(i.find(".js-video-name").text(e.name),i.find(".js-video-duration").text(o(e.time_len)),i.find(".js-video-cover").show().attr("src",e.cover_url),i.find(".js-video-des").show(),i.find(".js-video-des-preview").data("vid",e.vid).data("txcloud",e.txcloud).show()):(i.find(".js-video-cover").hide(),i.find(".js-video-des").hide(),i.find(".js-video-des-preview").hide())}function s(){_.initVideos(function(){if(l.resid_list){var e=[];if(c.isArray(l.resid_list)?e=l.resid_list.slice(0):"string"==typeof l.resid_list&&(e=l.resid_list.split(",")),c.isArray(e)&&e.length){var i=d(e[0]);i?n(i):l.video&&n(l.video),r.f_video.val([e[0]]),r.f_video.clean()}}r.f_video.$.picker({title:"视频",title1:"一个{{title}}",mode:"single",max:1,isOpenChild:!0,pickerCls:"mod-picker_files",helps:'<a href="/agency/index/index.html#tab=showVideoList" class="nor-link" target="_blank">上传更多视频</a>',getData:function(){return _.videos},onOpen:function(e){if(c(".f-video:visible").hasClass("disabled")&&e.find(".mod-picker__close").click(),!c.isArray(_.videos)||0===_.videos.length){e.find(".mod-picker__close").click();var i="您后台视频库目前没有可选择的视频，添加录播课任务前需上传视频并通过审核，请至教务教学-教务管理-视频管理上传";c.modal.alert(i)}},onSave:function(e,i){r.f_video.val(i||[])}})})}function t(){r.f_video.on("change",function(e,i){var o=d(i);_.initVideos(function(){n(o)})}),s(),r.f_expr_flag&&r.f_expr_flag.on("change",function(e,i){var d=c(".js-video-expr-conf");1===i?d.removeClass("hide"):d.addClass("hide"),1===i&&null===r.f_expr_type.val()&&c(".js_exprtime_default").click()}),a.on("click",".js-video-des-preview",function(){var e=c(this),i=e.data("vid"),d=e.data("txcloud");return i?d?void v(i):void f(i,u.getInfoSync().aid):void 0})}var a,r,l,c=e("jquery"),f=(e("edu_modules/edu-base/edu-base"),e("edu_modules/form/form"),e("@tencent/im-cache/cache"),e("edu_modules/edu-picker/edu-picker"),e("edu_modules/video.play/video.play")),v=e("agency/publish/step4/mod.tcplayer.lite"),u=e("edu_modules/edu-agency/index"),_=e("agency/publish/common/_pd");return{init:i}});
/*!edu_modules/cosfile/cosfile*/
;define("edu_modules/cosfile/cosfile",function(n,e,i){var d=n("jquery"),a=n("edu_modules/bkn/index");i.exports={preview:function(n,e){var i="/cgi-bin/tools/resource4html ",o=d(".js-preview-download-form"),t=a();0===o.length?o=d('<form method="get" target="_blank" class="js-upload-download-form" style="display:none;"><input type="hidden" name="aid" value="'+n+'"><input type="hidden" name="res_id" value="'+e+'"><input type="hidden" name="bkn" value="'+t+'"></form>').appendTo(d(document.body)):(o.find('input[name="res_id"]').val(e),o.find('input[name="aid"]').val(n),o.find('input[name="bkn"]').val(t)),o.attr("action",i),o.submit()},download:function(n,e,i){var a="/cgi-bin/file/download",o=d(".js-upload-download-form");0===o.length?o=d('<form method="get" target="_blank" class="js-upload-download-form" style="display:none;"><input type="hidden" name="cw_id" value="'+e+'"><input type="hidden" name="cid" value="'+i+'"><input type="hidden" name="a_id" value="'+n+'"><input type="hidden" name="uin" value="'+d.cookie.uin()+'"></form>').appendTo(d(document.body)):(o.find('input[name="cw_id"]').val(e),o.find('input[name="a_id"]').val(n),o.find('input[name="cid"]').val(i),o.find('input[name="uin"]').val(d.cookie.uin())),o.attr("action",a),o.submit()}}});
/*!agency/publish/step4/term.task.file*/
;define("agency/publish/step4/term.task.file",function(e){function i(e){e=e||[];var i=[];return e.forEach(function(e){m.forEach(function(a){return a.cw_id==e?(i.push(a),!0):void 0})}),i}function a(e){e=c.isArray(e)?e:[e],e.forEach(function(e){var i=!1;return e&&e.cw_id?(m.forEach(function(a){a.cw_id===e.cw_id&&(i=!0)}),void(!i&&m.push(e))):!0})}function n(e,i,n){s=e,d=i,o=_.getInfoSync().aid,d&&d.files&&a(d.files),f.init(o),u=s.form(),n&&t()}function t(){u.f_resource_file.on("change",function(e,i){if(i){var a='<span href="javascript:;" data-fid="'+i.cw_id+'" target="_blank">'+i.cw_name+"</span>";a+='<span class="item-del" data-value="'+i.cw_id+'">删除</span></li>',this.$.find(".f-value-item").html(a)}}),r()}function r(){if(u.f_resource_file.$.on("click",".f-value-wrap,.f-value-list .f-value-add",function(){var e=u.f_resource_file.val()||[],i=new l({title:"请选择关联资料",name:"资料",max:1,min:1,pageNum:20,mode:"single",keyField:"cw_id",titleField:"cw_name",selectedList:e});i.onPageChange(function(e,n){var t=this;e=e||{},e.isTask=!0,e.filter_key=e.keyword,f.getFileList(e,function(e,r){if(e)return c.modal.error("加载数据错误，请稍候重试！").yes(function(){t.remove()});r.cw_arr=r.cw_arr||[],a(r.cw_arr);try{if(0===m.length){i.$btnNo.click();var f="您后台资料管理目前没有可选择的资料，添加学习资料前需上传资料，请至教务教学-教务管理-资料管理上传";c.modal.alert(f)}}catch(l){}i.setMaxPage(Math.ceil(r.total_cnt/20)),n(e,r.cw_arr)})}).yes(function(e){var i=this.idsToArray(e);u.f_resource_file.set(i,"cw_id","cw_name")})}),d.resid_list){var e=[];if("string"==typeof d.resid_list)try{e=d.resid_list.split(",")}catch(n){e=[]}if(c.isArray(e)){var t=i(e);t&&t.length>0&&(u.f_resource_file.val(t),u.f_resource_file.clean())}}}var c=e("jquery"),f=(e("edu_modules/edu-base/edu-base"),e("@tencent/im-cache/cache"),e("agency/index/dataManagement/db")),l=e("edu_modules/edu-picker/edu-picker");e("@tencent/im-edu-html/edu-html");var s,u,d,o,_=e("edu_modules/edu-agency/index"),m=(e("edu_modules/cosfile/cosfile"),[]);return{init:n}});
/*!agency/publish/step4/term.task.exam*/
;define("agency/publish/step4/term.task.exam",function(e){function t(e){e=e||[];var t=[];return e.forEach(function(e){v.forEach(function(a){return a.eid==e?(t.push(a),!0):void 0})}),t}function a(e){e=l.isArray(e)?e:[e],e.forEach(function(e){var t=!1;return e&&e.eid?(v.forEach(function(a){a.eid===e.eid&&(t=!0)}),void(!t&&v.push(e))):!0})}function i(e,t,i){u=h.getInfoSync().aid,o=e,c=e.closest(".item-edit--wrap"),d=t,d&&d.exam&&a(d.exam),s=o.form(),i&&n()}function n(){s.f_resource_exam.on("change",function(e,t){g(t);var a='<span href="javascript:;" data-fid="'+t.eid+'" target="_blank">'+t.title+"</span>";a+='<span class="item-del" data-value="'+t.eid+'">删除</span></li>',this.$.find(".f-value-item").html(a)}),o.on("click",".js-file-preview",function(){window.open("/exam/index.html?exam_id="+l(this).data("fid")+"&preview=1","_blank")}),c.on("click",".f-item-correct-type .f-radio",function(){var e=l(this).attr("data-value");k(e)}),r()}function r(){if(s.f_resource_exam.$.on("click",".f-value-wrap, .f-value-list .f-value-add",function(){var e=s.f_resource_exam.val()||[],t=new p({title:"请选择关联习题",name:"习题",max:1,min:1,pageNum:20,mode:"single",keyField:"eid",titleField:"title",selectedList:e});t.$.find(".mod-picker__input").hide(),t.onPageChange(function(e,i){e=e||{},e.isTask=!0,f.get_exam_list({param:{aid:u,count:10,page:e.page},isUseModal:!0,succ:function(e){e.result=e.result||{},e.result.exam=e.result.exam||[],e.result.total_page=e.result.total_page||1,t.setMaxPage(e.result.total_page),a(e.result.exam);try{if(0===v.length){t.$btnNo.click();var n="您后台习题管理目前没有可选择的习题，添加习题前需上传习题，请至教务教学-教务管理习题管理上传。";l.modal.alert(n)}}catch(r){}i(null,e.result.exam)},err:function(e){i(e)}})}).yes(function(e){var t=this.idsToArray(e);s.f_resource_exam.set(t,"eid","title")})}),d.resid_list){var e=[];if("string"==typeof d.resid_list)try{e=d.resid_list.split(",")}catch(i){e=[]}if(l.isArray(e)){var n=t(e);n&&n.length>0&&(s.f_resource_exam.val(t(e)),s.f_resource_exam.clean())}}}var u,d,s,o,c,l=e("jquery"),f=e("edu_modules/edu-db/edu-db"),m=(e("@tencent/im-cache/cache"),e("edu_modules/modal/modal"),e("agency/publish/step4/term.data")),p=e("edu_modules/edu-picker/edu-picker"),_=(e("edu_modules/edu-base/edu-base"),m.validator),h=e("edu_modules/edu-agency/index"),v=[];f.extend({get_exam_list:f.httpMethod({url:"/cgi-agency/agency/manager/get_exam_list",type:"post"})});var g=function(e){return e=e||s.f_resource_exam.val()[0]||{},"undefined"==typeof e.subjective_count?void(d.restrict_flag?x():y()):void(e.subjective_count>0?x():y())},x=function(){c.find(".f-item-correct-type").attr("data-use",1).show(),c.find(".f-item-studytime").show().find("[data-pattern]").removeClass("not-use")},y=function(){c.find(".f-item-correct-type").attr("data-use",0).hide(),c.find(".f-item-studytime").hide().find("[data-pattern]").addClass("not-use")},k=function(e){var t=c.find(".f-item-studytime"),a=t.find(".f-required"),i=t.find("input");2===+e?(a.show(),b(i,!0)):(a.hide(),b(i,!1)),_.all(i)},b=function(e,t){l.each(e,function(){var e=l(this),a=e.data("pattern")||"";-1!==a.search("not_null")?!t&&e.data("pattern",a.replace(/not_null\|/,"")):(a=a?"not_null|"+a:"not_null",t&&e.data("pattern",a))})};return{init:i,updateTaskForm:g}});
/*!/agency/publish/template/term.task.video.tpl_tpl*/
;define("/agency/publish/template/term.task.video.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<label class="f-label"><span class="f-required">*</span>关联录播视频</label><div class="f-field"> <div class="f-upload-wrap"> <div class="f-upload" data-picker="video" data-max="1" name="resid_list" data-name="f_video" data-msg="请选择关联视频" data-pattern="not_null" > <div class="f-upload-replace"> <i class="f-upload-icon">+</i> <span class="f-upload-text">关联录播视频</span> </div> <img class="f-upload-img js-video-cover" src="about:blank" alt="" width="222" height="125"> <div class="f-upload-again">重新关联</div> </div> <div class="f-upload-intro"> <p class="f-des js-video-des hide"> 视频名称：<span class="js-video-name"></span><br> 视频时长：<span class="js-video-duration"></span><br> <a href="javascript:;" class="nor-link js-video-des-preview">预览</a> </p> <div class="f-msg"> <i class="icon-msg"></i> <p class="f-msg-text">请关联录播视频</p> </div> </div> </div></div>'),_$out_.join("")}}});
/*!/agency/publish/template/term.task.file.tpl_tpl*/
;define("/agency/publish/template/term.task.file.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<label class="f-label"><span class="f-required">*</span>关联资料</label><div class="f-field"> <div class="f-popup-lines-select" data-more="+ 重新关联资料" name="resid_list" data-name="f_resource_file" data-key="cw_id" data-title="cw_name" data-pattern="not_null" data-msg="请选择关联资料" > <div class="f-value-wrap"> <div class="f-value"></div> <span class="placeholder">请选择关联资料</span> <span class="f-select-icon"><i class="icon-font i-add"></i></span> </div> <ul class="f-value-list"></ul> </div></div>'),_$out_.join("")}}});
/*!/agency/publish/template/term.task.exam.tpl_tpl*/
;define("/agency/publish/template/term.task.exam.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<label class="f-label"><span class="f-required">*</span>关联习题</label><div class="f-field"> <div class="f-popup-lines-select" data-more="+ 重新关联习题" name="resid_list" data-name="f_resource_exam" data-key="eid" data-title="title" data-pattern="not_null" data-msg="请选择关联习题" > <div class="f-value-wrap"> <div class="f-value"></div> <span class="placeholder">请选择关联习题</span> <span class="f-select-icon"><i class="icon-font i-add"></i></span> </div> <ul class="f-value-list"></ul> </div></div>'),_$out_.join("")}}});
/*!agency/publish/step4/task*/
;define("agency/publish/step4/task",function(e){e("edu_modules/edu-render/edu-render");var t=(e("edu_modules/edu-db/edu-db"),e("@tencent/im-cache/cache")),a=e("jquery"),i=(e("edu_modules/modal/modal"),e("agency/publish/step4/part.max")),n=e("agency/publish/step4/term.data"),s=e("agency/publish/step4/term.live.time"),d=e("agency/publish/common/disabled.manager"),r=e("/agency/publish/template/term.task.tpl_tpl"),m=e("/agency/publish/template/term.task.view.tpl_tpl"),c=e("/agency/publish/template/term.task.edit.tpl_tpl"),l=n.validator,f=e("edu_modules/edu-report/edu-report"),o=e("edu_modules/edu-agency/index"),u={video:e("agency/publish/step4/term.task.video"),file:e("agency/publish/step4/term.task.file"),exam:e("agency/publish/step4/term.task.exam")},p={video:e("/agency/publish/template/term.task.video.tpl_tpl"),file:e("/agency/publish/template/term.task.file.tpl_tpl"),exam:e("/agency/publish/template/term.task.exam.tpl_tpl")},h=e("agency/publish/common/_pd"),_=10,v=10,k=5,g=a.render.task_uuid=function(){var e=0;return function(a){var i="task_increase_"+e++;return a&&(a.id=i,t.set(i,a)),i}}(),y=function(e,t,a){var i=e[a];e[a]=t[a],t[a]=i};a.fn.swapWith=function(e){return this.each(function(){var t=a(e).clone(!0),i=a(this).clone(!0);a(e).replaceWith(i),a(this).replaceWith(t);var n=T(i),s=T(t);1===n.type&&1===s.type&&(y(n,s,"bgtime"),y(n,s,"endtime"),b(i,n),b(t,s))})},a.render.task_video=function(e,t){t=t||{};var i=((h||{}).video_map||{})[e]||{},n=i._||t.video;if(!n)return"";var s=new Date(0);return s.setHours(0,0,0,0),"{{name}}({{time}})".replace(/{{name}}/,n.name||"").replace(/{{time}}/,a.render.time.formatDate("hh:mm:ss",new Date(1e3*n.time_len+s.valueOf())))},a.render.livetime=function(e,t){return e=e||{},e.bgtime&&e.endtime?[a.render.time.formatDate("Y年M月D日 hh:mm",1e3*e.bgtime)," - ",a.render.time.formatDate("hh:mm",1e3*e.endtime)].join(""):t?'<span class="err-tips">请填写直播时间</span>':""};var b=function(e,t){e.find(".item-view--wrap .view").text(a.render.livetime(t))},x=function(e){return e.find(".task-item").not(".item--add").length},w=function(e){J(e),s.check_live_tasks(e),"p"!==h.cmd||n.is_free_course()||C(e)},C=function(e){e.find(".part-item--view").each(function(e,t){var i=a(t).find(".item-line--part .oper-list");a(t).find(".task-item--view.schedule-task").length!==a(t).find(".task-item--view").length?(!i.hasClass("disabled-del")&&i.addClass("disabled-del"),i.find(".oper-item.item--edit").hide()):(i.removeClass("disabled-del"),i.find(".oper-item.item--edit").show())})},D=function(e){var t=x(e);e.find(".task-num").text(t);var a=_;if(n.is_schedule_task()){a=v;var i=e.closest(".chapter-item--view"),s=i.find(".schedule-task").not(".task-item--add").length;s>=k?e.addClass("task-max"):e.removeClass("task-max")}t>=a?e.addClass("task-max"):e.removeClass("task-max");var r=e.closest(".term-item");d.newTermTaskDisable(r);var m=r.data("utt");m&&clearTimeout(m),m=setTimeout(function(){w(r)},100),r.data("utt",m)},T=function(e,i){var n=e.attr("id"),s=t.get(n);return i&&(s=a.extend(s||{},i),s.id=n,t.set(n,s),e.attr("type",s.type)),s},M=function(e,t){var a=T(e.removeClass("task-item--add task-item--edit").addClass("task-item--view"),t);e.find(".item-view--wrap, .item-edit--wrap").remove(),e.append(m(a)),D(e.closest(".part-item"))},W=function(e,t,a){a=a||{},e.removeClass("task-item--add task-item--view").addClass("task-item--edit"),e.find(".item-view--wrap, .item-edit--wrap").remove(),e.append(c(t,a))},H=function(e){var t=e.closest(".part-item"),s=a(r({id:g(),action:"add",name_en:"task",name_cn:"任务"},{schedule:n.is_schedule_task(),add_schedule_task:n.is_schedule_task()}));e.before(s),i.live_task_max(t)?(s.find(".f-type [data-value=1]").hide(),s.find(".f-type [data-value=2]").trigger("init")):s.find(".f-type [data-value=1]").trigger("init"),n.validator.init(s.find("[data-pattern]")),n.input_focus(s),D(t),Q(s)},S=function(e,t){var i=function(){var t=e.closest(".part-item");e.remove(),D(t)};t?i():a.modal.confirm("确定要删除这个任务吗?",{icon:"info",title:"删除任务",yes:i})},q=function(e,t){T(e)?M(e):S(e,t)},O=function(e){return e.is(":input")?a.trim(e.val()):e.data("value")},j=function(e){return e.hasClass("checked")?e.data("value"):e.data("nocheck")||0},I=function(e){var t={};switch(t.type=O(e.find("[name=type]")),t.name=O(e.find("[name=name]")),t.expr_flag=n.is_free_course()?0:j(e.find("[name=expr_flag]")),t.expr_range=0,t.special_flag=j(e.find("[name=special_flag]")),t.type){case 1:break;case 2:t.resid_list=O(e.find(".f-video [name=resid_list]")),t.expr_flag&&(t.expr_flag=e.find(".expr_range--wrap .f-radio.checked").data("value"),t.expr_range=1===t.expr_flag?0:O(e.find("[name=expr_range]"))),t.bgtime=0,t.endtime=0;break;case 3:t._tmp_files=O(e.find(".f-file [name=resid_list]")),t.resid_list=""+((t._tmp_files||[])[0]||{}).cw_id,t.bgtime=0,t.endtime=0;break;case 4:t._tmp_exam=O(e.find(".f-exam [name=resid_list]")),t.resid_list=""+((t._tmp_exam||[])[0]||{}).eid;var a=l.toDate(O(e.find(".f-item-studytime [name=study_begin]")),-1),i=l.toDate(O(e.find(".f-item-studytime [name=study_end]")),-1);-1!==i&&i.setHours(23,59,59,0),t.bgtime=-1!==a?parseInt(a/1e3,10):0,t.endtime=-1!==i?parseInt(i/1e3,10):0,t.restrict_flag=1===+e.find(".f-item-correct-type").attr("data-use")?O(e.find(".f-item-correct-type .f-radio.checked")):0,delete t.expr_flag}return t},P=function(e){return["video","file","exam"][e-2]},R=function(e,t){var a=t.hasClass("edit-schedule-task")&&n.is_schedule_task(),i=t.parent().hasClass("update-task");a&&(e.append_flag=1),!i&&n.is_update()&&(e.append_flag=2)},Y=function(e){var t=e.find(".item-edit--wrap"),a=t.find("[data-pattern]").not(".not-use"),i=n.validator.all(a),s=I(t);R(s,t),i&&(M(e,s),e.addClass("task-item--data"))},z=function(e,t){var a=t.type;e.find(".expr_range--wrap").hide(),n.is_free_course()?(e.find(".expr-live-tips").hide(),e.find(".expr_flag--wrap").hide()):(e.find(".expr-live-tips")[1===a?"show":"hide"](),e.find(".expr_flag--wrap")[4!==a?"show":"hide"]()),4!==a&&(e.find(".f-item-correct-type").attr("data-use",0).hide(),e.find(".f-item-studytime").hide().find("[data-pattern]").addClass("not-use"))},A=function(e,t){e.find(".f-item-resid_list").hide().find("[data-pattern]").addClass("not-use");var a=P(t.type);if(a){var i=u[a]||{},n=e.find(".f-"+a).show();n.html(p[a]()),i.init&&i.init(e.find(".f-item-resid_list.f-"+a),t,!0),n.find("[data-pattern]").removeClass("not-use")}},B=function(e){e=e||a(".term-item_current");var t=e.data("tut");t&&clearTimeout(t),t=setTimeout(function(){Z(e)},300),e.data("tut",t)},E=function(e){n.is_plan()&&(d.add(".f-type"),!e.hasClass("schedule-task")&&n.is_schedule_task()&&d.add(".f-type, .f-name")),n.is_update()&&e.hasClass("update-task")&&(d.add(".f-type"),!n.is_free_course()&&d.add(".f-video, .f-file, .f-exam, .expr_flag--wrap")),n.is_newterm()&&(a.bom.query("limit")?d.add(".f-type, .f-name"):e.hasClass("newterm-task")&&d.add(".f-type"))},F=function(e){var t=T(e)||{};if(W(e,t,{add_schedule_task:e.hasClass("schedule-task"),update_task:e.hasClass("update-task"),schedule:n.is_schedule_task()}),e.find(".f-type [data-value="+t.type+"]").trigger("init"),e.find("[name=name]").val(t.name),E(e),e.find("[name=special_flag]").trigger("init",[t.special_flag]),e.find("[name=expr_flag]").trigger("init",[t.expr_flag]),2===t.type&&(e.find(".expr_range--wrap .f-radio[data-value="+t.expr_flag+"]").trigger("init"),2===t.expr_flag&&e.find(".expr_range--wrap .diy-option[data-value="+t.expr_range+"]").trigger("init")),t.restrict_flag){var i=e.find(".f-item-studytime [name=study_begin]"),s=e.find(".f-item-studytime [name=study_end]");t.bgtime&&t.endtime&&(i.val(a.render.time.format(t.bgtime,7)),s.val(a.render.time.format(t.endtime,7))),e.find(".f-item-correct-type .f-radio[data-value="+t.restrict_flag+"]").trigger("click")}},G=function(e){var t=[".item--add",".task-live-end",":hidden"];return e.find(".task-item").not(t.join(","))},J=function(e){var t=G(e);t.find(".item--move").show(),t.eq(0).find(".item--move[data-arrow=up]").hide(),t.eq(-1).find(".item--move[data-arrow=down]").hide(),d.updateTermTaskDisable(e)},K=function(e,t){var i=e.attr("id"),n=e.closest(".term-item"),s=G(n),d=null,r=null,m=s.length-1;s.each(function(e){return a(this).attr("id")===i?(e>0&&(d=s.eq(e-1)),m>e&&(r=s.eq(e+1)),!1):void 0});var c="up"===t?d:r;c&&e.swapWith(c),w(n)},L=function(e){var i=0;return e.find(".task-item").each(function(){var e=a(this),n=e.attr("id");if(n)if(e.hasClass("task-item--view")){var s=t.get(n)||{};i+=s.special_flag?1:0}else(e.hasClass("task-item--edit")||e.hasClass("task-item--add"))&&(i+=e.find(".f-checkbox[name=special_flag]").hasClass("checked")?1:0)}),i},N=5,Q=function(e){var t=e.closest(".guide--catalog"),a=L(t)>=N;a?t.find(".f-checkbox[name=special_flag]").not(".checked, :hidden").addClass("disabled"):t.find(".f-checkbox[name=special_flag]").removeClass("disabled")},U=function(){if(a(".term-item_current .task-item--add, .term-item_current .task-item--edit").length){var e=a(".f-item--error").offset();return e&&a("html,body").animate({scrollTop:Math.max(e.top-80,0)},500),!1}return!0},V=function(){var e=function(e,t){return+l.toDateWithOutHMS(e)===+l.toDateWithOutHMS(t)};l.extend("study_time",function(t,i){var s=i.closest(".task-item"),d=i.closest(".f-item-studytime"),r=T(s),m=a.trim(d.find("[name=study_begin]").val()),c=a.trim(d.find("[name=study_end]").val()),f=l.toDate(m),o=l.toDate(c);o.setHours(23,59,59,0);var u=l.toDateWithOutHMS();if(n.is_modify()&&r&&!r.taid&&e(f,1e3*r._tmp.bgtime)&&e(o,1e3*r._tmp.endtime))return l.msg="",!0;if(m&&!l.date(m))return l.msg="起始时间格式填写错误",!1;if(c&&!l.date(c))return l.msg="结束时间格式填写错误",!1;if(m&&u>f)return l.msg="起始时间应大于当前时间",!1;if(c&&u>o)return l.msg="结束时间应大于当前时间",!1;var p=i.parents(".term-item"),h=n.get_term_data(p);return m&&f>1e3*h.endtime?(l.msg="起始时间应在班级下架时间之前",!1):c&&o>1e3*h.endtime?(l.msg="结束时间应在班级下架时间之前",!1):m&&!c?(l.msg="请选择建议学习结束时间",!1):!m&&c?(l.msg="请选择建议学习起始时间",!1):m&&c&&f>o?(l.msg="起始时间必须小于结束时间",!1):!0})},X=function(){V(),a(document).on("click",".task-item .item--move",function(){var e=a(this);if(!e.hasClass("disabled")){var t=e.closest(".task-item");K(t,e.data("arrow"))}}).on("click",".task-item.item--add .add-btn, .task-item .item--insert, .item-line--part .item--add",function(e){var t=a(this);if(!t.hasClass("disabled"))return t.hasClass("oper-item item--add")?(e.stopPropagation(),void t.parents(".part-item").find(".task-list .task-item.item--add .add-btn").click()):void setTimeout(function(){U()&&H(t.closest(".task-item"))},0)}).on("click",".task-item .item--edit, .task-item .name-text .err",function(){var e=a(this);e.hasClass("disabled")||setTimeout(function(){U()&&F(e.closest(".task-item"))},0)}).on("click",".task-item .item--del",function(){var e=a(this);e.hasClass("disabled")||S(e.closest(".task-item"))}).on("click",".item-edit--wrap .btn-save",function(e){a(e.target);a(".term-item_current .task-item--add, .term-item_current .task-item--edit").each(function(){Y(a(this))})}).on("click",".item-edit--wrap .btn-cancel",function(e){a(e.target);a(".term-item_current .task-item--add, .term-item_current .task-item--edit").each(function(){q(a(this),!0)})}).on("change:tasktype",function(e,t,i){var n=a(e.target),s=T(n.closest(".task-item"))||{},d=n.closest(".item-edit--wrap");s.type=i,z(d,s),A(d,s),4===s.type&&(h=h||{},f.tdw({module:"Release-course",action:"ChooseSubject",obj1:o.getInfoSync().aid}))}).on("click init",".task-item .f-checkbox",function(e,t){var i=a(this);if(!i.hasClass("disabled")){"init"===e.type?i[t?"addClass":"removeClass"]("checked"):i.toggleClass("checked");var n=i.closest(".item-edit--wrap"),s=i.attr("name");if("expr_flag"===s&&2===n.find("i[name=type]").data("value")){var d=n.find(".expr_range--wrap");d[i.hasClass("checked")?"show":"hide"]()}"special_flag"===s&&Q(i)}}).on("click",".task-item .f-radio",function(){var e=a(this);e.hasClass("disabled")||(e.addClass("checked"),e.closest(".f-radio--group").find(".f-radio.checked").not(e).removeClass("checked"))}).on("task:update",function(e,t){var a=t?t.closest(".term-item"):void 0;B(a)}).on("task:update_livetime",function(e,t,i){M(a("#"+t),i)}).on("click",".f-item-studytime .f-date",function(){var e=a(this);if(!e.data("datepicker")){var t=e.closest(".term-item"),i=n.get_min_date(t),s=n.get_max_date(t,i);e.datepicker({_begin:i,_end:s,_dpCls:"dp-calender-popup",_show:function(){e.data("noblur",!0)},_hide:function(){e.data("noblur",!1)},_click:function(t){e.data("datepicker").hide(),l&&setTimeout(function(){if(l.validate(e)){var a=e.attr("name");if("study_begin"===a){var i=e.closest(".f-item-studytime").find("[name=study_end]"),n=i.data("datepicker");n&&l.check(i)||(i.click(),n=i.data("datepicker")),n.options._begin=l.toDateWithOutHMS(t),n.update()}else{var s=e.closest(".f-item-studytime").find("[name=study_begin]"),d=s.data("datepicker");d&&l.check(s)||(s.click(),d=s.data("datepicker")),d.options._end=l.toDateWithOutHMS(t),d.update()}}},100)}}).focus()}}).on("click",".f-item-studytime .i-calendar",function(){var e=a(this);e.prev().click()})},Z=function(e){e.find(".part-item").each(function(){D(a(this))}),s.init(e)};return{init:X,setData:function(e){if(n.is_schedule_task()&&e&&(e=e.chapter&&e.chapter.data,e=e&&e.sub_info)){var t=0;a.each(e,function(){var e=this.task_info;e&&a.each(e,function(){var e=this;1!==e.append_flag&&++t})}),k=Math.max(Math.floor(.2*t),5)}},update_term:Z}});
/*!agency/publish/step4/step4*/
;define("agency/publish/step4/step4",function(e){var t=e("jquery"),r=e("edu_modules/edu-db/edu-db"),i=e("@tencent/im-cache/cache"),n=e("/agency/publish/template/step4.tpl_tpl"),a=e("agency/publish/step4/term.data"),s=e("agency/publish/common/submit"),c=e("agency/publish/common/retcode"),d=e("agency/publish/step4/course"),l=e("agency/publish/step4/term"),m=e("agency/publish/step4/chapter"),o=e("agency/publish/step4/part"),u=e("agency/publish/step4/part.max"),_=e("agency/publish/step4/task"),f=e("agency/publish/common/disabled.manager"),p=a.validator,h=e("edu_modules/edu-agency/index"),g=e("agency/publish/common/_pd");t.render.cdkey_manager=function(e){return g.cid&&"p"===g.cmd&&1===g.result.train?"link"===e?'，你可以进行<a target="_blank" href="/agency/cdkey/index.html?cid='+g.cid+'" class="nor-link btn-cdkey-manager">cdkey管理</a>':'<a target="_blank" href="/agency/cdkey/index.html?cid='+g.cid+'" class="btn-default btn-l btn-cdkey-manager">cdkey管理</a>':""};var v=function(){t(".term-item").each(function(){var e=t(this);l.update_cycle_edit(e),u.clear_over_part(e)})},b=function(e){var r=!0;return e.each(function(){var e=t(this),i=a.get_item_data(e);if(!(1!==i.type||i.bgtime&&i.endtime))return r=!1,!1;if(1!==i.type&&!i.resid_list){var n=["","","录播任务需关联视频","资料任务需关联资料","习题任务需关联习题"][i.type];if(n)return e.find(".name-text .name").eq(0).html('<span class="f-item--error">'+n+"</span>"),r=!1,!1}if(!(4!==i.type||2!==i.restrict_flag||i.bgtime&&i.endtime))return e.find(".oper-item.item--edit").click(),r=!1,!1;var s=p.str_length(i.name);return 0===s||s>20?(e.find(".name-text .name").eq(0).html('<span class="f-item--error">任务名称请确保 1-20 个字</span>'),r=!1,!1):(i.introduce="",i.resid_list=/\[\"\S*\"\]/.test(i.resid_list)&&1===i.type?JSON.parse(i.resid_list):i.resid_list,void(i.resid_list&&t.isArray(i.resid_list)&&(i.resid_list=i.resid_list.join(""))))}),r},y=function(e){var r=!0;return e.each(function(){var e=t(this),i=a.get_item_data(e),n=p.str_length(i.name);if(0===n||n>30)return e.find(".item-name--part .name-text").eq(0).html('<span class="f-item--error">节名称请确保 1-30 个字</span>'),r=!1,!1;var s=[".item--add"],c=e.find(".task-item").not(s.join(","));if(c.length<1)return r=!1,a.set_has_error(e,!0),!1;var d=b(c);return d?void a.set_has_error(e,!1):(r=!1,!1)}),r},k=function(e){var r=!0;return e.each(function(){var e=t(this),i=(a.get_item_data(e),e.find(".part-item").not(".item--add"));if(i.length<1)return r=!1,a.set_has_error(e,!0),!1;var n=y(i);return n?void a.set_has_error(e,!1):(r=!1,!1)}),r},w=function(){var e=g.data||{};return e.terms=a.get_terms_data()||[],e},T="item-line--expanded",x=function(e,t){t?(e.removeClass(T),e.find(".icon-font:eq(0)").removeClass("i-v-top").addClass("i-v-bottom")):(e.addClass(T),e.find(".icon-font:eq(0)").addClass("i-v-top").removeClass("i-v-bottom"))},E=function(e){return t.render.time.formatDate("Y-M-D",new Date(1e3*e))},I=function(e){var r=t(".mod-term-wrap .term-item");if(r.length<1)return t._alert("请至少新增一期");var n=!0,m=function(e){return n=!1,a.scroll_to_error(!0,e),!1};if(r.each(function(){var e=t(this);if(e.data("crossover"))return!0;var r=e.find(".course-time .f-dates input").not(":hidden");if(r.length)return r.each(function(){a.set_has_error(t(this).closest(".course-time"),!0,"请保存直播任务时间")}),m();var n=p.all(e.find(".guide--class, .guide--catalog").find("[data-pattern]").not(":hidden, .disabled"));if(!n)return m();l.update_data(e);var s=a.get_term_data(e,!0),o=a.get_term_string(e,!1,s),u=e.data("term_string");if(u===o&&0!==s.term_id)return!0;var _=e.attr("id"),f=i.get(_);if(""===g.cmd||"c"===g.cmd){if(a.is_free_course()&&(s.price=0),!s.sponsor)return t(".term-item_current .td-sponsor").html('<span class="f-item--error">请选择班主任</span>'),m();if(!s.te_list||!t.isArray(s.te_list)||0===s.te_list.length)return t(".term-item_current .td-te_list").html('<span class="f-item--error">请选择上课老师</span>'),m();if(s.te_list.length>10)return t(".term-item_current .td-te_list").html('<span class="f-item--error">班级老师大于10个</span>'),m();if(!s.tu_list||!t.isArray(s.tu_list)||0===s.tu_list.length)return t(".term-item_current .td-tu_list").html('<span class="f-item--error">请选择助教</span>'),m();if(s.tu_list.length>10)return t(".term-item_current .td-tu_list").html('<span class="f-item--error">班级助教大于10个</span>'),m();if(!s.name)return m();if(0!==f.cycle){f.sign_endtime=f.endtime-f.cycle;var h=(new Date).valueOf()/1e3>>0;if(!f.term_id&&f.sign_endtime<h)return t._alert("班级下架日期需确保满足一个报名周期，请修改后提交"),m(e.find(".content-guide.guide--class"))}}var v=e.find(".chapter-item").not(".item--add");if(v.length<1)return t._alert("请至少填写一章"),m();var b=k(v);if(!b)return m();var y=d.get_tasks(s),w=(d.get_type(s,y),d.get_tasks_live(s,y));if(w.length){var T=(w[w.length-1]||{}).endtime,x=E(T),I=E(s.endtime);if(s.endtime<T&&I!==x)return c(206491,!1,e)&&m()}}),n)if(e){var o=w();"m"===g.cmd&&(o._flag=4),s&&s.preview&&s.preview(o,1)}else s&&s.commit&&s.commit(w())},S=function(){var e=t(document);e.on("click",".publish-btn-wrap .btn-commit, .publish-btn-wrap .btn-preview",function(){var e=t(this);e.hasClass("disabled")||setTimeout(function(){I(e.hasClass("btn-preview"))},100)}).on("click",".item-line--chapter, .item-line--part",function(){var e=t(this);e.hasClass("disabled")||e.closest(".chapter-item--edit, .chapter-item--add").length>0||e.closest(".part-item--edit, .part-item--add").length>0||x(e,e.hasClass(T))}).on("click","#submit_confirm",function(){var e=t(this);e.hasClass("checkbox-check")?(e.removeClass("checkbox-check"),f.add(t(".btn-commit"))):(e.addClass("checkbox-check"),f.remove(t(".btn-commit")))}),window.getSelection&&e.on("dblclick",function(){window.getSelection().removeAllRanges()})},C=function(e,t){var r=e[e.length-1].term_id,i=e.length-1;return e.forEach(function(e,n){!t&&e.term_id>r?i=n:t&&1===e.term_op_flag&&(i=n)}),a.clear_data(e,0,!0,!1,!0,!0)[i]},D=function(){g=g||{},g.WITHOUT_VERIFY=a.is_modify(),g.IS_NEW_TERM=a.is_newterm(),g.IS_UPDATE=a.is_update();var e=g.IS_NEW_TERM?"newterm":g.IS_UPDATE?"update":g.WITHOUT_VERIFY?"plan":"publish";t("#publish_steps").append(n({type:e,isfree:a.is_free_course(),isTupAgency:g.isTupAgency},{}));var i=t(".publish-step4");i.find(".btn-commit").text(g.WITHOUT_VERIFY?"提交":g.IS_NEW_TERM?"提交":"提交审核"),_.init(),o.init(),m.init(),l.init();var c=(g.result||{}).terms||[];if(a.is_publish()&&!s.isLoadFromDraft||!c.length)l.add();else if(g.IS_UPDATE)l.load(a.clear_data(c,0,!0,!1,!1,!1));else if(g.IS_NEW_TERM)t.bom.query("inner_id")?r.get_audit_term_info({param:{aid:h.getInfoSync().aid,tid:t.bom.query("term_id"),index:t.bom.query("inner_id")},succ:function(e){e=e||{};var r=g.result=e.result.audit||{},i=t.isArray(r.terms)?r.terms:[];l.newterm(C(i,!0))},err:function(e){e=e||{};var r="服务器繁忙，请稍后再试("+e.retcode+")";t._alert(r,function(){location.href="/agency/index/index.html"})}}):l.newterm(C(c));else{var d=a.clear_data(c,0,!s.isLoadFromDraft,!1,!a.is_modify()&&!s.isLoadFromDraft,"c"===g.cmd?!0:!1);d="c"===g.cmd?[d.pop()]:d,l.load(d),_.setData(d&&d[0])}S(),i.on("onDraftSave",function(){4===g.step&&w()}).on("click",".btn-draft",function(){s.saveDraft()})};return{init:D,checkThisStep:v}});
/*!agency/publish/mod.main*/
;define("agency/publish/mod.main",function(e){function t(e){i.initReport(e)}e("edu_modules/edu-dialog/edu-dialog"),e("edu_modules/edu-base/edu-base"),e("@tencent/im-jquery.placeholder/jquery.placeholder"),e("agency/publish/common/feature.flag");{var n=(e("badjs"),e("agency/publish/common/_pd")),i=e("jquery"),a=e("edu_modules/edu-report/edu-report"),s=e("edu_modules/edu-agency/index"),o=e("@tencent/im-hashchange/hashchange"),d=e("agency/index/side/mod.side"),p=e("/agency/publish/template/index.tpl_tpl"),c={};c.Step1=e("agency/publish/step1/step1"),c.Step2=e("agency/publish/step2/step2"),c.Step3=e("agency/publish/step3/step3"),c.Step4=e("agency/publish/step4/step4")}i.render.faq=function(){return'<span>[<a target="_blank" href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=8" class="nor-link">?</a>]</span>'};var r=function(){i(".js-go-back").click(function(){n.step>1?i.Dialog.confirm("当前课程资料编辑中，确认放弃当前编辑内容？",{onAccept:u}):u()}),i(".page-publish").on("click",".f-dropdown-tip .nor-link",function(){var e=i(this).find(".icon-v");e.hasClass("i-v-bottom")?(e.removeClass("i-v-bottom").addClass("i-v-top"),i(this).hasClass("more_setting_toggle")&&i(this).find("span").html("收起")):(e.removeClass("i-v-top").addClass("i-v-bottom"),i(this).hasClass("more_setting_toggle")&&i(this).find("span").html("展开"))})},u=function(){location.href="p"===n.cmd?"//ke.qq.com/agency/index/index.html#tab=course_admin#plan":"//ke.qq.com/agency/index/index.html#tab=course_admin#admin"},l=function(){setTimeout(function(){o(function(){var e=parseInt(i.bom.getHash("step"),10);e=isNaN(e)?"p"===n.cmd?"4":2:e,e!==n.step&&n.initStep(e),!i.bom.getHash("task")&&i(document).trigger("task_cancel")})},0),TRecord.push("page_main_start");var e=i('<div id="publish"></div>');i("#agency_cont").append(e),e.html(p()),s.getInfo().then(function(e){TRecord.cfg.isd.get_info=27,TRecord.push("get_info"),setTimeout(function(){var e=s.getInfoSync().aid;n.initData&&n.initData(e)},0);var t=parseInt(e.agency_info.group_num,10)||0,a=parseInt(e.agency_info.teacher_num,10)||0;return 1>t||1>a?i._alert(1>a?"必须有关联的老师才能发布课程":"必须有关联的Q群才能发布课程",function(){location.href="/agency/index/index.html#tab=showTeacher"}):(setTimeout(function(){d.init&&d.init(null,"PUBLISH")},0),n=i.extend(n,{step:0,data:{},steps:c,cid:parseInt(i.bom.query("cid"),10)||0,signedFee:e.sign_status.signedFee}),setTimeout(function(){n.initStep(i.bom.query("steps")||1)},0),TRecord.push("page_main_end"),void TRecord.report(["page_start","page_css_ready","page_js_ready","page_main_start","page_main_end","page_render_end","page_render_fp","inline_script_run_time","get_info"],{delay:1e3}))}),t({module:"Release-course"}),a.tdw({action:"Exposure"}),r()};l()});
window.__loadJs&&window.__loadJs('/agency/publish/mod.main.a3b1be6f.js?max_age=3153600',2);