window.__loadJs&&window.__loadJs('/agency/index/installment/mod.main.9031b7c8.js?max_age=3153600',1);
/*!@tencent/im-hashchange/hashchange*/
;define("@tencent/im-hashchange/hashchange",function(){return function(n){if("onhashchange"in window&&window.addEventListener)window.addEventListener("hashchange",n,!1);else{var e="",h=function(){setTimeout(function(){e!==location.hash&&(e=location.hash,n()),h()},50)};h()}}});
/*!edu_modules/edu-user/src/user.adapter*/
;define("edu_modules/edu-user/src/user.adapter",function(e,r,o){var w;if(window.jQuery)w=window.jQuery;else{if(!window.$)throw new Error("没有找到jQuery或zepto");w=window.$}o.exports=w});
/*!edu_modules/local.data/local.data*/
;define("edu_modules/local.data/local.data",function(e,t,n){var r,a=function(){var e,t,n=document.getElementsByTagName("head")[0],r=window.location.hostname||"edu_database",a=new Date;if(n.addBehavior){try{t=new ActiveXObject("htmlfile"),t.open(),t.write('<script>document.w=window;</script><iframe src="/favicon.ico"></frame>'),t.close(),e=t.w.frames[0].document}catch(i){e=document}n=e.createElement("head"),e.appendChild(n),a.setDate(a.getDate()+30),n.addBehavior("#default#userData"),n.expires=a.toUTCString(),n.load(r);var o=n.XMLDocument.documentElement,c=o.attributes,u="prefix_____hack__",l=/^[-\d]/,s=new RegExp("^"+u),f=function(e){return l.test(e)?u+e:e},h=function(e){return e.replace(s,"")},d={length:c.length,notNativeCode:!0,getItem:function(e){return(c.getNamedItem(f(e))||{nodeValue:null}).nodeValue||o.getAttribute(f(e))},setItem:function(e,t){o.setAttribute(f(e),t),n.save(r),this.length=c.length},removeItem:function(e){o.removeAttribute(f(e)),n.save(r),this.length=c.length},clear:function(){for(;c.length;)this.removeItem(c[0].nodeName);this.length=0},key:function(e){return c[e]?h(c[e].nodeName):void 0}};return d}};try{r=window.localStorage,r||(r=a())}catch(i){r=a()}var o=function(e){var t=function(){return null};return e?{set:function(t,n){void 0!==this.get(t)&&this.remove(t);try{e.setItem(t,n)}catch(r){this.clear()}},get:function(t){var n=e.getItem(t);return null===n?void 0:n},remove:function(t){e.removeItem(t)},clear:function(){e.clear()},each:function(e){var t,n=this.obj(),r=e||function(){};for(t in n)if(r.call(this,t,this.get(t))===!1)break},obj:function(){var t,n,r={},a=0;if(e.isVirtualObject)r=e.key(-1);else for(t=e.length;t>a;a++)n=e.key(a),r[n]=this.get(n);return r},filter:function(t){var n,r,a=[],i=0;if(e.isVirtualObject)a=[];else for(n=e.length;n>i;i++)r=e.key(i),t.test(r)&&a.push({key:r,value:this.get(r)});return a}}:{set:t,get:t,remove:t,clear:t,each:t,obj:t,filter:t}}(r);n.exports=o});
/*!edu_modules/edu-user/src/user.local*/
;define("edu_modules/edu-user/src/user.local",function(e,t,r){var a=e("edu_modules/local.data/local.data"),u="__userinfo";r.exports={get:function(){var e,t={};try{e=a.get(u),e&&(t=JSON.parse(a.get(u))||{})}catch(r){}return t},set:function(e){try{a.set(u,JSON.stringify(e))}catch(t){}}}});
/*!edu_modules/edu-user/src/user.base*/
;define("edu_modules/edu-user/src/user.base",function(e,i,s){var n=e("edu_modules/edu-user/src/user.local"),r={aid:0,is_login:0,nick_name:"",face_url:"",role_type:64,role_info:0,uid:"",skey:"",uid_type:0,isWeixinUser:!1,isQQUser:!0,isMaster:!1,isPersonal:!1,isAdmin:!1,isCustomAdmin:!1,isCourseTeacher:!1,isTeacher:!1,isStudent:!0,isPlatRole:!1};s.exports={updateInfo:function(e){for(var i in e)"undefined"!=typeof r[i]&&(r[i]=e[i]);n.set(r)},getInfoSync:function(){return r},getRoleInfoSync:function(){var e={},i=r.role_info||0,s={isRoleAssistant:1,isRoleTeacher:2,isRoleTeachingManager:7,isRoleSuperManager:8,isRoleSalesManager:16,isTeachingAffairs:17,isSaler:18,isRoleFinancialAffairs:19,isCustomize1:20,isCustomize2:21};for(var n in s){var o=s[n];e[n]=(i&1<<o)>0?!0:!1}return e},extendBaseInfo:function(e){e=e||{};for(var i in e){if("undefined"!=typeof r[i])throw new Error("定义了重复的基础字段");r[i]=e[i]}}}});
/*!edu_modules/util.cookie/util.cookie*/
;define("edu_modules/util.cookie/util.cookie",function(n,e,i){function o(n){var e=document.cookie.match(new RegExp("(^| )"+n+"=([^;]*)(;|$)"));return e?decodeURIComponent(e[2]):""}var u=n("jquery"),e={get:o,set:function(n,e,i,o,u){var t=new Date;t.setTime(t.getTime()+(u?36e5*u:2592e6)),document.cookie=n+"="+e+"; expires="+t.toGMTString()+"; path="+(o?o:"/")+"; "+(i?"domain="+i+";":"")},setSession:function(n,e,i,o){document.cookie=n+"="+e+"; path="+(o?o:"/")+"; "+(i?"domain="+i+";":"")},del:function(n,e,i){document.cookie=n+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; path="+(i?i:"/")+"; "+(e?"domain="+e+";":"")},clear:function(){var n=document.cookie.match(new RegExp("([^ ;][^;]*)(?=(=[^;]*)(;|$))","gi"));for(var e in n)document.cookie=n[e]+"=;expires=Mon, 26 Jul 1997 05:00:00 GMT; path=/; "},uin:function(){var n;return 2==o("uid_type")?o("uid_uin")||null:(n=o("p_luin")||o("p_uin")||o("uin")||o("pt2gguin")||o("adid"),n=n?parseInt(n.substring(1,n.length),10):null,n=n||parseInt(o("uin_cookie"),10)||null)},realUin:function(){var n;return 2==o("uid_type")?o("uid_uin")||null:(n=o("p_luin")||o("p_uin")||o("uin"),n=n?parseInt(n.substring(1,n.length),10):null,n=n||parseInt(o("uin_cookie"),10)||null)}};u.cookie=e,u.reset_own_cookie=function(){u.cookie=e},i.exports=e});
/*!edu_modules/edu-user/src/user.uid*/
;define("edu_modules/edu-user/src/user.uid",function(e,u,i){var t=e("edu_modules/util.cookie/util.cookie");i.exports=function(){var e="",u="",i=0;return 2===Number(t.get("uid_type"))?(i=2,e=t.get("uid_uin")||"",u=t.get("uid_a2")||""):(e=t.get("p_luin")||t.get("p_uin")||"",u=t.get("p_lskey")||t.get("p_skey")||"",i=0,e&&(e=parseInt(e.substring(1,e.length),10))),e=String(e),{uid:e,skey:u,uid_type:i,isWeixinUser:2===i,isQQUser:2!==i}}});
/*!edu_modules/bkn/index*/
;define("edu_modules/bkn/index",function(e,n,t){function o(e){if(!e)return"";for(var n=5381,t=0,o=e.length;o>t;++t)n+=(n<<5)+e.charAt(t).charCodeAt();return 2147483647&n}function r(){return u("p_lskey")||u("p_skey")||u("skey")}function u(e){if(f)return"";var n=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return n?decodeURIComponent(n[2]):""}function i(){var e=0==u("uid_type");return e?r():u("uid_a2")||r()}function d(){return o(i())}var c="object"==typeof window&&window&&"undefined"!=typeof document,f=!c;t.exports=d});
/*!edu_modules/check/check*/
;define("edu_modules/check/check",function(e,i,o){e("edu_modules/util.cookie/util.cookie");var u=e("jquery");o.exports={isWeixinUser:function(){var e=u.cookie.get("uid_type");return 2==e?!0:!1}}});
/*!@tencent/im-tab-man/tab*/
;define("@tencent/im-tab-man/tab",function(t,a,n){function i(t,a){return a=a||{},t=e(t),t.data("Tab")?t.data("Tab"):this instanceof i?(this.container=t,this.container.data("Tab",this),this.tabContent=a.tabContent||"mod-tab__content",this.tabNav=a.tabNav||"mod-tab__ul",this.tabNavItem=a.tabNavItem||"mod-tab__li",this.tabCurItem=a.tabCurItem||"mod-tab__li_current",this.pos=a.pos||0,this.content=this.container.find("."+this.tabContent).eq(this.pos),this.nav=this.container.find("."+this.tabNav),this.navLis=this.nav.find("."+this.tabNavItem),this.curNav=this.navLis.eq(this.pos),void this.init()):new i(t,a)}var e=t("jquery");i.prototype={constructor:i,init:function(){var t=this;return this.nav.on("click","a",function(a){a.preventDefault();var n=e(this),i=n.closest("."+t.tabNavItem),s=i.index();i[0]!==t.curNav[0]&&(t.content.hide(),t.curNav.removeClass(t.tabCurItem),t.content=t.container.find("."+t.tabContent).eq(s),t.curNav=n.closest("."+t.tabNavItem),t.content.show(),t.curNav.addClass(t.tabCurItem),t.container.trigger("changeTab",s,t.curNav))}),this}},n.exports=i});
/*!core-js/library/modules/_global*/
;define("core-js/library/modules/_global",function(e,n,o){var t=o.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)});
/*!core-js/library/modules/_core*/
;define("core-js/library/modules/_core",function(e,r,o){var n=o.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)});
/*!core-js/library/modules/_a-function*/
;define("core-js/library/modules/_a-function",function(n,o,r){r.exports=function(n){if("function"!=typeof n)throw TypeError(n+" is not a function!");return n}});
/*!core-js/library/modules/_ctx*/
;define("core-js/library/modules/_ctx",function(r,n,e){var t=r("core-js/library/modules/_a-function");e.exports=function(r,n,e){if(t(r),void 0===n)return r;switch(e){case 1:return function(e){return r.call(n,e)};case 2:return function(e,t){return r.call(n,e,t)};case 3:return function(e,t,u){return r.call(n,e,t,u)}}return function(){return r.apply(n,arguments)}}});
/*!core-js/library/modules/_is-object*/
;define("core-js/library/modules/_is-object",function(e,o,n){n.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}});
/*!core-js/library/modules/_an-object*/
;define("core-js/library/modules/_an-object",function(r,o,e){var n=r("core-js/library/modules/_is-object");e.exports=function(r){if(!n(r))throw TypeError(r+" is not an object!");return r}});
/*!core-js/library/modules/_fails*/
;define("core-js/library/modules/_fails",function(r,e,n){n.exports=function(r){try{return!!r()}catch(e){return!0}}});
/*!core-js/library/modules/_descriptors*/
;define("core-js/library/modules/_descriptors",function(e,r,n){n.exports=!e("core-js/library/modules/_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})});
/*!core-js/library/modules/_dom-create*/
;define("core-js/library/modules/_dom-create",function(e,r,o){var t=e("core-js/library/modules/_is-object"),c=e("core-js/library/modules/_global").document,l=t(c)&&t(c.createElement);o.exports=function(e){return l?c.createElement(e):{}}});
/*!core-js/library/modules/_ie8-dom-define*/
;define("core-js/library/modules/_ie8-dom-define",function(e,r,o){o.exports=!e("core-js/library/modules/_descriptors")&&!e("core-js/library/modules/_fails")(function(){return 7!=Object.defineProperty(e("core-js/library/modules/_dom-create")("div"),"a",{get:function(){return 7}}).a})});
/*!core-js/library/modules/_to-primitive*/
;define("core-js/library/modules/_to-primitive",function(r,t,e){var o=r("core-js/library/modules/_is-object");e.exports=function(r,t){if(!o(r))return r;var e,i;if(t&&"function"==typeof(e=r.toString)&&!o(i=e.call(r)))return i;if("function"==typeof(e=r.valueOf)&&!o(i=e.call(r)))return i;if(!t&&"function"==typeof(e=r.toString)&&!o(i=e.call(r)))return i;throw TypeError("Can't convert object to primitive value")}});
/*!core-js/library/modules/_object-dp*/
;define("core-js/library/modules/_object-dp",function(e,r){var o=e("core-js/library/modules/_an-object"),i=e("core-js/library/modules/_ie8-dom-define"),t=e("core-js/library/modules/_to-primitive"),s=Object.defineProperty;r.f=e("core-js/library/modules/_descriptors")?Object.defineProperty:function(e,r,c){if(o(e),r=t(r,!0),o(c),i)try{return s(e,r,c)}catch(n){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(e[r]=c.value),e}});
/*!core-js/library/modules/_property-desc*/
;define("core-js/library/modules/_property-desc",function(e,r,n){n.exports=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}}});
/*!core-js/library/modules/_hide*/
;define("core-js/library/modules/_hide",function(r,e,o){var s=r("core-js/library/modules/_object-dp"),c=r("core-js/library/modules/_property-desc");o.exports=r("core-js/library/modules/_descriptors")?function(r,e,o){return s.f(r,e,c(1,o))}:function(r,e,o){return r[e]=o,r}});
/*!core-js/library/modules/_has*/
;define("core-js/library/modules/_has",function(r,e,n){var o={}.hasOwnProperty;n.exports=function(r,e){return o.call(r,e)}});
/*!core-js/library/modules/_export*/
;define("core-js/library/modules/_export",function(r,e,n){var o=r("core-js/library/modules/_global"),t=r("core-js/library/modules/_core"),i=r("core-js/library/modules/_ctx"),s=r("core-js/library/modules/_hide"),u=r("core-js/library/modules/_has"),a="prototype",c=function(r,e,n){var l,f,y,d=r&c.F,m=r&c.G,p=r&c.S,b=r&c.P,h=r&c.B,j=r&c.W,v=m?t:t[e]||(t[e]={}),_=v[a],w=m?o:p?o[e]:(o[e]||{})[a];m&&(n=e);for(l in n)f=!d&&w&&void 0!==w[l],f&&u(v,l)||(y=f?w[l]:n[l],v[l]=m&&"function"!=typeof w[l]?n[l]:h&&f?i(y,o):j&&w[l]==y?function(r){var e=function(e,n,o){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(e);case 2:return new r(e,n)}return new r(e,n,o)}return r.apply(this,arguments)};return e[a]=r[a],e}(y):b&&"function"==typeof y?i(Function.call,y):y,b&&((v.virtual||(v.virtual={}))[l]=y,r&c.R&&_&&!_[l]&&s(_,l,y)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,n.exports=c});
/*!core-js/library/modules/_cof*/
;define("core-js/library/modules/_cof",function(r,e,n){var o={}.toString;n.exports=function(r){return o.call(r).slice(8,-1)}});
/*!core-js/library/modules/_iobject*/
;define("core-js/library/modules/_iobject",function(e,r,t){var o=e("core-js/library/modules/_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}});
/*!core-js/library/modules/_defined*/
;define("core-js/library/modules/_defined",function(e,o,r){r.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}});
/*!core-js/library/modules/_to-iobject*/
;define("core-js/library/modules/_to-iobject",function(e,r,o){var i=e("core-js/library/modules/_iobject"),c=e("core-js/library/modules/_defined");o.exports=function(e){return i(c(e))}});
/*!core-js/library/modules/_to-integer*/
;define("core-js/library/modules/_to-integer",function(e,r,o){var t=Math.ceil,i=Math.floor;o.exports=function(e){return isNaN(e=+e)?0:(e>0?i:t)(e)}});
/*!core-js/library/modules/_to-length*/
;define("core-js/library/modules/_to-length",function(e,r,n){var o=e("core-js/library/modules/_to-integer"),t=Math.min;n.exports=function(e){return e>0?t(o(e),9007199254740991):0}});
/*!core-js/library/modules/_to-absolute-index*/
;define("core-js/library/modules/_to-absolute-index",function(e,r,o){var t=e("core-js/library/modules/_to-integer"),n=Math.max,i=Math.min;o.exports=function(e,r){return e=t(e),0>e?n(e+r,0):i(e,r)}});
/*!core-js/library/modules/_array-includes*/
;define("core-js/library/modules/_array-includes",function(r,e,o){var n=r("core-js/library/modules/_to-iobject"),i=r("core-js/library/modules/_to-length"),t=r("core-js/library/modules/_to-absolute-index");o.exports=function(r){return function(e,o,l){var u,s=n(e),a=i(s.length),c=t(l,a);if(r&&o!=o){for(;a>c;)if(u=s[c++],u!=u)return!0}else for(;a>c;c++)if((r||c in s)&&s[c]===o)return r||c||0;return!r&&-1}}});
/*!core-js/library/modules/_library*/
;define("core-js/library/modules/_library",function(r,e,i){i.exports=!0});
/*!core-js/library/modules/_shared*/
;define("core-js/library/modules/_shared",function(r,e,o){var s=r("core-js/library/modules/_core"),i=r("core-js/library/modules/_global"),l="__core-js_shared__",a=i[l]||(i[l]={});(o.exports=function(r,e){return a[r]||(a[r]=void 0!==e?e:{})})("versions",[]).push({version:s.version,mode:r("core-js/library/modules/_library")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})});
/*!core-js/library/modules/_uid*/
;define("core-js/library/modules/_uid",function(o,n,r){var t=0,i=Math.random();r.exports=function(o){return"Symbol(".concat(void 0===o?"":o,")_",(++t+i).toString(36))}});
/*!core-js/library/modules/_shared-key*/
;define("core-js/library/modules/_shared-key",function(r,e,s){var o=r("core-js/library/modules/_shared")("keys"),d=r("core-js/library/modules/_uid");s.exports=function(r){return o[r]||(o[r]=d(r))}});
/*!core-js/library/modules/_object-keys-internal*/
;define("core-js/library/modules/_object-keys-internal",function(r,e,o){var s=r("core-js/library/modules/_has"),l=r("core-js/library/modules/_to-iobject"),a=r("core-js/library/modules/_array-includes")(!1),i=r("core-js/library/modules/_shared-key")("IE_PROTO");o.exports=function(r,e){var o,n=l(r),u=0,c=[];for(o in n)o!=i&&s(n,o)&&c.push(o);for(;e.length>u;)s(n,o=e[u++])&&(~a(c,o)||c.push(o));return c}});
/*!core-js/library/modules/_enum-bug-keys*/
;define("core-js/library/modules/_enum-bug-keys",function(e,r,o){o.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});
/*!core-js/library/modules/_object-keys*/
;define("core-js/library/modules/_object-keys",function(e,r,o){var s=e("core-js/library/modules/_object-keys-internal"),n=e("core-js/library/modules/_enum-bug-keys");o.exports=Object.keys||function(e){return s(e,n)}});
/*!core-js/library/modules/_object-gops*/
;define("core-js/library/modules/_object-gops",function(e,o){o.f=Object.getOwnPropertySymbols});
/*!core-js/library/modules/_object-pie*/
;define("core-js/library/modules/_object-pie",function(e,r){r.f={}.propertyIsEnumerable});
/*!core-js/library/modules/_to-object*/
;define("core-js/library/modules/_to-object",function(e,r,o){var n=e("core-js/library/modules/_defined");o.exports=function(e){return Object(n(e))}});
/*!core-js/library/modules/_object-assign*/
;define("core-js/library/modules/_object-assign",function(r,e,o){"use strict";var s=r("core-js/library/modules/_descriptors"),c=r("core-js/library/modules/_object-keys"),t=r("core-js/library/modules/_object-gops"),l=r("core-js/library/modules/_object-pie"),i=r("core-js/library/modules/_to-object"),a=r("core-js/library/modules/_iobject"),n=Object.assign;o.exports=!n||r("core-js/library/modules/_fails")(function(){var r={},e={},o=Symbol(),s="abcdefghijklmnopqrst";return r[o]=7,s.split("").forEach(function(r){e[r]=r}),7!=n({},r)[o]||Object.keys(n({},e)).join("")!=s})?function(r){for(var e=i(r),o=arguments.length,n=1,b=t.f,j=l.f;o>n;)for(var u,f=a(arguments[n++]),m=b?c(f).concat(b(f)):c(f),d=m.length,y=0;d>y;)u=m[y++],(!s||j.call(f,u))&&(e[u]=f[u]);return e}:n});
/*!core-js/library/modules/es6.object.assign*/
;define("core-js/library/modules/es6.object.assign",function(e){var s=e("core-js/library/modules/_export");s(s.S+s.F,"Object",{assign:e("core-js/library/modules/_object-assign")})});
/*!core-js/library/fn/object/assign*/
;define("core-js/library/fn/object/assign",function(e,s,r){e("core-js/library/modules/es6.object.assign"),r.exports=e("core-js/library/modules/_core").Object.assign});
/*!babel-runtime/core-js/object/assign*/
;define("babel-runtime/core-js/object/assign",function(e,s,n){n.exports={"default":e("core-js/library/fn/object/assign"),__esModule:!0}});
/*!edu_modules/reportor/lib/util*/
;define("edu_modules/reportor/lib/util",function(r,t,e){function n(r){return r&&"[object Object]"===r.toString()}function o(r){return r&&"function"==typeof r}function i(r){if(!n(r)||r.nodeType||r.setInterval)return!1;if(r.constructor&&!r.hasOwnProperty("constructor")&&!r.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1;var t;for(t in r);return void 0===t||r.hasOwnProperty(t)}function f(r,t){if(o(t))if(n(r))for(var e in r)t(e,r[e],r);else if(Array.isArray(r))for(var i=0,f=r.length;f>i;i++)t(i,r[i],r)}function u(r,t){var e=new RegExp("(\\?|#|&)"+t+"=([^&]*)(&|$)","g");return r.replace(e,"").replace(/(\?|#|&)$/,"")}"function"!=typeof Object.assign&&(Object.assign=function(r){if(null==r)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}),Array.isArray||(Array.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(r,t,e){return function(n,o){if(null===this||void 0===this)throw TypeError("Array.prototype.indexOf called on null or undefined");var i=r(this),f=i.length>>>0,u=e(0|o,f);if(0>u)u=t(0,f+u);else if(u>=f)return-1;if(void 0===n){for(;u!==f;++u)if(void 0===i[u]&&u in i)return u}else if(n!==n){for(;u!==f;++u)if(i[u]!==i[u])return u}else for(;u!==f;++u)if(i[u]===n)return u;return-1}}(Object,Math.max,Math.min)),e.exports={isPlainObject:i,each:f,delParam:u}});
/*!edu_modules/reportor/tdw/tdw*/
;define("edu_modules/reportor/tdw/tdw",function(t,r,e){function n(t){var r;return o(t),r=a(t),{fields:h,datas:r}}function i(t,r){return r=r||[],r.forEach(function(r){r.forEach(function(e,n){"string"==typeof e&&(r[n]=~m.indexOf(t[n])?e.substring(0,w):e.substring(0,v))})}),r}function o(t){t&&(l.isPlainObject(t)&&(t=[t]),Array.isArray(t)&&l.each(t,function(t,r){l.each(r,function(t){g[t]||(g[t]=1,h.push(t))})}))}function a(t){var r,e=[];return t&&(l.isPlainObject(t)&&(t=[t]),Array.isArray(t))?(l.each(t,function(t,n){r=[],n=Object.assign({},d,n),l.each(h,function(t,e){var i=n[e];i=void 0===i?"":i,r.push(i)}),e.push(r)}),e):void 0}function s(t,r){var e={};r=r||p,l.each(["table","pr_ip","pr_t"],function(t,n){e[n]=r[n]||""}),t.datas=i(t.fields,t.datas),e.fields=JSON.stringify(t.fields),e.datas=JSON.stringify(t.datas),e.retype=2,p.beforeRequest(t)!==!1&&r.url&&(f.ajax({url:r.url,data:e,dataType:"jsonp"}).done(function(r){p[0===r.ret?"success":"error"](r,t)}).fail(function(r,e,n){p.fail(t,r,e,n)}),u(t.fields,t.datas))}function c(){var t=[],r=j.read();r.length<=p.slicer?s(n(r)):(l.each(r,function(r,e){t.push(e),r>0&&r%p.slicer===p.slicer-1&&(s(n(t)),t=[])}),t.length&&s(n(t)))}function u(t,r){if(b.table&&window.localStorage)try{if(1===parseInt(window.localStorage.getItem("tdwFlag"),10)||1===parseInt(window.localStorage.getItem("tdwFlag2"),10))for(var e=0,n=r.length;n>e;e++){for(var i={},o=0,a=t.length;a>o;o++)""!==r[e][o]&&(i[t[o]]=r[e][o]);b.table([i])}}catch(s){}}var f=t("jquery"),l=t("edu_modules/reportor/lib/util"),p={url:"/cgi-bin/activity_platform/tdw/report",timer:300,beforeRequest:function(){},success:function(){},error:function(){},fail:function(){},slicer:8,table:"",pr_ip:"",pr_t:""},d={},g={},h=[],y=0,b=console||{},v=50,w=450,m=["url","refer","courseid","ver1"],j={pool:[],write:function(t){l.isPlainObject(t)?this.pool.push(t):Array.isArray(t)&&Array.prototype.push.apply(this.pool,t)},read:function(){var t=this.pool;return this.pool=[],t}};e.exports={config:function(t,r){Object.assign(d,t),Object.assign(p,r),o(d)},report:function(t){j.write(t),y||(y=setTimeout(function(){c(),y=0},p.timer))},reportSync:function(t,r){r=Object.assign({},p,r),s(n(t),r)},composer:n,request:s,getCommonData:function(t){return t?d[t]:d}}});
/*!edu_modules/local.data/cross.local*/
;define("edu_modules/local.data/cross.local",function(e,n,i){function t(e,n){var i,t=n||{};for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function a(e){m[e.id]&&(m[e.id](e),delete m[e.id])}function r(e){var n=e.origin,i=/(\.|^)qq\.com$/;if(i.test(n)){var t;try{t=JSON.parse(e.data)}catch(r){}t&&t.namespace===f&&("iframe-ready"===t.id?(w=!0,u.initCallback()):a(t))}}function o(e,n,i,t){s++,m[s]=t;var a={namespace:f,id:s,action:e,key:n,value:i};l.contentWindow.postMessage(JSON.stringify(a),"*")}function c(e){u=t(e,u);var n=document.createElement("div");window.addEventListener?window.addEventListener("message",r,!1):window.attachEvent("onmessage",r),n.innerHTML='<iframe id="'+u.iframeId+'" src='+u.iframeUrl+' style="display: none;"></iframe>',document.body.appendChild(n),l=document.getElementById(u.iframeId)}function d(){return v&&w?!0:!1}var l,f="cross-domain-local-message",u={iframeId:"cross-domain-iframe",iframeUrl:void 0,initCallback:function(){}},s=-1,m={},v=!1,w=!0;i.exports={init:function(e){if(!e.iframeUrl)throw"必须指定iframe的url";v||(v=!0,"complete"===document.readyState?c(e):window.onload=function(){c(e)})},set:function(e,n,i){d()&&o("set",e,n,i)},get:function(e,n){d()&&o("get",e,null,n)},remove:function(e,n){d()&&o("remove",e,null,n)},clear:function(e){d()&&o("clear",null,null,e)},filter:function(e,n){if(d()){var i=e.toString().replace(/(^\/)|(\/$)/g,"");o("filter",i,null,n)}},wasInit:function(){return v}}});
/*!edu_modules/local.data/power.local*/
;define("edu_modules/local.data/power.local",function(e,n,t){function o(e,n){var t,o=n||{};for(t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o}function r(){var e=document.domain,n=u.whiteDomain,t=!1;if(!u.crossDomain)return!1;if(0===n.length)return!1;for(var o=0;o<n.length&&e!==n[o];o++);return o===n.length&&(t=!0),t}function i(e,n){return{get:function(t,o){n?e.get(t,function(e){o&&o(e&&e.value)}):o&&o(e.get(t))},set:function(t,o,r){try{n?e.set(t,o,r):(e.set(t,o),r&&r())}catch(i){"QuotaExceededError"===i.name&&window.BJ_REPORT&&BJ_REPORT.debug({msg:"local-write-overflow",ext:{msid:2514080}})}},remove:function(t,o){n?e.remove(t,o):(e.remove(t),o&&o())},filter:function(t,o){n?e.filter(t,function(e){o&&o(e&&e.value)}):o&&o(e.filter(t))},clear:function(t){n?e.clear(t):(e.clear(),t&&t())},wasInit:function(){return n?e.wasInit():!0},isCross:function(){return n}}}function a(e,n){o(e,u),r()?(l=c,l.init({iframeUrl:u.iframeUrl,initCallback:function(){n&&n(i(l,!0))}})):n&&n(i(l))}var l=e("edu_modules/local.data/local.data"),c=e("edu_modules/local.data/cross.local"),u={whiteDomain:[],iframeUrl:"",crossDomain:!1};t.exports={getLocal:a}});
/*!edu_modules/reportor/tdw/tdw-local*/
;define("edu_modules/reportor/tdw/tdw-local",function(e,o,n){function t(e,o){if(q.wasInit&&q.wasInit()){var n=o.fields,t=o.datas,r=n.indexOf(v.seqName);w.each(t,function(e,o){var n=v.localPrefix+o[r];q.remove(n)})}}function r(){y=!1}function a(e,o){w.isPlainObject(e)?o&&o(e):Array.isArray(e)&&w.each(e,function(e,n){o&&o(n)})}function i(){return(new Date).getTime()+Math.random().toFixed(17).toString().replace(".","")}function s(){y&&"/storage_proxy.html"!==window.location.pathname&&q.filter(b,function(e){var o;e=e.slice(0,4);for(var n=0;n<e.length;n++)o=JSON.parse(e[n].value||"{}"),o.seq_number?(o.datas&&o.datas[0].push("local"),o.fields&&o.fields.push("source_from"),_.request(o)):q.remove(e[n].key)})}function c(){h.getLocal({whiteDomain:v.whiteDomain,iframeUrl:v.crossProxy,crossDomain:v.crossDomain},function(e){q=e,setTimeout(function(){s()},1e3)})}function u(e){a(e,function(e){e[v.seqName]=i()})}function l(){return g&&g.obj&&null!==g.obj()}function f(e,o){a(e,function(e){o.push(Object.assign({seq_number:e[v.seqName]},_.composer(e)))})}function m(e){q.wasInit&&q.wasInit()&&w.each(e,function(e,o){var n=v.localPrefix+o[v.seqName];q.set(n,JSON.stringify(o))})}function d(e){var o=[];u(e),f(e,o),m(o)}var p=e("edu_modules/reportor/tdw/tdw"),w=e("edu_modules/reportor/lib/util"),g=e("edu_modules/local.data/local.data"),h=e("edu_modules/local.data/power.local"),q={},_={},x=l(),v={whiteDomain:[],crossProxy:"",crossDomain:!1,localPrefix:"ntdw_seq",seqName:"seq_number"},b=/^tdw_seq/,y=!0;_.composer=p.composer,_.getCommonData=p.getCommonData,_.config=p.config,_.request=p.request,_.config({},{success:t,error:r,fail:r}),_.report=function(e){d(e),p.report(e)},_.reportSync=function(e,o){d(e),p.reportSync(e,o)},_.initLocal=function(e){Object.assign(v,e),b=new RegExp("^"+v.localPrefix),x&&c()},n.exports=_});
/*!@tencent/im-util.bom/util.bom*/
;define("@tencent/im-util.bom/util.bom",function(e,n,t){var r=e("jquery"),a=navigator.platform,o=!a||"Win32"===a||"Win64"===a||"Windows"===a;t.exports=r.bom={query:function(e){var n=window.location.search.match(new RegExp("(\\?|&)"+e+"=([^&]*)(&|$)"));return n?decodeURIComponent(n[2]):""},getHash:function(e){var n=window.location.hash.match(new RegExp("(#|&)"+e+"=([^&]*)(&|$)"));return n?decodeURIComponent(n[2]):""},getParam:function(e,n){var t=e.match(new RegExp("(\\?|#|&)"+n+"=([^&#]*)(&|#|$)"));return t?decodeURIComponent(t[2]):""},checkPlatform:function(){var e=navigator.platform,n=!e||"Win32"===e||"Win64"===e||"Windows"===e;return n||(r.Dialog.alert("请通过电脑登录Windows系统，再访问该页面。"),Badjs("非windows pc, ua="+navigator.userAgent+", platform="+navigator.platform,location.href,0,410018,2)),n},parseHref:function(e){var n=document.createElement("a");return n.href=e,{domain:n.hostname,pathname:n.pathname,search:n.search,hash:n.hash}},isWindows:function(){return o},parseQuery:function(e){var n,t,r={};if(!e)return r;n=e.indexOf("?"),t=0===n?1:0;for(var a=e.substr(t).split("&"),o=0;o<a.length;o++){var i=a[o].split("=");r[decodeURIComponent(i[0])]=decodeURIComponent(i[1]||"")}return r},htmlEncode:function(e){return(""+e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")}}});
/*!edu_modules/reportor/lib/report.channel*/
;define("edu_modules/reportor/lib/report.channel",function(r,e,o){"use strict";function t(){for(var r=["saleToken","flowToken","tuin","from"],e=0,o=r.length;o>e;e++){var t=r[e],u=n.query(t);if(u)return{sourcetype:t,sourcefrom:u}}return{}}function u(){var r=n.query("tuin")||n.getHash("tuin");return+("0x"+r).toString(10)}var n=r("@tencent/im-util.bom/util.bom"),i="-";o.exports=function(r){r=r||{};var e=t(),o=u();return r.auin=r.auin||o||i,r.sourcetype=r.sourcetype||e.sourcetype||"",r.sourcefrom=r.sourcefrom||e.sourcefrom||"",r}});
/*!edu_modules/reportor/lib/report.uin*/
;define("edu_modules/reportor/lib/report.uin",function(r,i,e){function o(){return(""+Math.random()).substring(2)}var n=r("edu_modules/util.cookie/util.cookie");e.exports=function(r){var i,e=r.ver9,t=n.realUin(),u=r.visitor_id||o();return e&&!t&&(u=o()),t&&!e&&document.referrer&&(i="login"),Object.assign(r,{ver9:t?t:void 0,uin:n.uin()||"",visitor_id:u,ver10:i}),r}});
/*!edu_modules/reportor/lib/util.winname*/
;define("edu_modules/reportor/lib/util.winname",function(e,n,o){o.exports={set:function(e,n){this.del(e);var o=e+"="+n;window.name=window.name?window.name+"&"+o:o},get:function(e){var n=window.name.match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)"));return n?decodeURIComponent(n[2]):""},del:function(e){var n=this.get(e);n&&(window.name=window.name.replace(new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),"$3"))}}});
/*!edu_modules/reportor/lib/lastUrlpageHandler*/
;define("edu_modules/reportor/lib/lastUrlpageHandler",function(e,t,n){function r(e){var t=document.createElement("a");return t.href=e,{domain:t.hostname,pathname:t.pathname,search:t.search,hash:t.hash}}function o(e,t){return i.delParam(e,"tuin")===i.delParam(t,"tuin")}var a=e("edu_modules/reportor/lib/util.winname"),i=e("edu_modules/reportor/lib/util"),u="report_position_key_lastpage",l="report_position_key_lasturl",s=["ui.ptlogin2.qq.com/cgi-bin/login","open.weixin.qq.com/connect/oauth2/authorize"],c=document.referrer,d=r(c),h=d.domain+d.pathname;n.exports={get:function(){this.del();var e;try{e=a.get(u),e=JSON.parse(e)}catch(t){}return e},set:function(e){var t=location.href;a.set(u,JSON.stringify(e)),a.set(l,encodeURIComponent(t))},del:function(){this.shouldClear()&&a.del(u)},shouldClear:function(){var e=location.href,t=a.get(l);return!(o(e,t)||s.indexOf(h)>=0)}}});
/*!edu_modules/reportor/lib/positionHandler*/
;define("edu_modules/reportor/lib/positionHandler",function(e,t,n){function i(e){p=Object.assign({},p,e)}function o(){var e=l.get();if(e)return e;var t;return t=p.isPcWeb?r():a(),l.set(t),t}function r(){var e;try{e=m.get(f.name),e&&(e=JSON.parse(e))}catch(t){e={}}return m.del(f.name,f.domain,f.path),e||{}}function a(){var e;try{e=d.get(f.name),e&&(e=JSON.parse(e))}catch(t){e={}}return d.del(f.name),e}function s(e){return p.isPcWeb?void u(e):void c(e)}function u(e){m.setSession(f.name,JSON.stringify(e),f.domain,f.path)}function c(e){d.set(f.name,JSON.stringify(e))}var d=e("edu_modules/reportor/lib/util.winname"),l=e("edu_modules/reportor/lib/lastUrlpageHandler"),m=e("edu_modules/util.cookie/util.cookie"),f={name:"report_position_key",domain:"ke.qq.com",path:"/"},p={isPcWeb:!0};n.exports={config:i,getPositionData:o,setPositionData:s}});
/*!edu_modules/reportor/lib/report.position*/
;define("edu_modules/reportor/lib/report.position",function(o,t,r){function e(o){i(document).on("click","a[href],.js-report-link",function(){var t=i(this),r=t.attr("href");if(r&&0!==r.indexOf("#")||t.hasClass("js-report-link")){var e=t.closest("[data-report-position]"),n=t.closest("[data-report-module]"),s=e.data("report-position")||"",l=n.data("report-module")||"";a.setPositionData(i.extend({},o,{url_position:s,url_module:l}))}})}var i=o("jquery"),a=o("edu_modules/reportor/lib/positionHandler");r.exports=function(o,t){var r=t.getReportData("page"),i=t.getReportData("platform");a.config({isPcWeb:1===i}),e({url_page:r});var n=a.getPositionData();return["url_page","url_module","url_position"].forEach(function(t){o[t]=n[t]}),o}});
/*!edu_modules/reportor/lib/report.cookie*/
;define("edu_modules/reportor/lib/report.cookie",function(e,o,t){function r(e){s.isPlainObject(e)&&(e=JSON.stringify(e)),u.setSession(m.name,e,m.domain,m.path)}function i(){var e;try{e=u.get(m.name),e=JSON.parse(e)}catch(o){e={}}return e}function n(e,o){~c.indexOf("/storage_proxy.html")||(o=o||{},a=i(),d(a),l(a),p(a,e),e.config(a),r(a),e.tdw(Object.assign({action:"pageview"},a,o)))}var a,u=e("edu_modules/util.cookie/util.cookie"),d=e("edu_modules/reportor/lib/report.channel"),l=e("edu_modules/reportor/lib/report.uin"),p=e("edu_modules/reportor/lib/report.position"),s=e("edu_modules/reportor/lib/util"),c=location.pathname,m={name:"tdw_data_new_2",domain:"ke.qq.com",path:"/"};t.exports={reportPageView:n}});
/*!@tencent/im-jquery.isOnScreen/index*/
;define("@tencent/im-jquery.isOnScreen/index",function(t){var e=t("jquery");return e.fn.isOnScreen=function(){var t=e(window),o={top:t.scrollTop(),left:t.scrollLeft()};o.right=o.left+t.width(),o.bottom=o.top+t.height();var i=this.offset();return i.right=i.left+this.outerWidth(),i.bottom=i.top+this.outerHeight(),!(o.right<i.left||o.left>i.right||o.bottom<i.top||o.top>i.bottom)},e});
/*!edu_modules/reportor/lib/report.exposure*/
;define("edu_modules/reportor/lib/report.exposure",function(e,r,o){function n(e){e.$reportModule||(e.$reportModule=s.find("[data-report-module]"))}function t(e,r){var o=r.data("report-module");e.tdw({action:"exposure",module:o}),r.data(f,!0)}function i(e,r){function o(){i.each(function(o){var n=i.eq(o);if(!n.data(f)&&n.isOnScreen&&n.isOnScreen()){var a=r.reportFun||t;a(e,n,r)}})}r=r||{},n(r);var i=r.$reportModule;o(),(r.$wrapper||c).on("scroll.viewreport",function(){o()})}function a(e,r,o){o=Object.assign(p,o);var n=r.data("report-module"),t=r.find(o.courseCls),i=[],a=[];d.each(t,function(e){var r=t.eq(e);if(!r.data(f)&&r.isOnScreen&&r.isOnScreen()){var n=parseInt(r.data(o.courseIdKey),10);r.data(o.isPkgKey)&&(n+=1e7),a.push(n),i.push(r.data(o.indexKey)),r.data(f,!0)}}),0!==i.length&&0!==a.length&&(e.tdw({action:"exposure",module:n,position:i.join("_"),courseid:a.join("_")}),o.afterReport&&o.afterReport(e,r,o,{cidArr:a,posArr:i}))}function u(e,r){i(e,Object.assign({reportFun:a},r))}var d=e("jquery");e("@tencent/im-jquery.isOnScreen/index");var s=d(document),c=d(window),p={courseCls:"course",indexKey:"index",courseIdKey:"id",isPkgKey:"ispkg"},f="hasReport";o.exports={reportExposure:i,reportCourseExposure:u}});
/*!edu_modules/reportor/lib/report.attr*/
;define("edu_modules/reportor/lib/report.attr",function(t,r,o){var e=t("jquery"),n=function(t){for(var r,o=(t||"").split("&"),e={},n=0;n<o.length;n++)r=o[n].split("="),e[r[0]]=r[1];return e},i=function(t,r,o){return function(i){i.stopPropagation();var p=e.extend({action:o},n(e(this).attr(r)));t.tdw(p,!0)}},p=function(t){e(document).on("mouseenter","[report-hover]",i(t,"report-hover","hover")).on("click","[report-attr]",i(t,"report-attr","click"))};o.exports={init:p,parseAttr:n}});
/*!edu_modules/reportor/index*/
;define("edu_modules/reportor/index",function(r,e,o){"use strict";function t(r){return r&&r.__esModule?r:{"default":r}}var i=r("babel-runtime/core-js/object/assign"),u=t(i),n=r("edu_modules/reportor/tdw/tdw-local"),p=r("edu_modules/reportor/lib/report.cookie"),c=r("edu_modules/reportor/lib/report.exposure"),l=r("edu_modules/reportor/lib/report.attr");r("edu_modules/reportor/lib/util");var s=window.location,d={};n.config({opername:"edu",platform:1,url:s.href,refer:document.referrer},{table:"dc03514",pr_ip:"clientip",pr_t:"reporttime",slicer:4}),n.initLocal&&n.initLocal({whiteDomain:["ke.qq.com"],crossProxy:"//ke.qq.com/storage_proxy.html",crossDomain:!0}),d.tdw=function(r,e){n[e?"reportSync":"report"](r)},d.config=function(r){n.config(u.default({},r||{}))},d.getReportData=n.getCommonData,d.reportPageView=function(r){p.reportPageView(d,r)},d.reportExposure=function(r){return c.reportExposure(d,r)},d.reportCourseExposure=function(r){return c.reportCourseExposure(d,r)},l.init(d),o.exports=d});
/*!@tencent/im-observer/observer*/
;define("@tencent/im-observer/observer",function(t,r,n){var e=function(){var t={};return{listen:function(r,n){return t[r]=t[r]||[],t[r].push(n),this},remove:function(r){var n=t[r];return n?n.length=0:t[r]=void 0,this},one:function(t,r){return this.remove(t),this.listen(t,r)},trigger:function(){var r,n,e;e=Array.prototype.shift.call(arguments),n=t[e]?t[e]:t[e]=[];for(var i=0,o=n.length;o>i;i++)if(r=n[i],r.apply(this,arguments)===!1)return this;return this}}},i={},o=e();o.get=function(t){return i[t]||(i[t]=e()),i[t]},n.exports=o});
/*!edu_modules/edu-login/wxLongpoll*/
;define("edu_modules/edu-login/wxLongpoll",function(e,i,t){var o=e("edu_modules/check/check"),n=e("@tencent/im-observer/observer");t.exports={timeout:null,timespace:2e3,handle:function(){var e=this;o.isWeixinUser()&&(clearTimeout(e.timeout),n.get("login").trigger("weixinWillDone"),n.get("login").trigger("weixinDone"))},init:function(){var e=this;clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.handle()},e.timespace)},destroy:function(){clearTimeout(self.timeout)}}});
/*!/edu_modules/edu-login/template/wrap.tpl_tpl*/
;define("/edu_modules/edu-login/template/wrap.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="login-tab mod-tab" data-type="login"> <a href="javascript:void(0)" id="login_close" class="btn-close" title="关闭"> <i class="icon-font i-close"></i> </a> <ul class="mod-tab__ul"> <li class="mod-tab__li mod-tab__li-qq ',qqConfig.inited?"mod-tab__li_current":"",'" data-index="0"> <a class="tab-link" href="javascript:void(0);"><i class="icon-font i-qq"></i>QQ账号登录</a> </li> <li class="mod-tab__li mod-tab__li-wx ',wxConfig.inited?"mod-tab__li_current":"",'" data-index="1"> <a class="tab-link" href="javascript:void(0);"><i class="icon-font i-weixin"></i>微信账号登录</a> </li> </ul> <div class="mod-tab__content ',qqConfig.inited?"":"hide",'" data-inited="',qqConfig.inited,'"> <div class="mod-tab__content-tips">微信和QQ是两个独立账号，账号信息不互通</div> <div class="mod-tab__content-wrap mod-tab__content-wrap_qq"> <iframe name="login_frame_qq" src="',qqConfig.url,'" frameborder="0" scrolling="no" width="626px" height="370px"></iframe> </div> </div> <div class="mod-tab__content ',wxConfig.inited?"":"hide",'" data-inited="',wxConfig.inited,'"> <div class="mod-tab__content-tips">微信和QQ是两个独立账号，账号信息不互通</div> <div class="mod-tab__content-wrap wx__tab"> <label class="login-wx-tips">安全登录，防止被盗</label> <div class="login-code-container loading"> </div> </div> </div></div>'),_$out_.join("")}}});
/*!/edu_modules/edu-login/template/enter.tpl_tpl*/
;define("/edu_modules/edu-login/template/enter.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="login-tab mod-tab"> <a href="javascript:void(0)" id="login_close" class="btn-close" title="关闭"> <i class="icon-font i-close"></i> </a> <div class="enter-title">选择账号登录类型</div> <div class="enter-content"> <div class="content-avatar"> <div class="avatar-img"></div> </div> <div class="content-btns"> <a href="javascript:void(0);" data-type="1" class="js-btns-enter btns-enter btns-enter-qq"> <i class="icon-font i-qq"></i>QQ登录</a> <a href="javascript:void(0);" data-type="2" class="js-btns-enter btns-enter btns-enter-wx"> <i class="icon-font i-weixin"></i>微信登录</a> </div> </div></div>'),_$out_.join("")}}});
/*!/edu_modules/edu-login/template/weappcode.tpl_tpl*/
;define("/edu_modules/edu-login/template/weappcode.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return weappCode?_$out_.push('<div class="login-weapp-code"> <img class="weappcode-img" src="data:image/png;base64,',weappCode,'"> <div class="wechat-qrcode-mask"></div> <div class="wechat-qrcode-invalid-mask"> <div class="qrcode-invalid-mask"></div> <div class="qrcode-invalid-tips">二维码失效<br>请点击刷新</div> </div></div>'):url&&_$out_.push(' <iframe name="login_frame_wx" src="',url,'" frameborder="0" scrolling="no" width="100%" height="100%"></iframe>'),_$out_.join("")}}});
/*!edu_modules/edu-login/edu-login*/
;define("edu_modules/edu-login/edu-login",function(require,exports,module){"use strict";function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function checkLoginStateDowngrade(){getLoginStateFailNum>4&&(renderWeappCodeContainer(),clearInterval(weappLoginStateTimer),getLoginStateFailNum=0)}function bindCloseEvent(){var e=$("#login_close");e.off("click").on("click",function(){clearInterval(weappLoginStateTimer),global.ptlogin2_onClose()})}function bindEvent(){var e=$(".login-tab"),o=e.find(".mod-tab__content");bindCloseEvent(),e.off("changeTab").on("changeTab",function(e,n){var i=0===n;Tool.reportLoginTabExposure(i);var t=o.eq(n);if(1!==t.data("inited")){var a=i?Tool.generateUrlForQq(config):Tool.generateUrlForWx();t.find("iframe").attr("src",a),t.data("inited",1)}})}function bindChooseEvent(){var e=$(".login-tab");bindCloseEvent(),e.off("click").on("click",".js-btns-enter",function(){var e=$(this),o=e.data("type");Tool.cookie.set(chooseLoginTypeCookie,o),show()})}function messageCb(e){var o=e||global.event;if(-1!==(e.origin||"").indexOf("ptlogin2")){var n;switch(n="undefined"!=typeof JSON?JSON.parse(o.data):Tool.str2JSON(o.data),n.action){case"close":global.ptlogin2_onClose();break;case"resize":global.ptlogin2_onResize(n.width,n.height)}}}function bindMessageAPI(e){"undefined"!=typeof global.postMessage&&Tool.checkMode(e)&&$win.on("message",messageCb)}function unbindMessageAPI(e){"undefined"!=typeof global.postMessage&&Tool.checkMode(e)&&$win.off("message",messageCb)}function init(e){e&&(fromSource=e.source,$loginFrame&&(e={succ:e.succ,close:e.close}),config=$.extend({},DEFAULT_CONFIG,e),config.succ&&succQuene.push(config.succ),config.close&&closeQuene.push(config.close))}function getFrameDom(){if($loginFrame)return $loginFrame;var e=380;return $loginFrame=$("<div>").addClass("ptlogin-wrap"),$loginFrame.css({"margin-top":-e/2,visibility:"visible",height:e}),$loginFrame}function initChoose(){$loginFrame=getFrameDom(),$loginFrame.html(enterTpl({})),$body.append($loginFrame)}function showMask(e){e&&!$mask&&($mask=$("<div>").addClass("ptlogin-mask"),$body.append($mask))}function showFrame(e){reportMonitor(34366170),report.tdw({action:"pageview",page:"loginpage_pc"});var o=1===e,n=o?Tool.generateUrlForQq(config):aboutBlank;$loginFrame=getFrameDom(),renderWXLoginCode(function(e){isWeappCodeLogin=e?!0:!1,Tool.reportLoginTabExposure(o)}),$loginFrame.html(frameTpl({qqConfig:{url:n,inited:o?1:0},wxConfig:{inited:o?0:1}})),longpoll.init(),$body.append($loginFrame)}function renderWXLoginCode(e){Tool.generateWeappCode(function(o){if(o&&0===o.retcode){var n=o&&o.result&&o.result.QRCode;n&&(reportMonitor(34366171),$loginFrame.find(".login-weapp-code").removeClass("exprie"),clearInterval(weappLoginStateTimer),weappLoginStateTimer=setInterval(function(){Tool.getWeappLoginState()},700)),e&&e(n)}else isWeappCodeLogin=!1,reportMonitor(34366172);renderWeappCodeContainer(n)},function(){e&&e(),reportMonitor(34366172)})}function renderWeappCodeContainer(e){e||reportMonitor(34366176),$loginFrame.find(".wx__tab .login-code-container").html(weappcodeTpl({weappCode:e||null,url:Tool.generateUrlForWx()||null})).removeClass("loading")}function show(e){init(e),localStore.set("mobileBindInfo_lastLoginTime",+new Date),closeQuene.push(function(){localStore.remove("mobileBindInfo_lastLoginTime"),localStore.remove("mobileBindInfo_jump")});var o=parseInt(cookie.get(chooseLoginTypeCookie),10),n=config.needMask,i=config.mode;if(showMask(n),!$loginFrame||!$loginFrame.data("type")){if(!o)return initChoose(e),void bindChooseEvent();bindMessageAPI(i),showFrame(o),tab=new Tab(".login-tab",{pos:o-1}),bindEvent(),$.event.trigger("loginShow")}}function hide(){var e=config.mode;$mask.remove(),$loginFrame.remove(),$mask=void 0,$loginFrame=void 0,succQuene=[],closeQuene=[],unbindMessageAPI(e)}function logout(){$.getScript("//ui.ptlogin2.qq.com/js/ptloginout.js",function(){pt_logout.logout(function(){for(var e=0,o=weixinCookie.length;o>e;e++)cookie.del(weixinCookie[e],hostDomain),cookie.del(weixinCookie[e],eduDomain);localStore.remove("__userinfo"),$.event.trigger("logout"),config.onStatusChanged&&config.onStatusChanged(),location.reload()})})}function isLogin(){return!!cookie.get("p_luin")&&!!cookie.get("p_lskey")||!!cookie.get("p_uin")&&!!cookie.get("p_skey")||!!cookie.get("uin")&&!!cookie.get("skey")||!!cookie.get("uid_uin")&&!!cookie.get("uid_a2")}function setUin(e){config.uin=e}function isUinChanged(){return config.uin!=cookie.uin()}function skey(){return cookie.get("p_lskey")||cookie.get("p_skey")||cookie.get("skey")}var $=require("jquery"),Check=require("edu_modules/check/check"),Tab=require("@tencent/im-tab-man/tab"),cookie=require("edu_modules/util.cookie/util.cookie"),localStore=require("edu_modules/local.data/local.data"),report=require("edu_modules/reportor/index"),longpoll=require("edu_modules/edu-login/wxLongpoll"),frameTpl=require("/edu_modules/edu-login/template/wrap.tpl_tpl"),enterTpl=require("/edu_modules/edu-login/template/enter.tpl_tpl"),weappcodeTpl=require("/edu_modules/edu-login/template/weappcode.tpl_tpl"),DEFAULT_CONFIG={needMask:!0,mode:"xui",closeIcon:!1,target:"self",appid:715030901,daid:233},weixinCookie=["uid_a2","uid_type","uid_uin"],chooseLoginTypeCookie="ke_login_type",aboutBlank="about:blank",protocal=location.protocol,wxCssUri=[protocal,"//8.url.cn/edu/edu_modules/edu-login/nohash/wxLogin.css?max_age=3153600"].join(""),global=window,$win=$(global),$body=$("body"),tab,$mask,$loginFrame,config={},hostDomain=(location.hostname.match(/(\.\w+){2}$/)||["."+location.hostname])[0],eduDomain=(location.hostname.match(/(\.\w+){3}$/)||["."+location.hostname])[0],succQuene=[],closeQuene=[],weappLoginRequestTool={get_miniapp_qrcode:"/cgi-proxy/get_miniapp_qrcode",get_login_state:"/cgi-proxy/get_login_state"},getLoginStateFailNum=0,weappLoginStateTimer=null,isWeappCodeLogin=!0,fromSource="",weappId="wxa2c453d902cdd452",reportMonitor=function(e){var o="/cgi-bin/activity_platform/report/report_vm",n=[];e&&(isArray(e)?n=e:n.push(e),n.length&&((new Image).src=o+"?monitors=["+n.join(",")+"]&_t="+(new Date).getTime()))},Tool={generateUrlForQq:function(e){var o={target:e.target,appid:e.appid,hide_close_icon:1-!!e.closeIcon,s_url:e.succUrl},n=[],i="/login_proxy.html"+(e.domain?"#domain="+e.domain:"");if(e.daid&&(o.daid=e.daid),e.noAuth&&(o.pt_no_auth=1),this.checkMode(config.mode)){n.push("//xui.ptlogin2"+hostDomain+"/cgi-bin/xlogin?");var t=location.href.split(/#|\?/)[0],a=t.indexOf("/",t.indexOf("//")+2),r=encodeURIComponent((-1!==a?t.substring(0,a):t)+i);o.proxy_url=e.proxyUrl||r,o.s_url=e.succUrl||r}else o.s_url=e.succUrl||encodeURIComponent("//ui.ptlogin2."+hostDomain+i),n.push("//ui.ptlogin2"+hostDomain+"/cgi-bin/login?");e.style&&(o.style=e.style),o.low_login_enable=1;for(var l in o)n.push(l+"="+o[l]);return n.join("&")},generateUrlForWx:function(){var e=location.href,o=[protocal,"//ke.qq.com/cgi-bin/uidaccount/login?ttype=4&account_type=2","&appid=wxa1fd810b3796f1a4&buz_id=122052647&redirect_uri=",encodeURIComponent(e)].join("");return["//open.weixin.qq.com/connect/qrconnect?appid=wxa1fd810b3796f1a4&redirect_uri=",encodeURIComponent(o),"&href=",encodeURIComponent(wxCssUri),"&response_type=code&scope=snsapi_login"].join("")},generateWeappCode:function(e,o){$.ajax({type:"Get",url:weappLoginRequestTool.get_miniapp_qrcode+"?rd="+Math.random(),data:{appId:weappId,page:"pages/login/login",width:200,autoColor:!1,red:0,blue:0,green:0,isHyaLine:!1},success:function(o){e&&e(o)},error:function(e){reportMonitor(34366172),o&&o(e),isWeappCodeLogin=!1,renderWeappCodeContainer()}})},getWeappLoginState:function(){$.ajax({type:"Get",url:weappLoginRequestTool.get_login_state+"?rd="+Math.random(),success:function(e){if(e&&0===e.retcode){var o=e&&e.result.state;switch(o){case 0:break;case 1:reportMonitor(34366173),setTimeout(function(){location.reload()},0);break;case 2:break;case 3:reportMonitor(34366174),$(".login-weapp-code").addClass("exprie").on("click",function(){renderWXLoginCode()}).find(".weappcode-img").remove(),clearInterval(weappLoginStateTimer);break;case 4:reportMonitor(34366175),renderWeappCodeContainer(),clearInterval(weappLoginStateTimer);break;default:clearInterval(weappLoginStateTimer)}}else getLoginStateFailNum++,checkLoginStateDowngrade()},error:function(){getLoginStateFailNum++,checkLoginStateDowngrade()}})},reportLoginTabExposure:function(e){report.tdw({action:"exposure",page:"loginpage_pc",module:e?"QQ":"WX",position:e?"":isWeappCodeLogin?2:1,ver1:fromSource})},execTasks:function(e){for(var o=0,n=(e||[]).length;n>o;o++)try{e[o]()}catch(i){}},checkMode:function(e){return"xui"===e},str2JSON:function str2JSON(str){return eval("("+str+")")},getMaxHour:function(){var e=new Date("2038-12-31");return(e.getTime()-new Date)/36e5},cookie:{set:function(e,o){cookie.set(e,o,eduDomain,"/",Tool.getMaxHour())}}};!function(){isLogin()&&Tool.cookie.set(chooseLoginTypeCookie,Check.isWeixinUser()?2:1),global.ptlogin2_onClose=function(){Tool.execTasks(closeQuene),hide(),clearTimeout(longpoll.timeout),$.event.trigger("loginCancel")},global.ptlogin2_onResize=function(e,o){$loginFrame&&$loginFrame.css({width:e-4,height:o,"margin-top":-o/2,"margin-left":-e/2,visibility:"visible"})},global.ptlogin2_login_ok=function(){if(!config.uin)for(var e=0,o=weixinCookie.length;o>e;e++)cookie.del(weixinCookie[e],hostDomain),cookie.del(weixinCookie[e],eduDomain);Tool.execTasks(succQuene),$.event.trigger("login"),config.onStatusChanged&&config.onStatusChanged(),hide()}}();var Login={init:init,show:show,hide:hide,logout:logout,isLogin:isLogin,uin:cookie.uin,skey:skey,setUin:setUin,isUinChanged:isUinChanged};global.Login=Login,module.exports=Login});
/*!edu_modules/mm-report/mm-report*/
;define("edu_modules/mm-report/mm-report",function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=window,n=e.navigator,t=n?n.userAgent.toLowerCase():"";return/\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(t)?"ios":t.indexOf("android")>-1||t.indexOf("adr")>-1?"android":"pc"}function a(e){e=e||g;var n=e.length;n>10&&(n=10);var t=e.splice(0,n);if(t.length){var o=s+"&uin"+t[0].uin+"&apn="+(t[0].apn||m.apn);o+="&key=cgi,type,code,time";for(var r=["cgi","type","code","time"],a=0;a<r.length;a++)for(var i=0;i<t.length;i++){var u=t[i];o+="&"+(i+1)+"_"+(a+1)+"="+u[r[a]]}o+="&ignoreRandom="+Math.random();var c=new Image;c.src=o}}function i(){var e=["domain","appid","platform"].map(function(e){return e+"="+m[e]});s+="?"+e.join("&")}function u(e){m.platform=r(),f.default(m,e),i()}function c(e){var n=e.delay;return 0===n||e.apn!==m.apn?(a([e]),!0):!1}function d(e,n,t,o,r){if(!l){h&&clearTimeout(h);var i=f.default({},m,r);i.cgi=encodeURIComponent(e),i.code=n,i.time=t,i.uin=o,i.type=0===n?1:/^[4|5][0-9]{2}$/.test(n)?2:3,c(i)||(g.push(i),h=setTimeout(a,v))}}var p=e("babel-runtime/core-js/object/assign"),f=o(p),m={appid:10028,platform:"pc",domain:"ke.qq.com",rate:1,apn:""},l="undefined"==typeof document,s="//report.huatuo.qq.com/code.cgi",g=[],v=2e3,h=null;u(),t.exports={config:u,report:d}});
/*!edu_modules/edu-db/edu-db*/
;define("edu_modules/edu-db/edu-db",function(require,exports,module){function noop(){}function extendCallBack(e,t,a,r){return function(){!a.apply(e,t)&&r.apply(e,t)}}function extend(e,t,a){if("object"!=typeof e)return e;t=t||{};for(var r in t){var o,n;e[r]=a&&"function"==typeof(o=e[r])&&"function"==typeof(n=t[r])?extendCallBack(e,arguments,n,o):t[r]}}function encryptSkey(e){if(!e)return"";for(var t=5381,a=0,r=e.length;r>a;++a)t+=(t<<5)+e.charAt(a).charCodeAt();return 2147483647&t}var $=require("jquery"),bkn=require("edu_modules/bkn/index"),Login=require("edu_modules/edu-login/edu-login"),MM=require("edu_modules/mm-report/mm-report"),Cookie=require("edu_modules/util.cookie/util.cookie"),Check=require("edu_modules/check/check"),global=this,Badjs=window.Badjs,__DEBUG_STR__=function(){return""},$reportParam={_404:0,_5xx:0},isLoginError=!1,getCookie=Cookie.get,_uin;_uin=Check.isWeixinUser()?getCookie("uid_uin")||0:getCookie("p_luin")||getCookie("p_uin")||getCookie("uin")||0;var uinCache={},ajax=function(e,t,a,r,o,n,c){function i(e){if("string"==typeof e&&e.indexOf("uin")>=0)u=!0;else for(var t in e)"string"==typeof t&&t.indexOf("uin")>=0&&(u=!0),"object"==typeof e[t]&&i(e[t])}var s=new Date,u=!1;i(t);var l=e.split("?")[0];u&&!uinCache[l]&&(uinCache[l]=!0);var p={type:r,url:e,data:t,async:c===!1?!1:!0,success:function(t){function r(e){for(var t in e)"string"==typeof t&&t.indexOf("uin")>=0&&(o=!0),"object"==typeof e[t]&&r(e[t])}var o=!1;r(t);var n=e.split("?")[0];o&&!uinCache[n]&&(uinCache[n]=!0);var c=new Date-s;a&&a(t,c)},error:function(e){var t=new Date-s;a&&a({ec:e.status?e.status:-1e3},t)}};return n&&(p.timeout=n),o&&(p.dataType=o),$.ajax(p)},cache={};module.exports={abTest:!!(new Date%2),status:{bkn:""},"data-cache":{},isLoginError:function(){return isLoginError},encryptSkey:encryptSkey,getCookie:getCookie,getBkn:function(){return bkn()},initReport:function(){},get:function(e,t,a,r,o,n){var c=[];for(var i in t)c.push(i+"="+encodeURIComponent(t[i]));return c.push("r="+Math.random()),-1==e.indexOf("?")&&(e+="?"),e+=c.join("&"),ajax(e,null,a,"GET",r,o,n)},post:function(e,t,a,r,o,n){var c=[];for(var i in t)c.push(i+"="+encodeURIComponent(t[i]));return c.push("r="+Math.random()),ajax(e,c.join("&"),a,"POST",r,o,n)},cgiHttp:function(opt){if(!opt||!opt.url)return void 0;var _this=this;opt.param=opt.param||{};var timeOpt={url:opt.url},httpFunction,callBack=function(data,ajax_cost){if(timeOpt.time=+new Date,"object"!=typeof data)if(data)if("{"===data.charAt(0)&&"}"===data.charAt(data.length-1))try{data=window.JSON&&JSON.parse?JSON.parse(data):eval("("+data+")")}catch(e){data={ec:999,text:data,msg:"data is no json"}}else data={ec:998,text:data,msg:"data is hijack"};else data={ec:997,text:data,msg:"data is null"};data.delay=ajax_cost,"retcode"in data?data.ec=data.retcode:data.retcode=data.ec;var ec=data.ec,errFlag;switch(ec){case 0:errFlag=!1,(opt.succ||function(){})(data);break;case 111:case-1001:case 1e5:case 100021:isLoginError=!0,window.jQuery&&window.jQuery.event.trigger("logout"),opt.noNeedLogin?errFlag=!0:"undefined"!=typeof Login?Login.show({succ:function(){opt.param.bkn=_this.status.bkn=bkn(),httpFunction(opt.url,opt.param,callBack,opt.dataType,opt.timeout,opt.async)},close:function(){"function"==typeof opt.close&&opt.close.call(this),Badjs&&Badjs("CGI Error , LoginFailed , req:"+opt.url+", ec:"+ec,location.href,0,403860,2)}}):errFlag=!0,Badjs&&Badjs("CGI Error , Need Login,  req:"+opt.url+", ec:"+ec,location.href,0,403855,2);break;case 100021:opt.ldwRetry?errFlag=!0:(opt.ldwRetry=!0,_this.status.bkn=bkn(),opt.param.bkn=_this.status.bkn,httpFunction(opt.url,opt.param,callBack,opt.dataType,opt.timeout,opt.async)),Badjs&&Badjs("CGI Error , Basekey Error , req:"+opt.url+", ec:"+ec,location.href,0,403856,2);break;case 100001:errFlag=!0,Badjs&&Badjs("CGI Error , Param Error:"+JSON.stringify(opt.param)+" , req:"+opt.url+", ec:"+ec,location.href,0,403858,2);break;case 100003:errFlag=!0,Badjs&&Badjs("CGI Error , Internal Error , req:"+opt.url+", ec:"+ec,location.href,0,403857,2);break;case-1e3:errFlag=!0,ec=data.ec=0;break;case 99999:errFlag=!0,Badjs&&Badjs("CGI Error , Need Show VerifyCode Error , red:"+opt.url+", ec:"+ec,location.href,0,0,2);break;case 101402:case 101403:case 101404:case 101405:case 101406:case 102404:case 103404:case 106401:case 106402:case 106403:case 106404:case 106405:case 106406:case 106407:case 106409:case 106410:case 106411:case 106412:case 106413:case 106415:case 106416:case 106425:case 106427:case 106435:case 106457:case 110403:case 109113:case 109122:errFlag=!0,Badjs&&Badjs("CGI Error , Bussines Error , req:"+opt.url+", ec:"+ec,location.href,0,408941,2);break;default:errFlag=!0,Badjs&&Badjs("CGI Error , Other Error , req:"+opt.url+", ec:"+ec,location.href,0,403859,2)}if(MM.report(opt.url,ec,ajax_cost,Cookie.uin()),errFlag){var isBlockDefaultErr=(opt.err||function(){})(data);if(ec&&!_this.status.isDialog&&106457!==ec)if(isBlockDefaultErr){var msg=isBlockDefaultErr.msg;if(msg){msg+=__DEBUG_STR__({url:opt.url,ret:data},"info");var __opt=isBlockDefaultErr.opt||{},_onCancel=__opt.onCancel;opt.onCancel=function(){_onCancel.apply(__opt,arguments),_this.status.isDialog=!1},$.modal.alert(msg,__opt),_this.status.isDialog=!0}}else{var defaultWording="服务器繁忙，请稍后再试",wording={100001:"输入参数错误",100003:"服务器内部错误，请稍后再试",110405:"没有管理权限，请稍后再试"}[ec]||defaultWording,_finally=function(){switch(_this.status.isDialog=!1,ec){case 106507:location.href="/index.html";break;case 106406:case 106407:case 110405:location.href="/index.html"}};if(106507===ec)return _this.status.isDialog=!0,$.modal.alert("由于触犯平台规则，机构功能禁止使用7天",{title:"提示",onCancel:_finally,onAccept:_finally,onClose:_finally});$.modal.alert(wording+("("+ec+")")+__DEBUG_STR__({url:opt.url,ret:data},"info"),{type:"err",onCancel:_finally,onAccept:_finally,onClose:_finally}),_this.status.isDialog=!0}}};opt.param.bkn=bkn(),opt.type&&"GET"!=opt.type.toUpperCase()?(opt.type="POST",httpFunction=_this.post):(opt.type="GET",httpFunction=_this.get);var ret=httpFunction(opt.url,opt.param,callBack,opt.dataType,opt.timeout,opt.async);return ret},extend:function(e,t,a,r){var o=Object.prototype.toString.call(e);if("[object String]"===o){a=a||this;var n={};n[e]=t,extend(a,n,r)}else"[object Object]"===o&&((null===t||void 0===t)&&arguments.length>=4?(a=a||this,extend(a,e,r)):(r=a,a=t||this,extend(a,e,r)))},addCgi:function(e,t){var a=this,r={};r[e]=function(e){var r={};r.param=e.param||{},r.url=t,r.succ=function(t){(e.succ||function(){})(t)},r.err=function(t){(e.err||function(){})(t)},a.cgiHttp(r)},this.extend(r)},httpMethod:function(e){var t=this;return function(a){var r={};return r.async=e.async===!1?!1:!0,r.param=a.param,r.timeout=a.timeout,e.type&&(r.type=e.type),e.dataType&&(r.dataType=e.dataType),e.noNeedLogin&&(r.noNeedLogin=e.noNeedLogin),r.url=e.url,r.succ=function(t){return(e.succ||a.succ||noop)(t)},r.err=function(t){return(e.err||a.err||function(){})(t)},r.close=function(t){return(e.close||a.close||function(){})(t)},r.isUseModal=a.isUseModal,t.cgiHttp(r)}},wrapGroup:function(e){return e||{}},save:function(e,t){cache[e]=t},getCache:function(e){return cache[e]},clearCache:function(e){cache[e]=null}}});
/*!edu_modules/edu-user/src/user.cgi*/
;define("edu_modules/edu-user/src/user.cgi",function(e,r,s){var u=e("edu_modules/edu-db/edu-db"),t=e("edu_modules/edu-user/src/user.adapter"),i=e("edu_modules/edu-user/src/user.base"),d={MASTER:1,PERSONAL:2,ADMIN:4,CUSTOMADMIN:8,COURSETEACHER:16,TEACHER:32,STUDENT:64};s.exports=function(){var e=t.Deferred();return u.httpMethod({url:"/cgi-bin/identity/info",type:"POST"})({}).then(function(r){if(!r||0!==r.retcode)return e.reject("server error");var s=r.result.role_type||0,u={isMaster:!!(s&d.MASTER),isPersonal:!!(s&d.PERSONAL),isAdmin:!!(s&d.ADMIN),isCustomAdmin:!!(s&d.CUSTOMADMIN),isCourseTeacher:!!(s&d.COURSETEACHER),isTeacher:!!(s&d.TEACHER),isStudent:!!(s&d.STUDENT)};u.isPlatRole=u.isMaster||u.isPersonal||u.isAdmin||u.isCustomAdmin||u.isCourseTeacher||u.isTeacher;var n=i.getInfoSync();r.result.face_url=r.result.face_url||"//q.qlogo.cn/g?b=qq&nk="+n.uin+"&s=100",r.result.uid=String(r.result.uid),r.result.face_url=r.result.face_url.replace(/&amp;/g,"&"),t.extend(r.result,u),e.resolve(r.result)},function(r){e.reject(r)}),e.promise()}});
/*!edu_modules/modal/modal*/
;define("edu_modules/modal/modal",function(require,exports,module){var $=require("jquery"),Observer=require("@tencent/im-observer/observer"),isDebug=!0,modalIndex=0;$.template=function(tmpl,data){var evalExp=function(exp,scope){return function(){var __res;try{with(scope)__res=eval(exp)}catch(e){}return"undefined"==typeof __res?"":__res}.call(scope)},position=0,stacks=[!0],regexp=/\{if ([^\}]+)\}|\{\/if\}|\{else\}|\{else if ([^\}]+)\}/gi,res="";return tmpl.replace(regexp,function(t,e,s,n){var o=stacks.pop();return o&&(res+=tmpl.substr(position,n-position)),position=n+t.length,e?(stacks.push(o),stacks.push(o&&evalExp(e,data)?!0:!1),stacks.push(stacks[stacks.length-1])):s?stacks.push(stacks[stacks.length-1]?!1:evalExp(s,data)?!0:!1):/\{else\}/i.test(t)?stacks.push(stacks[stacks.length-1]?!1:!0):stacks.pop(),""}),stacks.pop()&&(res+=tmpl.substr(position)),tmpl=res,tmpl=tmpl.replace(/\{\$([^\{\}]+)\}/g,function(t,e){return evalExp(e,data)})};var templateBg='<div tabindex="-1" class="overlay js-modal-bg"></div>',templateModal='<div class="js-modal modal  {$className} {if icon}modal--msg{/if} {if scroll}modal--scroll{/if}" style="{if width}width:{$width}px;{/if}{if style}{$style}{/if}" >';templateModal+="{if !nohead}",templateModal+='  <div class="modal-hd"><h3 class="hd-tt js-modal-title">{$title}</h3><a href="javascript:void(0);" class="js-modal-close btn-close" {if !isClose}style="display:none;"{/if} title="关闭">×</a></div>',templateModal+="{/if}",templateModal+="{if !body}",templateModal+='  <div class="modal-bd {if padding}modal-bd--padding{/if}" style="{if height}height:{$height}px;{/if}">',templateModal+="  {if icon}",templateModal+='      <div class="bd-msg"><i class="icon-font icon-msg-large i-{$icon}"></i>',templateModal+='      <p class="msg-text">{$content}</p></div>',templateModal+="  {else}",templateModal+="      {$content}",templateModal+="  {/if}",templateModal+="  </div>",templateModal+='  <div class="modal-ft">',templateModal+='  <a href="javascript:void(0);" title="{$txtYes}" class="js-modal-yes btn-default {if !enableYes} btn-disabled{/if}" {if !isYes}style="display:none;"{/if}>{$txtYes}</a>',templateModal+="  ",templateModal+='  <a href="javascript:void(0);" title="{$txtNo}" class="js-modal-no btn-weak {if !enableNo} btn-disabled{/if}" {if !isNo}style="display:none;"{/if}>{$txtNo}</a>',templateModal+="  </div>",templateModal+="{else}",templateModal+="  {$body}",templateModal+="{/if}",templateModal+="",templateModal+="</div>";var addDrag=function(t,e,s){var n=!1,o=0,a=0,i=$(t),l=$(e),c=$.extend({opacity:.6,duration:.3},s),d=function(t){n&&l.css({left:t.pageX-o+"px",top:t.pageY-a+"px"})},r=function(){n=!1,l.css({transition:"none",opacity:"1"}),$(document.body).off("mousemove",d)};i.mousedown(function(t){n=!0,o=t.pageX-parseInt(l.css("left")),a=t.pageY-parseInt(l.css("top")),l.css({transition:"opacity "+c.duration+"s ease-in",opacity:c.opacity}),$(document.body).mousemove(d).one("mouseup",r)})};$.fn.drag=function(t,e){t||(t=this),addDrag(this,t,e)};var Modal=function(t){this._index=modalIndex++;var e={title:"提示",className:"",style:"",content:"",txtYes:"确定",txtNo:"取消",icon:"",nohead:!1,body:"",hotkey:!0,isYes:!0,isNo:!0,isClose:!0,enableYes:!0,enableNo:!0,enableClose:!0,buttonsAlign:"right",enableDrag:!0,enableBgClose:!1,width:500,height:"",padding:!0,scroll:!1,yes:function(){},no:function(){},onClose:function(){Observer.trigger("dialog.close")},onOpen:function(){Observer.trigger("dialog.show")}};this.opts=$.extend(e,t),this._buttonState={};var s={submit:"txtYes",isDisabled:"enableYes",globalClass:"className",onAccept:"yes",onCancel:"no"};$.each(s,function(t,s){"undefined"!=typeof e[t]&&(e[s]=e[t])}),this.onAccept=this.yes,this.onCancel=this.no,this.async(this.opts.onOpen,this.$,function(){this._update().update()})};Modal.prototype={$:null,$bg:null,$btnYes:null,$btnNo:null,_index:0,_buttons:["enableYes","enableNo","enableClose"],_buttonState:null,opts:null,hotkeyCallback:function(t){if(this.opts.enableBgClose&&t.target===this.$bg[0])return this.closeAsync(this.opts.no,t);if(this.opts.hotkey)return 27===t.which&&this.opts.enableNo?this.closeAsync(this.opts.no,t):13===t.which&&this.opts.enableYes?this.closeAsync(this.opts.yes,t):void 0},async:function(t,e,s){var n=this;if(t.length<2){var o=t.call(n,e);s.call(n,"undefined"==typeof o||o?!0:!1)}else t.call(n,e,function(t){s.call(n,"undefined"==typeof t||t?!0:!1)})},closeAsync:function(t,e){var s=this;this.saveButtonsState(),this.disableButtons(),this.async(t,e,function(t){return t?void(s.opts.enableClose&&s.async(s.opts.onClose,e,function(t){return t?void s.remove():s.recoverButtons()})):s.recoverButtons()})},title:function(t){return this.$.find(".js-modal-title").html(t),this},content:function(t){var e=this.$.find(".msg-text");return 0===e.length&&(e=this.$.find(".modal-bd")),e.html(t),this},remove:function(){this.$.remove(),removeHotkeyCallback(this._hotkeyCallback);var t=$(".js-modal");return 0===t.length?this.$bg.remove():void this.$bg.after(t.eq(t.length-1))},update:function(){return this.$.css({marginTop:"-"+parseInt(this.$.height()/2)+"px",marginLeft:"-"+parseInt(this.$.width()/2)+"px"}),this.$.show(),this},recoverButtons:function(){var t=this;return $.each(t._buttons,function(e,s){t[s](t._buttonState[s])}),this},saveButtonsState:function(){var t=this;return $.each(t._buttons,function(e,s){t._buttonState[s]=t.opts[s]}),this},disableButtons:function(){var t=this;return $.each(["enableYes","enableNo"],function(e,s){t[s](!1)}),this},_update:function(){var t=this;return this.$?this.$.show():(this.$bg=$(".js-modal-bg"),0===this.$bg.length&&(this.$bg=$(templateBg).appendTo($(document.body))),this.$=$($.template(templateModal,this.opts)),this.$.appendTo($(document.body)).before(this.$bg),this._hotkeyCallback=function(){t.hotkeyCallback.apply(t,arguments)},addHotkeyCallback(this._hotkeyCallback),this.opts.enableDrag&&this.$.find(".modal-hd").drag(this.$),this.bindEvents(),this)},bindBtnYesEvent:function(){var t=this;return this.$btnYes=this.$.find(".js-modal-yes").click(function(e){$(this).hasClass("btn-disabled")||t.closeAsync(t.opts.yes,e)}),this},bindBtnNoEvent:function(){var t=this;return this.$btnNo=this.$.find(".js-modal-no").click(function(e){$(this).hasClass("btn-disabled")||(e=e||{},e.btnName="cancel",t.closeAsync(t.opts.no,e))}),this},bindBtnCloseEvent:function(){var t=this;return this.$.find(".js-modal-close").click(function(e){t.$btnNo.hasClass("btn-disabled")||(e=e||{},e.btnName="close",t.closeAsync(t.opts.no,e))}),this},bindEvents:function(){return this.bindBtnYesEvent().bindBtnCloseEvent().bindBtnNoEvent()}},$.each(["enableYes","enableNo","enableClose"],function(t,e){Modal.prototype[e]=function(t){this.opts[e]=t;var s=t?"removeClass":"addClass";return"enableYes"===e&&this.$btnYes[s]("btn-disabled"),"enableNo"===e&&this.$btnNo[s]("btn-disabled"),this}}),$.each(["yes","no","onClose","onOpen"],function(t,e){Modal.prototype[e]=function(t){return this.opts[e]=t,this}}),$.each(["width","height"],function(t,e){Modal.prototype[e]=function(t){return"undefined"==typeof t?this.opts[e]:(this.opts[e]=t,this.$[e](t),this.update())}}),$(document.body).keydown(function(t){triggerHotkey(t)}).delegate(".js-modal-bg","click",function(t){triggerHotkey(t)});var hotKeyCallbacks=[],addHotkeyCallback=function(t){hotKeyCallbacks.push(t)},removeHotkeyCallback=function(t){$.each(hotKeyCallbacks,function(e,s){return s===t?(hotKeyCallbacks.splice(e,1),!1):void 0})},triggerHotkey=function(t){hotKeyCallbacks.length<1||hotKeyCallbacks[hotKeyCallbacks.length-1](t)},modalConfigs={alert:{title:"警告",content:"警告信息！",icon:"alert",isNo:!1,buttonsAlign:"right",enableBgClose:!1},retry:{txtYes:"重试",content:"是否重试？",icon:"alert",enableBgClose:!1},confirm:{title:"确认操作",icon:"alert",txtYes:"确认",content:"请确认是否操作？",enableBgClose:!1},success:{title:"成功提示",icon:"success",content:"操作成功！",isNo:!1},error:{title:"错误提示",icon:"alert",isNo:!1},help:{title:"帮助信息",icon:"info",content:"这是一条帮助信息。",isNo:!1}},modal=function(t){return new Modal(t)};$.fn.modal=function(t,e,s){var n=arguments.length;return this.click(function(){return 1===n?"object"==typeof t?(s=t,e="",t=t.type||""):(e=t,t="alert"):2===n&&(s=e||{},e=t,t=s.type||"alert"),t?modal[t](e,s):modal(s)})},$.each(modalConfigs,function(t,e){modal[t]=function(t,s){return modal($.extend({},e,{content:t||e.content},s))}}),$.modal=modal,$.Modal=Modal,$._alert=function(t,e,s){return $(".js-modal-bg, .js-modal").remove(),$.Dialog.remove(),s=$.extend({},s||{}),"function"==typeof e?(s.title="提示",s.onAccept=s.onCancel=e):s.title=e||"提示",window.top.$modal?window.top.$modal.alert(t,s):$.modal.alert(t,s)},$._loading=function(t,e,s){var n=$._alert(t,e,s),o=$('<div class="modal-loading"><div class="spin"></div><p>'+t+"</p></div>");return n.$.find(".bd-msg").empty().append(o),n.$.find(".modal-loading .spin").spin(!0),n},module.exports=modal});
/*!edu_modules/edu-user/src/user.cache*/
;define("edu_modules/edu-user/src/user.cache",function(e,r,u){var n=e("edu_modules/edu-user/src/user.adapter"),s=e("edu_modules/edu-user/src/user.base"),o=e("edu_modules/edu-user/src/user.local"),i=e("edu_modules/edu-user/src/user.uid"),d=e("edu_modules/edu-user/src/user.cgi"),t=e("edu_modules/modal/modal"),c=o.get(),l=i(),a=["skey","uid","uid_type"],f=function(e,r){for(var u=0;u<a.length;u++)if(e[a[u]]!==r[a[u]])return!1;return!0},m=function(){t.alert("您的账号身份角色发生变化，请刷新页面后重试！").onClose(function(){window.location.reload()})},p=function(){if(p.isLoading)return p.promise;p.isLoading=!0;var e=n.Deferred();return p.promise=e.promise(),d().then(function(r){s.updateInfo(r),e.resolve(s.getInfoSync())},e.reject),p.promise},y=n.Deferred(),_=y.promise(),g=s.getInfoSync();if(l.skey&&l.uid)if(f(l,c)){s.updateInfo(c);var v=g.role_type;y.resolve(g),p().then(function(e){e.is_login&&v&&e.role_type!==v&&m()})}else s.updateInfo(l),p().then(y.resolve,y.reject);else y.resolve(g);u.exports={asyncCache:function(){return _},asyncCGI:function(){return p.promise},isUidChanged:function(){var e=i();return!("1097244880"===e.uid)&&e.uid!==g.uid||e.skey!==g.skey},isLogin:function(){var e=i();return g.is_login&&e.skey&&e.uid}}});
/*!edu_modules/edu-user/src/index*/
;define("edu_modules/edu-user/src/index",function(e,n,u){var o=e("edu_modules/edu-user/src/user.cache"),s=e("edu_modules/edu-user/src/user.base");u.exports={getInfoAsync:function(){return o.asyncCGI()},getInfoSync:function(){return s.getInfoSync()},getRoleInfoSync:function(){return s.getRoleInfoSync()},getInfo:function(){return o.asyncCache()},extendBaseInfo:s.extendBaseInfo,updateInfo:s.updateInfo,isUidChanged:o.isUidChanged,isLogin:o.isLogin}});
/*!edu_modules/edu-user/index*/
;define("edu_modules/edu-user/index",function(e,d,u){u.exports=e("edu_modules/edu-user/src/index")});
/*!edu_modules/edu-auth/tabs.config*/
;define("edu_modules/edu-auth/tabs.config",function(n,e,o){var d=[{id:11,sub:[{id:1110,sub:[{id:111010,name:"测试本地模块",show:1,sort:1,jsmod:"agency/index/info/mod.main",link:"/agency/index/index.html#tab=showAgencyInfo",hash:"showAgencyInfo",text:"(补充更多信息)"}]}]}];o.exports=d});
/*!edu_modules/edu-auth/index*/
;define("edu_modules/edu-auth/index",function(t,e,r){function n(t,e,r){return r=r||[],e=e||{},t.forEach(function(t){t.parentId=e.id||0,r.push(t),t.sub&&t.sub.length&&n(t.sub,t,r)}),r}function u(t){try{"video_management"===t[1].sub[0].sub[4].hash&&"showVideoList"===t[1].sub[0].sub[3].hash&&t[1].sub[0].sub.splice(3,1)}catch(e){}c=t,d=n(c,{},[])}function i(){u(o);var t=a.Deferred(),e=t.promise();return s.getTabList({param:{},succ:function(e){if(e=e||{},0!==e.retcode)t.reject(e.retcode);else{var r=e.result||{},n=r.tab_list||[];try{var i=window.localStorage?window.localStorage.getItem("agency-pre"):null;if(i){var s=JSON.parse(i);n.push({flag:0,id:90,name:"预发布验证",parentId:0,show:1,sort:8,sub:[{flag:0,id:9010,name:"预发布验证",parentId:90,show:1,sort:1,sub:s,target:0}],target:0})}}catch(o){}u(n),t.resolve(n)}},err:t.reject}),e}var s=t("edu_modules/edu-db/edu-db"),o=t("edu_modules/edu-auth/tabs.config"),a=t("jquery"),c=[],d=[];s.extend({getTabList:s.httpMethod({url:"/cgi-bin/manager/right/list",type:"get"})}),r.exports={getTabList:i,init:u,getTabs:function(){return d},getTabTrees:function(){return c},getTabById:function(t){return t?d.filter(function(e){return e.id===t})[0]:void 0},getTabByHash:function(t){return t?d.filter(function(e){return e.hash===t})[0]:void 0},getRootTabByTabId:function(t){if(t){for(var e=this.getTabById(t);e&&0!==e.parentId;)e=d.filter(function(t){return t.id===e.parentId})[0];return e}},getFirstTabByRootId:function(t){var e=this.getTabById(t);if(e&&e.sub&&e.sub.length){var r,n;return e.sub.forEach(function(t){!n&&t.sub&&t.sub[0]&&(n=t.sub[0]),!r&&t.show&&t.sub&&t.sub.forEach(function(t){!r&&t.show&&(r=t)})}),r||n||{}}},getFirstRootTabWithPermission:function(){return c.filter(function(t){return!!t.show})[0]},checkPermissionByHash:function(t){return!!(this.getTabByHash(t)||{}).show},checkPermissionById:function(t){return!!(this.getTabById(t)||{}).show}}});
/*!@tencent/im-cache/cache*/
;define("@tencent/im-cache/cache",function(){var n={},e={},t=function(e){return n[e]},c=function(t,c,i){return e[t]?void 0:(n[t]=c,void(i&&(e[t]=1)))};return{get:t,set:c}});
/*!edu_modules/edu-agency/src/info*/
;define("edu_modules/edu-agency/src/info",function(t,e,n){function r(t,e){var n=this,r=t.result||{};e&&(r.industry1=e.industry1,r.industry1_ext=e.industry1_ext);var i=r.industry1;i||(i=r.industry1=r.industry),i&&(c=u(i),l=[i],$.isArray(r.industry1_ext)&&$.each(r.industry1_ext,function(t,e){var n=u(e);n.value&&(f.push(n),!~l.indexOf(e)&&l.push(e),g.push(n.value))})),t._industry1=c,t._industry1_ext=f,t._industry1_all=l,t._industry1_ext_str=g,n._industry1=c,n._industry1_ext=f,n._industry1_all=l,n._industry1_ext_str=g}function u(t){return{key:t,value:o[t]}}function i(t){var e=this;if(s&&"function"==typeof t)return t(s);if(d.push(t),!a){a=!0;var n=y.get("userinfo")||{},r=5===n.role_type?"get_p_agency_info":"get_agency_info";return _[r]({param:{aid:n.aid},succ:function(t){for(t=t||{},t.role_type=n.role_type,t.result=t.result||{},e.rebuildIndustryData(t),y.set("agency_info",t),s=t,a=!1;d.length;){var r=d.shift();"function"==typeof r&&r(s)}},err:function(){}})}}var s,_=t("edu_modules/edu-db/edu-db"),d=[],a=!1,y=t("@tencent/im-cache/cache"),o={list:[1001,1002,1003,1004,1005,1006,1007],1001:"IT·互联网",1002:"设计·创作",1003:"语言·留学",1004:"职业·考证",1005:"升学·考研",1006:"兴趣·生活",1007:"电商营销"};y.set("course_main_tag",o);var c={},f=[],l=[],g=[];n.exports={getAgencyInfo:i,course_main_tag:o,rebuildIndustryData:r,_industry1:c,_industry1_all:l}});
/*!edu_modules/edu-agency/src/db*/
;define("edu_modules/edu-agency/src/db",function(e,d,n){var t=e("edu_modules/edu-db/edu-db");t.extend({getAgencyInfo:t.httpMethod({url:"/cgi-bin/identity/agency",type:"GET"})}),n.exports=t});
/*!edu_modules/edu-agency/src/index*/
;define("edu_modules/edu-agency/src/index",function(e,n,t){var o=e("edu_modules/edu-user/index"),r=e("edu_modules/edu-auth/index"),a=e("edu_modules/edu-login/edu-login"),i=e("edu_modules/modal/modal"),s=(e("edu_modules/edu-agency/src/info"),e("badjs")),c=e("edu_modules/edu-agency/src/db");o.extendBaseInfo({agency_state:0,isDeletePermission:!0,agency_type:0,is_wt_agency:0,is_signed:0,sign_status:{signedFee:!1,signedDistribution:!1},is_tup_agency:0,agency_info:{agency_step_flag:0,group_num:0,course_num:0,student_num:0,teacher_num:0,cover_url:"",aid:0,description:""},agency_star:{id:0,star:0,star_level:0,score:0,week_score:0,attitude_rate:0,manual_add:0,rank:0,average_rate:0,grade:0,industry:0,manual_minus:"0",sabc:"A",data_status:0,level_rate:0,quality_rate:0,manual_inc:0},agency_bank:{agency_id:0,bank_name:"",bank_account:"",bank_province:"",bank_city:"",bank_branch:"",account_type:1,account_picurl:"",bank_owner:"",audit_memo:"",end_time:0,begin_time:0,audit_status:5,mobile:"",email:"",contract_url:"",contract_name:"",contract_version:1,agency_contact:"",agency_address:"",apply_time:0},agency_overview:{course_static:{tmmr_live:0,today_live:0,ystd_absent:0,all_live:0,ystd_violation:0,data_status:1},score_detail:{pay_trend:1,add_score:"0",free_score:"0",pay_score:"0",violation_score_course:"0",week_score:"0",violation_score:"0",free_trend:1,week_rank:0}},system_time:0});var _,u=function(e){var n=e.is_signed;e.sign_status={signedFee:1&n,signedDistribution:2===(2&n)}},d=o.getInfo,l=function(){var e=$.Deferred();return c.getAgencyInfo({succ:function(n){u(n.result),window.AGENCYINFO=n.result,o.updateInfo(n.result),o.updateInfo({aid:n.result.aid}),e.resolve()},err:function(n){e.reject("get_agency_info_error"),n&&1e5!=n.retcode&&m("获取机构信息失败",2452324)}}),e.promise()},f=function(){var e=$.Deferred();return r.getTabList().then(function(){e.resolve()},function(n){e.reject("get_tab_list_error"),n&&1e5!=n.retcode&&m("获取权限列表失败",2452325)}),e.promise()},g=function(e){var n=$.Deferred(),t=e&&e.allowTeacher;return d().then(function(e){e.is_login?e.isPlatRole||t&&e.isTeacher?(e.isMaster||e.isPersonal||e.isAdmin||e.isCustomAdmin||!e.isCourseTeacher||$("html").addClass("no-publish"),n.resolve()):n.reject("auth_error"):n.reject("no_login")},function(){n.reject("get_info_error"),m("获取用户基本信息失败",2452326)}),n.promise()};o.getBaseInfo=d,o.getAgencyInfo=l;var m=function(e,n){s(e,location.href,0,n,2)};o.getInfo=function(e){if(_)return _;var n=$.Deferred();return _=n.promise(),$.when(g(e),l(),f()).then(function(){var e=o.getInfoSync();e.isDeletePermission=e.isMaster||e.isAdmin||e.isPersonal,o.updateInfo(e),m("机构侧getInfo成功",2452334),n.resolve(e)},function(e){m("机构侧getInfo失败",2452333),"get_agency_info_error"===e?i.alert("获取机构信息失败，请稍后重试！").onClose(function(){location.reload()}):"get_tab_list_error"===e?i.alert("获取权限数据失败，请稍后重试！").onClose(function(){location.reload()}):"no_login"===e?a.show({succ:function(){location.reload()},close:function(){location.href="/"}}):"auth_error"===e?i.alert("没有权限访问该页面。").onClose(function(){location.href="/"}):"get_info_error"===e?i.alert("获取用户信息失败，请稍后重试！").onClose(function(){location.reload()}):(m("机构侧getInfo其他失败",2452327),i.alert("异常错误，请稍后重试").onClose(function(){location.reload()})),n.reject(e)}),_},t.exports=o});
/*!edu_modules/edu-agency/index*/
;define("edu_modules/edu-agency/index",function(e,d,n){n.exports=e("edu_modules/edu-agency/src/index")});
/*!/agency/index/installment/publish/tpl/index.tpl_tpl*/
;define("/agency/index/installment/publish/tpl/index.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[],isEditMode="undefined"!=typeof course_id,courseFirst=isEditMode?(installments[0].price/100).toFixed(2):0,totalPrice=isEditMode?((installments[1].price*(installments.length-1)+installments[0].price)/100).toFixed(2):0,courseDeleted="undefined"==typeof courseDeleted?!1:courseDeleted;return _$out_.push('<div class="sale-tool-header"> <span class="btn-back js-go-back"> <i class="icon-draw icon-v-left"></i>返回 </span> <h1 class="sale-tool-tt">用户分期计划</h1></div><div class="installment-wrap js-installment-main"> <div class="mod-form"> <div class="mod-container"> <h2>学员信息</h2> <div class="mod-form__line"> <label class="mod-form__label" for="in_student_qq"> <b>*</b>学员QQ </label> <div class="mod-form__content"> '),isEditMode?_$out_.push(' <input type="text" id="in_student_qq" class="input-text" data-pattern="not_null|uin" placeholder="请输入需要分期的QQ号码" data-tips="请正确输入qq号" data-msg="请正确输入qq号" value="',uin,'" disabled> '):_$out_.push(' <input type="text" id="in_student_qq" class="input-text" data-pattern="not_null|uin" placeholder="请输入需要分期的QQ号码" data-tips="请正确输入qq号" data-msg="请正确输入qq号"> <div class="field-help"></div> '),_$out_.push(' <div class="stain-tips hide">该账号存在平台分期坏账记录，请机构谨慎考虑</div> </div> </div> <div class="mod-form__line"> <label class="mod-form__label" for="in_student_phone"> <b>*</b>电话 </label> <div class="mod-form__content"> <input type="text" id="in_student_phone" class="input-text" data-pattern="phone" placeholder="请输入学员电话以做还款提醒" data-tips="请正确输入电话号码" data-msg="请正确输入电话号码" value="',isEditMode&&phone?phone:"",'"> <div class="field-help"></div> </div> </div> </div> <div class="mod-container"> <h2>课程信息</h2> <div class="mod-form__line"> '),courseDeleted?_$out_.push(' <span style="color:#e80808;">课程已被删除！</span> '):(_$out_.push(' <label class="mod-form__label"><b>*</b>选择课程</label> <div class="mod-form__content add-course-main"> '),isEditMode?_$out_.push(' <div class="add-course-item-wrap"> <div class="add-course-item"> <a href="//ke.qq.com/course/',course_id,'" target="_blank" title="',course_name,'"> <img src="',course_cover_url,'220" width="220" alt="',course_name,'"> </a> </div> <div class="add-course-tips"> <div class="add-course-name">',course_name,'</div> <div class="add-course-price"> 原价 <span class="money">￥',(course_price/100).toFixed(2),"</span> </div> </div> </div> "):_$out_.push(' <div class="add-course-wrap js-add-course" data-pattern="dcourse" data-msg="请选择课程"> <span class="">+</span> <i>添加课程</i> </div> '),_$out_.push(" </div> ")),_$out_.push(" </div> "),courseDeleted||(_$out_.push(' <div class="mod-form__line mod-form__radios-wrap js-select-terms-wrap ',isEditMode&&"undefined"==typeof course_price?"":"hide",'"> <label class="mod-form__label"><b>*</b>选择班级</label> <div class="mod-form__content select-terms"> <div class="radios js-select-terms clearfix"> '),isEditMode&&_$out_.push(' <div class="radio radio-check"> <i></i> <label> <a href="javascript:;" data-termid="',term_id,'" data-price="',course_price,'"> ',term_name," </a> </label> </div> "),_$out_.push(" </div> </div> </div> ")),_$out_.push(' </div> <div class="mod-container"> <h2>分期设置</h2> <div class="mod-form__line mod-form__radios-wrap"> <label class="mod-form__label"><b>*</b>分期方式</label> <div class="mod-form__content js-select-installstyle"> <div class="radios"> <div class="radio ',1===installment_type?"radio-check":"",'" data-value="time"> <i></i><label><a href="javascript:;">按时间分期</a></label> <div class="installment-style-tips">(建议直播课为主的课程使用)</div> </div> <div class="radio ',2===installment_type?"radio-check":"",'" data-value="chapter"> <i></i><label><a href="javascript:;">按节分期</a></label> <div class="installment-style-tips">(建议录播课为主的课程使用)</div> </div> </div> </div> <div class="installment-example-wrap"> <div class="installment-example-time ',1===installment_type?"":"hide",'"> <span class="example-des-arrow"><i class="example-des-icon-arrow"></i></span> <h3 class="example-des-title">分期方式说明</h3> <ol class="example-des-content"> <li>1.&nbsp;&nbsp;&nbsp;学员支付当前分期款后，可在下一分期开始时间前拥有该课程的学习权限；</li> <li>2.&nbsp;&nbsp;&nbsp;若学员在下一分期开始时间前仍未支付，将暂时失去该课程的学习权限，支付后即可恢复；</li> <li>3.&nbsp;&nbsp;&nbsp;若学员在最迟付款日前仍未支付，将永久失去该课程的学习权限。</li> </ol> <div class="example-pic-wrap"> <div class="example-pic-content"> <div class="icon-dotted"> <i class="icon-dotted-one"></i> <i class="icon-dotted-two"></i> <i class="icon-dotted-three"></i> <i class="icon-dotted-four"></i> <span class="dotted-line"></span> </div> <div class="example-pic-date"> <div class="date-item"> 2017-03-01<br/>第一期还款日 </div> <div class="date-item"> 2017-04-01<br/>第二期还款日 </div> <div class="date-item"> 2017-05-01<br/>第三期还款日 </div> <div class="date-item"> 2017-06-01<br/>第四期还款日 </div> </div> </div> </div> </div> <div class="installment-example-chapter ',2===installment_type?"":"hide",'"> <span class="example-des-arrow example-des-arrow-chapter"><i class="example-des-icon-arrow"></i></span> <h3 class="example-des-title">分期方式说明</h3> <div class="example-des">将课程按节划分，每一期可学习部分由机构设定，当用户支付此部分课程费用，将获得该部分学习权利。</div> <div class="example-pic-wrap clearfix"> <div class="example-pic-content"> <div class="example-pic-chapter example-pic-chapter-1"> <div class="example-pic-chapter-items">第一期</div> <div class="example-pic-chapter-item">第一节</div> <div class="example-pic-chapter-item">第二节</div> <div class="example-pic-chapter-item">第三节</div> </div> <i class="icon-font i-v-right example-pic-icon-right"></i> <div class="example-pic-chapter example-pic-chapter-2"> <div class="example-pic-chapter-items">第二期</div> <div class="example-pic-chapter-item">第四节</div> <div class="example-pic-chapter-item">第五节</div> <div class="example-pic-chapter-item">第六节</div> </div> <i class="icon-font i-v-right example-pic-icon-right example-pic-icon-right-2"></i> <div class="example-pic-chapter example-pic-chapter-3"> <div class="example-pic-chapter-items">第三期</div> <div class="example-pic-chapter-item">第七节</div> <div class="example-pic-chapter-item">第八节</div> <div class="example-pic-chapter-item">第九节</div> </div> <i class="icon-font i-v-right example-pic-icon-right example-pic-icon-right-3"></i> <div class="example-pic-chapter example-pic-chapter-4"> <div class="example-pic-chapter-items">第四期</div> <div class="example-pic-chapter-item">第十节</div> <div class="example-pic-chapter-item">第十一节</div> <div class="example-pic-chapter-item">第十二节</div> </div> </div> </div> </div> </div> </div> <div class="mod-form__line course-related"> <label class="mod-form__label" for="in_course_price"> <b>*</b>课程总额 </label> <div class="mod-form__content"> <input type="text" id="in_course_price" class="input-text input-course-price" data-pattern="not_null|course_total|money_pass" placeholder="课程首付+每期还款金额*分期期数" data-tips="请正确填写课程总额" data-msg="请正确填写课程总额" value="',totalPrice?totalPrice:"",'"><span class="yuan">元</span> <div class="field-help"></div> </div> </div> <div class="mod-form__line course-related"> <label class="mod-form__label" for="in_course_earnest"> <b>*</b>课程首付 </label> <div class="mod-form__content"> <input type="text" id="in_course_earnest" class="input-text input-course-price" data-pattern="not_null|course_first|money_pass" placeholder="学员需先支付首付，才可开启分期计划" data-tips="首付最低1元，不超过课程总额" data-msg="首付最低1元，不超过课程总额" value="',courseFirst?courseFirst:"",'"><span class="yuan">元</span> <div class="field-help"></div> <div class="earnest-tips hide">首付仅用于确认分期计划，学员支付后不具有学习权限</div> </div> </div> <div class="mod-form__line mod-form__select-wrap course-related"> <label class="mod-form__label" for="in_course_price"> <b>*</b>分期期数 </label> <div class="mod-form__content"> <div class="diy-select-area"> <a href="javascript:;" class="diy-select js-select-installment" data-select="installmentTag" data-pattern="selectInstallment" data-msg="请选择分期"> '),isEditMode?_$out_.push(' <i class="text" data-value="',installments.length-1,'">',installments.length-1,"&nbsp;&nbsp;期</i> "):_$out_.push(' <i class="text text-tip">请选择分期数</i> '),_$out_.push(' <span><b></b></span> </a> <ul class="diy-optgroud"> <li class="diy-option" data-value="1"> <a href="javascript:;">1&nbsp;&nbsp;期</a> </li> <li class="diy-option" data-value="2"> <a href="javascript:;">2&nbsp;&nbsp;期</a> </li> <li class="diy-option" data-value="3"> <a href="javascript:;">3&nbsp;&nbsp;期</a> </li> <li class="diy-option" data-value="4"> <a href="javascript:;">4&nbsp;&nbsp;期</a> </li> <li class="diy-option" data-value="5"> <a href="javascript:;">5&nbsp;&nbsp;期</a> </li> <li class="diy-option" data-value="6"> <a href="javascript:;">6&nbsp;&nbsp;期</a> </li> </ul> </div> </div> <div class="mod-form__content installment-detail-wrap clearfix"> <div class="js-installment-detail"></div> </div> </div> </div> </div> <div class="installment-btn"> <a href="javascript:;" class="btn-default btn-m js-installment-submit">发布</a> </div></div>'),_$out_.join("")}}});
/*!/agency/index/installment/publish/tpl/addcourseItem.tpl_tpl*/
;define("/agency/index/installment/publish/tpl/addcourseItem.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="add-course-item-wrap"> <div class="add-course-item js-add-course-item"> <img src="',item.cover_url,'220" width="220" alt="',item.name,'"> </div> <div class="add-course-tips"> <a href="//ke.qq.com/course/',item.cid,'" target="__blank" class="add-course-name">',item.name,'</a> <div class="add-course-price"> 原价 <span class="money">￥',(item.terms[0].price/100).toFixed(2),"</span> </div> </div></div>"),_$out_.join("")}}});
/*!/agency/index/installment/publish/tpl/selectTerms.tpl_tpl*/
;define("/agency/index/installment/publish/tpl/selectTerms.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){for(var _$out_=[],i=0;i<item.terms.length;i++){var term=item.terms[i];1!=term.is_passcard&&_$out_.push('<div class="radio ',0==i?"radio-check":"",'"> <i></i> <label> <a href="javascript:;" data-termid="',term.term_id,'" data-price="',term.price,'"> ',term.name," </a> </label></div>")}return _$out_.join("")}}});
/*!/agency/index/installment/publish/tpl/installmentDetail.tpl_tpl*/
;define("/agency/index/installment/publish/tpl/installmentDetail.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[],installmentNum=["第一期","第二期","第三期","第四期","第五期","第六期"],price=((courseTotal-courseFirst)/value).toFixed(2),isEditMode="undefined"!=typeof installments;_$out_.push('<div class="installment-per"> 每期还款金额<span class="installment-money" id="installmentMoney">￥',price,'</span>=(总额-首付)/分期数</div><div class="mod-form__line installment-detail-time ',2==type?"hide":"",'"> ');for(var i=0;value>i;i++){if(_$out_.push(' <div class="installment-detail"> <div class="installment-num-wd"> <span class="installment-label">',installmentNum[i],'</span> <span>学员可于</span> </div> <div class="installment-detail-date"> <span class="installment-date-wrap"> <input type="text" class="js-installment-begin" ',0===i?"":"disabled",' data-pattern="installmentTime" data-value="',i,'" value="',isEditMode?installments[i].begin:"",'"/> <i class="icon-font i-calendar"></i> </span> <span>至</span> '),i!==value-1){var expireDate=isEditMode?installments[i].end:"";_$out_.push(' <span class="installment-date-wrap"> <input type="text" class="js-installment-end" data-pattern="installmentTime" data-value="',i,'" value="',isEditMode?installments[i].end:"",'"/> <i class="icon-font i-calendar"></i> </span> <span>期间学习该课程</span> <span class="installment-deadline ',""===expireDate?"hiden":"",'">（最迟还款日：<span class="date">',expireDate,"</span>）</span> ")}else _$out_.push(" <span>",formatDate("YYYY-MM-DD",1e3*courseEndTime),'（课程截止时间）学习该课程</span> <span class="installment-deadline">（最迟还款日：',formatDate("YYYY-MM-DD",1e3*courseEndTime),"）</span> ");_$out_.push(" </div> </div> ")}_$out_.push('</div><!-- 按章节分期 --><div class="mod-form__line installment-detail-chapter ',1==type?"hide":"",'"> ');for(var i=0;value>i;i++)_$out_.push(' <div class="installment-detail"> <div class="installment-num-wd"> <span class="installment-label">',installmentNum[i],'</span> <span>学习范围为</span> </div> <div class="installment-detail-date-chapter clearfix"> '),0==i?_$out_.push(' <div class="diy-select-area"> <a href="javascript:;" class="diy-select diy-select-chapter-item" data-select="chapterTagItem" data-index="',i,'" data-value="1" disabled> <i class="text">第1节</i> <span><b></b></span> </a> </div> '):_$out_.push(' <div class="diy-select-area"> <a href="javascript:;" class="diy-select diy-select-chapter-item" data-select="chapterTagItem" data-index="',i,'" disabled data-pattern="installmentChapter" data-value="',isEditMode?installments[i].begin:"",'"> <i class="text">',isEditMode?"第"+installments[i].begin+"节":"选择节",'</i> <span><b></b></span> </a> <ul class="diy-optgroud js-select-chapter-item"> </ul> </div> '),_$out_.push(' <span class="date-unit">至</span> '),i==value-1?_$out_.push(' <div class="diy-select-area" style="line-height: 40px;">结束</div> '):_$out_.push(' <div class="diy-select-area"> <a href="javascript:;" class="diy-select diy-select-chapter-item-end" data-select="chapterTagItem" data-index="',i,'" data-pattern="installmentChapter" data-value="',isEditMode?installments[i].end:"",'"> <i class="text">',isEditMode?"第"+installments[i].end+"节":"选择节",'</i> <span><b></b></span> </a> <ul class="diy-optgroud js-select-chapter-item"> </ul> </div> '),_$out_.push(" </div> </div> ");return _$out_.push('</div><div class="installment-total"> 订单总金额：<span class="installment-money">￥',$.render.price(100*courseTotal),"</span></div>"),_$out_.join("")}}});
/*!edu_modules/validator/validator*/
;define("edu_modules/validator/validator",function(t,e,r){function n(){var t=this.validator={version:"0.0.1",succCls:"g-succ",infoCls:"g-info",errCls:"g-err",notAsciiWidth:2,parentSelector:".mod-form__line",resultSelector:".field-help",fieldSelector:".f-field",validate_timeout:300,msg:"",reg:{email:/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,mobile:/^1\d{10}$/,uin:/^[1-9](\d{4,10}|\d{17})$/,ascii:/^[\x00-\x7F]+$/,asciiSingle:/[\x00-\xFF]/,notAscii:/[^\x00-\x7F]/,fullWidth:/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,halfWidth:/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,uppercase:/[A-Z]/,lowercase:/[a-z]/,integer:/^\d+$/,date:/^(?:20|19)\d\d([-\/\\\.])(?:0?[1-9]|1[0-2])\1(?:[012]?\d|3[01])$/,time:/^(?:[01]?\d|2[0-3])[:：][0-5]?\d$/,url:/^https?:\/\//,ltrim:/^\s+/,rtrim:/\s+$/,matches:function(t,e,r){return("[object RegExp]"!==Object.prototype.toString.call(e)?new RegExp(e,r):e).test(t)},extend:function(t,e){this[t]=e}},toNumber:function(t){return t.replace(/\D/g,"")},toInt:function(t,e,r){return parseInt(t,e||10)||r||0},toDate:function(e,r){return/^\d{13}$/.test(e)?new Date(parseInt(e,10)):("string"==typeof e&&(e=e.replace(/-/g,"/")),t.date(e)?new Date(e):r||new Date)},toDateWithOutHMS:function(e,r){return e=t.toDate(e,r),e.setHours(0,0,0,0),e},getTime:function(e,r){return e=t.toDate(e),e?e.getTime():r||+new Date},pass:function(){return!0},integer:function(e){return t.reg.integer.test(e.toString())},not_null:function(t){return 0!==t.length},date_ipt:function(e){return t.reg.date.test(e.toString())},time:function(e){return t.reg.time.test(e.toString())},url:function(e){return t.reg.url.test(e.toString())},limit_number:function(e,r){var n=parseInt(e,10),a=parseInt(r.data("min"),10),s=parseInt(r.data("max"),10);return a>n||n>s?(t.msg=["请输入",a,"-",s].join(""),!1):!0},str_length:function(e,r,n){e=(e||"").toString(),!n&&(e=a.trim(e));var s=0;r=r||t.notAsciiWidth;for(var i=0,o=e.length;o>i;i++)s+=e.charCodeAt(i)<128?1:r;return Math.ceil(s/r)},limit:function(e,r){e=(e||"").toString(),r.data("trim")&&(e=a.trim(e));for(var n=0,s=t.notAsciiWidth,i=0,o=e.length;o>i;i++)n+=e.charCodeAt(i)<128?1:s;var l=parseInt(r.data("min"),10),u=parseInt(r.data("max"),10);return l&&s*l>n?(t.msg=(u?["请填写",l,"-",u,"个字"]:["请至少填写",l,"个字"]).join(""),!1):u&&n>s*u?(t.msg="字数超出"+Math.ceil((n-s*u)/s)+"个",!1):!0},limitByLength:function(e,r){var n=(e||"").length,a=parseInt(r.data("min"),10),s=parseInt(r.data("max"),10);return a&&a>n?(t.msg=(s?["请填写",a,"-",s,"个字"]:["请至少填写",a,"个字"]).join(""),!1):s&&n>s?(t.msg="字数超出"+(n-s)+"个",!1):!0},mobile:function(e){return t.reg.mobile.test(e)},uin:function(e){return t.reg.uin.test(e)},email:function(e){return t.reg.email.test(e)},date:function(t){return"string"==typeof t&&(t=t.replace(/-/g,"/")),"string"!=typeof t||/\d{4}\/\d{1,2}\/\d{1,2}/.test(t)?!isNaN(Date.parse(t)):!1},uppercase:function(e){return!t.reg.lowercase.test(e)},lowercase:function(e){return!t.reg.uppercase.test(e)},JSON:function(t){try{JSON.parse(t)}catch(e){return!(e instanceof SyntaxError)}return!0},getMsgHtml:function(t){return"<i></i><p>{{msg}}</p>".replace(/{{msg}}/g,t||"")},setSuccess:function(e){return t.ignore||e.closest(t.parentSelector).removeClass(t.errCls+" "+t.infoCls).addClass(t.succCls).find(t.resultSelector).html(t.getMsgHtml(t.succMsg||"","succ")),t.ignore=!1,t.msg="",t.succMsg="",!0},setTips:function(e){return e.closest(t.parentSelector).removeClass(t.errCls+" "+t.succCls).addClass(t.infoCls).find(t.resultSelector).html(t.getMsgHtml(t.msg||e.data("tips"),"tips")),t.msg="",!0},setError:function(e){return e.closest(t.parentSelector).removeClass(t.infoCls+" "+t.succCls).addClass(t.errCls).find(t.resultSelector).html(t.getMsgHtml(t.msg||e.data("msg"),"err")),t.msg="",!1},hasError:function(e){var r=e.closest(t.parentSelector);return r.hasClass(t.errCls)},clearValidateResult:function(e){return e.closest(t.parentSelector).removeClass(t.errCls+" "+t.succCls+" "+t.infoCls)},isNeedValidate:function(e){var r=e.closest(t.parentSelector);return r.hasClass(t.errCls)||r.hasClass(t.succCls)||r.hasClass(t.infoCls)},if_not_null_then:function(t){return t.length?!0:"break"},check:function(e,r,n,s){var i=!0,o=(e.data("pattern")||"").toString().split("|"),l=(e.data("msg")||"").toString().split("|"),u=e.val()||e.data("value")||"",c="";if("string"==typeof u){switch(e.data("prefix")){case"number":/\D/.test(u)&&(u=t.toNumber(u),e.val(u));break;case"float":/[^\d\-\.]/.test(u)&&(u=u.replace(/[^\d\-\.]/g,""),e.val(u));break;case"ltrim":t.reg.ltrim.test(u)&&(u=u.replace(t.reg.ltrim,""),e.val(u))}r||(u=a.trim(u))}for(var d=0,f=o.length;f>d&&i;d++){var g=o[d];if("function"==typeof t[g]){c=l[d]?l[d]:"",s&&c&&(t.msg=c);var p=t[g](u,e);i=!!p&&i;var m=e.data("msg-"+g);if(m&&(c=m),"break"===p)break}else""===g&&1===o.length?i=!0:(i=!1,console.warn&&void 0)}return n&&n(i),i},checkOne:function(e,r,n,a){t.msg="";var s=!0;return s="function"==typeof t[n]?t[n](r,e):""===n?!0:!1,"function"==typeof a&&a(s,t.msg),s=s===!1?t.msg||!1:s},validate:function(e,r){var n=t.check(e,r,!1,!0);return t.noResult&&(t.msg=""),t.noResult?n:n?t.setSuccess(e):t.setError(e)},bind:function(e){if(!e.data("__validate")){if(0===e.closest(t.parentSelector).find(t.resultSelector).length){var r=e.closest(t.fieldSelector),n='<div class="'+t.resultSelector.replace(/^\./,"")+'"></div>';r.length>0?r.append(n):e.after(n)}if(e.is(":input")){var a=function(){t.validate(e)};e.on("keyup paste",function(){e.data("noinput")||a()}),e.blur(function(){e.data("noblur")||a()}).focus(function(){e.data("nofocus")||t.setTips(e)})}e.data("__validate",1)}},all:function(e,r){t.isAll=!0,t.noResult=!!r;var n=e?a(e):a("[data-pattern]").not(".nopattern, .disabled"),s=!0;return n.each(function(){s=t.validate(a(this))&&s}),t.isAll=!1,t.noResult=!1,s},init:function(e,r){r=r||a(document);var n=r.find(e?e:":input[data-pattern]");n.each(function(){t.bind(a(this))})},extend:function(e,r){t[e]=function(){var e=Array.prototype.slice.call(arguments);return r.apply(t,e)}}}}var a=t("jquery");n.prototype.setOptions=function(t){return this.validator=a.extend(!0,this.validator,t),this},a.Validator=n,a.validator=(new n).validator,r.exports=a.validator});
/*!edu_modules/edu-picker/edu-picker*/
;define("edu_modules/edu-picker/edu-picker",function(t){var e=t("jquery"),i=(t("edu_modules/modal/modal"),1e5),s=function(t){function e(){}return e.prototype=t.prototype,new e},l=function(t,e){var i,s,l,n,o=function(){i=null,n=t.apply(s,l)};return function(){i&&clearTimeout(i),s=this,l=arguments,i=setTimeout(o,e)}},n='<div class="mod-picker__data-options">';n+='       <h3 class="mod-picker__list-title">选择{$name}：<span class="js-picker-leftnum"></span></h3>',n+='       <div class="mod-picker__cont">',n+='           <input type="text" placeholder="输入关键字或拼音进行筛选" class="mod-picker__input" />',n+='           <ul class="mod-picker__options-ul js-options" onselectstart="return false;">',n+='              <li class="select-li-loading js-select-loading">数据加载中…</li>',n+="           </ul>",n+="       </div>",n+="   </div>",n+='   <div class="mod-picker__action-btns">',n+='       <a href="javascript:;" class="js-picker-add btn-add btn-weak disabled">添加</a>',n+='       <a href="javascript:;" class="js-picker-del btn-del btn-weak disabled">删除</a>',n+='       <span class="mod-picker__tips">支持选择<i class="mod-picker__max"></i>{$max}{$unit}{$name}</span>',n+="   </div>",n+='   <div class="mod-picker__data-selected">',n+='       <h3 class="mod-picker__list-title">已选择{$name}：<span class="js-picker-rightnum"></span></h3>',n+='       <div class="mod-picker__cont">',n+='           <ul class="mod-picker__selected-ul js-selected" onselectstart="return false;"></ul>',n+="       </div>",n+="   </div>";var o=0,d=function(){this._id=++o,this.eventName="custom_ob_"+this._id};d.prototype={eventName:null,watch:function(t,i){return i=i||{},e(document.body).on(this.eventName,function(e,s){t.apply(i,s.data)}),this},fire:function(){return e(document.body).trigger(this.eventName,{data:arguments}),this}};var a=function(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&e++;return e},c=function(t){this.data={},e.extend(this,t),this.leftData={},this.rightData={},this.leftSelected={},this.rightSelected={},this.obDataAdd=new d,this.obLeftAdd=new d,this.obLeftDel=new d,this.obLeftRemove=new d,this.obRightAdd=new d,this.obRightDel=new d,this.obSelectedAdd=new d,this.obSelectedDel=new d};c.prototype={model:"auto",keyField:"id",max:4,min:0,data:null,obDataAdd:null,leftData:null,rightData:null,leftSelected:null,rightSelected:null,obData:null,obLeftAdd:null,obLeftDel:null,obLeftRemove:null,obRightAdd:null,obRightDel:null,obSelectedAdd:null,obSelectedDel:null,insertData:function(t){t=t||[];for(var e=t.length,i=[],s=0;e>s;s++){var l=t[s],n=l[this.keyField];this.data[n]||(this.data[n]=l,this.leftData[n]=l,this.obDataAdd.fire(l),i.push(l))}return i},insertSelected:function(t){t=t||[],this.insertData(t);for(var e=t.length,i=0;e>i;i++)this.selectedAdd(t[i][this.keyField])},idsToArray:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.data[t[i]]);return e},leftToggle:function(t){this.leftSelected[t]?this.leftDel(t):this.leftAdd(t)},rightToggle:function(t){this.rightSelected[t]?this.rightDel(t):this.rightAdd(t)},leftAdd:function(t){var e=a(this.leftSelected),i=a(this.rightData);return"single"===this.mode&&e>0?!1:e+i>=this.max?!1:(this.leftSelected[t]=this.data[t],this.obLeftAdd.fire(t),this)},leftDel:function(t){return delete this.leftSelected[t],this.obLeftDel.fire(t),this},leftToRight:function(t){return a(this.rightData)>=this.max?!1:(delete this.leftData[t],this.obLeftDel.fire(t),this.rightData[t]=this.data[t],void this.obSelectedAdd.fire(t))},rightToLeft:function(t){this.selectedDel(t)},rightAdd:function(t){return this.rightSelected[t]=this.data[t],this.obRightAdd.fire(t),this},rightDel:function(t){return delete this.rightSelected[t],this.obRightDel.fire(t),this},selectedAdd:function(t){this.leftData[t]&&(this.rightData[t]=this.leftData[t],delete this.leftData[t],this.leftDel(t),this.obSelectedAdd.fire(t))},selectedDel:function(t){this.leftData[t]=this.rightData[t],delete this.rightData[t],this.rightDel(t),this.obSelectedDel.fire(t)},allSelectedAdd:function(){for(var t in this.leftSelected)this.selectedAdd(t)},allSelectedDel:function(){for(var t in this.rightSelected)this.selectedDel(t)},reset:function(){this.leftSelected={};for(var t in this.leftData)delete this.leftData[t],delete this.data[t],this.obLeftRemove.fire(t)},getSelectedIDs:function(){var t=[];for(var e in this.rightData)t.push(this.rightData[e][this.keyField]);return t}};var h=function(t){function s(){r.$btnAdd.toggleClass("disabled",0===a(r.model.leftSelected))}function o(){r.$btnDel.toggleClass("disabled",0===a(r.model.rightSelected))}function d(){return}function h(){var t=a(r.model.rightData);r.enableYes(t<r.opts.min?!1:!0)}var r=this;t=e.extend({title:"选择"+(t.name||"名称"),name:t.name||"名称",mode:"auto",className:"mod-picker mod-picker_qq",style:"padding-bottom:0px;",width:"",content:"",max:1,min:0,unit:"个",page:1,pageNum:10,padding:!1,totalPage:1,keyField:"id",titleField:"name",listField:"items",totalField:"total",onPageChange:function(){},onInit:function(){},isOpenChild:!1,list:[],selectedList:[],lazytime:300,enableYes:!1},t),t&&-1===t.max&&(t.max=i),e.Modal.call(this,t),this.$.find(".modal-bd").html(e.template(n,this.opts)).addClass("mod-picker__bd"),t&&t.max>=i&&this.$.find(".mod-picker__tips").hide(),this.model=new c({max:"single"===this.opts.mode?this.opts.max+1:this.opts.max,mode:this.opts.mode,min:this.opts.min,keyField:this.opts.keyField}),this.model.obDataAdd.watch(function(t){r.$.find(".js-options .js-select-loading").before(r.getTemplateLi(t)),d(),h()}),this.model.obLeftAdd.watch(function(t){r.$.find('.js-options .js-select-li[data-cid="'+t+'"]').addClass("selecting"),s(),d()}),this.model.obLeftDel.watch(function(t){r.$.find('.js-options .js-select-li[data-cid="'+t+'"]').removeClass("selecting"),s(),d()}),this.model.obLeftRemove.watch(function(t){r.$.find('.js-options .js-select-li[data-cid="'+t+'"]').remove(),s(),d()}),this.model.obRightAdd.watch(function(t){r.$.find('.js-selected .js-select-li[data-cid="'+t+'"]').addClass("selecting"),o(),h()}),this.model.obRightDel.watch(function(t){r.$.find('.js-selected .js-select-li[data-cid="'+t+'"]').removeClass("selecting"),o(),h()}),this.model.obSelectedAdd.watch(function(t){var e=' .js-select-li[data-cid="'+t+'"]';r.$.find(".js-options"+e).removeClass("selecting").addClass("selected").clone().appendTo(r.$.find(".js-selected")).removeClass("selected"),d(),h(),r.checkPage()}),this.model.obSelectedDel.watch(function(t){var e=' .js-select-li[data-cid="'+t+'"]';r.$.find(".js-options"+e).removeClass("selected"),r.$.find(".js-selected"+e).remove(),d(),h()}),this.$btnAdd=this.$.find(".js-picker-add").click(function(t){return r.$btnAdd.hasClass("disabled")?void 0:"single"===r.opts.mode?(r.getSelectedIDs=function(){var t=[];for(var e in r.model.leftSelected)t.push(e);return t},void r.closeAsync(r.opts.yes,t)):void r.model.allSelectedAdd()}),this.$btnDel=this.$.find(".js-picker-del").click(function(){r.$btnDel.hasClass("disabled")||r.model.allSelectedDel()}),this.$.find(".js-options").scroll(function(){r.checkPage()}),this.$.on("click",".js-select-li",function(){var t=e(this);t.parent().hasClass("js-options")?r.model.leftToggle(t.data("cid")):r.model.rightToggle(t.data("cid"))}).on("dblclick",".js-select-li",function(t){var i=e(this),s=i.data("cid");if(i.parent().hasClass("js-options")){if("single"===r.opts.mode)return r.getSelectedIDs=function(){return[s]},void r.closeAsync(r.opts.yes,t);r.model.leftToRight(s)}else r.model.rightToLeft(s)}),this.$.find(".mod-picker__input").on("keyup paste",l(function(){r.opts.keyword=e(this).val(),r.opts.page=1,r.opts.totalPage=1,r.model.reset(),r.loadAsyncData()},this.opts.lazytime)),this.insertData(this.opts.list),setTimeout(function(){r.async(r.opts.onInit,r,function(){r.loadAsyncData(),r.insertSelected(r.opts.selectedList)})},0)};return h.prototype=s(e.Modal),h.prototype.constructor=h,e.extend(h.prototype,{onPageChange:function(t){return this.opts.onPageChange=t,this},onInit:function(t){return this.opts.onInit=t,this},getTemplateLi:function(t){var e="";if(this.opts.isOpenChild){if(e+='<li class="select-li js-select-li" data-cid="'+t[this.opts.keyField]+'" title="'+t[this.opts.titleField]+'">'+t.view+"</li>",t.child)for(var i=0,s=t.child.length;s>i;i++){var l=t.child[i];e+='<li class="select-li js-select-li" data-cid="'+l[this.opts.keyField]+'" title="'+l[this.opts.titleField]+'">'+l.view+"</li>"}}else e+=this.opts.customField&&t[this.opts.customField]?'<li class="select-li js-select-li" data-cid="'+t[this.opts.keyField]+'" title="'+t[this.opts.titleField]+'"><span class="select-li-name">'+t[this.opts.customField]+"</span></li>":'<li class="select-li js-select-li" data-cid="'+t[this.opts.keyField]+'" title="'+t[this.opts.titleField]+'"><span class="select-li-name">'+t[this.opts.titleField]+"</span></li>";return e},idsToArray:function(t){return this.model.idsToArray(t)},loadAsyncData:function(t){var e=this;return"undefined"==typeof this.opts.totalPage||this.opts.page>this.opts.totalPage?(this.$.find(".js-options .js-select-loading").hide(),!1):(this.$.find(".js-options .js-select-loading").show(),void(this._lock||(this._lock=!0,this.opts.onPageChange.call(this,{page:this.opts.page,pageNum:this.opts.pageNum,keyword:this.opts.keyword||""},function(i,s){"function"==typeof t&&t(i,s),i||(e.insertData(s),e.opts.page++),e._lock=!1,e.checkPage()}))))},getSelectedIDs:function(){var t=[],i=this;return this.$.find(".js-selected .js-select-li").each(function(){var s=e(this).data("cid");t.push(i.model.rightData[s][i.model.keyField])}),t},insertData:function(t){this.model.insertData(t)},reset:function(){this.model.reset()},insertSelected:function(t){this.model.insertSelected(t)},setMaxPage:function(t){return this.opts.totalPage=t,this},checkPage:function(){if(!this._lock){var t=this.$.find(".js-options");if(!t.is(":hidden")){var e=t.find(".js-select-loading"),i=t.outerHeight(),s=t.offset().top,l=e.offset().top-s;l+=e.outerHeight(),l>=0&&i>l-10&&this.loadAsyncData()}}}}),e.picker=h,e.each(["yes","no","onClose"],function(t,e){h.prototype[e]=function(t){var i,s=this;i=t.length<2?function(){return t.call(this,s.getSelectedIDs())}:function(e,i){return t.call(this,s.getSelectedIDs(),i)},this.opts[e]=i}}),e.each(["enableAdd","enableDel"],function(t,e){h.prototype[e]=function(t){this.opts[e]=t;var i=t?"removeClass":"addClass";return"enableAdd"===e&&this.$btnAdd[i]("disabled"),"enableDel"===e&&this.$btnDel[i]("disabled"),this}}),h});
/*!@tencent/im-jquery.dropdown/jquery.dropdown*/
;define("@tencent/im-jquery.dropdown/jquery.dropdown",function(e){function t(e){return e.hasClass("diy-select-checkbox")}function i(e){e.each(function(){var e=o(this);if(e.hasClass("diy-select-on")){e.removeClass("diy-select-on"),e.find(".diy-optgroud").hide(),e.find(".diy-option-save").hide();var t=e.data("pattern");t&&e.trigger("change:"+t)}})}function a(e,i,a){if(t(e)){var s=[[],[]],d=e.find(".diy-option-all");return e.find(".opt-checked").not(".diy-option-all").each(function(){var e=o(this);s[0].push(e.data("value")),s[1].push(e.find("a,span").eq(0).text())}),[s[0],d.hasClass("opt-checked")?d.find("a,span").eq(0).text():s[1].join("，")]}return[i.data("value"),i.find("a,span").eq(0)[a]()]}var o=e("jquery"),s=!1;o(document).on("keydown",function(e){13===e.keyCode&&(s=!0)}).on("click",function(){i(o(".diy-select-area"))}).on("click",".diy-select, .diy-select-toggle",function(e){e.stopPropagation(),e.preventDefault();var a=o(this);if(!a.attr("disabled")){var s=a.closest(".diy-select-area");if(!s.attr("disabled")){var d=s.data("pattern");i(o(".diy-select-on").not(s));var n,l=s.find(".diy-optgroud"),c=s.find(".diy-select");if(l.length>0){if(s.hasClass("diy-select-on"))return i(s);s.addClass("diy-select-on"),n=c.data("select"),n&&s.trigger("showopt:"+n),l.show();var r=0,p=l.find("li");p.each(function(){"none"!==o(this).css("display")&&r++});var h=o(window),f=(h.height(),s.data("position")),g={};if("fixed"===f){var v=c.offset();g={position:"fixed",top:c.height()+v.top-h.scrollTop(),left:v.left}}var y=(l.offset().top-h.scrollTop()+39,l.height()),u=100;y=u>y?u:y;var C=parseInt((y-9)/p.eq(0).height()),x=l.data("maxrows")||10;C>x?C=x:1>C&&(C=1);var k=p.eq(0).height();l.css(r>C?o.extend({maxHeight:C*k+9,height:"auto",overflowY:"auto"},g):o.extend({maxHeight:r*(k+1),height:r*(k+1)-1,overflowY:"hidden"},g)),!!window.ActiveXObject&&!window.XMLHttpRequest&&r>C&&l.css({height:C*p.eq(0).height()+9,overflowY:"auto"}),p.eq(-1).css("borderBottom",0),t(s)&&s.find(".diy-option-save").css("top",l.height()+39).show(),o(document).trigger("open:"+d)}else n=a.data("select"),n&&a.trigger("nooption:"+n)}}}).on("click",".diy-select-ipt, .diy-optgroud .diy-option a",function(e){e.preventDefault()}).on("click init",".diy-optgroud .diy-option",function(e){e.stopPropagation(),e.preventDefault();var i=o(this),d=i.parents(".diy-select-area"),n=d.find(".diy-optgroud"),l=d.find(".diy-select"),c=d.find(".diy-select-ipt"),r=d.find(".text"),p=c.add(r).eq(0),h=t(d);h?(i.toggleClass("opt-checked"),i.hasClass("diy-option-all")?i.hasClass("opt-checked")?i.siblings("li").addClass("opt-checked"):i.siblings("li").removeClass("opt-checked"):(i.hasClass("opt-checked")||d.find(".diy-option-all").removeClass("opt-checked"),d.find(".opt-checked").not(".diy-option-all").length===d.find(".diy-option").not(".diy-option-all").length&&d.find(".diy-option-all").addClass("opt-checked"))):(d.removeClass("diy-select-on"),i.addClass("selected").siblings("li").removeClass("selected"),n.hide(),d.find(".diy-option-save").hide());var f=!1,g="",v="",y="",u="",C=[],x=c.length>0;if(p.length>0){var k=r.data("set");k||(k="text"),g=x?p.val():r.text(),v=p.data("value"),C=a(d,i,k),u=C[0],y=C[1],f=u!==v,x?c.data("value",u).val(y):(h?0===u.length?(y=r.data("tips"),r.addClass("text-tip")):r.removeClass("text-tip"):i.hasClass("diy-option-tips")?r.addClass("text-tip"):r.removeClass("text-tip"),r.data("value",u)[k](y))}else y=i.text(),f=y!=l.text(),l.html(y+"<span><b></b></span>");"click"===e.type&&s&&l.focus(),s=!1;var w=l.data("select");w&&l.trigger("change:"+w,[y,u,g,v,e.type])})});
/*!@tencent/im-edu-datepicker/edu-datepicker*/
;define("@tencent/im-edu-datepicker/edu-datepicker",function(t){var e=t("jquery"),i=function(t,i){if(this.options=i,this.element=e(t),this.format=a.parseFormat(i.format||this.element.data("date-format")||"yyyy-mm-dd"),this.picker=e(a.template(i).replace(/{{dpCls}}/,i._dpCls||"")).appendTo(this.options._body||"body").on({click:e.proxy(this.click,this)}),this.picker.data("toggle",this.element),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),click:e.proxy(this.show,this)}):this.component?this.component.on("click",e.proxy(this.show,this)):this.element.on("click",e.proxy(this.show,this)),this.minViewMode=i.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=i.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=i.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=i.onRender,this.isUp=i.isUp,this.adjustUp=i.adjustUp,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};i.prototype={constructor:i,show:function(t){this.picker.show(),this.options._show&&this.options._show(this.element),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&!this.options._isStopProp&&(t.stopPropagation(),t.preventDefault()),!this.isInput;var i=this;e(document).on("mousedown",function(t){0===e(t.target).closest(".datepicker").length&&i.hide()}).on("navchange",function(){i.hide()}),this.element.trigger({type:"show",date:this.date})},hide:function(){!this.options._not_hide&&this.picker.hide(),this.options._hide&&this.options._hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var t=a.formatDate(this.date,this.format);this.options._click&&this.options._click(this.date,this.element),this.isInput?this.element.prop("value",t):(this.component&&this.element.find("input").prop("value",t),this.element.data("date",t)),this.options._set&&this.options._set(this.date,this.element)},setValue:function(t){this.date="string"==typeof t?a.parseDate(t,this.format):new Date(t),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},getAdjustUp:function(t,i,s){var a=e(window),o=a.scrollTop();return t.top+i+s-o>a.height()},place:function(){var t=this.picker.outerHeight(),e=this.component?this.component.offset():this.element.offset(),i=this.height;this.adjustUp&&(this.isUp=this.getAdjustUp(e,i,t)),this.options._body?this.picker.css({top:this.isUp?-(t+i):0,left:0}):(this.isUp&&(i=-1*t),this.picker.css({top:e.top+i,left:e.left}))},update:function(t,e){if(t&&"[object Date]"===Object.prototype.toString.call(t))this.date=t;else if(e="function"==typeof this.options._defaultVal?new Date(this.options._defaultVal()):!1,this.options._isMuitPicker)this.date=e?new Date(e):a.today;else{var i="string"==typeof t?t:this.isInput?this.element.prop("value"):this.element.data("date");this.date=i?a.parseDate(i,this.format):e?new Date(e):a.today}isNaN(this.date.valueOf())&&(this.date=e&&!isNaN(e.valueOf())?e:a.today),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.viewDate.setFullYear(this.date.getFullYear()),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow dow'+t+'">'+a.dates.daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+a.dates.monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").append(t)},switchClk:function(){this.options.switchClk&&this.options.switchClk()},fill:function(){this.options._begin=this.options._begin?a.toDateWithOutHMS(this.options._begin):0,this.options._end=this.options._end?a.toDateWithOutHMS(this.options._end):0;var t=this.viewDate.getFullYear();1900>=t?(this.viewDate.setFullYear(1900),this.picker.find(".lastYear").addClass("disabled"),1900>t&&this.viewDate.setMonth(0),0===this.viewDate.getMonth()?this.picker.find(".prev").addClass("disabled"):this.picker.find(".prev").removeClass("disabled")):(this.picker.find(".lastYear").removeClass("disabled"),this.picker.find(".prev").removeClass("disabled"));var i=new Date(this.viewDate),s=i.getFullYear(),o=i.getMonth(),n=this.date.valueOf();this.picker.find(".datepicker-days th.switch").text(s+a.dates.yearSuffix+a.dates.monthsShort[o]),this.picker.find(".datepicker-days-bg").text(o+1);var h=new Date(s,o-1,28,0,0,0,0),r=a.getDaysInMonth(h.getFullYear(),h.getMonth());h.setDate(r),h.setDate(r-(h.getDay()-this.weekStart+7)%7);var d=new Date(h);d.setDate(d.getDate()+42),d=d.valueOf();for(var p,l,c,u=[],f=0,w=!1,v=0,m="function"==typeof this.options._dates?this.options._dates():this.options._dates,g="function"==typeof this.options._defaultVal?this.options._defaultVal():!1;h.valueOf()<d;){h.getDay()===this.weekStart&&(u.push("<tr"+(this.options._isView?' class="tr-view"':"")+">"),f=0),p=this.onRender(h),l=h.getFullYear(),c=h.getMonth(),w=!1,o>c&&l===s||s>l?(p+=" old",v++,w=!0):(c>o&&l===s||l>s)&&(p+=" new",w=!0),h.valueOf()===n&&(p+=" active"),g&&h.valueOf()===g&&(p+=" defaultDay current");var y="",k="";this.options._begin&&h<this.options._begin&&(k=" disabled before_begin"),this.options._end&&h>this.options._end&&(k=" disabled after_end"),""===k&&this.options._filter&&this.options._filter(h,this.element)&&(k=" disabled"),this.options._isView&&(k+=(-1!==k.indexOf("disabled")?"":" disabled")+(!this.options._isMuitPicker&&h<a.today?" pass":"")+(/(before_begin|after_end)/.test(k)?" not_allow":""),e.isArray(m)&&-1!==m.indexOf(h.getTime())?(y="current",f++):f=0,this.options._isMuitPicker||(0===f?u.push(u.pop().replace(/{{opob}}/gi,"").replace(/{{opom}}/gi,"{{opoe}}")):1===f?k+=" date-view {{opob}}":f>1&&(k+=" date-view {{opom}}")));var D=[h.getFullYear(),h.getMonth()+1,h.getDate()].join("/");if(this.options._isView){var M=[["",h.getDate()],["day-today","今天"],["day-holiday","假日"]],b=0;"function"==typeof this.options._isHoliday&&this.options._isHoliday(+h)&&(b=2),h.getTime()===a.today.getTime()&&(b=1),u.push(('<td class="day'+p+k+' {{viewCls}}" data-date="'+D+'"><div><i>{{viewText}}</i><b></b><u></u></div></td>').replace(/{{viewCls}}/gi,this.options._isMuitPicker?y:M[b][0]).replace(/{{viewText}}/gi,M[b][1]))}else u.push('<td class="day'+p+k+'" data-date="'+D+'">'+h.getDate()+"</td>");h.getDay()===this.weekEnd&&(u.push(u.pop().replace(/{{opob}}/gi,"").replace(/{{opom}}/gi,"{{opoe}}")),u.push("</tr>")),h.setDate(h.getDate()+1)}var _=this.picker.find(".datepicker-days tbody");_.empty().append(u.join("").replace(/{{opo([bem])}}/gi,"view-day-$1")),v>=7&&_.find("tr:eq(0)").hide();var Y=this.date.getFullYear(),F=this.picker.find(".datepicker-months").find("th.switch").text(s+a.dates.yearSuffix).end().find("span").removeClass("active");Y===s&&F.eq(this.date.getMonth()).addClass("active"),u="",s=10*parseInt(s/10,10);var x=this.picker.find(".datepicker-years").find("th.switch").text(s+"-"+(s+9)).end().find("td");s-=1;for(var S=-1;11>S;S++)u+='<span class="year'+(-1===S||10===S?" old":"")+(Y===s?" active":"")+'">'+s+"</span>",s+=1;x.html(u)},click:function(t){!this.options._isMuitPicker&&t.stopPropagation(),t.preventDefault();var i=e(t.target).closest("span, td, th");if(1===i.length){var s,o;switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":break;case"prev":case"next":this.viewDate["set"+a.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+a.modes[this.viewMode].navFnc].call(this.viewDate)+a.modes[this.viewMode].navStep*("prev"===i[0].className?-1:1)),this.switchClk(),this.fill();break;case"lastYear":case"nextYear":this.viewDate.setFullYear.call(this.viewDate,this.viewDate.getFullYear.call(this.viewDate)+("lastYear"===i[0].className?-1:1)),this.switchClk(),this.fill()}break;case"span":i.is(".month")?(o=i.parent().find("span").index(i),this.viewDate.setMonth(o)):(s=parseInt(i.text(),10)||0,this.viewDate.setFullYear(s)),0!==this.viewMode&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:a.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(i.is(".day")&&!i.is(".disabled")){var n=parseInt(i.text(),10)||1;o=this.viewDate.getMonth(),i.is(".old")?o-=1:i.is(".new")&&(o+=1),s=this.viewDate.getFullYear(),this.date=new Date(s,o,n,0,0,0,0),this.viewDate=new Date(s,o,Math.min(28,n),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:a.modes[this.viewMode].clsName})}}}},select:function(t){var e=t.day,i=t.month,s=t.year;this.date=new Date(s,i,e,0,0,0,0),this.viewDate=new Date(s,i,Math.min(28,e),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:a.modes[this.viewMode].clsName})},setOption:function(t){return e.extend(this.options,t),this.fill(),this.set(),this},getDate:function(){return this.date},mousedown:function(t){!this.options._isMuitPicker&&t.stopPropagation(),t.preventDefault()},showMode:function(t){t&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+a.modes[this.viewMode].clsName).show()}},e.fn.datepicker=function(t,s){return this.each(function(){var a=e(this),o=a.data("datepicker"),n="object"==typeof t&&t;o||a.data("datepicker",o=new i(this,e.extend({},e.fn.datepicker.defaults,n))),"string"==typeof t&&o[t](s)})},e.fn.datepicker.defaults={onRender:function(){return""},adjustUp:!1},e.fn.datepicker.Constructor=i;var s=new Date;s.setHours(0,0,0,0);var a={today:s,modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["周日","周一","周二","周三","周四","周五","周六","周日"],daysShort:["日","一","二","三","四","五","六","日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],yearSuffix:"年"},isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,a.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},toDateWithOutHMS:function(t){return"string"==typeof t&&(t=t.replace(/-/g,"/")),t=isNaN(Date.parse(new Date(t)))?new Date:new Date(t),t.setHours(0,0,0,0),t},parseFormat:function(t){var e=t.match(/[.\/\-\s].*?/),i=t.split(/\W+/);if(!e||!i||0===i.length)throw new Error("Invalid date format.");return{separator:e,parts:i}},parseDate:function(t,e){if(!t)return a.today;var i,s=t.split(e.separator);if(t=new Date,t.setHours(0,0,0,0),s.length===e.parts.length)for(var o=t.getFullYear(),n=t.getDate(),h=t.getMonth(),r=0,d=e.parts.length;d>r;r++)switch(i=parseInt(s[r],10)||1,e.parts[r]){case"dd":case"d":if(n=i,n>31)return a.today;t.setDate(i);break;case"mm":case"m":if(h=i-1,h>11)return a.today;t.setMonth(h);break;case"yy":if(o=2e3+i,1900>o||o>2099)return a.today;t.setFullYear(o);break;case"yyyy":if(o=i,1900>o||o>2099)return a.today;t.setFullYear(o)}return t},formatDate:function(t,e){var i={d:t.getDate(),m:t.getMonth()+1,yy:t.getFullYear().toString().substring(2),yyyy:t.getFullYear()};i.dd=i.d,i.mm=i.m,t=[];for(var s=0,a=e.parts.length;a>s;s++)t.push(i[e.parts[s]]);return t.join(e.separator)},headTemplate:function(t){return"<thead><tr>"+(t._showYearBtn?'<th class="lastYear"><b><i>&lsaquo;&lsaquo;</i></b></th>':"")+'<th class="prev"><b><i>&lsaquo;</i></b></th><th colspan="'+(t._showYearBtn?"3":"5")+'" class="switch"></th><th class="next"><b><i>&rsaquo;</i></b></th>'+(t._showYearBtn?'<th class="nextYear"><b><i>&rsaquo;&rsaquo;</i></b></th>':"")+"</tr></thead>"},contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};return a.template=function(t){return'<div class="datepicker dropdown-menu {{dpCls}}"><div class="datepicker-days"><table class=" table-condensed">'+a.headTemplate(t)+'<tbody></tbody></table><div class="datepicker-days-bg"></div></div></div>'},a});
/*!agency/index/installment/publish/db.installment*/
;define("agency/index/installment/publish/db.installment",function(e){var t=e("edu_modules/edu-db/edu-db");return t.extend({get_course_list_cpkg:t.httpMethod({url:"/cgi-agency/agency/manager/get_course_list_cpkg",type:"GET"}),get_plan_detail:t.httpMethod({url:"/cgi-bin/user/get_term_detail",type:"GET"}),get_usr_installment_order:t.httpMethod({url:"/cgi-agency/ke_installment/get_usr_installment_order",type:"GET"}),get_usr_installment_default:t.httpMethod({url:"/cgi-agency/ke_installment/get_usr_installment_default",type:"GET"}),getUsrInstallmentOrder:t.httpMethod({url:"/cgi-agency/ke_installment/get_installment_detail",type:"GET"}),create_installment_order:t.httpMethod({url:"/cgi-agency/ke_installment/create_installment_order",type:"POST"}),__last:null}),t});
/*!edu_modules/tdw/tdw*/
;define("edu_modules/tdw/tdw",function(t,n,e){function r(t){var n;return i(t),n=a(t),{fields:h,datas:n}}function i(t){t&&(f.isPlainObject(t)&&(t=[t]),f.isArray(t)&&f.each(t,function(t,n){f.each(n,function(t){d[t]||(d[t]=1,h.push(t))})}))}function o(t,n){return n=n||[],n.forEach(function(n){n.forEach(function(e,r){n[r]="string"==typeof e?~w.indexOf(t[r])?e.substring(0,v):e.substring(0,b):e})}),n}function a(t){var n,e=[];return t&&(f.isPlainObject(t)&&(t=[t]),f.isArray(t))?(f.each(t,function(t,r){n=[],r=f.extend({},p,r),f.each(h,function(t,e){n.push(r[e]||"")}),e.push(n)}),e):void 0}function c(t,n){var e={};n=n||l,f.each(["table","pr_ip","pr_t"],function(t,r){e[r]=n[r]||""}),t.datas=o(t.fields,t.datas),e.fields=JSON.stringify(t.fields),e.datas=JSON.stringify(t.datas),e.retype=2,l.beforeRequest(t)!==!1&&n.url&&(f.ajax({url:n.url,data:e,dataType:"jsonp"}).done(function(n){l[0===n.ret?"success":"error"](n,t)}).fail(function(n,e,r){l.fail(t,n,e,r)}),s(t.fields,t.datas))}function u(){var t=[],n=m.read();n.length<=l.slicer?c(r(n)):(f.each(n,function(n,e){t.push(e),n>0&&n%l.slicer===l.slicer-1&&(c(r(t)),t=[])}),t.length&&c(r(t)))}function s(t,n){if(y.table)try{if(window.localStorage&&1===parseInt(window.localStorage.getItem("tdwFlag"),10))for(var e=0,r=n.length;r>e;e++){for(var i={},o=0,a=t.length;a>o;o++)""!==n[e][o]&&(i[t[o]]=n[e][o]);y.table([i])}}catch(c){}}var f=t("jquery"),l={url:"/cgi-bin/activity_platform/tdw/report",timer:300,beforeRequest:function(){},success:function(){},error:function(){},fail:function(){},slicer:8,table:"",pr_ip:"",pr_t:""},p={},d={},h=[],g=0,y=console||{},b=50,v=200,w=["url","refer"],m={pool:[],write:function(t){f.isPlainObject(t)?this.pool.push(t):f.isArray(t)&&Array.prototype.push.apply(this.pool,t)},read:function(){var t=this.pool;return this.pool=[],t}};e.exports={config:function(t,n){f.extend(p,t),f.extend(l,n),i(p)},report:function(t){m.write(t),g||(g=setTimeout(function(){u(),g=0},l.timer))},reportSync:function(t,n){n=f.extend({},l,n),c(r(t),n)},composer:r,request:c,getCommonData:function(t){return t?p[t]:p}}});
/*!edu_modules/tdw-local/tdw-local*/
;define("edu_modules/tdw-local/tdw-local",function(e,o,n){function t(e,o){if(g.wasInit&&g.wasInit()){var n=o.fields,t=o.datas,a=d.inArray(v.seqName,n);d.each(t,function(e,o){var n=v.localPrefix+o[a];g.remove(n)})}}function a(e,o){d.isPlainObject(e)?o&&o(e):d.isArray(e)&&d.each(e,function(e,n){o&&o(n)})}function i(){return(new Date).getTime()+Math.random().toFixed(17).toString().replace(".","")}function r(){g.filter(_,function(e){var o;e=e.slice(0,2);for(var n=0;n<e.length;n++)o=JSON.parse(e[n].value||"{}"),o.seq_number?(o.datas&&o.datas[0].push("local"),o.fields&&o.fields.push("source_from"),h.request(o)):g.remove(e[n].key)})}function c(){q.getLocal({whiteDomain:v.whiteDomain,iframeUrl:v.crossProxy,crossDomain:v.crossDomain},function(e){g=e,r()})}function s(e){a(e,function(e){e[v.seqName]=i()})}function u(){return p&&p.obj&&null!==p.obj()}function l(e,o){a(e,function(e){o.push(d.extend({seq_number:e[v.seqName]},h.composer(e)))})}function f(e){g.wasInit&&g.wasInit()&&d.each(e,function(e,o){var n=v.localPrefix+o[v.seqName];g.set(n,JSON.stringify(o))})}function m(e){var o=[];s(e),l(e,o),f(o)}var d=e("jquery"),w=e("edu_modules/tdw/tdw"),p=e("edu_modules/local.data/local.data"),q=e("edu_modules/local.data/power.local"),g={},h={},x=u(),v={whiteDomain:[],crossProxy:"",crossDomain:!1,localPrefix:"tdw_seq",seqName:"seq_number"},_=/^tdw_seq/;h.composer=w.composer,h.getCommonData=w.getCommonData,h.config=w.config,h.request=w.request,h.config({},{success:t}),h.report=function(e){m(e),w.report(e)},h.reportSync=function(e,o){m(e),w.reportSync(e,o)},h.initLocal=function(e){d.extend(v,e),_=new RegExp("^"+v.localPrefix),x&&c()},n.exports=h});
/*!edu_modules/report.cookie/report.from*/
;define("edu_modules/report.cookie/report.from",function(e,o,t){function i(e){var o=!n.get(r.name);setTimeout(function(){var t={action:"From"};o&&(t.ver7=e.getReportData().ver4||"4"),e.tdw(t),n.setSession(r.name,1,r.domain,r.path)},0)}var n=e("edu_modules/util.cookie/util.cookie"),r={name:"tdw_first_visited",domain:"ke.qq.com",path:"/"};t.exports=i});
/*!edu_modules/edu-report/edu-report*/
;define("edu_modules/edu-report/edu-report",function(o,e,t){var r=o("edu_modules/tdw-local/tdw-local"),n=o("jquery"),c=o("edu_modules/report.cookie/report.from"),i={};r.config({opername:"Edu"},{table:"dc00149",pr_ip:"obj3",pr_t:"ts",slicer:4}),r.initLocal&&r.initLocal({whiteDomain:["ke.qq.com"],crossProxy:"//ke.qq.com/storage_proxy.html",crossDomain:!0}),i.tdw=function(o,e){r[e?"reportSync":"report"](o)},i.toreport=function(){},i.config=function(o){r.config(n.extend({},o||{}))},i.getReportData=r.getCommonData,c(i),t.exports=i});
/*!@tencent/im-pinyin/pinyin*/
;define("@tencent/im-pinyin/pinyin",function(){var n={},a=100;return n.dict={er:"二贰儿而耳尔饵",shi:"十时实蚀士示世市式势事侍饰试视柿是适室逝释誓拭恃嗜尸失师诗狮施湿虱史使始驶矢屎",yi:"乙已以蚁倚一衣医依伊揖壹亿义艺忆议亦异役译易疫益谊意毅翼屹抑邑绎奕逸肄溢仪宜姨移遗夷胰椅","chang,an,han":"厂","ding,zheng":"丁",qi:"七戚欺漆柒凄嘁乞企启起气弃汽器迄泣妻骑棋旗歧祈脐畦崎鳍","bu,bo":"卜簿",ren:"人仁刃认韧纫任忍",ru:"入褥如儒蠕乳辱",jiu:"九久酒玖灸韭旧救就舅臼疚纠究揪鸠",ba:"八巴疤叭芭捌笆坝爸霸把吧拔跋靶",ji:"几及吉级极即急疾集籍棘辑嫉己挤脊计记技忌际季剂迹既继寄绩妓荠寂鲫冀击饥圾机肌鸡积基激讥叽唧畸箕纪济","liao,le":"了",li:"力历厉立励利例栗粒吏沥荔俐莉砾雳痢礼李里理鲤丽厘狸离犁梨璃黎漓篱哩",dao:"刀导岛蹈捣祷到盗悼道稻倒",nai:"乃奶耐奈",san:"三叁伞散",you:"又右幼诱佑友尤由邮犹油游有优忧悠幽",yu:"于余鱼娱渔榆愚隅逾舆与予玉育狱浴预域欲遇御裕愈誉芋郁喻寓豫屿宇羽雨语迂淤",gan:"干甘肝竿柑杆秆赶敢感橄",gong:"工弓公功攻宫恭躬巩汞拱共贡供",kui:"亏盔窥葵魁愧",tu:"土吐秃突凸图徒途涂屠兔",cun:"寸存村","da,dai,tai":"大",cai:"才材财裁采菜彩睬踩猜",xia:"下夏虾瞎峡狭霞匣侠暇辖",zhang:"丈仗帐胀障杖账张章彰樟涨掌",shang:"上伤商尚晌赏","wan,mo":"万",kou:"口扣寇抠",xiao:"小晓孝笑效哮啸消宵销萧硝箫嚣肖淆",jin:"巾斤今金津筋襟仅尽进近晋浸紧锦谨禁",shan:"山删衫珊闪陕扇善擅膳赡苫",qian:"千迁牵谦签欠歉前钱钳潜黔遣谴",chuan:"川穿串船喘",ge:"个各革阁格隔哥鸽割歌戈胳搁葛",shao:"勺芍少绍哨捎稍烧",fan:"凡烦矾樊反返犯饭泛范贩帆翻",xi:"夕西吸希析牺息悉惜稀锡溪熄膝昔晰犀熙嬉蟋习席袭媳细隙喜徙",wan:"丸完玩顽弯湾豌挽晚碗惋婉腕","yao,mo,ma,me":"么","guang,an":"广","wang,wu":"亡",men:"门们闷",zhi:"之支汁芝肢脂蜘止旨址纸指趾只执直侄值职植至志帜制质治致秩智置挚掷窒滞稚知织",zi:"子紫姊籽滓自字姿资滋咨",wei:"卫未位味畏胃喂慰谓猬蔚魏为伟伪苇纬萎危威微偎薇巍违围唯维桅委",ye:"也冶野业页夜液谒腋爷掖椰","nv,ru":"女",fei:"飞非啡肺废沸费吠肥匪诽菲",ma:"马码玛吗妈蚂骂麻",cha:"叉岔衩茶察茬插杈碴",feng:"丰封疯峰锋蜂枫风凤奉讽逢缝",xiang:"乡香箱厢湘镶向项象像橡享响想相祥翔",jing:"井警阱茎京经惊晶睛精荆兢鲸径竞竟敬静境镜靖",wang:"王网往枉妄忘旺望汪",kai:"开揩凯慨",tian:"天添田甜恬舔",wu:"无吴芜梧蜈五午伍武侮舞捂鹉勿务物误悟雾坞晤乌污呜屋巫诬",fu:"夫父付负妇附咐赴复傅富腹覆赋缚伏扶俘浮符幅福凫芙袱辐蝠抚斧府俯辅腐甫脯肤麸孵敷服",zhuan:"专砖赚撰",yuan:"元园原圆援缘源袁猿辕远怨院愿冤鸳渊",yun:"云匀耘允陨孕运韵酝蕴晕","za,zha":"扎",mu:"木目牧墓幕暮慕沐募睦穆母亩牡拇姆",ting:"厅听挺艇亭庭停蜓廷","bu,fou":"不","qu,ou":"区",quan:"犬劝权全泉拳痊",tai:"太态泰汰台苔抬胎","che,ju":"车",pi:"匹皮疲脾啤批披坯霹僻屁譬劈",ju:"巨拒具俱剧距惧锯聚炬局菊橘居鞠驹矩举据沮",ya:"牙芽崖蚜涯衙轧亚讶压呀押鸦鸭哑雅",bi:"比彼笔鄙匕秕币必毕闭毙碧蔽弊避壁庇蓖痹璧逼鼻荸",jie:"皆阶接街秸介戒届界借诫节结劫杰洁捷截竭姐",hu:"互户护沪乎呼忽虎狐胡壶湖蝴弧葫糊",qie:"切茄窃怯",wa:"瓦挖蛙洼娃袜","tun,zhun":"屯",ri:"日",zhong:"中众仲忠终钟盅衷肿",gang:"冈刚纲缸肛杠岗钢","nei,na":"内",bei:"贝备倍辈狈惫焙北杯悲碑卑背",shui:"水谁税睡","jian,xian":"见",niu:"牛扭纽钮",shou:"手守首收寿受授售兽瘦",mao:"毛矛茅锚茂贸帽貌猫铆",sheng:"升生声牲笙甥圣胜剩绳","chang,zhang":"长","shi,shen":"什",pian:"片偏篇翩骗",pu:"仆扑葡菩蒲铺普谱圃浦",hua:"化划华花画话桦哗猾滑","chou,qiu":"仇","zhao,zhua":"爪",reng:"仍扔","cong,zong":"从",xiong:"凶兄胸匈汹雄熊",fen:"分坟焚芬吩纷氛奋粪愤忿粉",fa:"乏伐罚阀筏发法",cang:"仓苍舱沧",yue:"月阅悦跃越岳粤","shi,zhi":"氏识",dan:"丹耽旦但诞淡蛋氮担胆",gou:"勾沟钩构购够垢狗苟",wen:"文闻蚊问纹温瘟稳吻紊","liu,lu":"六",huo:"火伙或货获祸惑霍活",fang:"方芳仿访纺防妨房肪坊放",dou:"斗抖陡蚪豆逗痘兜",ding:"订定锭叮盯钉顶鼎",xin:"心辛欣新薪锌芯衅","chi,che":"尺",yin:"引饮蚓瘾印因阴音姻茵银吟淫隐",chou:"丑抽绸酬筹稠愁畴",kong:"孔恐空控",dui:"队对堆",ban:"办半扮伴瓣绊板版班般斑搬扳颁",shu:"书叔殊梳舒疏输蔬抒枢淑束述树竖恕庶墅漱暑鼠薯黍蜀署曙熟秫赎",shuang:"双霜爽",huan:"幻换唤患宦涣焕痪欢环缓",kan:"刊堪勘砍坎看",mo:"末沫漠墨默茉陌寞摸膜魔馍摹蘑磨",da:"打达搭答瘩",qiao:"巧乔侨桥瞧荞憔悄锹敲跷峭窍撬翘",zheng:"正挣症争征睁筝蒸怔狰证郑政整拯","ba,pa":"扒耙",qu:"去曲驱屈岖蛆躯取娶",gu:"古谷股鼓估固故顾雇孤姑辜咕沽菇箍骨",ben:"本奔笨","shu,zhu":"术属",bing:"丙柄饼秉禀冰兵并病",ke:"可克刻客课科棵颗磕蝌渴坷",zuo:"左作坐座做昨",bu:"布步怖部埠补捕哺","shi,dan":"石","long":"龙聋隆咙胧窿拢垄笼",mie:"灭蔑",ping:"平评凭瓶萍坪乒",dong:"东冬动冻栋洞董懂","qia,ka":"卡",shuai:"帅蟀甩摔",gui:"归规闺硅瑰轨鬼诡贵桂跪刽",zhan:"占斩盏展沾粘毡瞻战站栈绽蘸","qie,ju":"且","ye,xie":"叶",jia:"甲钾加佳嘉枷驾架嫁稼假荚颊",shen:"申伸身深呻绅肾渗慎审婶甚神",hao:"号好耗浩毫豪壕嚎蒿",dian:"电店垫殿玷淀惦奠典点碘颠掂",yang:"央殃秧鸯扬阳杨洋养氧痒样漾",diao:"叼雕刁碉吊钓掉",jiao:"叫轿较窖酵交郊浇娇骄胶椒焦蕉礁狡饺绞脚搅教矫",ling:"另令伶灵铃陵零龄玲凌菱蛉翎岭领","tao,dao":"叨",si:"四寺饲肆司丝私斯撕嘶死",tan:"叹炭探碳坛谈痰昙谭潭檀坦毯袒贪摊滩瘫",qiu:"丘秋蚯求球囚",he:"禾河荷盒何贺赫褐鹤",dai:"代带贷怠袋逮戴呆待歹",xian:"仙先掀锨闲贤弦咸衔嫌涎舷现限线宪陷馅羡献腺显险鲜",bai:"白百摆败拜掰","zi,zai":"仔",chi:"斥赤翅吃嗤痴池驰迟持弛齿耻侈",ta:"他它塌塔踏蹋",gua:"瓜刮挂卦褂寡",cong:"丛匆葱聪囱",yong:"用永咏泳勇蛹踊佣拥庸","le,yue":"乐","ju,gou":"句拘",ce:"册厕测策",wai:"外歪",chu:"处出初除厨锄雏橱础储楚触矗",niao:"鸟",bao:"包胞苞褒报抱爆豹饱宝保雹",zhu:"主煮嘱拄竹逐烛住注驻柱祝铸贮蛀珠株诸猪蛛筑",lan:"兰拦栏蓝篮澜览懒揽缆榄烂滥",tou:"头投透偷",hui:"汇绘贿惠慧讳诲晦秽灰挥恢辉徽回茴蛔悔毁",han:"汉旱捍悍焊撼翰憾汗含寒函涵韩喊罕酣憨",tao:"讨逃桃陶萄淘套涛掏滔",xue:"穴学雪靴薛",xie:"写协胁斜携鞋谐泻卸屑械谢懈蟹歇楔蝎","ning,zhu":"宁",rang:"让壤攘嚷瓤",xun:"训讯迅汛驯逊殉旬寻巡询循勋熏",min:"民敏皿闽悯",ni:"尼你拟泥逆昵匿腻",liao:"辽疗僚聊寥嘹缭料镣撩燎瞭",nu:"奴努怒","zhao,shao":"召",bian:"边编鞭蝙变遍辨辩辫贬匾","kang,gang":"扛",xing:"刑形型邢兴杏幸性姓星腥猩醒",kao:"考烤拷靠铐",tuo:"托拖脱妥椭驼驮鸵唾",lao:"老劳牢捞涝酪唠",kuo:"扩阔廓","di,de":"地的底",sao:"扫嫂搔骚臊",chang:"场肠尝常偿昌猖畅唱倡敞",mang:"芒忙盲茫莽",xiu:"朽秀袖绣锈嗅修羞","pu,po,piao":"朴",guo:"过果裹国锅郭",chen:"臣尘辰沉陈晨忱衬趁",zai:"再在灾栽载宰",yan:"厌艳宴验雁焰砚唁谚堰延严言岩炎沿盐颜阎蜒檐研烟淹掩眼演衍燕奄",kua:"夸垮跨胯",jiang:"匠酱江姜僵缰讲奖桨蒋将浆",duo:"夺踱朵躲多哆惰舵跺垛",lie:"列劣烈猎裂咧","xie,ya,ye,yu,xu":"邪","jia,ga,xia":"夹",cheng:"成呈诚承城程惩橙秤撑逞",mai:"迈麦卖买",ci:"此次赐词辞慈磁祠瓷雌刺",zhen:"贞针侦珍真斟榛阵振震镇诊枕疹",jian:"尖奸歼坚肩艰兼煎件建荐贱剑健舰践鉴键箭涧间监拣茧俭捡检减剪简柬碱渐溅",guang:"光逛",dang:"当挡荡档党裆",zao:"早枣澡蚤藻皂灶造燥躁噪遭糟凿","xia,he":"吓",chong:"虫崇冲充宠",tuan:"团",tong:"同统桶筒捅桐铜童彤瞳通痛","qi,kai":"岂",ze:"则责",sui:"岁碎穗祟遂隧虽随髓",rou:"肉柔揉蹂","zhu,shu":"朱",nian:"年念蔫撵碾",diu:"丢",she:"舌设社舍涉赦奢赊","chuan,zhuan":"传",pang:"乓胖庞螃","xiu,xu":"休","jia,jie":"价家","fen,bin":"份","yang,ang":"仰","xie,xue":"血","si,shi":"似",hou:"后厚候吼喉猴侯",zhou:"舟州周洲宙昼皱骤咒肘帚轴","hang,xing":"行","hui,kuai":"会",sha:"杀纱杉砂沙煞傻啥霎","he,ge":"合",zhao:"兆赵照罩找沼招昭",chuang:"创闯床疮窗",za:"杂砸",ming:"名明鸣铭螟命",se:"色涩瑟",zhuang:"壮状撞庄装妆桩",qing:"庆青轻倾清蜻氢卿顷请情晴擎",liu:"刘留流榴琉硫瘤柳溜馏","qi,ji,zi,zhai":"齐",chan:"产铲阐馋缠蝉搀","yang,xiang":"羊",deng:"灯登蹬等凳邓瞪",mi:"米迷谜靡眯密蜜觅弥咪",guan:"关官棺观冠贯惯灌罐馆管",jue:"决绝掘诀爵倔","tang,shang":"汤",zhai:"宅债寨窄摘斋",an:"安氨庵鞍岸按案暗俺",jun:"军均君钧俊峻骏竣菌","xu,hu":"许",lun:"论轮仑伦沦抡",nong:"农浓脓","na,nei":"那","sun,xun":"孙","xi,hu":"戏","ta,jie":"她","hong,gong":"红","xian,qian":"纤","yue,yao":"约钥","nong,long":"弄",tun:"吞臀","huai,pei,pi":"坏",rao:"扰饶绕",che:"扯彻撤澈",zou:"走奏揍",chao:"抄钞超吵炒潮巢","zhe,she":"折","qiang,cheng":"抢",zhua:"抓",pao:"抛泡袍咆跑",kang:"抗炕康糠慷",keng:"坑","ke,qiao":"壳",kuai:"块快筷",que:"却确鹊缺瘸",qin:"芹琴禽勤秦擒侵钦寝",lu:"芦炉卢庐颅陆录鹿路赂虏鲁卤",su:"苏诉肃素速塑粟溯俗酥",du:"杜渡妒镀肚独牍堵赌睹督",geng:"更耕羹埂耿梗",liang:"两良梁粮粱亮谅辆晾凉量","huan,hai":"还","fou,pi":"否",lai:"来莱赖癞",lian:"连怜帘莲联廉镰练炼恋链脸敛","xian,xuan":"县","zhu,chu":"助",kuang:"旷况矿框眶狂筐",zu:"足族阻组祖诅租",dun:"吨蹲墩盾顿钝盹",kun:"困昆坤捆",nan:"男","yuan,yun":"员",chui:"吹炊垂锤捶",bie:"别憋鳖瘪",gao:"告高糕羔篙搞稿镐膏",wo:"我沃卧握窝蜗",luan:"乱卵峦",mei:"每美妹昧媚眉梅煤霉玫枚媒楣","ti,ben":"体","bo,bai,ba":"伯",di:"低堤滴抵帝递第蒂缔敌笛涤嘀嫡","fo,fu,bi,bo":"佛",lin:"邻林临琳磷鳞淋吝赁躏凛檩","gui,jun,qiu":"龟",mian:"免勉娩冕缅面眠绵棉","jiao,jue":"角嚼",tiao:"条挑笤",ying:"迎盈营蝇赢荧莹萤应英樱鹰莺婴缨鹦映硬影颖","xi,ji":"系",ku:"库裤酷苦枯哭窟",leng:"冷楞","zhe,zhei":"这",xu:"序叙绪续絮蓄旭恤酗婿须虚需徐",pan:"判盼叛畔盘攀潘","di,ti,tui":"弟",can:"灿残蚕惭惨餐","mei,mo":"没","shen,chen":"沈",huai:"怀槐徊淮",song:"宋送诵颂讼松耸",hong:"宏虹洪鸿轰烘哄",qiong:"穷琼","niao,sui":"尿",ceng:"层蹭","wei,yi":"尾",gai:"改该溉概丐钙","a,e":"阿",miao:"妙庙苗描瞄秒渺藐",yao:"妖腰邀夭吆药耀要咬舀窑谣摇遥肴姚","jin,jing":"劲",chun:"纯唇醇春椿蠢",na:"纳钠捺拿",bo:"驳脖博搏膊舶渤拨波玻菠播跛簸",zong:"纵宗棕踪总",lv:"驴律虑滤氯旅屡吕侣铝缕履",biao:"表标彪膘","mo,ma":"抹摩",guai:"拐乖怪",pai:"拍派湃排牌徘",zhe:"者哲辙浙蔗遮","chai,ca":"拆",la:"垃拉啦喇蜡辣","ban,pan":"拌",po:"坡泼颇破魄婆","ze,zhai":"择","qi,ji":"其奇期","ruo,re":"若","ping,peng":"苹","zhi,qi":"枝","gui,ju":"柜",qiang:"枪腔墙呛",sang:"丧桑嗓",ou:"欧殴鸥偶藕呕","zhuan,zhuai":"转",ruan:"软",ken:"肯垦恳啃","xie,suo":"些",ang:"昂肮","ni,ne":"呢",tie:"帖贴铁",luo:"罗萝锣箩骡螺逻骆洛啰裸","he,huo,hu":"和","ce,ze,zhai":"侧",pei:"佩配沛陪培赔胚","po,pai":"迫",pa:"爬怕帕趴",suo:"所索锁琐唆梭嗦",pin:"贫拼品聘",peng:"朋棚蓬膨硼鹏澎篷捧碰砰烹",hun:"昏婚荤浑魂混","jing,cheng":"净",nao:"闹挠恼脑",zha:"闸铡眨炸渣榨乍诈",juan:"卷捐鹃倦绢眷","quan,xuan":"券","dan,shan,chan":"单","qian,jian":"浅","xie,yi":"泄",lei:"泪类垒蕾儡累雷擂","bo,po":"泊","ze,shi":"泽",lang:"郎狼廊琅榔浪朗","xiang,yang":"详","li,dai":"隶",shua:"刷耍",meng:"孟梦萌盟檬朦猛锰蒙","jiang,xiang":"降","can,shen,cen,san":"参",bang:"帮邦梆绑膀棒傍谤榜","du,dai":"毒","kua,ku":"挎",shuan:"拴栓涮","kuo,gua":"括","shi,she":"拾",mou:"某谋",nuo:"挪诺懦糯","xiang,hang":"巷",cao:"草槽曹操糙",huang:"荒慌皇黄煌凰惶蝗蟥晃谎恍幌",rong:"荣绒容熔融茸蓉溶榕冗","nan,na":"南","cha,zha":"查","bai,bo":"柏","qi,qie":"砌","sheng,xing":"省","xiao,xue":"削","mao,mo":"冒","si,sai":"思","yan,ye":"咽","zan,za":"咱",ha:"哈","na,nei,ne":"哪","ke,hai":"咳",zen:"怎",xuan:"选癣宣轩喧悬玄漩旋炫","zhong,chong":"种重","bian,pian":"便扁",lia:"俩",duan:"段断缎锻短端",cu:"促醋簇粗",shun:"顺瞬吮","xin,shen":"信","zhui,dui":"追",hen:"很狠恨痕",pen:"盆喷","shi,si,yi":"食","mai,mo":"脉",ai:"哀哎埃挨唉爱碍艾隘矮蔼癌","du,duo":"度","qin,qing":"亲","cha,chai,ci":"差","pao,bao":"炮刨",ti:"剃惕替屉涕梯踢剔题蹄啼","sa,xi":"洒",zhuo:"浊啄灼茁卓酌捉桌拙","xi,xian":"洗",qia:"洽恰掐",ran:"染然燃",heng:"恒衡横哼","jue,jiao":"觉",ao:"袄傲澳懊熬","shuo,shui,yue":"说",tui:"退蜕推腿颓",hai:"孩海害亥骇","mu,lao":"姥","gei,ji":"给","luo,lao":"络","mai,man":"埋",nie:"捏聂镊孽","du,dou":"都读",sun:"损笋",re:"热惹","mo,mu":"莫模","e,wu":"恶","xiao,jiao":"校","he,hu":"核",gen:"根跟",chai:"柴豺",shai:"晒筛",en:"恩",a:"啊","ba,pi":"罢",zei:"贼",zuan:"钻","qian,yan":"铅",te:"特","cheng,sheng":"乘","mi,bi":"秘泌","cheng,chen":"称","tang,chang":"倘淌","chou,xiu":"臭","she,ye,yi":"射",hang:"航杭",weng:"翁嗡瓮",die:"爹跌叠蝶谍碟",cui:"脆翠悴粹催摧崔",zang:"脏葬赃",e:"饿扼遏愕噩鳄鹅额讹俄","shuai,cui":"衰",zhun:"准谆",teng:"疼腾誊藤",tang:"唐堂塘膛糖棠搪烫趟躺",pou:"剖","xu,chu":"畜","pang,bang":"旁",run:"润闰","yong,chong":"涌",kuan:"宽款",bin:"宾滨彬缤濒鬓","bei,pi":"被","tiao,diao,zhou":"调","bao,bo":"剥薄",ruo:"弱",niang:"娘酿","neng,nai":"能","nan,nuo":"难",lve:"掠略","zhu,zhuo,zhe":"著","le,lei":"勒","shao,sao":"梢","fu,pi":"副",piao:"票漂飘瓢","sheng,cheng":"盛","que,qiao":"雀","chi,shi":"匙","she,yi":"蛇","zhan,chan":"崭","quan,juan":"圈",nin:"您","de,dei":"得",cou:"凑","zhuo,zhao,zhe":"着","shuai,lv":"率","gai,ge,he":"盖","qu,ju":"渠","su,xiu":"宿","dan,tan":"弹","jing,geng":"颈","lv,lu":"绿","qu,cu":"趋趣","ti,di":"提","jie,qi":"揭",sou:"搜艘嗽",lou:"搂楼娄漏陋篓","zhao,chao":"朝","la,luo,lao":"落",sen:"森","gun,hun":"棍","zhi,shi":"殖","sha,xia":"厦",zan:"暂赞",zui:"最罪醉嘴","jing,ying":"景","he,ye":"喝",hei:"黑",rui:"锐瑞蕊","bao,bu,pu":"堡","ao,yu":"奥","fan,pan":"番","la,xi":"腊",man:"蛮馒满漫慢曼幔",zun:"尊遵","gang,jiang":"港","zeng,ceng":"曾","yu,tou":"愉",cuan:"窜篡",qun:"裙群","qiang,jiang":"强","zhou,yu":"粥","she,nie":"摄","tian,zhen":"填",suan:"蒜算酸","lu,liu":"碌",nuan:"暖","tiao,tao":"跳","e,yi":"蛾",cuo:"错挫措锉搓","jie,xie":"解","shu,shuo":"数",gun:"滚","sai,se":"塞","bi,pi":"辟",pie:"撇","chang,shang":"裳","yi,ni":"疑",sai:"赛腮",nen:"嫩","suo,su":"缩",sa:"撒飒萨",zeng:"增憎赠","man,men":"瞒","bao,pu":"暴",de:"德",ning:"凝狞柠拧泞","jiao,zhuo":"缴",ca:"擦","cang,zang":"藏","fan,po":"繁","bi,bei":"臂",beng:"蹦泵崩绷","chan,zhan":"颤","jiang,qiang":"疆","lou,lu":"露",nang:"囊","hang,ben":"夯","ao,wa":"凹","feng,ping":"冯","xu,yu":"吁","lei,le":"肋","jie,gai":"芥","zhi,zi":"吱","na,ne":"呐","dun,tun":"囤","hang,keng":"吭","dian,tian":"佃","si,ci":"伺","dian,tian,sheng":"甸","dui,rui,yue":"兑",zhui:"坠缀赘锥","tuo,ta,zhi":"拓","fu,bi":"拂","ao,niu":"拗","ke,he":"苛","he,a,ke":"呵","ka,ga":"咖","jiao,yao":"侥","cha,sha":"刹","nve,yao":"疟","meng,mang":"氓","ge,yi":"疙","zu,cu":"卒","wan,yuan":"宛","qi,qie,xie":"契","xie,jia":"挟","zha,shan,shi,ce":"栅","bo,bei":"勃",nve:"虐",yo:"哟","qiao,xiao":"俏",shuo:"烁","ping,bing":"屏","na,nuo":"娜","qi,xi":"栖","gu,jia":"贾","bang,beng":"蚌","gong,zhong":"蚣","yin,yan":"殷",nei:"馁","wo,guo":"涡","lao,luo":"烙","nian,nie":"捻","chan,xian,can,shan":"掺","dan,shan":"掸","qian,gan":"乾","shuo,shi":"硕","hu,xia":"唬","dang,cheng":"铛","xian,xi":"铣","kui,gui":"傀","ji,zhai":"祭","chun,zhun":"淳","wei,yu":"尉","duo,hui":"堕","chuo,chao":"绰","zong,zeng":"综","zhuo,zuo":"琢","chuai,tuan,zhui":"揣","peng,bang":"彭","zhui,chui":"椎","leng,ling":"棱","zha,cha":"喳","ge,ha":"蛤","qian,kan":"嵌","a,yan":"腌","dun,dui":"敦","kui,hui":"溃",jiong:"窘","kai,jie":"楷","pin,bin":"频","ni,niao":"溺",miu:"谬","jiao,chao":"剿","man,wan":"蔓",seng:"僧","tui,tun":"褪","cuo,zuo":"撮","bang,pang":"磅","chao,zhao":"嘲","hei,mo":"嘿","chuang,zhuang":"幢","ji,qi":"稽","lao,liao":"潦","cheng,deng":"澄","ma,mo":"蟆","mi,mei":"糜","huo,hua":"豁","pu,bao":"瀑",chuo:"戳","zan,cuan":"攒"},n.relookup=function(){for(var a in n.dict)for(var i=n.dict[a],u=0,h=i.length;h>u;u++)n.dict[i.charAt(u)]=a;n.is_relookup=!0},n.getFullChars=function(i,u){var h,e,o,g=[],s=[];if(!i)return"";for(e=0,o=i.length;o>e;e++)g.push(n.getSingleChars(i.charAt(e),u));for(e=0,o=g.length;o>e;e++){var c=g[e];if(0===e)for(;c.length;)s.push([c.shift()]);else if(1===c.length)for(h=s.length;h;)--h,s[h].push(c[0]);else{var z=[];for(h=s.length;c.length&&a>h;){var t=c.shift();for(h=s.length;h;){--h;var l=s[h].concat();l.push(t),z.push(l)}}s=z.reverse()}}var r=[];for(e=0,o=s.length;o>e;e++)r.push(s[e].join(""));return r.join(" ")},n.getSingleChars=function(a,i){!n.is_relookup&&n.relookup();var u=a.charCodeAt(0),h=u>40869||19968>u?[a]:(n.dict[a]||"").split(",");if(i)for(var e=0,o=h.length;o>e;e++)h[e]=h[e].replace(/^[a-z]/,function(n){return n.toUpperCase()});return h},n});
/*!js/mod.buildData4Picker*/
;define("js/mod.buildData4Picker",function(e){var s=e("jquery"),a=e("edu_modules/edu-db/edu-db"),t=e("@tencent/im-pinyin/pinyin"),i=e("edu_modules/edu-agency/index"),r=100,u={},n={},c=0,o=(parseInt(+new Date/1e3,10),function(e,s){return[e,t.getFullChars(e),s].join(" ").toLowerCase()}),l=function(e,s,a){e=strEllipsis.substring(e,46,1);var t="group"===a?"//p.qlogo.cn/gh/{{key}}/{{key}}/40":"//q.qlogo.cn/g?b=qq&nk={{key}}&s=40";return'<img src="{{icon}}" width="20" height="20" /><span class="name">{{value}}({{key}})</span>'.replace(/{{icon}}/g,t).replace(/{{value}}/g,e).replace(/{{key}}/g,s)},p=function(e,s){var a="";switch(s){case 2:a='<i class="icon-folder"></i>',e=strEllipsis.substring(e,114,1);break;case 3:a='<i class="icon-sub-sep"></i>',e=strEllipsis.substring(e,144,1);break;default:a="",e=strEllipsis.substring(e,144,1)}return'<span class="name">{{icon}}<span>{{value}}</span></span>'.replace(/{{icon}}/g,a).replace(/{{value}}/g,e)},_=function(e){if(n.groups&&n.groups_end)return e&&e();if(n.groups_begin)return n.groups_cb.push(e);n.groups_begin=!0,n.groups_cb=[e];var t=function(e){a.get_qqgroup_list({param:{aid:c,page:e,type:1,count:r},succ:function(s){s=s||{},s.result=s.result||{};for(var a=s.result.items||[],i=0,r=a.length;r>i;i++)if(1==a[i].state){var u=a[i].gcode;if(n.groups_map[u])continue;var c=a[i].name||u,p={_:a[i],key:u,value:c||u,search:o(c,u),view:l(c,u,"group")};n.groups.push(p),n.groups_map[p.key]=p}if(s.result.total_page<=e)for(n.groups_end=!0;n.groups_cb.length>0;){var _=n.groups_cb.shift();"function"==typeof _&&_()}else t(1+e)},err:function(e){return e=e||{},12404===e.retcode?(s.Dialog.alert("你绑定的群被解散了"),!0):void 0}})};t(1)},g=function(e){if(n.teachers&&n.teachers_end)return e&&e();if(n.teachers_begin)return n.teachers_cb.push(e);n.teachers_begin=!0,n.teachers_cb=[e];var s=function(e){a.get_teacher_list({param:{aid:c,page:e,type:1,count:r},succ:function(a){a=a||{},a.result=a.result||{};for(var t=a.result.tlist||[],i=0,r=t.length;r>i;i++)if(1==t[i].status){var u=t[i].uin;if(n.teachers_map[u])continue;var c=t[i].name||u,p={_:t[i],key:u,value:c||u,search:o(c,u),view:l(c,u)};n.teachers.push(p),n.teachers_map[p.key]=p}if(a.result.total_page<=e)for(n.teachers_end=!0;n.teachers_cb.length>0;){var _=n.teachers_cb.shift();"function"==typeof _&&_()}else s(1+e)},err:function(){}})};s(1)},d=function(e){if(n.videos&&n.videos_end)return e&&e();if(n.videos_begin)return n.videos_cb.push(e);n.videos_begin=!0,n.videos_cb=[e];var s=1,t=1,i=function(e){a.get_video_info({param:{aid:c,page:e,type:1,count:r/5,category:1},succ:function(a){a=a||{},a.result=a.result||{};for(var r=a.result.vlist||[],u=null,c=[],l="",_=0,g=r.length;g>_;_++)if(2==r[_].type){if(r[_].name=r[_].name||"未命名合集"+s++,r[_].sub_video&&r[_].sub_video.length>0){for(var d=[],m=0,f=r[_].sub_video.length;f>m;m++)c=r[_].sub_video[m],l=c.vid,n.video_map[l]||/[a-z\d]{10,}/i.test(l)&&(c.name=c.name||"未命名视频"+t++,u={_:c,key:l,value:c.name,search:o(c.name,""),view:p(c.name,3)},d.push(u),n.video.push(u),n.video_map[u.key]=u);if(n.videos_map[r[_].setid])continue;u={_:r[_],key:r[_].setid,value:r[_].name,search:o(r[_].name,r[_].setid),view:p(r[_].name,2),child:d},n.videos.push(u),n.videos_map[u.key]=u}}else if(r[_].sub_video&&r[_].sub_video.length>0){if(c=r[_].sub_video[0],l=c.vid,n.video_map[l])continue;if(!/[a-z\d]{10,}/i.test(l))continue;c.name=c.name||"未命名视频"+t++;var v={_:c,key:l,value:c.name,search:o(c.name,""),view:p(c.name,1)};if(n.video.push(v),n.video_map[v.key]=v,n.videos_map[r[_].setid])continue;n.videos.push(v);var h={_:r[_],key:r[_].setid,value:r[_].name,search:o(r[_].name,r[_].setid),view:p(r[_].name,4),child:[v]};n.videos_map[h.key]=h}if(a.result.total_page<=e)for(n.videos_end=!0;n.videos_cb.length>0;){var y=n.videos_cb.shift();"function"==typeof y&&y()}else i(1+e)},err:function(){}})};i(1)},m=function(e,s,a){if(!n.teachers_map[e]){var t={_:a,key:e,value:s||e,search:o(s,e),view:l(s,e)};n.teachers.push(t),n.teachers_map[e]=t}},f=function(e,s,a){if(!n.groups_map[e]){var t={_:a,key:e,value:s||e,search:o(s,e),view:l(s,e,"group")};n.groups.push(t),n.groups_map[e]=t}},v=function(e,s,a){if(!n.courses_map[e]||!n.courses_map[e]._){var t={_:a,key:e,value:s||e,search:o(s,e),view:strEllipsis.substring(s,140,1)};if(n.courses_map[e]&&!n.courses_map[e]._)return void(n.courses_map[e]=t);n.courses.push(t),n.courses_map[e]=t}},h=function(e){if(n.courses&&n.courses_end)return e&&e();if(n.courses_begin)return n.courses_cb.push(e);n.courses_begin=!0,n.courses_cb=[e],n.course_pages=0,n.course_total_page=0;var t=function(e,s){if(1===e){n.course_total_page=s;for(var a=2;s>=a;a++)o(a)}if(n.course_pages>=n.course_total_page)for(n.courses_end=!0;n.courses_cb.length>0;){var t=n.courses_cb.shift();"function"==typeof t&&t()}},i={aid:c,count:r},u=s.trim(s.bom.query("cid"));/^\d+$/.test(u)&&(i.cid=u);var o=function(e){i.page=e,a.get_course_list_simple({param:i,succ:function(s){n.course_pages++,s=s||{},s.result=s.result||{};for(var a=s.result.clist||[],i=0,r=a.length;r>i;i++)v(a[i].cid,a[i].cname,a[i]);t(e,s.result.page_num)},err:function(){n.course_pages++,t(e,e)}})};o(1)},y=function(e,s,a){if(!n.coursesDetails_map[e]){var t={_:a,key:e,value:s||e,search:o(s,e),view:strEllipsis.substring(s,140,1)};n.coursesDetails.push(t),n.coursesDetails_map[e]=t}},b=function(e){if(n.coursesDetails&&n.coursesDetails_end)return e&&e();if(n.coursesDetails_begin)return n.coursesDetails_cb.push(e);n.coursesDetails_begin=!0,n.coursesDetails_cb=[e],n.courseDetails_pages=0,n.courseDetails_total_page=0;var t=function(){var e=n.coursesDetails_cb.shift();"function"==typeof e&&e()},i={aid:c,count:r},u=s.trim(s.bom.query("cid"));/^\d+$/.test(u)&&(i.cid=u);var o=function(e){i.page=e,a.get_course_list({param:i,succ:function(s){n.courseDetails_pages++,s=s||{},s.result=s.result||{};for(var a=s.result.items||[],i=0,r=a.length;r>i;i++)a[i].terms&&a[i].price>0&&y(a[i].cid,a[i].name,a[i]);t(e,s.result.total)},err:function(){n.courseDetails_pages++,t(e,e)}})};o(1)},k=function(e,s){a.get_course_list({param:{aid:i.getInfoSync().aid,end_flag:1,page:e.page,pay_flag:0,live_flag:0,ios_flag:0,count:e.pageNum||20,state_flag:1,cname_key:e.keyword||"",bindFiles_flag:1},succ:function(e){e=e||{},e.result=e.result||{};for(var a=e.result.items||[],t=[],i=0,r=a.length;r>i;i++)a[i].terms&&a[i].price>0&&(t.push(a[i]),y(a[i].cid,a[i].name,a[i]));s(null,t,e.result.total)}})},D=function(e){var a=n.coursePackages_term_map,t={},i=0,r=0,u="";e=e||{},s.isArray(e.terms)&&(r=e.ios_price||0,u=e.name,s.each(e.terms,function(e,s){var t=s.term_id||s.tid,u=r||s.ios_price||0;t?(s.tid=t,s.term_id=t,s.ios_price=u,s.sign_endtime>i&&(i=s.sign_endtime),a[t]=s):s.passcard&&s.cid&&(s.tid=s.cid+"_card",s.term_id=s.cid+"_card",a[s.term_id]=s)}),parseInt(e.passcard)&&(t={begintime:e.begintime||0,endtime:e.endtime,sign_endtime:i,tid:e.cid+"_card",term_id:e.cid+"_card",desc:"可以任意班级上课",name:"任意学",cname:u,price:e.passcard_price||0,is_passcard:1,ios_price:r},e.terms.push(t),a[e.cid+"_card"]=t))},w=function(e){e=e||{};var s=e.id||0,a=e.name||"";if(!n.coursePackages_map[s]){var t={_:e,key:s,value:a||s,search:o(a,s),view:strEllipsis.substring(a,140,1)};D(e),n.coursePackages.push(t),n.coursePackages_map[s]=t}},P=function(e,s){e=e||{};var a,t=e.id||0,i=e.name||"";if(a=s&&s.type?s.type:"elementListMap",n[a]=n[a]||{},!n[a][t]){var r={_:e,key:t,value:i||t,search:o(i,t),view:strEllipsis.substring(i,140,1)};n[a][t]=r}},C=function(e,s){a.get_course_list_cpkg({param:{aid:i.getInfoSync().aid,end_flag:1,page:e.page,pay_type:void 0===e.pay_type?2:e.pay_type,pay_flag:0,live_flag:0,ios_flag:0,count:e.pageNum||20,state_flag:1,cname_key:e.keyword||"",bindFiles_flag:1},succ:function(a){a=a||{},a.result=a.result||{};for(var t=a.result.items||[],i=void 0===e.pay_type||2===e.pay_type?!1:!0,r=[],u=0,n=t.length;n>u;u++)t[u].terms&&(i||t[u].price>0)&&(r.push(t[u]),w(t[u]));s(null,r,a.result.total)}})},E=function(e,s){a.get_course_list_cpkg({param:{aid:i.getInfoSync().aid,end_flag:1,page:e.page,pay_flag:0,live_flag:0,ios_flag:0,count:e.pageNum||20,state_flag:1,cname_key:e.keyword||"",bindFiles_flag:1,filter_company_course:1,need_small_term:e.need_small_term||0},succ:function(e){e=e||{},e.result=e.result||{};for(var a=e.result.items||[],t=[],i=0,r=a.length;r>i;i++)a[i].terms&&a[i].price>0&&(t.push(a[i]),w(a[i]));s(null,t,e.result.total)}})},q=function(e,s,t){var r,u=+e.pageNum||20;r=s&&s.elementType?s.elementType:"[0,1]",a.getElementList({param:{aid:i.getInfoSync().aid,page:e.page-1,count:u,cname_key:e.keyword||"",element_type:r,pay_type:0},succ:function(e){var a=e.result||{};if(a&&a.data){e=a.data;for(var i=e.resources||[],r=+e.count||1,n=[],c=0,o=i.length;o>c;c++)i[c].cid=i[c].cid||i[c].id,i[c].custom=i[c].type?'<span class="select-li-label">系列课</span>'+i[c].name:i[c].name,n.push(i[c]),P(i[c],s);t(null,n,Math.ceil(r/u))}}})},L=function(e){u=e,n=u.get("_PD")||{},u.set("_PD",n),c=i.getInfoSync().aid,n.video=n.video||[],n.video_map=n.video_map||{},n.videos=n.videos||[],n.videos_map=n.videos_map||{},n.initVideos=d,n.teachers=n.teachers||[],n.teachers_map=n.teachers_map||{},n.saveTeacher=m,n.initTeachers=g,n.groups=n.groups||[],n.groups_map=n.groups_map||{},n.saveGroup=f,n.initGroups=_,n.courses=n.courses||[],n.courses_map=n.courses_map||{},n.saveCourse=v,n.initCourses=h,n.coursesDetails=n.courseDetails||[],n.coursesDetails_map=n.coursesDetails_map||[],n.saveCoursesDetails=y,n.initCoursesDetails=b,n.getCourseList=k,n.coursePackages=n.coursePackages||[],n.coursePackages_map=n.coursePackages_map||{},n.coursePackages_term_map=n.coursePackages_term_map||{},n.get_course_list_cpkg=C,n.get_course_list_instal=E,n.saveCoursePackage=w,n.elementList=n.elementList||[],n.elementListMap=n.elementListMap||{},n.getElementList=q,n.saveElementList=P};return{init:L,initGroups:_,initTeachers:g,initVideos:d,initCourses:h,initCoursesDetails:b,saveTeacher:m,saveGroup:f,saveCourse:v,saveCoursesDetails:y,get_course_list_cpkg:C,get_course_list_instal:E,saveCoursePackage:w}});
/*!agency/index/installment/publish/index*/
;define("agency/index/installment/publish/index",function(e,t,n){function a(e,t){var n=(e||"").split("-"),a=new Date;return a.setFullYear(+n[0],n[1]-1,+n[2]),t?a.setHours(0,0,0):a.setHours(23,59,59),isNaN(a)?"":Math.floor(+a/1e3)}function i(e){return e}function l(){var e=_(".js-installment-main [data-pattern]"),t=g.all(e);return t?!0:(_("html,body").animate({scrollTop:_(".js-installment-main .g-err").eq(0).offset().top-56},1e3),!1)}function s(){location.href="/agency/index/index.html#tab=showInstallment"}function r(){j.tdw({action:"click",module:"release"});var e,t,n=parseFloat(C.val()),l=parseFloat(q.val()),r=_(".diy-select-chapter-item"),d=_(".diy-select-chapter-item-end"),m={agency_id:D.aid,course_id:N.cid,term_id:N.term_id,installment_type:N.installment_style,uin:_.trim(I.val()),phone:P.val(),is_create:N.is_create};1==F&&(x.tdw({module:"course_installment",action:"click",obj1:"edit"}),m.installment_id=N.installment_id);var c=[{installment_seq:0,installment_begin:0,installment_end:0,pay_begin_time:0,pay_expire_time:0,price:100*n.toFixed(2)}],o=Y.length,u=100*((l-n)/o).toFixed(2);if(1===N.installment_style)for(var p=0;o>p;p++){var f=p==o-1?N.courseEndTime:a(T.eq(p).val());c.push({installment_seq:p+1,installment_begin:a(Y.eq(p).val(),!0),installment_end:f,pay_begin_time:0,pay_expire_time:f,price:u}),0===p&&(c[0].pay_expire_time=f)}else for(var p=0;o>p;p++)e=r.eq(p).data("value"),t=d.eq(p).data("value"),c.push({installment_seq:p+1,installment_begin:i(e),installment_end:p===o-1?1e4:i(t),pay_begin_time:0,pay_expire_time:0,price:u});m.installment_plan=JSON.stringify(c),y.create_installment_order({param:m,succ:function(e){var t=e.result,n="已为学员"+t.nick_name+"("+t.uin+')创建课程<a href="/course/'+t.course_id+'" target="_blank">《'+t.course_name+"》</a>"+t.term_name+"的分期计划，请联系学员通过电脑进入课程详情页进行确认并支付分期，移动端支持观看课程，不支持支付分期。</b>";x.tdw({module:"course_installment",action:"click",obj1:1===N.installment_style?"add_time":"add_chapter",ver3:o}),_.modal.success(n).yes(function(){s()})},err:function(e){switch(e.retcode){case 100001:_.modal.alert("参数错误，请检查用户QQ等参数是否正确");break;case 173:_.modal.alert("用户存在普通待付款订单，请先联系用户在【个人中心】-【课程管理】中删除该课程的普通待支付订单后，再创建分期订单");break;case 174:_.modal.alert("该班级已赠送给用户，无法继续分期");break;case 175:case 800095:_.modal.alert("该号码已存在该班级的分期订单");break;case 800096:_.modal.alert("该号码已存在该班级的普通未支付订单，若要为其创建分期订单，请先联系其删除普通订单");break;case 800097:_.modal.alert("该号码已存在该班级的普通已支付订单");break;case 176:_.modal.alert("请尝试使用其他QQ号码");break;default:_.modal.alert("服务器繁忙，请稍后再试")}return!0}})}function d(){H.find(".js-installment-begin").datepicker({_click:function(e,t){_(".datepicker").hide();var n=_(t).closest(".installment-date-wrap").siblings(".installment-date-wrap").find(".js-installment-end");if(n&&0!==n.length){var a=n.data("datepicker");a.options._begin=e,a.update()}},_begin:+new Date}),H.find(".js-installment-end").datepicker({_click:function(e,t){var n=864e5,i=_.render.time.formatDate("YYYY-M-D",e),l=1e3*a(i,!0),s=l-n,r=l+n,d=_.render.time.formatDate("YYYY-M-D",r),m=_(t).closest(".installment-detail"),c=m.prev(".installment-detail"),o=m.next(".installment-detail");m.find(".installment-deadline").removeClass("hiden"),m.find(".installment-deadline .date").text(i),o.find(".js-installment-begin").val(d);var u=m.find(".js-installment-begin"),p=c.find(".js-installment-end"),f=o.find(".js-installment-end");if(u&&0!==u.length){var h=u.data("datepicker");h.options._end=e,h.update()}if(p&&0!==p.length){var v=p.data("datepicker");v.options._end=new Date(s),v.update()}if(f&&0!==f.length){var g=f.data("datepicker");g.options._begin=new Date(r),g.update()}_(".datepicker").hide()},_begin:+new Date}),Y=_(".js-installment-begin"),T=_(".js-installment-end")}function m(){H.on("click",".js-add-course, .js-add-course-item",function(){var e=$();_(".add-course-item-wrap").remove(),_(".js-add-course").show(),_(".js-select-terms-wrap").addClass("hide"),e.yes(function(e,t){t(),S(e),U(),N.installment_num=0,O(),J()})}),H.find(".js-select-terms").on("click",".radio",function(){_(this).addClass("radio-check").siblings().removeClass("radio-check"),N.term_id=_(this).find("a").data("termid"),N.term_price=(_(this).find("a").data("price")/100).toFixed(2),_(".add-course-price .money").text("￥"+N.term_price),N.installment_num=0,O(),J()}),H.on("click",".js-select-installstyle .radio",function(){_(this).addClass("radio-check").siblings().removeClass("radio-check");var e=_(this).data("value");"time"===e?N.installment_style=1:"chapter"===e&&(N.installment_style=2),N.installment_num=0,J(),_(".installment-example-"+e).removeClass("hide").siblings().addClass("hide"),_(".installment-detail-"+e).removeClass("hide").siblings().addClass("hide")}),H.on("change:installmentTag",function(e,t,n){g.validate(_(".js-select-installment")),N.installment_num=n,g.validate(_("#in_course_earnest")),J(),d()}),H.on("change:chapterTagItem",function(e,t,n){var a=_(e.target);if(a.data("value",n),a.hasClass("diy-select-chapter-item-end")){var i=a.filter(".diy-select-chapter-item-end").data("index"),l=_(".diy-select-chapter-item-end").eq(i).data("value");_(".diy-select-chapter-item").eq(i+1).data("value",l+1).find("i").text("第"+Math.min(l+1,N.itemCount)+"节")}}),H.on("click",".js-installment-submit",function(e){l()?r():e.preventDefault()}),w.on("click",".js-go-back",function(){s()});var e=_(".stain-tips");_("#in_student_qq").blur(function(){var t=_.trim(I.val());/^[1-9](\d{4,10}|\d{17})$/.test(t)&&y.get_usr_installment_default({param:{uin:t,agency_id:D.aid},succ:function(t){1==t.result.status?e.show():e.hide()}})}).focus(function(){e.hide()}),_(".input-course-price").blur(function(){var e=parseFloat(q.val()||0),t=parseFloat(C.val()||0);_(".installment-detail-total-input").val(((e-t)/N.installment_num).toFixed(2)),_(".installment-total-price").text("￥"+e)})}function c(){y.getUsrInstallmentOrder({param:{agency_id:D.aid,course_id:N.cid,uin:N.uin,installment_id:N.installment_id,term_id:N.term_id},succ:function(e){var t=e.result;t.phone=N.phone,t.courseDeleted="undefined"==typeof t.course_price,w.html(p(t)),N.term_price=t.course_price/100,N.installment_style=t.installment_type,N.installment_num=t.installments.length-1,o();for(var n=[],a=1;a<t.installments.length;a++){var i=t.installments[a];n.push(1===t.installment_type?{begin:_.render.time.formatDate("YYYY-M-D",new Date(1e3*i.installment_begin)),end:_.render.time.formatDate("YYYY-M-D",new Date(1e3*i.installment_end))}:{begin:i.installment_begin,end:i.installment_end}),a===t.installments.length-1&&(N.courseEndTime=i.installment_end)}O(t.courseDeleted),J(n),d(),m(),z()}})}function o(){H=_(".js-installment-main"),I=_("#in_student_qq"),P=_("#in_student_phone"),q=_("#in_course_price"),C=_("#in_course_earnest")}function u(e){D=e,w=_("#showInstallment"),N.cid=_.bom.getHash("course_id"),N.installment_id=_.bom.getHash("installment_id"),N.term_id=_.bom.getHash("term_id"),N.uin=_.bom.getHash("uin"),N.phone=_.bom.getHash("phone"),F=_.bom.getHash("edit"),1==F?(N.is_create=1,c()):w.html(p({installment_type:1})),o(),setTimeout(function(){M.init&&M.init(b)},0),k=_.extend(k,{step:0,data:{}}),z(),m()}var _=e("jquery"),p=e("/agency/index/installment/publish/tpl/index.tpl_tpl"),f=e("/agency/index/installment/publish/tpl/addcourseItem.tpl_tpl"),h=e("/agency/index/installment/publish/tpl/selectTerms.tpl_tpl"),v=e("/agency/index/installment/publish/tpl/installmentDetail.tpl_tpl"),g=e("edu_modules/validator/validator"),b=e("@tencent/im-cache/cache");e("edu_modules/edu-picker/edu-picker"),e("edu_modules/modal/modal"),e("@tencent/im-jquery.dropdown/jquery.dropdown"),e("@tencent/im-edu-datepicker/edu-datepicker");var y=e("agency/index/installment/publish/db.installment"),x=e("edu_modules/edu-report/edu-report"),j=e("edu_modules/reportor/index"),k=window.p=b.get("_PD")||{};b.set("_PD",k);var w,D,q,C,F,Y,T,M=e("js/mod.buildData4Picker"),H=null,E=[],I=null,P=null,N={installment_style:1,aid:"",cid:"",term_id:"",uin:"",installment_id:"",term_price:0,is_create:0,installment_num:0,need_small_term:1,courseEndTime:0,phone:""},Q="",$=function(){var e=new _.picker({name:"课程",max:1,min:0,pageNum:10,keyField:"cid",titleField:"name"});return e.onPageChange(function(t,n){t.need_small_term=N.need_small_term,k.get_course_list_instal(t,function(t,a,i){e.setMaxPage(i),n(null,a?a:[])})}),e},O=function(e){_(".course-related").show(),e||y.get_plan_detail({param:{cid:N.cid,term_id:N.term_id},succ:function(e){var t=0,n=e.result.chapter_info;n.forEach(function(e){t+=e.sub_info.length}),N.itemCount=t,N.courseEndTime=e.result.endtime,Q="";for(var a=1;t>a;a++)Q+='<li class="diy-option" data-value="'+a+'"><a href="javascript:;">第'+a+"节</a></li>";_(".js-select-chapter-item").html(Q)}})},J=function(e){N.installment_num?(_(".js-installment-detail").html(v({value:N.installment_num,type:N.installment_style,installments:e,courseTotal:q.val(),courseFirst:C.val(),courseEndTime:N.courseEndTime,formatDate:_.render.time.formatDate})),2===N.installment_style&&_(".js-select-chapter-item").html(Q)):(g.validate(_("#in_course_price")),g.validate(_("#in_course_earnest")),_(".js-installment-detail").empty(),_(".js-select-installment").html('<i class="text text-tip">请选择分期数</i><span><b></b></span>'),g.validate(_(".js-select-installment")))},S=function(e){E=[],_.each(e||[],function(e,t){var n=k.coursePackages_map[t];n&&E.push(n._)})},U=function(){if(E[0]){var e=_(".add-course-main");H.find(".js-add-course").hide(),e.append(f({item:E[0]})),H.find(".js-select-terms").html(h({item:E[0]})),N.term_price=E[0].terms[0].price/100,_(".js-select-terms-wrap").removeClass("hide"),N.cid=E[0].cid,N.term_id=E[0].terms[0].term_id,g.validate(_(".js-add-course")),_(".course-related").show()}},z=function(){g.extend("dcourse",function(){return _(".add-course-item-wrap").length?!0:!1}),g.extend("phone",function(e){return/^1\d{10}$/.test(e)?!0:!1}),g.extend("selectInstallment",function(){var e=_(".js-select-installment .text").data("value");return e?N.itemCount?2===N.installment_style&&N.itemCount<e?(g.msg="当前班级只有"+N.itemCount+"节，大于期数"+e,!1):!0:(g.msg="请先选择课程和班级",!1):(g.msg="请选择分期",!1)}),g.extend("course_total",function(e){var t=N.term_price;if(0==t)return!0;if(.8*t>e)return g.msg="课程总额小于原课程的80%",!1;if(e>3e4)return g.msg="课程总额大于最大课程价格",!1;if(e>1.2*t)return g.msg="课程总额大于原课程价格的120%",!1;g.validate(_("#in_course_earnest"));var n=_(".js-select-installment .text").data("value");if(n){var a=parseFloat(C.val());_("#installmentMoney").text("￥"+((e-a)/n).toFixed(2))}return!0}),g.extend("money_pass",function(e){return e=e.replace(/^0+/,""),/^\d+$/.test(e.replace(/\./,""))?/\.\d\d\d+$/.test(e)?(g.msg="小数点后请保留两位",!1):!0:(g.msg="请输入正确的价格",!1)}),g.extend("course_first",function(e){var t=1,n=0===N.installment_num?1:N.installment_num;if(!q.val())return _(".earnest-tips").hide(),g.msg="请先填写课程总额",!1;if(parseFloat(q.val())-e<.02*n)return _(".earnest-tips").hide(),g.msg="首付须保证每期最低支付金额为0.02元",!1;if(t>e)return _(".earnest-tips").hide(),g.msg="首付至少为1元",!1;_(".earnest-tips").show();var a=_(".js-select-installment .text").data("value");if(a){var i=parseFloat(q.val());_("#installmentMoney").text("￥"+((i-e)/a).toFixed(2))}return!0}),g.extend("installmentTime",function(e,t){if(Y=_(".js-installment-begin"),T=_(".js-installment-end"),2==N.installment_style)return!0;if(""==t.val())return g.msg="时间不能为空",alert(g.msg),!1;for(var n=0;n<Y.length-1;n++)if(a(Y.eq(n).val(),!0)>a(T.eq(n).val()))return g.msg="分期开始时间不能大于结束时间",!1;return!0}),g.extend("installmentChapter",function(e,t){var n,a,l=_(".diy-select-chapter-item"),s=_(".diy-select-chapter-item-end"),r=l.length;if(1==N.installment_style)return!0;if(!t.data("value"))return g.msg="节不能为空",!1;for(var d=0;r-1>d;d++)if(n=i(l.eq(d).data("value")),a=i(s.eq(d).data("value")),n>a)return!1;return n=i(l.eq(r-1).data("value")),a=i(s.eq(r-2).data("value")),a>=n?!1:!0}),g.init(_(".js-installment-main [data-pattern]"))};n.exports={init:u}});
/*!/agency/index/installment/list/tpl/installment.tpl_tpl*/
;define("/agency/index/installment/list/tpl/installment.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="jgm-cont mt20"> <div class="jgm-hd"> <span class="jgm-hd-title" data-hovertip="将大额课程按时间或内容拆分成更小的维度，供无法一次性付款学员分次支付并学习。"> 课程分期 <i class="icon-font i-question"></i> </span> <a class="publish-btn btn-default" href="//ke.qq.com/agency/index/index.html#tab=showInstallment&path=publish" report-tdw="action=click&module=course_installment&obj1=add" > 新增分期计划 </a> </div> <div class="jgm-bd"> <div class="jgm-cont mt10 installment-structions"></div> </div> <div class="jgm-bd mt10"> <span class="jgm-subhd-title">分期订单查询<a class="installment-query-show-btn" report-tdw="action=click&module=course_installment&obj1=search_more">更多查询条件</a></span> </div> <div class="installment-query"></div> <div class="mod-tab-wrap installment-list"></div></div>'),_$out_.join("")}}});
/*!/agency/index/installment/list/tpl/structions.tpl_tpl*/
;define("/agency/index/installment/list/tpl/structions.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="jgm-instrutions"> <div class="jgm-instrutions-btn not-sel '),"open"==intruFlag&&_$out_.push("white"),_$out_.push('"> 使用说明<i class="icon-font icon-v '),_$out_.push("open"==intruFlag?"i-v-top":"i-v-bottom"),_$out_.push('"></i> </div> <i class="jgm-instrutions-triangle"></i> <div class="jgm-instrutions-box '),"open"!=intruFlag&&_$out_.push("hide"),_$out_.push('"> <div class="instrutions-item">1、分期规则<br/> <strong>按时间分期：</strong>限制学习时间，不限制上课内容，在支付完全部分期前，每支付一期，可在该期有效期内学习全部内容，但未到开课时间的课程除外。（建议直播课为主的课程使用）<br/> <strong>按章节分期：</strong>限制学习内容，不限制上课时间，在支付完全部分期前，每支付一期，可解锁并学习该期限定的课程内容，但已过期的课程内容除外。（建议录播课为主的课程使用）</div> <div class="instrutions-item">2、结算规则 <br/>用户每支付一笔分期或定金，都会在下一个结算日进行结算，结算相关信息请参考【账单与结算】-【课程结算】页面；</div> <div class="instrutions-item">课程分期详情请参考<a href="//ke.qq.com/service_agency.html#id=22" target="_blank" report-tdw="action=click&module=course_installment&obj1=rule">《腾讯课堂课程分期规则》</a></div> </div></div>'),_$out_.join("")}}});
/*!/agency/index/installment/list/tpl/query.tpl_tpl*/
;define("/agency/index/installment/list/tpl/query.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="orders-querys-senior hide"> <div class="orders-querys-item"> <label for="js-orders-querys-id">订单编号：</label><input type="text" id="js-rder-querys-id" class="orders-querys-id"/> <label for="js-orders-querys-qq">交易人QQ/学员ID：</label><input type="text" id="js-orders-querys-qq" class="orders-querys-qq"/> </div> <div class="orders-querys-item"> <label for="js-orders-querys-start">时间查询：</label> <span class="orders-querys-item1"> <input id="js-orders-querys-start" class="orders-querys-start"/> <i class="icon-font i-calendar"></i> </span> <label for="js-orders-querys-end">至</label> <span class="orders-querys-item2"> <input id="js-orders-querys-end" class="orders-querys-end"/> <i class="icon-font i-calendar"></i> </span> </div></div><div class="orders-querys-base"> <ul class="diy-select-related_course"> <li class="diy-select-area select-related_course"> <a class="diy-select diy-picker diy-picker-toggle" id="js-orders-querys-key" name="related_course" href="javascript:;"> <i class="text text-tip js-text-tips">点击选择课程</i> <div class="hide js-text-course"></div> </a> </li> </ul> <button class="btn-default orders-querys-btn-submit" report-tdw="action=click&module=course_installment&obj1=search">查询</button></div>'),_$out_.join("")}}});
/*!edu_modules/edu-render/edu-render*/
;define("edu_modules/edu-render/edu-render",function(e,t,r){"use strict";var n=e("jquery"),i=e("edu_modules/edu-db/edu-db");i.extend({get_taid:i.httpMethod({url:"/cgi-bin/web_ke/get_term_info",noNeedLogin:!0})}),n.render={},n.render.time=function(){function e(e,t){return parseInt(0===g?e:parseInt(e)+g*(t?1:-1))}function t(e){return("0"+e).slice(-2,3)}function r(r,n,i,u){n=n||1;var c=i?new Date(u?i:1e3*e(i,!0)):new Date,s=new Date(u?r:1e3*e(r,!0)),d=s.getHours()+":"+t(s.getMinutes()),l="";l=c.getFullYear()===s.getFullYear()&&c.getMonth()===s.getMonth()&&c.getDate()===s.getDate()?"今天":s.getMonth()+1+"月"+s.getDate()+"日";var m=["周日","周一","周二","周三","周四","周五","周六"];switch(n){case 1:return l+" "+d;case 2:return l;case 3:return d+":"+t(s.getSeconds());case 4:return a("M月DD日",s,!0)+" "+m[s.getDay()];case 5:return o(s,c,"1-en",!0);case 6:return a("YYYY-MM-DD hh:mm",s,!0);case 7:return a("YYYY-MM-DD",s,!0)}}function i(e){var t=Math.floor(e/60/60),r=Math.floor(e/60%60);return t+":"+r}function a(t,r,n){function i(e,t){return t=t.length,e=e||0,1==t?e:String(Math.pow(10,t)+e).slice(-t)}return r?("number"==typeof r&&(r=new Date(r)),!n&&(r=new Date(1e3*e(parseInt(r.valueOf()/1e3,10),!0))),t.replace(/([YMDhsm])\1*/g,function(e){switch(e.charAt()){case"Y":return i(r.getFullYear(),e);case"M":return i(r.getMonth()+1,e);case"D":return i(r.getDate(),e);case"w":return r.getDay()+1;case"h":return i(r.getHours(),e);case"m":return i(r.getMinutes(),e);case"s":return i(r.getSeconds(),e)}})):""}function o(e,t,r){r=r||"default",t=t||new Date,e=new Date(1e3*e),t=t?new Date(1e3*t):new Date;var n=p[r]||p[1],i=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1);e instanceof Date&&(e=e.getTime());for(var a,o,u=i-e,c=0,s=n.length;s>c&&(a=n[c],u>1e3*a[0]);c++)o=a[1];return o}function u(e,t){e=new Date(1e3*e),t=t?new Date(1e3*t):new Date;var r=(t-e)/1e3;return 60>r?"刚刚":3600>r?Math.floor(r/60)+"分钟前":86400>r?Math.floor(r/3600)+"小时前":864e4>r?Math.floor(r/24/3600)+"天前":"很久之前"}function c(e,t){e=new Date(1e3*e),t=t?new Date(1e3*t):new Date;var r=(e-t)/1e3;if(0>r)return"已结束";if(60>r)return"1分钟";var n=Math.floor(r/3600),i=Math.ceil((r-3600*n)/60),a=(n?n+"小时":"")+(i?i+"分钟":"");return a}function s(e,t){var r=0,n=0,i=0,a=0,o="",u="",c="dd天hh小时mm分ss秒";return e=parseInt(e,10)||0,r=Math.floor(e/86400),e%=86400,n=Math.floor(e/3600),e%=3600,i=Math.floor(e/60),a=e%60,u="function"==typeof t?t(r,n,i,a)||c:"string"==typeof t?t||c:c,o=u.replace(/dd/i,r).replace(/hh/i,n).replace(/mm/i,i).replace(/ss/i,a)}function d(e,t){if(!e||!e.begintime||!e.endtime)return{ec:1};var r=1e3*e.begintime,i=1e3*e.endtime,a=(new Date).getTime(),o=0;t&&t.server_time?o=1e3*t.server_time+100-a:e.id&&v[e.id]&&(o=v[e.id]),(o>2e3||-2e3>o)&&(o=0),e.id&&o&&(v[e.id]=o),a+=o;var u;u=r>a?1:a>i?-1:0;var c={ec:0,status:u};return o&&(c.t_delta=o),-1==u&&(c.expired_str=n.render.time.format(e.endtime,5,Math.floor(a/1e3))),c}function l(e){var t,r,n=new Date(1e3*e.bgtime),i=new Date(1e3*e.endtime),o=new Date(1e3*e.systime);return n.getFullYear()===o.getFullYear()?(t="MM月DD日",r=i.getFullYear()===o.getFullYear()?"MM月DD日":"YY年MM月"):(t="YY年MM月",r="YY年MM月"),{bgtime:a(t,n),endtime:a(r,i)}}var m=480,f=(new Date).getTimezoneOffset(),g=60*(m+f),p={1:[[0,"今天"],[86400,"昨天"],[259200,"一周内"],[604800,"更早"]],"1-en":[[0,"today"],[86400,"yesterday"],[259200,"thisweek"],[604800,"earlier"]],2:[[60,"刚刚"],[3600,"$m分钟前"],[36e3,"$h小时前"],[82800,"今天"],[86400,"昨天"],[172800,"前天"],[259200,"一周内"],[604800,"一周前"],[2592e3,"一个月前"],[7776e3,"三个月前"],[15811200,"半年前"],[31536e3,"一年前"]]},v={};return{fixTimezone:e,format:r,changeHour:i,formatDate:a,courseStatus:d,fromNow:o,fromNowStr:u,fromStartTime:c,formatTermTime:l,formatRemainTime:s}}();var a=function(e,t,r){return e>=t&&r>e?!0:!1};n.render.formatStudyNum=function(e){var t="0";return t=a(e,0,1e4)?e+"":a(e,1e4,1e8)?Math.floor(e/1e4)+"万":Math.floor(e/1e8)+"亿"},n.render.fomartTermDuration=n.render.formatTermTuration=function(e){var t,r;if(e.bgtime){var i=n.render.time.formatTermTime(e);return{begin:i.bgtime+"开课",end:i.endtime+"结课"}}t="随到随学";var a=new Date(1e3*e.endtime),o=new Date(1e3*e.systime);return r=a.getFullYear()===o.getFullYear()?"MM月DD日":"YY年MM月",{begin:t,end:n.render.time.formatDate(r,a)+"结课"}},n.render.summary=function(e){return(e||"").replace(/<br>/g,"")},n.render.wrap=function(e){return(e||"").replace(/<br>/g,"\n")},n.render.qb=function(e){var t=(e/100).toFixed(2);return(t+"").replace(/\.?0{1,2}$/,"")+"Q币"},n.render.price=function(e,t,r,n){if(0===e)return n?t?"0.00":"0.00元":"免费";if(e){var i=(e/100).toFixed(2);if(r){for(var a=i.split("."),o=a[0].split(""),u=a[1],c="",s=o.length,d=s-1,l=0;d>=0;d--,l++)l%3===0&&0!==l&&(c=","+c),c=o[d]+c;i=c+"."+u}return t?i:i+"元"}return""},n.render.formatPrice=function(e,t){var r;return t||(t={}),0===e?r=t.showFreeNumber?"¥0.00":"免费":e?(r=(e/100).toFixed(2),r=t.noYen?r:"¥"+r):r="",r},n.render.url=function(){function t(e){e+="";for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r).toString(16).toUpperCase());return t.join("")}function r(e,t,r,n){return e?"tencent://"+e+"/?subcmd="+t+"&param="+r+(n?"&fuin="+n:""):""}function a(e,n,i,a){return e?(i=t(i),r(e,n,i,a)):""}function o(e,t){var r,i,o;switch(e){case"all":r="groupwpa",i="all",o='{"groupUin":'+t.gc+', "timeStamp":1383552440}';break;case"OpenGroup":r="groupwpa",i="OpenGroup";var u=t.appId||0;o='{"ExtParam":{"appId":'+u+'},"groupUin":'+t.guin+',"visitor":1}';break;case"VisitPublicGroup":r="VisitPublicGroup",i="VisitPublicGroup",o='{"ExtParam":{"appId":"0"},"groupUin":'+t.gc+',"visitor":1}';break;case"CourseLive":r="VisitPublicGroup",i="VisitPublicGroupEx",o='{"ExtParam":{"appId":"21","appParam":"{\\"CourseId\\":'+t.courseId+'}"},"groupUin":'+t.gc+',"visitor":1}'}if(r){var c=n.cookie.uin()||void 0;return a(r,i,o,c)}return""}return{live:function(t,r){var a=e("edu_modules/edu-login/edu-login"),o=e("edu_modules/check/check");r||(r={});var u,c=n(t),s=c.data("cid"),d=(c.data("aid"),c.data("tid")),l=c.data("taid"),m=navigator.platform,f=!m||"Win32"===m||"Win64"===m||"Windows"===m;if(c.attr("report-close")&&c.trigger("doReport"),o.isWeixinUser())return l?void window.open("//ke.qq.com/webcourse/index.html#course_id="+s+"&term_id="+d+"&taid="+l):void(f?i.get_taid({param:{course_id:s,term_id:d},succ:function(e){var t=e.result.term_info.lastest_live_task,r=t&&t.taid;window.open("//ke.qq.com/webcourse/index.html#course_id="+s+"&term_id="+d+"&taid="+r)}}):(u=window.open("","_blank"),i.get_taid({param:{course_id:s,term_id:d},succ:function(e){function t(){g="//ke.qq.com/webcourse/index.html#course_id="+s+"&term_id="+d+"&taid="+n,u&&(u.location=g)}var r=e.result.term_info.lastest_live_task,n=r&&r.taid;setTimeout(t(),0)}})));var g=c.data("target"),p=(c.data("type"),0===g.indexOf("tencent"));if(c.attr("href","javascript:void(0);"),p){if(!a.isLogin())return void a.show({succ:function(){n(document).trigger("loginSucc"),setTimeout(function(){location.reload()},200)}});if(g=g.replace(/(&)?fuin=(\d)*/,""),!f)return l?(g="//ke.qq.com/webcourse/index.html#course_id="+s+"&term_id="+d+"&taid="+l,window.open(g,"_blank")):(u=window.open("","_blank"),i.get_taid({param:{course_id:s,term_id:d},succ:function(e){function t(){g="//ke.qq.com/webcourse/index.html#course_id="+s+"&term_id="+d+"&taid="+n,u?u.location=g:window.open(g,"_blank")}var r=e.result.term_info.lastest_live_task,n=r&&r.taid;setTimeout(t(),0)}})),void(p=!1)}if(p){var v=n.cookie.uin();g.indexOf("fuin")<0&&v&&(g=g+"&fuin="+v),g+="&st="+(new Date-0),r.newcard?n(document).trigger("openQQClientLiveNew",[t]):n(document).trigger("openQQClientLive",[t])}window.open(g,p?"_self":"_blank")},enterAgencyHall:function(t){var r=n(t).attr("data-target"),i=e("edu_modules/edu-login/edu-login");if(n(t).attr("href","javascript:void(0);"),n.bom.checkPlatform()){if(!i.isLogin())return void i.show({succ:function(){n(document).trigger("loginSucc"),setTimeout(function(){n(t).click()},200)}});r=r.replace(/(&)?fuin=(\d)*/,""),n(document).trigger("enterAgencyHall",[t]);var a=n.cookie.uin();r.indexOf("fuin")<0&&a&&(r=r+"&fuin="+a),r+="&st="+(new Date-0),window.open(r,"_self")}},liveForOpenRoom:function(e,t){var r=n(e).attr("data-target"),i=0===r.indexOf("tencent");if(n(e).attr("href","javascript:void(0);"),!i||n.bom.checkPlatform()){if(i&&(r=r.replace(/(&)?fuin=(\d)*/,"")),r.indexOf("fuin")<0){var a=n.cookie.uin();a&&(r+="&fuin="+a,n(e).attr("href",r))}i&&!t&&n(document).trigger("openQQClientLive",[e]),window.open(r,i?"_self":"_blank")}},discuss_old:function(e,t,r){var n=!0;return n=r.is_member?!1:r.is_pub&&r.guin?!0:!1,n?o("openGroup",{guin:r.guin}):o("all",{gc:t})},discuss:function(e,t,r){var n=!0;return r&&r.is_member&&(n=!1),n?o("VisitPublicGroup",{gc:t}):o("all",{gc:t})},course_pay:function(e){return"//ke.qq.com/course/"+e+"?pay=1"},teacher_detail:function(e){return"//ke.qq.com/teacher/"+e},course_detail:function(e){return"//ke.qq.com/course/"+e},video_play_page:function(e){return"//ke.qq.com/course/"+e},agency_detail:function(e){return"//ke.qq.com/cgi-bin/agency?aid="+e},agency_domain:function(e){return"//"+e},package_detail:function(e){return"//ke.qq.com/course/package/"+e}}}(),n.render.courseTime=function(e){var t="";return e&&e.show_id?(1==e.show_id?t=n.render.courseTimeMode1(e):2==e.show_id?t=n.render.courseTimeMode2(e):3==e.show_id&&(t=n.render.courseTimeMode3(e)),1==e.filter_holiday&&(t+="(节假日除外)"),t):t},n.render.formatLiveTime=function(e,t){var r=n.render.time.formatDate("M月D日 hh:mm",1e3*e);return r+="-",new Date(1e3*e).getDate()!=new Date(1e3*t).getDate()&&(r+="次日"),r+=n.render.time.formatDate("hh:mm",1e3*t)},n.render.timeSpan=function(e,t){var r=[],i=function(e){return 10>e?"0"+e:e};e=e||[];for(var a=0,o=e.length;o>a;a++){var u=new Date(1e3*(t?e[a].bgtime:n.render.time.fixTimezone(e[a].bgtime,!0))),c=new Date(1e3*(t?e[a].endtime:n.render.time.fixTimezone(e[a].endtime,!0)));r.push([u.getHours()+":"+i(u.getMinutes()),"~",c.getHours()+":"+i(c.getMinutes()),c.getDate()!=u.getDate()?"(第二天)":""].join(""))}return r.join("、")},n.render.formatTimeSpan=function(e,t){var r=[],i=function(e){return 10>e?"0"+e:e};e=e||[];for(var a=0,o=e.length;o>a;a++){var u=new Date(1e3*(t?e[a].bgtime:n.render.time.fixTimezone(e[a].bgtime,!0)));r.push([u.getHours()+":"+i(u.getMinutes())].join(""))}return r.join("、")},n.render.number=function(e,t,r){e=parseInt(e,10)||0,t=parseInt(t,10),r="function"==typeof r?r:function(e,t){return'<span title="'+e+'"'+(e===t?"":' class="over-size"')+">"+t+"</span>"};var n=e;return t&&(n=e>=t?t-1+"+":e),r(e,n)},n.render.number_plus=function(e){return e=parseInt(e,10)||0,(e.toString().length>4?(e/1e4).toFixed(0)+"W":e.toString()).replace(/\.0+/,"")},n.render.formatTitle=function(e){return e=e||"",e.replace(/<br>/g,"\n")},n.render.formatAnalyzeTime=function(e,t,r,n){function i(e){return 1==e.toString().length?"0"+e:e}e=e||0,r=r||"";var a=new Date;a.setDate(a.getDate()+e);var o=i(a.getFullYear()),u=i(a.getMonth()+1),c=i(a.getDate());return n?u+r+c:o+r+u+r+c},n.render.cgiErrorWording=function(){return'    <div class="section-msg">                          <div class="msg-inner">                              <i class="icon-msg-large icon-font i-info"></i>                              <div class="msg-text">服务器异常，请稍后再试!</div>                          </div>                      </div>'},n.render.showEnterRoomFailureTips=function(e){function t(){n.modal({content:c,icon:"info",title:"提示",txtYes:"使用网页上课",txtNo:"我知道了",className:"live-guide-tips",yes:function(){if(a&&o){var e="//ke.qq.com/webcourse/index.html#course_id="+a+"&term_id="+o+"&taid="+u;window.open(e)}}})}var r=n(e),a=r.data("cid"),o=r.data("tid"),u=r.data("taid"),c='<div class="modal-live-guide clearfix">              <div class="module-live-t clearfix">                  <h3 class="live-guide-title">课堂还没打开？快试试下面的修复方法</h3>              </div>              <div class="guide-hint">                  <p class="guide-hint-p">1. 浏览器是否有加载提示？若有请点击允许</p><br/>                  <p class="guide-hint-p">2. 确认已安装<a href="http://im.qq.com/pcqq" target="_blank" class="nor-link">最新版QQ</a>。若重新装了QQ，请重启浏览器。(重启浏览器前，可复制该页面的地址以便重新进入）</p><br/>                  <p class="guide-hint-p">3. 重新打开这个页面，再次进入课堂。</p>              </div>          </div>';u?t():i.get_taid({param:{course_id:a,term_id:o},succ:function(e){var r=e.result.term_info.lastest_live_task;u=r&&r.taid,t()}})},n.render.courseFlags=function(e,t,r,i){var a=0,o=[];if(n.isArray(e)){var u=e.length;a=Math.min(t,u);for(var c=0;a>c;c++)n.trim(e[c].name).length>0&&o.push('<a class="flags-item flags-item-'+e[c].id+'" data-id="'+e[c].id+'" href="javascript:;" title="'+e[c].name+'">'+strEllipsis.substring(e[c].name,84,1)+'<i class="flags-close">&times;</i></a>')}return r&&t>a&&o.push('<a class="flags-add" href="javascript:;"'+(i?' auto-test="'+i+'"':"")+'><i class="plus">+</i>添加</a>'),o.join("")},n.render.orderCourseStateMap=function(e){var t="";switch(e){case 4:t="报名失败";break;case 1:case 5:t="报名成功";break;case 2:case 3:case 6:case 7:t="订单确认中";break;case 8:case 9:t="退款中";break;case 10:t="退款完成";break;case 11:t="退款失败"}return t},n.render.orderStateMap=function(e){var t=["","待付款","付款确认中","已付款","","退款中","已退款","退款确认中"];return t[e]||""},n.render.settlemenStateMap=function(e){var t="";switch(e){case 1:t="结算中";break;case 2:t="已结算";break;case 3:t="未结算";break;case 4:t="无需结算"}return t},n.render.fixImageWidth=function(e,t){return e+(e.indexOf("/eth/")>-1?t:"")},n._toArray=function(e,t){if(n.isArray(e))return e;try{return t&&(e=html.decode(e)),e=JSON.parse(e),n.isArray(e)?e:[]}catch(r){return[]}},n.render.number_cn=function(e,t){t=t||1;var r=[],n=["","十","百","千"],i="零一二三四五六七八九十";for(e=Math.max(parseInt(e,10)||t,t).toString().split("");e.length;){var a=parseInt(e.shift(),10);r.push(i.charAt(a)+(0===a?"":n[e.length]))}return r.join("").replace(/^一(十)|零+$/g,"$1")},n.render.str={unescapeSpace:function(e){return(e||"").replace(/&nbsp;/g," ")},unescapeBR:function(e){return(e||"").replace(/<br>/g,"&#10;")},removeProtocol:function(e){var t=/(href="|src="|href=&quot;|src=&quot;)http:\/\/(jsonp.ke.qq.com|ke.qq.com|\d{1,2}.url.cn|export.highcharts.com|p.qic.cn|mobileapp.ke.qq.com|imgcache.gtimg.cn|imgcache.qq.com|qzs.qq.com|q.qlogo.cn|p.qlogo.cn|captcha.qq.com|xui.ptlogin2.qq.com|ui.ptlogin2.qq.com|open.weixin.qq.com|qplus3.idqqimg.com|badjs.qq.com|badjs2.qq.com|cgi.pub.qq.com)/g;return(e||"").replace(t,"$1//$2")}},n.render.score={toStar:function(e){var t,r,n="";e=(e||0)/100,t=parseInt(e,10),r=e-t;for(var i=0;t>i;i++)n+='<i class="no-event"></i>';r>.25&&.75>r?(t+=1,n+='<i class="no-event half-star"></i>'):r>.75&&(t+=1,n+='<i class="no-event"></i>');var a=5-t;if(a>0)for(var o=0;a>o;o++)count++,n+='<i class="no-event"></i>';return n},toString:function(e){return e=((e||0)+5)/100,e.toFixed(1)}},r.exports=n});
/*!@tencent/im-edu-html/edu-html*/
;define("@tencent/im-edu-html/edu-html",function(e,r,n){var t=function(){function e(e,r,n){return r||n?String.fromCharCode(r||n):u[e]||e}function r(e){return s[e]}var n=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,o=/['<> "&]/g,c=/['<>"&]/g,u={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},a=/\u00a0/g,i=/<br\s*\/?>/gi,f=/\r?\n/g,p=/\s/g,s={};for(var d in u)s[u[d]]=d;return u["&apos;"]="'",s["'"]="&#39;",{encode:function(e){return e?(""+e).replace(o,r).replace(f,"<br/>").replace(p,"&nbsp;"):""},encodeNoSpace:function(e){return e?(""+e).replace(c,r).replace(f,"<br/>"):""},decode:function(r){return r?(""+r).replace(i,"\n").replace(n,e).replace(a," "):""},encodeBase16:function(e){if(!e)return e;e+="";for(var r=[],n=0,t=e.length;t>n;n++)r.push(e.charCodeAt(n).toString(16).toUpperCase());return r.join("")},encodeBase16forJSON:function(e){if(!e)return e;e=e.replace(/[\u4E00-\u9FBF]/gi,function(e){return escape(e).replace("%u","\\u")});for(var r=[],n=0,t=e.length;t>n;n++)r.push(e.charCodeAt(n).toString(16).toUpperCase());return r.join("")},decodeBase16:function(e){if(!e)return e;e+="";for(var r=[],n=0,t=e.length;t>n;n+=2)r.push(String.fromCharCode("0x"+e.slice(n,n+2)));return r.join("")},encodeObject:function(e){if(e instanceof Array)for(var r=0,n=e.length;n>r;r++)e[r]=t.encodeObject(e[r]);else if("object"==typeof e)for(var o in e)e[o]=t.encodeObject(e[o]);else if("string"==typeof e)return t.encode(e);return e}}}();n.exports=t});
/*!/agency/index/installment/list/tpl/installmentTab.tpl_tpl*/
;define("/agency/index/installment/list/tpl/installmentTab.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];_$out_.push('<div class="mod-tab"> <ul class="mod-tab__ul js-tab-ul"> ');for(var i=0,len=list.length;len>i;i++)_$out_.push(' <li class="mod-tab__li',settings.state===list[i][0]?" mod-tab__li_current":"",'"><a class="js-tab" data-state="',list[i][0],'" report-tdw="action=click&module=course_installment&obj1=status&obj2=',i+1,'">',list[i][1],"</a></li> ");return _$out_.push(' </ul> <div class="mod-tab__content"></div> <div class="js-att-page-ctrl sort-page"></div></div>'),_$out_.join("")}}});
/*!/agency/index/installment/list/tpl/installmentList.tpl_tpl*/
;define("/agency/index/installment/list/tpl/installmentList.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[],state=settings.order_state,installmentType={1:"按时间分期",2:"按章节分期"},installmentState={200:"待分期",201:"分期中",209:"分期终止",210:"分期完成"};if(data.install_plan||(data.install_plan=[]),_$out_.push('<div class="grid-wrap"> '),200==state){_$out_.push(' <table cellpadding="0" cellspacing="0" style="width:100%;"> <thead class="grid-header-bg"> <tr class="todo"> <th class="grid-header installment-list-col-1"><span>订单号</span></th> <th class="grid-header installment-list-col-2"><span>课程名称/备注</span></th> <th class="grid-header installment-list-col-3"><span>创建时间</span></th> <th class="grid-header installment-list-col-4"><span>学员QQ/学员昵称</span></th> <th class="grid-header installment-list-col-5"><span>分期进度</span></th> <th class="grid-header installment-list-col-6"><span>分期计划</span></th> <th class="grid-header installment-list-col-7"><span>分期方式</span></th> <th class="grid-header installment-list-col-8"><span>操作</span></th> </tr> </thead> <tbody> ');for(var i=0;i<data.install_plan.length;i++){var item=data.install_plan[i],installmentPay=(item.total_price-item.prepay_price)/(item.installment_quantity-1);_$out_.push(' <tr class="installment-list-row todo"> <td class="installment-list-col-1" >',item.order_id,'</td> <td class="installment-list-col-2"> <a href="//ke.qq.com/course/',item.course_id,'" target="_blank" title="',item.course_name,'" class="course-name">',html.decode(item.course_name),'</a> </td> <td class="installment-list-col-3"> ',formatDate("YYYY-MM-DD",1e3*item.create_time),' </td> <td class="installment-list-col-4">',item.uin,'</td> <td class="installment-list-col-5">',installmentState[item.order_state],'</td> <td class="installment-list-col-6"> 首付：',price(item.prepay_price),"<br/> 期数：",item.installment_quantity-1,"期x",price(installmentPay),' </td> <td class="installment-list-col-7"> ',installmentType[item.installment_type],' </td> <td class="installment-list-col-8"> <a href="/agency/index/index.html#tab=showInstallment&path=publish&course_id=',item.course_id,"&installment_id=",item.order_id,"&term_id=",item.term_id,"&uin=",item.uin,"&phone=",item.phone,'&edit=1" class="nor-link">修改计划</a> <a href="javascript:;" class="nor-link js-del-order" data-cid="',item.course_id,'" data-aid="',agency_id,'" data-installmentid="',item.order_id,'" data-termid="',item.term_id,'" data-uin="',item.uin,'">删除计划</a> </td> </tr> ')}_$out_.push(" </tbody> </table> ")}else if(201==state){_$out_.push(' <table cellpadding="0" cellspacing="0"> <thead class="grid-header-bg"> <tr class="doing"> <th class="grid-header installment-list-col-1 "><span>订单号</span></th> <th class="grid-header installment-list-col-2 "><span>课程名称/备注</span></th> <th class="grid-header installment-list-col-3 "><span>学员QQ/学员昵称</span></th> <th class="grid-header installment-list-col-4 "><span>分期进度</span></th> <th class="grid-header installment-list-col-5 "><span>分期期数</span></th> <th class="grid-header installment-list-col-6 "><span>分期方式</span></th> <th class="grid-header installment-list-col-7 "><span>最迟还款日</span></th> <th class="grid-header installment-list-col-8 "><span>操作</span></th> </tr> </thead> <tbody> ');for(var i=0;i<data.install_plan.length;i++){var item=data.install_plan[i],seq=parseInt(item.installment_current_seq);_$out_.push(' <tr class="installment-list-row doing"> <td class="installment-list-col-1" >',item.order_id,'</td> <td class="installment-list-col-2"><a href="//ke.qq.com/course/',item.course_id,'" target="_blank" title="',item.course_name,'" class="course-name">',html.decode(item.course_name),'</a></td> <td class="installment-list-col-3">',item.uin,'</td> <td class="installment-list-col-4"> '),-1===seq?_$out_.push(' <span class="highlight"> 待付首付 </span> '):1e3*item.next_term_start_time<Date.now()?_$out_.push(' <span class="highlight" data-hovertip="该订单已至下一分期开始时间，请及时督促学员付款"> 已到期<i class="icon-font i-info"></i> </span> '):1e3*item.next_term_start_time-Date.now()<6048e5?_$out_.push(' <span class="highlight" data-hovertip="该订单即将至下一分期开始时间，请及时督促学员付款"> ',seq,"期/",item.installment_quantity-1,'期<i class="icon-font i-info"></i> </span> '):_$out_.push(" ",seq,"期/",item.installment_quantity-1,"期 "),_$out_.push(' </td> <td class="installment-list-col-5">',item.installment_quantity-1,'期</td> <td class="installment-list-col-6">',installmentType[item.installment_type],'</td> <td class="installment-list-col-7"> '),1==item.installment_type?_$out_.push(" ",formatDate("YYYY-MM-DD",1e3*item.next_term_expire_pay_time)," "):_$out_.push(" - "),_$out_.push(' </td> <td class="installment-list-col-8"><a href="/agency/installDetail/index.html#course_id=',item.course_id,"&agency_id=",agency_id,"&installment_id=",item.id,"&term_id=",item.term_id,"&uin=",item.uin,"&phone=",item.phone,'" class="nor-link" target="_blank">查看进度</a></td> </tr> ')}_$out_.push(" </tbody> </table> ")}else if(209==state){_$out_.push(' <table cellpadding="0" cellspacing="0"> <thead class="grid-header-bg"> <tr class="abort"> <th class="grid-header installment-list-col-1"><span>订单号</span></th> <th class="grid-header installment-list-col-2"><span>课程名称/备注</span></th> <th class="grid-header installment-list-col-3"><span>学员QQ/学员昵称</span></th> <th class="grid-header installment-list-col-4"><span>分期进度</span></th> <th class="grid-header installment-list-col-5"><span>分期计划</span></th> <th class="grid-header installment-list-col-6"><span>总收款</span></th> <th class="grid-header installment-list-col-7"><span>终止时间</span></th> <th class="grid-header installment-list-col-8"><span>操作</span></th> </tr> </thead> <tbody> ');for(var i=0;i<data.install_plan.length;i++){var item=data.install_plan[i],installmentPay=(item.total_price-item.prepay_price)/(item.installment_quantity-1),seq=parseInt(item.installment_current_seq);seq=-1===seq?0:seq;var totalPay=("-1"===item.installment_current_seq?0:item.prepay_price)+seq*installmentPay;_$out_.push(' <tr class="installment-list-row abort"> <td class="installment-list-col-1" >',item.order_id,'</td> <td class="installment-list-col-2"> <a href="//ke.qq.com/course/',item.course_id,'" target="_blank" title="',item.course_name,'" class="course-name">',html.decode(item.course_name),'</a> </td> <td class="installment-list-col-3">',item.uin,'</td> <td class="installment-list-col-4"> ',seq,"期/",item.installment_quantity-1,'期 </td> <td class="installment-list-col-5"> 首付：',price(item.prepay_price),"<br/> 期数：",item.installment_quantity-1,"期x",price(installmentPay),' </td> <td class="installment-list-col-6">',price(totalPay,!1,!1,!0),'</td> <td class="installment-list-col-7">',formatDate("YYYY-MM-DD",1e3*item.create_time),'</td> <td class="installment-list-col-8"> <a href="/agency/installDetail/index.html#course_id=',item.course_id,"&agency_id=",agency_id,"&installment_id=",item.order_id,"&term_id=",item.term_id,"&uin=",item.uin,'" class="nor-link" target="_blank">查看进度</a> '),0===totalPay&&_$out_.push(' <a href="javascript:;" class="nor-link js-del-order" data-cid="',item.course_id,'" data-aid="',agency_id,'" data-installmentid="',item.order_id,'" data-termid="',item.term_id,'" data-uin="',item.uin,'">删除计划</a> '),_$out_.push(" </td> </tr> ")}_$out_.push(" </tbody> </table> ")}else{_$out_.push(' <table cellpadding="0" cellspacing="0"> <thead class="grid-header-bg"> <tr class="finished"> <th class="grid-header installment-list-col-1 "><span>订单号</span></th> <th class="grid-header installment-list-col-2 "><span>课程名称/备注</span></th> <th class="grid-header installment-list-col-3 "><span>创建时间</span></th> <th class="grid-header installment-list-col-4 "><span>学员QQ/学员昵称</span></th> <th class="grid-header installment-list-col-5 "><span>分期计划</span></th> <th class="grid-header installment-list-col-6 "><span>总收款</span></th> <th class="grid-header installment-list-col-7 "><span>完成时间</span></th> <th class="grid-header installment-list-col-8 "><span>操作</span></th> </tr> </thead> <tbody> ');for(var i=0;i<data.install_plan.length;i++){var item=data.install_plan[i],installmentPay=(item.total_price-item.prepay_price)/(item.installment_quantity-1);_$out_.push(' <tr class="installment-list-row finished"> <td class="installment-list-col-1" >',item.order_id,'</td> <td class="installment-list-col-2"> <a href="//ke.qq.com/course/',item.course_id,'" target="_blank" title="',item.course_name,'" class="course-name">',html.decode(item.course_name),'</a> </td> <td class="installment-list-col-3">',formatDate("YYYY-MM-DD",1e3*item.create_time),'</td> <td class="installment-list-col-4">',item.uin,'</td> <td class="installment-list-col-5">首付：',price(item.prepay_price),"<br/>期数：",item.installment_quantity-1,"期x",price(installmentPay),'</td> <td class="installment-list-col-6">',price(item.total_price,!1,!1,!0),'</td> <td class="installment-list-col-7">',formatDate("YYYY-MM-DD",1e3*item.create_time),'</td> <td class="installment-list-col-8"> <a href="/agency/installDetail/index.html#course_id=',item.course_id,"&agency_id=",agency_id,"&installment_id=",item.order_id,"&term_id=",item.term_id,"&uin=",item.uin,'" class="nor-link" target="_blank">查看进度</a> </td> </tr> ')}_$out_.push(" </tbody> </table> ")}return _$out_.push(" "),0===data.install_plan.length&&_$out_.push(' <p class="jgm-nodata">暂无数据！</p> '),_$out_.push("</div>"),_$out_.join("")}}});
/*!/edu_modules/pagectrl/page.tpl_tpl*/
;define("/edu_modules/pagectrl/page.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];if(total>1){_$out_.push(" ");var index="undefined"!=typeof idx?idx:1,isFirst=1==index?!0:!1,isLast=index==total?!0:!1,from=parseInt(index-max/2),to=parseInt(index+max/2);(2==from||to==total-2)&&(max+=2);var pager_id="pager_id_"+Math.random().toString().replace(/\D/g,"");if(_$out_.push(" "),max>=total-2){_$out_.push(' <div class="page-box"> <a auto-test="',pager_id,'_prev" href="javascript:void(0);" class="page-prev-btn '),isFirst&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-left"></i></a> ');for(var i=1,len=total;len>=i;i++)_$out_.push(' <a auto-test="',pager_id,"_",i,'" href="javascript:void(0);" data-index="',i,'" class="page-btn'),1==i&&_$out_.push(" page-first"),i==len&&_$out_.push(" page-last"),i==index&&_$out_.push(" page-btn-cur"),_$out_.push('">',i,"</a> ");_$out_.push(' <a auto-test="',pager_id,'_next" href="javascript:void(0);" class="page-next-btn '),isLast&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-right"></i></a> </div> ')}else{if(_$out_.push(" "),from>2&&total-2>to){_$out_.push(' <div class="page-box"> <a auto-test="',pager_id,'_prev" href="javascript:void(0);" class="page-prev-btn '),isFirst&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-left"></i></a> <a auto-test="',pager_id,'_1" href="javascript:void(0);" data-index="1" class="page-btn page-first">1</a> <a auto-test="',pager_id,'_2" href="javascript:void(0);" data-index="2" class="page-btn">2</a> <span>…</span> ');for(var i=from,len=total;to>i;i++)_$out_.push(' <a auto-test="',pager_id,"_",i+1,'" href="javascript:void(0);" data-index="',i+1,'" class="page-btn'),i+1==index&&_$out_.push(" page-btn-cur"),_$out_.push('">',i+1,"</a> ");_$out_.push(' <span>…</span> <a auto-test="',pager_id,"_",len-1,'" href="javascript:void(0);" data-index="',len-1,'" class="page-btn">',len-1,'</a> <a auto-test="',pager_id,"_",len,'" href="javascript:void(0);" data-index="',len,'" class="page-btn page-last">',len,'</a> <a auto-test="',pager_id,'_next" href="javascript:void(0);" class="page-next-btn"><i class="icon-font i-v-right"></i></a> </div> ')}else{if(_$out_.push(' <div class="page-box"> '),2>=from){_$out_.push(' <a auto-test="',pager_id,'_prev" href="javascript:void(0);" class="page-prev-btn '),isFirst&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-left"></i></a> ');for(var i=1,len=total;i<=Math.max(max,to);i++)_$out_.push(' <a auto-test="',pager_id,"_",i,'" href="javascript:void(0);" data-index="',i,'" class="page-btn'),1==i&&_$out_.push(" page-first"),i==len&&_$out_.push(" page-last"),i==index&&_$out_.push(" page-btn-cur"),_$out_.push('">',i,"</a> ");_$out_.push(' <span>…</span> <a auto-test="',pager_id,"_",len-1,'" href="javascript:void(0);" data-index="',len-1,'" class="page-btn">',len-1,'</a> <a auto-test="',pager_id,"_",len,'" href="javascript:void(0);" data-index="',len,'" class="page-btn page-last">',len,'</a> <a auto-test="',pager_id,'_next" href="javascript:void(0);" class="page-next-btn"><i class="icon-font i-v-right"></i></a> ')}if(_$out_.push(" "),to>=total-2){_$out_.push(' <a auto-test="',pager_id,'_1" href="javascript:void(0);" class="page-prev-btn '),isFirst&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-left"></i></a> <a auto-test="',pager_id,'_prev" href="javascript:void(0);" data-index="1" class="page-btn page-first">1</a> <a auto-test="',pager_id,'_2" href="javascript:void(0);" data-index="2" class="page-btn">2</a> <span>…</span> ');for(var i=Math.min(from,total-max),len=total;total>i;i++)_$out_.push(' <a auto-test="',pager_id,"_",i+1,'" href="javascript:void(0);" data-index="',i+1,'" class="page-btn'),i==index-1&&_$out_.push(" page-btn-cur"),i==total-1&&_$out_.push(" page-last"),_$out_.push('">',i+1,"</a> ");_$out_.push(' <a auto-test="',pager_id,'_next" href="javascript:void(0);" class="page-next-btn '),isLast&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-right"></i></a> ')}_$out_.push(" </div> ")}_$out_.push(" ")}}return _$out_.join("")}}});
/*!edu_modules/pagectrl/pagectrl*/
;define("edu_modules/pagectrl/pagectrl",function(t){var i=t("jquery"),n={};n.page=t("/edu_modules/pagectrl/page.tpl_tpl");var e=function(){var t="defClk",e=(navigator.userAgent.match(/\bMSIE\s+(\d+)\b/)||[0,10])[1]<9,a=function(t,i){return t=parseInt(t)||parseInt(i)||0,0>t?0:t},o=function(t,n,e){this.$container=t instanceof i?t:i(t),this.pageFn=n,this.inited=!1,e&&"object"==typeof e&&this.init(e)};return o.prototype.init=function(t){var i=this;return i.inited?void i.reset(t):(t=t||{},i.begin=t.begin||0,i.total=a(void 0!==t.total?t.total:i.total,0),i.max=a(void 0!==t.max?t.max:i.max,5),i.idx=a(void 0!==t.idx?t.idx:i.idx,1),i.idx=a(t.idx-i.begin||i.idx,0),i.idx>i.total&&(i.idx=Math.max(0,i.total-1)),i.delCurPage=function(){return i.reset({total:i.total-1,max:i.max,idx:i.idx}),i.idx},i.$container.html(n.page({total:i.total,max:i.max,idx:i.idx})),void(this.inited||(this.bindEvent(),this.inited=!0)))},o.prototype.reset=function(t){t=t||{};var i=a(t.idx,0),e=a(t.max,5),o=a(t.total,0);i>o&&(i=Math.max(0,o)),(i!=this.idx||o!=this.total)&&(this.$container,this.$container.html(n.page({total:o,max:e,idx:i})),this.total=o,this.idx=i,this.max=e,this.inited||(this.bindEvent(),this.inited=!0))},o.prototype.select=function(i,e){e=e||{};var a=this,o=a.total,r=a.max;a.$container.html(n.page({total:o,max:r,idx:i}));var c=a.idx;a.idx=i,e.silent||a.pageFn(i,c,t)},o.prototype.bindEvent=function(){var n=this;n.$container.on("click",".page-btn",function(){var e=i(this),o=a(e.attr("data-index"));n.select(o),t="defClk"}),e&&n.$container.on("dblclick",".page-next-btn,page-prev-btn",function(){i(this).trigger("click")}),n.$container.on("click",".page-prev-btn",function(){var e=i(this);e.hasClass("page-btn-dis")||(t="preClk",n.$container.find(".page-btn.page-btn-cur").prev().trigger("click"))}),n.$container.on("click",".page-next-btn",function(){var e=i(this);e.hasClass("page-btn-dis")||(t="nextClk",n.$container.find(".page-btn.page-btn-cur").next().trigger("click"))})},o.prototype.getIdx=function(){return this.idx},o.prototype.getTotal=function(){return this.total},o.prototype.destroy=function(){this.$container.unbind("click dblclick"),this.$container.html("")},o}();return e});
/*!agency/index/installment/list/db.installment*/
;define("agency/index/installment/list/db.installment",function(e){var t=e("edu_modules/edu-db/edu-db");return t.extend({get_course_list_cpkg:t.httpMethod({url:"/cgi-agency/agency/manager/get_course_list_cpkg",type:"GET"}),getOrderMsgList:t.httpMethod({url:"/cgi-agency/ke_order/get_order_msg_list",type:"GET"}),getInstallmentOrderList:t.httpMethod({url:"/cgi-agency/ke_order/get_agency_installment_order",type:"GET"}),delOrder:t.httpMethod({url:"/cgi-agency/ke_installment/del_usr_installment_order",type:"GET"}),__last:null}),t});
/*!agency/index/installment/list/installmentList*/
;define("agency/index/installment/list/installmentList",function(e){function t(){g.find(".mod-tab__li").removeClass("mod-tab__li_current"),g.find(".js-tab[data-state="+j.order_state+"]").closest(".mod-tab__li").addClass("mod-tab__li_current")}function n(e,t){var n=(e||"").split("-"),a=new Date;return a.setFullYear(+n[0],n[1]-1,+n[2]),t?a.setHours(0,0,0):a.setHours(23,59,59),isNaN(a)?"":Math.floor(+a/1e3)}function a(){g.on("click",".js-tab",function(){var e=s(this),t=e.data("state");j.order_state=t,j.page=0,r()}),g.on("click",".js-del-order",function(){var e=s(this).data("cid"),t=s(this).data("aid"),n=s(this).data("installmentid"),a=s(this).data("termid"),i=parseInt(s(this).data("uin")),r=s(this).closest(".installment-list-row");s.modal.alert("确认删除此分期？").yes(function(){_.delOrder({param:{course_id:e,agency_id:t,installment_id:n,term_id:a,uin:i},succ:function(){m.tdw({module:"course_installment",action:"click",obj1:"delete"}),r.remove()},err:function(e){return 5==e.retcode?s.modal.alert("参数错误"):172==e.retcode&&s.modal.alert("没有合法可删除订单"),!0}})})});var e=y.find("#js-rder-querys-id"),t=y.find("#js-orders-querys-qq"),a=y.find("#js-orders-querys-start"),i=y.find("#js-orders-querys-end"),d=y.find("#js-orders-querys-key"),l=y.find(".js-text-tips"),c=y.find(".js-text-course");d.on("click",function(){var e;e=j.cid?b({cid:j.cid,name:j.cname}):b(),e.yes(function(e,t){e.length?(course=f.coursePackages_map[e[0]],c.text(course.view).show(),j.cid=course.key,j.cname=course.value,l.hide()):(c.hide(),j.cid="",j.cname="",l.show()),t()})}),y.on("click",".orders-querys-btn-submit",function(){j.order_id=parseInt(e.val())||"",j.stu_uin=parseInt(s.trim(t.val()))||"",j.start_create_time=n(a.val(),!0)||"",j.end_create_time=n(i.val())||"",j.page=0,r()}),y.on("keyup paste","#js-rder-querys-id, #js-orders-querys-qq",function(){var e=s(this),t=e.val(),n=t.replace(/\D/g,"");n!==t&&e.val(n)})}function i(e){j.page=e-1,r()}function r(){_.getInstallmentOrderList({param:j,succ:function(e){var n=e.result;t(),g.find(".mod-tab__content").html(o({settings:j,data:n,agency_id:j.agency_id,stateMap:k,formatDate:s.render.time.formatDate,price:s.render.price,html:l})),pageCtrl.init({total:"undefined"!=typeof n.total_page?n.total_page:pageCtrl.total,max:5,idx:j.page+1})},err:function(){g.find(".mod-tab__content").html('<div style="text-align:center;padding:20px;">加载失败，请<a onClick="location.reload();">点击刷新</a></div>')}})}function d(e){e||(e={}),p=e.cache,j.agency_id=v.getInfoSync().aid,y=s("#showInstallment"),g=y.find(".installment-list"),g.html(c({settings:j,list:k})),pageCtrl=new u(g.find(".js-att-page-ctrl"),i),setTimeout(function(){h.init&&h.init(p)},0),r(),a()}var s=e("jquery");e("edu_modules/edu-render/edu-render");var l=e("@tencent/im-edu-html/edu-html"),c=e("/agency/index/installment/list/tpl/installmentTab.tpl_tpl"),o=e("/agency/index/installment/list/tpl/installmentList.tpl_tpl"),u=e("edu_modules/pagectrl/pagectrl");e("edu_modules/modal/modal"),e("edu_modules/edu-picker/edu-picker");var m=e("edu_modules/edu-report/edu-report"),_=e("agency/index/installment/list/db.installment"),p=e("@tencent/im-cache/cache"),f=window.p=p.get("_PD")||{};p.set("_PD",f);var g,y,h=e("js/mod.buildData4Picker"),v=e("edu_modules/edu-agency/index"),p={},j={agency_id:"",order_state:200,page:0,num:12,order_id:"",stu_uin:"",start_create_time:"",end_create_time:"",cid:"",cname:""},k=[[200,"待分期"],[201,"分期中"],[209,"分期终止"],[210,"分期完成"]],b=function(e){var t={name:"课程",max:1,min:0,pageNum:10,keyField:"cid",titleField:"name"};e&&(t.selectedList=[e]);var n=new s.picker(t);return n.onPageChange(function(e,t){e.need_small_term=1,f.get_course_list_instal(e,function(e,a,i){n.setMaxPage(i),t(null,a?a:[])})}),n};return{init:d}});
/*!agency/index/installment/list/index*/
;define("agency/index/installment/list/index",function(t,e,n){function i(){p.on("click",".jgm-instrutions-btn",function(){var t=s(this).hasClass("white")?"close":"open";p.find(".installment-structions").html(d({intruFlag:t}))});var t=s("#js-orders-querys-start").datepicker({_click:function(t){s(".datepicker").hide();var n=e.data("datepicker");n.options._begin=t,n.update()},_end:+new Date}),e=s("#js-orders-querys-end").datepicker({_click:function(e){s(".datepicker").hide();var n=t.data("datepicker");n.options._end=e,n.update()},_end:+new Date});p.on("click",".installment-query-show-btn",function(){var t=p.find(".orders-querys-senior");t.hasClass("hide")?(t.removeClass("hide"),s(this).html("精简查询条件")):(t.addClass("hide"),s(this).html("更多查询条件"))})}function l(t){m=t,p=s("#showInstallment"),p.html(a()),p.find(".installment-structions").html(d({intruFlag:"close"})),p.find(".installment-query").html(r()),i(),c.init({cache:u}),o.tdw({module:"course_installment",action:"exposure",obj1:"all"})}var s=t("jquery"),a=t("/agency/index/installment/list/tpl/installment.tpl_tpl"),d=t("/agency/index/installment/list/tpl/structions.tpl_tpl"),r=t("/agency/index/installment/list/tpl/query.tpl_tpl"),c=t("agency/index/installment/list/installmentList"),o=t("edu_modules/edu-report/edu-report"),u=t("@tencent/im-cache/cache");t("@tencent/im-edu-datepicker/edu-datepicker");var p,m;n.exports={init:l}});
/*!agency/index/installment/mod.main*/
;define("agency/index/installment/mod.main",function(e,n,i){function t(){s.getInfo().then(function(e){var n=$.bom.getHash("path")||"list";if(o!==n)switch(o=n,l.config({page:"ic_salesmanage_installment",agencyid:e.aid}),l.reportPageView(),n.toLowerCase()){case"publish":d.init(e);break;default:c.init(e)}})}var a=e("@tencent/im-hashchange/hashchange"),s=e("edu_modules/edu-agency/index"),l=e("edu_modules/reportor/index"),d=e("agency/index/installment/publish/index"),c=e("agency/index/installment/list/index"),o=null;a(function(){t()}),i.exports={init:t}});
window.__loadJs&&window.__loadJs('/agency/index/installment/mod.main.9031b7c8.js?max_age=3153600',2);